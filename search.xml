<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Kotlin åç¨‹</title>
      <link href="/2020/10/14/Kotlin-%E5%8D%8F%E7%A8%8B/"/>
      <url>/2020/10/14/Kotlin-%E5%8D%8F%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»€ä¹ˆæ˜¯åç¨‹"><a href="#ä»€ä¹ˆæ˜¯åç¨‹" class="headerlink" title="ä»€ä¹ˆæ˜¯åç¨‹"></a>ä»€ä¹ˆæ˜¯åç¨‹</h1><blockquote><p><strong>ç”¨åŒæ­¥çš„æ–¹å¼å†™å¼‚æ­¥çš„ä»£ç </strong></p></blockquote><p>ã€åç¨‹ Coroutinesã€‘ æºäºSimula å’Œ Modula-2è¯­è¨€ï¼Œæœ¯è¯­æ¥è‡ªäº 1958 å¹´çš„ <strong>Melvin Edward Conway</strong> å‘æ˜å¹¶ä¸”æ‹¥æœ‰æ„å»ºæ±‡ç¼–ç¨‹åºï¼Œè¯´æ˜ <strong>åç¨‹æ˜¯ä¸€ç§ç¼–ç¨‹æ€æƒ³</strong>ï¼Œ å¹¶ä¸å±€é™äºç‰¹å®šçš„è¯­è¨€ã€‚</p><h5 id="çº¿ç¨‹å’Œåç¨‹çš„å…³ç³»"><a href="#çº¿ç¨‹å’Œåç¨‹çš„å…³ç³»" class="headerlink" title="çº¿ç¨‹å’Œåç¨‹çš„å…³ç³»"></a>çº¿ç¨‹å’Œåç¨‹çš„å…³ç³»</h5><p>ä» Android å¼€å‘è€…çš„è§’åº¦å»ç†è§£å®ƒä»¬çš„å…³ç³»ï¼š</p><ul><li>Androidä¸­æˆ‘ä»¬æ‰€æœ‰çš„ä»£ç éƒ½è·‘åœ¨çº¿ç¨‹ä¸­çš„ï¼Œ<strong>è€Œçº¿ç¨‹æ˜¯è·‘åœ¨è¿›ç¨‹ä¸­çš„</strong>ã€‚</li><li><strong>åç¨‹æ²¡æœ‰ç›´æ¥å’Œæ“ä½œç³»ç»Ÿå…³è”</strong>ï¼Œå®ƒä¹Ÿæ˜¯<strong>è·‘åœ¨çº¿ç¨‹ä¸­çš„</strong>ï¼Œå¯ä»¥æ˜¯å•çº¿ç¨‹ï¼Œä¹Ÿå¯ä»¥æ˜¯å¤šçº¿ç¨‹ã€‚</li><li>å•çº¿ç¨‹ä¸­çš„åç¨‹æ€»çš„<strong>æ‰§è¡Œæ—¶é—´</strong>å¹¶ä¸ä¼šæ¯”ä¸ç”¨åç¨‹å°‘ã€‚</li><li>Androidæ€»ï¼Œå¦‚æœåœ¨ä¸»çº¿ç¨‹ä¸­è¿›è¡Œç½‘ç»œè®¿é—®ï¼Œä¼šæŠ›å‡º <strong>NetworkOnMainThreadException</strong>ï¼Œå¯¹äºåœ¨ä¸»çº¿ç¨‹ä¸Šçš„åç¨‹ä¹Ÿä¸ä¾‹å¤–ï¼Œæ‰€ä»¥åœ¨è¿™ç§ä½¿ç”¨åœºæ™¯ä¸­ä¹Ÿæ˜¯è¦åˆ‡æ¢çº¿ç¨‹çš„ã€‚</li></ul><h4 id="åç¨‹çš„åº”ç”¨åœºæ™¯ä¹‹ä¸€-çº¿ç¨‹æ§åˆ¶"><a href="#åç¨‹çš„åº”ç”¨åœºæ™¯ä¹‹ä¸€-çº¿ç¨‹æ§åˆ¶" class="headerlink" title="åç¨‹çš„åº”ç”¨åœºæ™¯ä¹‹ä¸€ çº¿ç¨‹æ§åˆ¶"></a>åç¨‹çš„åº”ç”¨åœºæ™¯ä¹‹ä¸€ çº¿ç¨‹æ§åˆ¶</h4><blockquote><p>åç¨‹å¯ä»¥è®©æˆ‘ä»¬åœ¨å†™<strong>ä»£ç æ—¶ä¸ç”¨æ›´å¤šçš„å…³æ³¨å¤šçº¿ç¨‹åŒæ—¶æ›´æ–¹ä¾¿çš„å†™å‡ºå¹¶å‘æ“ä½œ</strong>ã€‚</p></blockquote><p><strong>åœºæ™¯</strong></p><p>åœ¨Javaä¸­å®ç°å¹¶å‘æ“ä½œé€šå¸¸éœ€è¦å¼€å¯ Threadï¼š</p><pre><code class="java">new Thread(new Runnable() {    @Override    public void run() {        ...    }}).start();</code></pre><p>Kotlinä¸­</p><pre><code class="kotlin">Thread({    ...}).start()</code></pre><p><strong>Kotlinå’ŒJavaä½¿ç”¨çº¿ç¨‹åŒæ ·å­˜åœ¨çš„é—®é¢˜ï¼š</strong></p><ul><li>çº¿ç¨‹ä»€ä¹ˆæ—¶å€™æ‰§è¡Œç»“æŸ</li><li>çº¿ç¨‹é—´å¦‚ä½•ç›¸äº’é€šä¿¡</li><li>å¤šçº¿ç¨‹çš„ç®¡ç†</li></ul><p>å¯ä»¥ç”¨Javaæ§åˆ¶çº¿ç¨‹ Executorçº¿ç¨‹æ± æ¥è¿›è¡Œ<strong>çº¿ç¨‹ç®¡ç†</strong>ï¼š</p><pre><code class="kotlin">val executor = Executors.newCachedThreadPool()executor.execute({    ...})</code></pre><p>ç”¨Androidçš„<strong>AsyncTask</strong>æ¥<strong>è§£å†³çº¿ç¨‹ä¹‹é—´çš„é€šè®¯</strong></p><pre><code class="kotlin">object : AsyncTask&lt;T0, T1, T2&gt; {     override fun doInBackground(vararg args: T0): String { ... }    override fun onProgressUpdate(vararg args: T1) { ... }    override fun onPostExecute(t3: T3) { ... }}</code></pre><p>ä½¿ç”¨<strong>AsyncTask</strong>è¿›è¡Œ<strong>çº¿ç¨‹ä¹‹é—´</strong>çš„<strong>é€šè®¯</strong>å¸¦æ¥çš„<strong>ç¼ºç‚¹</strong>ï¼ˆ<strong>AsyncTask</strong>æ˜¯<strong>Android</strong>å¯¹<strong>çº¿ç¨‹æ± </strong>Executorçš„<strong>å°è£…</strong>ï¼‰ï¼š</p><ul><li>éœ€è¦å¤„ç†å¤šä¸ªå›è°ƒï¼Œå®¹æ˜“é™·å…¥ã€å›è°ƒåœ°ç‹±ã€‘ã€‚</li><li>å°†ä¸šåŠ¡å¼ºè¡Œæ‹†åˆ†åˆ°å‰å°ã€ä¸­é—´æ›´æ–°ã€åå°ä¸‰ä¸ªå‡½æ•°ã€‚</li></ul><p>ä½¿ç”¨ RxJavaå’Œåç¨‹éƒ½å¯ä»¥å¾ˆå¥½çš„è§£å†³ä¸Šè¿°çš„é—®é¢˜ã€‚</p><h5 id="ä¾‹å­-ä½¿ç”¨åç¨‹è¿›è¡Œç½‘ç»œè®¿é—®å°†è¯·æ±‚åˆ°çš„æ•°æ®æ˜¾ç¤ºåˆ°å¯¹åº”çš„æ§ä»¶ä¸Šï¼š"><a href="#ä¾‹å­-ä½¿ç”¨åç¨‹è¿›è¡Œç½‘ç»œè®¿é—®å°†è¯·æ±‚åˆ°çš„æ•°æ®æ˜¾ç¤ºåˆ°å¯¹åº”çš„æ§ä»¶ä¸Šï¼š" class="headerlink" title="ä¾‹å­ ä½¿ç”¨åç¨‹è¿›è¡Œç½‘ç»œè®¿é—®å°†è¯·æ±‚åˆ°çš„æ•°æ®æ˜¾ç¤ºåˆ°å¯¹åº”çš„æ§ä»¶ä¸Šï¼š"></a>ä¾‹å­ ä½¿ç”¨åç¨‹è¿›è¡Œç½‘ç»œè®¿é—®å°†è¯·æ±‚åˆ°çš„æ•°æ®æ˜¾ç¤ºåˆ°å¯¹åº”çš„æ§ä»¶ä¸Šï¼š</h5><pre><code class="kotlin">launch({    val user = api.getUser() // ğŸ‘ˆ ç½‘ç»œè¯·æ±‚ï¼ˆIO çº¿ç¨‹ï¼‰    nameTv.text = user.name  // ğŸ‘ˆ æ›´æ–° UIï¼ˆä¸»çº¿ç¨‹ï¼‰})</code></pre><p>æ— éœ€å…³å¿ƒ <strong>launch</strong> å®ƒ<strong>ä¸æ˜¯</strong>ä¸€ä¸ª<strong>é¡¶å±‚å‡½æ•°</strong>ï¼Œåªéœ€è¦å…³ç³»å®ƒçš„ä¸šåŠ¡é€»è¾‘ï¼š</p><p>launch <strong>å‡½æ•°</strong>åŠ ä¸Šå®ç°åœ¨ {} ä¸­çš„<strong>å…·ä½“é€»è¾‘æ„æˆ</strong>äº†<strong>åç¨‹</strong>ã€‚</p><p>é€šå¸¸æˆ‘ä»¬è¿›è¡Œç½‘ç»œè¯·æ±‚ï¼Œä¼šä¼ ä¸€ä¸ªcallbackï¼Œæˆ–è€…åœ¨IOçº¿ç¨‹é‡Œè¿›è¡Œé˜»å¡å¼çš„åŒæ­¥è°ƒç”¨ï¼Œè€Œåœ¨è¿™æ®µä»£ç ä¸­ï¼Œä¸Šä¸‹ä¸¤ä¸ªè¯­å¥åˆ†åˆ«å·¥ä½œåœ¨ä¸¤ä¸ªçº¿ç¨‹é‡Œï¼Œå¹¶ä¸”å†™æ³•ä¸Šå’Œæ™®é€šå•çº¿ç¨‹ä»£ç æ˜¯ä¸€æ ·çš„ã€‚</p><p>è¿™é‡Œçš„ api.getUseræ˜¯ä¸€ä¸ªæŒ‚èµ·å‡½æ•°ï¼Œæ‰€ä»¥èƒ½å¤Ÿä¿è¯nameTv.textçš„æ­£ç¡®èµ‹å€¼ï¼Œè¿™å°±æ¶‰åŠåˆ°äº†åç¨‹ä¸­æœ€è‘—åçš„ã€éé˜»å¡å¼æŒ‚èµ·ã€‘äº†ã€‚</p><h1 id="åç¨‹å¥½åœ¨å“ªé‡Œ"><a href="#åç¨‹å¥½åœ¨å“ªé‡Œ" class="headerlink" title="åç¨‹å¥½åœ¨å“ªé‡Œ"></a>åç¨‹å¥½åœ¨å“ªé‡Œ</h1><h2 id="ä»€ä¹ˆæ˜¯é—­åŒ…"><a href="#ä»€ä¹ˆæ˜¯é—­åŒ…" class="headerlink" title="ä»€ä¹ˆæ˜¯é—­åŒ…"></a>ä»€ä¹ˆæ˜¯é—­åŒ…</h2><h4 id="èµ·æº"><a href="#èµ·æº" class="headerlink" title="èµ·æº"></a>èµ·æº</h4><p><strong>é—­åŒ…</strong>å¹¶<strong>ä¸</strong>æ˜¯<strong>kotlin</strong>ä¸­æå‡ºçš„æ–°æ¦‚å¿µï¼Œåœ¨Java8ä¸­å°±å·²ç»æ”¯æŒã€‚</p><p>ä»¥Threadä¸ºä¾‹ï¼Œçœ‹çœ‹ä»€ä¹ˆæ˜¯é—­åŒ…ï¼š</p><pre><code class="kotlin">// åˆ›å»ºä¸€ä¸ª Thread çš„å®Œæ•´å†™æ³•Thread(object : Runnable {    override fun run() {        ...    }})// æ»¡è¶³ SAMï¼Œå…ˆç®€åŒ–ä¸ºThread({    ...})// ä½¿ç”¨é—­åŒ…ï¼Œå†ç®€åŒ–ä¸ºThread {    ...}</code></pre><p>è¯­æ³•ç³–ï¼šå½“å‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°æ˜¯lambdaè¡¨è¾¾å¼æ—¶ï¼Œå¯ä»¥å°†<strong>lambda</strong>å†™åœ¨<strong>æ‹¬å·å¤–</strong>ã€‚è¿™å°±æ˜¯å®ƒçš„<strong>é—­åŒ…åŸåˆ™</strong>ã€‚</p><h5 id="æ³¨é‡Š"><a href="#æ³¨é‡Š" class="headerlink" title="æ³¨é‡Š"></a>æ³¨é‡Š</h5><p>éœ€è¦ä¸€ä¸ªç±»å‹ä¸º Runnable çš„å‚æ•°ï¼Œè€Œ Runnable æ˜¯ä¸€ä¸ªæ¥å£ï¼Œä¸”åªå®šä¹‰äº†ä¸€ä¸ªå‡½æ•° runï¼Œè¿™ç§æƒ…å†µæ»¡è¶³äº† Kotlin çš„SAMï¼Œå¯ä»¥è½¬æ¢æˆä¸€ä¸ªä¼ é€’çš„ lambdaè¡¨è¾¾å¼ï¼ˆç¬¬äºŒæ®µï¼‰ï¼Œä»¥ä¸ºé—­åŒ…åŸåˆ™ç›´æ¥å†™æˆ Thread{â€¦}ï¼ˆç¬¬ä¸‰æ®µï¼‰ã€‚</p><p>é€šè¿‡<strong>é—­åŒ…ç®€åŒ– launch å‡½æ•°</strong></p><pre><code class="kotlin">launch {    ...}</code></pre><h2 id="åŸºæœ¬ä½¿ç”¨åç¨‹"><a href="#åŸºæœ¬ä½¿ç”¨åç¨‹" class="headerlink" title="åŸºæœ¬ä½¿ç”¨åç¨‹"></a>åŸºæœ¬ä½¿ç”¨åç¨‹</h2><p>è¯´è¿‡<strong>launchå‡½æ•°ä¸æ˜¯é¡¶å±‚å‡½æ•°</strong> å¹¶ä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œæˆ‘ä»¬é€šè¿‡ä¸‹åˆ—æ–¹æ³•æ¥åˆ›å»ºåç¨‹ï¼š</p><pre><code class="kotlin">// æ–¹æ³•ä¸€ï¼Œä½¿ç”¨ runBlocking é¡¶å±‚å‡½æ•°runBlocking {    getImage(imageId)}// æ–¹æ³•äºŒï¼Œä½¿ç”¨ GlobalScope å•ä¾‹å¯¹è±¡//            ğŸ‘‡ å¯ä»¥ç›´æ¥è°ƒç”¨ launch å¼€å¯åç¨‹GlobalScope.launch {    getImage(imageId)}// æ–¹æ³•ä¸‰ï¼Œè‡ªè¡Œé€šè¿‡ CoroutineContext åˆ›å»ºä¸€ä¸ª CoroutineScope å¯¹è±¡//                                    ğŸ‘‡ éœ€è¦ä¸€ä¸ªç±»å‹ä¸º CoroutineContext çš„å‚æ•°val coroutineScope = CoroutineScope(context)coroutineScope.launch {    getImage(imageId)}</code></pre><p>æ–¹æ³•â‘ ï¼Œå¤šç”¨äºå•å…ƒæµ‹è¯•ï¼Œä¸šåŠ¡å¼€å‘ä¸ä¼šç”¨åˆ°å®ƒï¼Œå› ä¸ºå®ƒæ˜¯çº¿ç¨‹é˜»å¡çš„ã€‚</p><p>æ–¹æ³•â‘¡ï¼Œåœ¨Androidä¸­ä¸æ¨èè¿™ç§ç”¨æ³•ï¼Œå› ä¸ºå®ƒçš„ç”Ÿå‘½å‘¨æœŸä¼šå’Œappä¸€ç›´ï¼Œä¸”ä¸èƒ½å¤Ÿå–æ¶ˆã€‚å’Œä½¿ç”¨runBlockingä¸åŒå®ƒä¸ä¼šé˜»å¡çº¿ç¨‹ã€‚</p><p>æ–¹æ³•ä¸‰ï¼Œ<strong>æ¨èç”¨æ³•</strong>ï¼Œé€šè¿‡contextå‚æ•°å»ç®¡ç†å’Œæ§åˆ¶åç¨‹çš„ç”Ÿå‘½å‘¨æœŸï¼ˆè¿™é‡Œçš„contextå’ŒAndroidé‡Œçš„ä¸æ˜¯åŒä¸€ç§ä¸œè¥¿ï¼Œæ›´åƒæ˜¯ä¸€ç§æ¦‚å¿µï¼Œä¼šæœ‰Androidå¹³å°çš„å°è£…é…åˆä½¿ç”¨ï¼‰</p><p>å…¶ä¸­ <strong>GlobaScope</strong>ä¸<strong>CoroutineScope</strong> çš„æ›´å¤šå†…å®¹åé¢çš„æ–‡ç« å†è¯´ã€‚</p><p>åç¨‹<strong>æœ€å¸¸ç”¨</strong>çš„<strong>åŠŸèƒ½</strong>æ˜¯<strong>å¹¶å‘</strong>ï¼Œè€Œå¹¶å‘æœ€å¸¸ç”¨çš„åœºæ™¯æ˜¯å¤šçº¿ç¨‹ã€‚å¯ä»¥ä½¿ç”¨<strong>Dispatchers</strong>.<strong>IO</strong>å‚æ•°æŠŠ<strong>ä»»åŠ¡åˆ‡æ¢åˆ°IOçº¿ç¨‹æ‰§è¡Œ</strong>ï¼š</p><pre><code class="kotlin">coroutineScope.launch(Dispatchers.IO) {    ...}</code></pre><p>ä½¿ç”¨ <strong>DIspatchers.Main</strong> å‚æ•°åˆ‡æ¢åˆ°ä¸»çº¿ç¨‹ï¼š</p><pre><code class="kotlin">coroutineScope.launch(Dispatchers.Main) {    ...}</code></pre><p>æ‰€ä»¥ã€ä»€ä¹ˆæ˜¯åç¨‹ã€‘ä¸­è¯´åˆ°çš„å¼‚æ­¥è¯·æ±‚çš„å®Œæ•´ä¾‹å­æ˜¯è¿™æ ·çš„ï¼š</p><pre><code class="kotlin">coroutineScope.launch(Dispatchers.Main) {   // åœ¨ä¸»çº¿ç¨‹å¼€å¯åç¨‹    val user = api.getUser() // IO çº¿ç¨‹æ‰§è¡Œç½‘ç»œè¯·æ±‚    nameTv.text = user.name  // ä¸»çº¿ç¨‹æ›´æ–° UI}</code></pre><p>åœ¨Javaä¸­å›è°ƒå¼çš„å†™æ³•æ˜¯è¿™æ ·çš„ï¼š</p><pre><code class="kotlin">api.getUser(new Callback&lt;User&gt;() {    @Override    public void success(User user) {        runOnUiThread(new Runnable() {            @Override            public void run() {                nameTv.setText(user.name);            }        })    }    @Override    public void failure(Exception e) {        ...    }});</code></pre><h2 id="æ›´ä¸ºéº»çƒ¦çš„å¹¶å‘åœºæ™¯"><a href="#æ›´ä¸ºéº»çƒ¦çš„å¹¶å‘åœºæ™¯" class="headerlink" title="æ›´ä¸ºéº»çƒ¦çš„å¹¶å‘åœºæ™¯"></a>æ›´ä¸ºéº»çƒ¦çš„å¹¶å‘åœºæ™¯</h2><p>å¯¹äºå›è°ƒå¼çš„å†™æ³•ï¼Œå¦‚æœå¹¶å‘åœºæ™¯å†å¤æ‚ä¸€ç‚¹ï¼ŒåµŒå¥—çš„å¯èƒ½å¤Ÿå¤šã€‚å¦‚æœä½¿ç”¨åç¨‹ï¼Œå¤šå±‚ç½‘ç»œè¯·æ±‚ã€‚</p><pre><code class="kotlin">coroutineScope.launch(Dispatchers.Main) {       // å¼€å§‹åç¨‹ï¼šä¸»çº¿ç¨‹    val token = api.getToken()                  // ç½‘ç»œè¯·æ±‚ï¼šIO çº¿ç¨‹    val user = api.getUser(token)               // ç½‘ç»œè¯·æ±‚ï¼šIO çº¿ç¨‹    nameTv.text = user.name                     // æ›´æ–° UIï¼šä¸»çº¿ç¨‹}</code></pre><p>å¦‚æœè¿›è¡Œå¤šä¸ª<strong>ç½‘ç»œè¯·æ±‚</strong>ç­‰å¾…å®Œæˆå<strong>å†åˆ·æ–°UI</strong>ã€‚</p><pre><code class="kotlin">api.getAvatar(user, callback)api.getCompanyLogo(user, callback)</code></pre><p>å¦‚æœä½¿ç”¨å›è°ƒå¼å†™æ³•ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šé€‰æ‹©å¦¥åï¼Œåˆ™ä½¿ç”¨å…ˆåè¯·æ±‚ä»£æ›¿åŒæ—¶è¯·æ±‚ã€‚</p><pre><code class="kotlin">api.getAvatar(user) { avatar -&gt;    api.getCompanyLogo(user) { logo -&gt;        show(merge(avatar, logo))    }}</code></pre><p>ä½¿ç”¨çª—å¸˜æ–¹å¼å»å®ç°å¯èƒ½ä¼šå¯¼è‡´ç­‰å¾…æ—¶é•¿äº†ä¸€å€ï¼Œä¹Ÿç›¸å·®äº†ä¸€å€çš„æ€§èƒ½ã€‚</p><h5 id="åç¨‹å¹¶è¡Œè¯·æ±‚ç½‘ç»œ"><a href="#åç¨‹å¹¶è¡Œè¯·æ±‚ç½‘ç»œ" class="headerlink" title="åç¨‹å¹¶è¡Œè¯·æ±‚ç½‘ç»œ"></a>åç¨‹å¹¶è¡Œè¯·æ±‚ç½‘ç»œ</h5><p>ä½¿ç”¨åç¨‹å¯ä»¥ç›´æ¥å¹¶è¡Œè¯·æ±‚ä¸Šä¸‹ä¸¤è¡Œï¼Œæœ€åæŠŠç»“æœåˆå¹¶å³å¯ï¼š</p><pre><code class="kotlin">coroutineScope.launch(Dispatchers.Main) {    //            ğŸ‘‡  async å‡½æ•°ä¹‹åå†è®²    val avatar = async { api.getAvatar(user) }    // è·å–ç”¨æˆ·å¤´åƒ    val logo = async { api.getCompanyLogo(user) } // è·å–ç”¨æˆ·æ‰€åœ¨å…¬å¸çš„ logo    val merged = suspendingMerge(avatar, logo)    // åˆå¹¶ç»“æœ    //                  ğŸ‘†    show(merged) // æ›´æ–° UI}</code></pre><p>å³ä¾¿æ˜¯æ¯”è¾ƒå¤æ‚çš„å¹¶è¡Œç½‘ç»œè¯·æ±‚ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¹¶è¡Œå†™å‡ºç»“æ„æ¸…æ™°çš„ä»£ç ã€‚<strong>suspendingMerge</strong> å¹¶ä¸æ˜¯åç¨‹APIæä¾›çš„æ–¹æ³•ï¼Œè€Œæ˜¯è‡ªå®šä¹‰æŒ‚èµ·çš„ç»“æœåˆå¹¶æ–¹æ³•ã€‚</p><h5 id="åç¨‹çš„ä¼˜åŠ¿"><a href="#åç¨‹çš„ä¼˜åŠ¿" class="headerlink" title="åç¨‹çš„ä¼˜åŠ¿"></a>åç¨‹çš„ä¼˜åŠ¿</h5><p>è®©å¤æ‚çš„å¹¶å‘ä»£ç ï¼Œå˜å¾—ç®€å•ä¸”æ¸…æ™°æ˜¯åç¨‹çš„ä¼˜åŠ¿ã€‚</p><p><strong>å¼•ç”¨ï¼š</strong></p><p><a href="https://kaixue.io/kotlin-coroutines-1/" target="_blank" rel="noopener">Kotlin çš„åç¨‹ç”¨åŠ›ç¥ä¸€çœ¼ - å­¦ä¸ä¼šåç¨‹ï¼Ÿå¾ˆå¯èƒ½å› ä¸ºä½ çœ‹è¿‡çš„æ•™ç¨‹éƒ½æ˜¯é”™çš„</a></p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> Kotlin </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Lifecycle è®²è§£</title>
      <link href="/2020/10/11/Lifecycle/"/>
      <url>/2020/10/11/Lifecycle/</url>
      
        <content type="html"><![CDATA[<h1 id="Lifecycleä½¿ç”¨è¯¦è§£"><a href="#Lifecycleä½¿ç”¨è¯¦è§£" class="headerlink" title="Lifecycleä½¿ç”¨è¯¦è§£"></a>Lifecycleä½¿ç”¨è¯¦è§£</h1><h2 id="Lifecycleå¯ä»¥åšä»€ä¹ˆ"><a href="#Lifecycleå¯ä»¥åšä»€ä¹ˆ" class="headerlink" title="Lifecycleå¯ä»¥åšä»€ä¹ˆ"></a>Lifecycleå¯ä»¥åšä»€ä¹ˆ</h2><p><strong>Lifecycle æ˜¯å…·æœ‰ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥èƒ½åŠ›çš„ç»„ä»¶ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨Activityæˆ–è€…Fragmentçš„ç”Ÿå‘½å‘¨æœŸå‘ç”Ÿå˜åŠ¨çš„æ˜¯å¦å¾—åˆ°é€šçŸ¥</strong>ã€‚æˆ‘ä»¬å¾€å¾€ä¼šåœ¨Activityçš„å„ç§ç”Ÿå‘½å‘¨æœŸæ–¹æ³•é‡Œæ‰§è¡Œç‰¹å®šçš„æ–¹æ³•ã€‚</p><pre><code class="java">public class TestActivity extends AppCompatActivity {    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_test);    }    @Override    protected void onStart() {        super.onStart();        EventBus.getDefault().register(this);    }    @Override    protected void onDestroy() {        EventBus.getDefault().unregister(this);        super.onDestroy();    }}</code></pre><p>å¦‚æœæˆ‘ä»¬æŠŠå¾ˆå¤šè¿™ç§éœ€è¦è·Ÿç”Ÿå‘½å‘¨æœŸç›¸å…³çš„é€»è¾‘ä»£ç ç›´æ¥æ”¾åœ¨Activityçš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­ï¼ŒActivityä¼šå˜çš„å¾ˆéš¾ä»¥ç»´æŠ¤çš„ã€‚é€šè¿‡ä½¿ç”¨Lifecycleï¼Œæ¥é¿å…è¿™ç§æƒ…å†µã€‚</p><h2 id="Lifecycleä½¿ç”¨"><a href="#Lifecycleä½¿ç”¨" class="headerlink" title="Lifecycleä½¿ç”¨"></a>Lifecycleä½¿ç”¨</h2><p>å¯¼å…¥Lifecycleä¾èµ–</p><p>AndroidX:</p><pre><code class="groovy">implementation &quot;androidx.lifecycle:lifecycle-runtime:2.0.0&quot;</code></pre><h3 id="Lifecycler-å®ç°æœºåˆ¶"><a href="#Lifecycler-å®ç°æœºåˆ¶" class="headerlink" title="Lifecycler å®ç°æœºåˆ¶"></a>Lifecycler å®ç°æœºåˆ¶</h3><ol><li><strong>éœ€è¦ä¸€ä¸ªæ„å»ºLifecycleå¯¹è±¡</strong>ï¼ˆé€šè¿‡ä¸€ä¸ªå®ç°äº†LifecycleOwneræ¥å£çš„å¯¹è±¡ getLifecycle() æ–¹æ³•è¿”å›ï¼‰ï¼Œè¿™ä¸ªå¯¹è±¡å°±æ˜¯ä¸€ä¸ªè¢«è§‚å¯Ÿè€…ï¼Œå…·æœ‰ç”Ÿå‘½æ„ŸçŸ¥èƒ½åŠ›ã€‚</li><li><strong>æ„å»ºä¸€ä¸ªLifecycleObserverå¯¹è±¡ï¼Œ</strong>å¯¹æŒ‡å®šçš„Lifecycleå¯¹è±¡è¿›è¡Œç›‘å¬ï¼ˆ<strong>è§‚å¯Ÿè€…</strong>ï¼‰</li><li>é€šè¿‡å°†Lifecycå¯¹è±¡çš„addObserver()æ–¹æ³•ï¼Œå°†Lifecycleå¯¹è±¡å’ŒLifecycleObserverå¯¹è±¡è¿›è¡Œç»‘å®šã€‚</li></ol><h3 id="ç»§æ‰¿AppCompatActivity"><a href="#ç»§æ‰¿AppCompatActivity" class="headerlink" title="ç»§æ‰¿AppCompatActivity"></a>ç»§æ‰¿AppCompatActivity</h3><p>åˆ›å»º MyObserver.java è®©å®ƒå®ç°LifeyclerObserver æ¥å£ï¼ˆ<strong>LifecycleObserveræ¥å£æ˜¯ä¸€ä¸ªç©ºæ¥å£ï¼Œä¸»è¦ç»™æ³¨è§£å¤„ç†å™¨ä½¿ç”¨</strong>):</p><pre><code class="kotlin">/** *   by:Thecara home *   date:2020/10/11 */class MyObserver : LifecycleObserver {    // ä½¿ç”¨æ³¨è§£ @OnLifecycleEvent() è¯¥æ–¹æ³•éœ€è¦ç›‘å¬æŒ‡å®šçš„ç”Ÿå‘½å‘¨æœŸäº‹ä»¶    @OnLifecycleEvent(Lifecycle.Event.ON_RESUME)    fun connectListener() {        Log.d(&quot;MyObserver&quot;, &quot;ON_RESUME&quot;)    }    @OnLifecycleEvent(Lifecycle.Event.ON_PAUSE)    fun disconnectListener() {        Log.d(&quot;MyObserver&quot;, &quot;ON_PAUSE&quot;)    }}</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡åœ¨æ–¹æ³•ä¸Šä½¿ç”¨ <strong>@onLifecycleEvent</strong> æ³¨è§£ä½¿å¾—æ–¹æ³•å…·æœ‰ç”Ÿå‘½æ„ŸçŸ¥èƒ½åŠ›ã€‚<strong>æ‹¬å·é‡Œçš„å‚æ•°ï¼Œè¡¨æ˜éœ€è¦ç›‘å¬çš„æ˜¯ä»€ä¹ˆç”Ÿå‘½å‘¨æœŸäº‹ä»¶ã€‚</strong>Lifecycle ä¸»è¦<strong>é€šè¿‡Eventå’ŒStateè€…ä¸¤ä¸ªæšä¸¾ç±»æ¥è¿½è¸ªå…³è”ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸçŠ¶æ€</strong>ã€‚å…·ä½“çš„Eventå’ŒStateä¹‹é—´çš„è½¬æ¢å…³ç³»ï¼Œå¯ä»¥å‚è€ƒå¦‚ä¸‹ï¼š</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/1692ebbac5daa896" alt=""></p><p>è®©Activityç»§æ‰¿è‡ªAppCompatActivityï¼Œç„¶åå†OnCreate()æ–¹æ³•ä¸­é€šè¿‡ <strong>getLifecycle().addObserver(new MyObserver())</strong> å®Œæˆ<strong>Lifecycle</strong>å’Œ<strong>LifecycleObser</strong>çš„ç»‘å®š:</p><pre><code class="kotlin">class MainActivity : AppCompatActivity() {    override fun onCreate(savedInstanceState: Bundle?) {        super.onCreate(savedInstanceState)        setContentView(R.layout.activity_main)        // ç»‘å®š        lifecycle.addObserver(MyObserver())    }}</code></pre><p>é€šè¿‡åˆ‡æ¢åå°è§‚å¯ŸçŠ¶æ€ã€‚</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/2020-10-11-0.gif" alt="åˆ‡æ¢"></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/2020-10-11-1.gif" alt="Log"></p><p>library 26.1.0 åŠä¹‹åçš„åº“ä¸­ï¼Œ<strong>AppCompatActivityçš„çˆ¶ç±»SupportActivityå·²ç»é»˜è®¤å®ç°äº†LifecycleOwneræ¥å£ï¼Œç›´æ¥é€šè¿‡getLifecycle() æ–¹æ³•è·å¾—Lifecycleå¯¹è±¡ã€‚</strong></p><p>ä¹‹åé€šè¿‡ <strong>addObserver()</strong> æ–¹æ³•å°†Lifecycle è·ŸæŒ‡å®š LifecycleObserver è¿›è¡Œç»‘å®šã€‚</p><p><strong>å¼•ç”¨ï¼š</strong></p><p><a href="https://juejin.im/post/6844903784166998023" target="_blank" rel="noopener">Androidç”Ÿå‘½å‘¨æœŸç»„ä»¶Lifecycleä½¿ç”¨è¯¦è§£</a></p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
          <category> Lifecycle </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»€ä¹ˆæ˜¯BuildConfig</title>
      <link href="/2020/09/17/BuildConfig/"/>
      <url>/2020/09/17/BuildConfig/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»€ä¹ˆæ˜¯-BuildConfig"><a href="#ä»€ä¹ˆæ˜¯-BuildConfig" class="headerlink" title="ä»€ä¹ˆæ˜¯ BuildConfig"></a>ä»€ä¹ˆæ˜¯ BuildConfig</h1><p><strong>åœ¨æ‰“åŒ…æ—¶è‡ªåŠ¨ç”Ÿæˆçš„ç±»ã€‚</strong>ç±»ä¼¼äºR.classï¼Œç”Ÿæˆåä¸èƒ½ä¿®æ”¹ã€‚</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200917233605.png" alt="åœ¨é¡¹ç›®ä¸­çš„ä½ç½®"></p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Timber</title>
      <link href="/2020/09/17/Timber/"/>
      <url>/2020/09/17/Timber/</url>
      
        <content type="html"><![CDATA[<h1 id="ä½¿ç”¨-Timber"><a href="#ä½¿ç”¨-Timber" class="headerlink" title="ä½¿ç”¨ Timber"></a>ä½¿ç”¨ Timber</h1><ul><li>é…ç½® timber</li></ul><pre><code class="groovy">implementation &#39;com.jakewharton.timber:timber:4.7.1&#39;</code></pre><ul><li><h5 id="å‡†å¤‡Logè¾“å‡ºçš„è‡ªå®šä¹‰æ ¼å¼"><a href="#å‡†å¤‡Logè¾“å‡ºçš„è‡ªå®šä¹‰æ ¼å¼" class="headerlink" title="å‡†å¤‡Logè¾“å‡ºçš„è‡ªå®šä¹‰æ ¼å¼"></a><strong>å‡†å¤‡Logè¾“å‡ºçš„è‡ªå®šä¹‰æ ¼å¼</strong></h5></li></ul><blockquote><p>å¯ä»¥ç›´æ¥åœ¨Applicationçš„onCreate()ä¸­è°ƒç”¨<code>Timber.plant(new DebugTree())</code>å®ç°DebugåŠŸèƒ½ã€‚ä½†æ˜¯åŠŸèƒ½æœ‰æ‰€æ¬ ç¼ºï¼Œ<strong>å¯ä»¥ç”¨æ¥ä¸Šä¼ crashä¿¡æ¯</strong>ç­‰ã€‚</p><p>psï¼š</p><p>Timberä¸»è¦é€šè¿‡æ·»åŠ Treeå®ä¾‹æ¥å®ç°ï¼Œæ·»åŠ Treeå®ä¾‹å¯ä»¥é€šè¿‡æ–¹æ³•Timber.plantå®Œæˆã€‚</p><p>è€Œä½¿ç”¨DebugTreeå®ç°è‡ªåŠ¨å®ä¾‹åŒ–</p></blockquote><ol><li>ä¸ä¼š<strong>æ‰“å°å½“å‰çº¿ç¨‹</strong></li><li>ä¸ä¼š<strong>æ‰“å°å½“å‰è¡Œå·</strong></li></ol><p>è‡ªå·±åˆ›å»ºä¸€ä¸ªç»§æ‰¿ç±»æ¥å®ç°è¿™ä¸¤ä¸ªåŠŸèƒ½ã€‚</p><pre><code class="kotlin">class ThreadAwareDebugTree : Timber.DebugTree() {    //æ·»åŠ å½“å‰çº¿ç¨‹    override fun log(priority: Int, tag: String?, message: String, t: Throwable?) {        if (tag != null) {            val threadName = Thread.currentThread().name            tag != &quot;&lt;&quot; + threadName + &quot;&gt;&quot;        }        super.log(priority, tag, message, t)    }    // æ·»åŠ è¡Œå·    override fun createStackElementTag(element: StackTraceElement): String? {        return super.createStackElementTag(element) + &quot;Line(&quot; + element.lineNumber + &quot;)&quot;    }}</code></pre><p><strong>è¿˜æœ‰ä¸€ä¸ªç±»åœ¨ release ç‰ˆæœ¬æ—¶è°ƒç”¨æ‰“å°logä¿¡æ¯</strong></p><blockquote><p>release ç‰ˆæœ¬ç”¨æ¥ä»¥ä¸€ç§è·Ÿè¸ªæ—¥å¿—çš„å½¢å¼ä¸ŠæŠ¥ç»™ <strong>Bugly</strong>ï¼Œå®ƒåªä¼šæ˜¾ç¤º wï¼Œeï¼Œwtfã€‚</p></blockquote><pre><code class="kotlin">class ReleaseTree : ThreadAwareDebugTree() {    override fun isLoggable(tag: String?, priority: Int): Boolean {        return if (priority == Log.VERBOSE || priority == Log.DEBUG || priority == Log.INFO) {            false        } else true    }    override fun log(priority: Int, tag: String?, message: String, t: Throwable?) {        if (!isLoggable(tag, priority)) {            return        }        super.log(priority, tag, message, t)    }}</code></pre><ul><li>å‡†å¤‡ Application</li></ul><pre><code class="kotlin">class TimberDemoApplication : Application() {    override fun onCreate() {        super.onCreate()        if (DEBUG)            Timber.plant(ThreadAwareDebugTree())    }}</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200921111610.png" alt="æ·»åŠ Application"></p><ul><li>è°ƒç”¨ä¸€ä¸ªlog</li></ul><pre><code class="kotlin">println(Timber.v(&quot;hello&quot;))</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200921112051.png" alt="é€šè¿‡è‡ªå®šä¹‰çš„ç±»å‹è¾“å‡ºäº†è¡Œå·çš„ä¿¡æ¯"></p><h2 id="é‡å†™-Log-æ–¹æ³•"><a href="#é‡å†™-Log-æ–¹æ³•" class="headerlink" title="é‡å†™ Log æ–¹æ³•"></a>é‡å†™ Log æ–¹æ³•</h2><p><strong>å‚æ•°</strong></p><blockquote><p>priority:Int ä¼˜å…ˆçº§</p><p>tag:String æ‰“å°æ—¶çš„æ ‡ç­¾</p><p>message:String å†…å®¹</p><p>t:Throwable æŠ›å‡ºçš„å¼‚å¸¸</p></blockquote><p>æ­¤æ–¹æ³•å¯ä»¥ç”¨æ¥æ ¹æ®å‘é€æ¥çš„ <strong>å¼‚å¸¸ç­‰ä¿¡æ¯</strong> è‡ªå®šä¹‰æ¥ä¸‹æ¥çš„åŠ¨ä½œã€‚è¿™äº›ä¿¡æ¯å¹¶ä¸ä¼šè¢«ä»logæ—¥å¿—æ‰“å°å‡ºæ¥ã€‚</p><p><strong>è°ƒç”¨</strong></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201009123005.png" alt="è°ƒç”¨logæ–¹æ³•"></p><pre><code class="kotlin"> Timber.log(1, &quot;æµ‹è¯•æ‰“å°&quot;)</code></pre><h4 id="æ‰“å°æˆ‘ä»¬å‘é€æ¥çš„ä¿¡æ¯"><a href="#æ‰“å°æˆ‘ä»¬å‘é€æ¥çš„ä¿¡æ¯" class="headerlink" title="æ‰“å°æˆ‘ä»¬å‘é€æ¥çš„ä¿¡æ¯"></a>æ‰“å°æˆ‘ä»¬å‘é€æ¥çš„ä¿¡æ¯</h4><pre><code class="kotlin">class MyTimberFree : Timber.Tree() {    override fun log(priority: Int, tag: String?, message: String, t: Throwable?) {        super.log(priority, tag, message, t)        Timber.v(message)    }}</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201009123216.png" alt="å‘é€æˆåŠŸï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®è¿™äº›ä¿¡æ¯ä¸Šä¼ åˆ°crashä¸­ã€‚"></p><h1 id="ä¸ºä»€ä¹ˆä½¿ç”¨Timber"><a href="#ä¸ºä»€ä¹ˆä½¿ç”¨Timber" class="headerlink" title="ä¸ºä»€ä¹ˆä½¿ç”¨Timber"></a>ä¸ºä»€ä¹ˆä½¿ç”¨Timber</h1><ol><li><p>é¡¹ç›®å¼€å‘æ—¶ï¼Œä¸ºäº†æ–¹ä¾¿è°ƒè¯•ï¼Œéœ€è¦è¾“å‡ºlogï¼Œä½†æ˜¯å‘å¸ƒåï¼Œlogä¸­åŒ…å«å¾ˆå¤šé¡¹ç›®ä¿¡æ¯ï¼Œå¦‚æœå…¨éƒ¨æš´éœ²å¯èƒ½ä¼šé€ æˆå®‰å…¨éšæ‚£ï¼Œå½“å®Œå…¨åˆ é™¤ä¹Ÿä¸åˆ©äºåæœŸè°ƒè¯•ï¼Œå› æ­¤éœ€è¦ä¸€ä¸ªå¼€å…³ï¼Œå…³é—­å¼€å…³ä¸èƒ½è¾“å‡ºbugï¼Œæ‰“å¼€å¼€å…³åˆ™å¯ä»¥è¾“å‡ºlogã€‚</p></li><li><p>æ¯æ¬¡éœ€è¦æ‰“å° TAG</p></li><li><p>ä¸ä¼šæ‰“å°å½“å‰çº¿ç¨‹</p></li><li><p>ä¸ä¼šæ‰“å°å½“å‰è¡Œå·</p></li></ol><p><a href="https://xiazdong.github.io/2017/05/17/Timber/" target="_blank" rel="noopener">Timberå’ŒBuglyä½¿ç”¨å…¥é—¨</a></p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> Timber </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨gradle</title>
      <link href="/2020/09/09/%E4%BD%BF%E7%94%A8gradle/"/>
      <url>/2020/09/09/%E4%BD%BF%E7%94%A8gradle/</url>
      
        <content type="html"><![CDATA[<h1 id="åˆ›å»º-Gradle-é¡¹ç›®"><a href="#åˆ›å»º-Gradle-é¡¹ç›®" class="headerlink" title="åˆ›å»º Gradle é¡¹ç›®"></a>åˆ›å»º Gradle é¡¹ç›®</h1><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/2020-9-9-0.gif" alt=""></p><p>ğŸ‘† è”ç½‘çŠ¶æ€æ‰“å¼€ IDEA</p><h1 id="é¡¹ç›®ç»“æ„ä»‹ç»"><a href="#é¡¹ç›®ç»“æ„ä»‹ç»" class="headerlink" title="é¡¹ç›®ç»“æ„ä»‹ç»"></a>é¡¹ç›®ç»“æ„ä»‹ç»</h1><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200910110408.png" alt=""></p><p><strong>src/main/java</strong> æ­£å¼ä»£ç ç›®å½•</p><p><strong>src/main/resources</strong> æ­£å¼é…ç½®æ–‡ä»¶ç›®å½•</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200910111041.png" alt=""></p><p><strong>src/test/java</strong> æ”¾ç½®å•å…ƒæµ‹è¯•ä»£ç ç›®å½•</p><p><strong>src/test/resources</strong> æ”¾ç½®å•å…ƒæµ‹è¯•é…ç½®æ–‡ä»¶ç›®å½•</p><p><strong>src/main/webapp</strong> è¿˜æœ‰ä¸€ä¸ªå¯æ”¾ç½®çš„ web ç›®å½•ï¼ˆé¡µé¢ä¿¡æ¯ï¼‰</p><h4 id="src-build-gradle-æ–‡ä»¶"><a href="#src-build-gradle-æ–‡ä»¶" class="headerlink" title="src/build.gradle æ–‡ä»¶"></a>src/build.gradle æ–‡ä»¶</h4><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200910162235.png" alt=""></p><p><strong>plugins{}</strong></p><blockquote><p>æŒ‡è¿è¡Œç¯å¢ƒ</p></blockquote><p><strong>repositories{}</strong></p><blockquote><p>mavenContral() ä¸ºä¸­å¤®ä»“åº“ï¼Œåœ¨æ²¡æœ‰æŒ‡å®šæƒ…å†µçš„ä¸‹ä¼šç›´æ¥ä»ä¸­å¤®ä»“åº“ä¸‹è½½ jar åŒ…ã€‚</p></blockquote><p><strong>dependenciese{}</strong></p><blockquote><p>gradleå·¥ç¨‹æ‰€æœ‰çš„jaråŒ…çš„åæ ‡éƒ½åœ¨dependencieså±æ€§å†…æ”¾ç½®ã€‚</p><p>åŒæ—¶æ¯ä¸ªjaråŒ…çš„åæ ‡éƒ½æœ‰ä¸‰ä¸ªåŸºæœ¬å…ƒç´ æ„æˆï¼Œgroupï¼Œnameï¼Œversion ç»„æˆ</p></blockquote><p><strong>group</strong>ï¼šå¤šåˆ†ä¸ºå¤šæ®µï¼Œç¬¬ä¸€æ®µä¸º åŸŸï¼Œç¬¬äºŒæ®µå…¬å¸åç§°ã€‚å…¶ä¸­ org ä¸ºéç›ˆåˆ©ç»„ç»‡ï¼Œcon ä¸ºå•†ä¸šç»„ç»‡ã€‚ä¾‹å¦‚ï¼štomatï¼šä¸º apacheé¡¹ç›® groupidä¸ºorg.apacheã€‚</p><p><strong>name</strong>ï¼šé¡¹ç›®çš„å…¨åç§°ã€‚</p><p><strong>version</strong>ï¼šç‰ˆæœ¬å·ã€‚</p><p><strong>testCompile</strong>ï¼šæµ‹è¯•æ—¶æ‰€ä¾èµ–çš„jaråŒ…ï¼Œåœ¨dradleå¯ç”± implementation ä»£æ›¿ã€‚</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200910165023.png" alt=""></p><p>åˆ›å»ºé¡¹ç›®æœ‰æåˆ° ğŸ‘†</p><h4 id="é¡¹ç›®-build-gradle-æ–‡ä»¶"><a href="#é¡¹ç›®-build-gradle-æ–‡ä»¶" class="headerlink" title="é¡¹ç›®/build.gradle æ–‡ä»¶"></a>é¡¹ç›®/build.gradle æ–‡ä»¶</h4><p><strong>buildscript{} å±æ€§</strong></p><blockquote><p>gradleæ‰§è¡Œæ‰€éœ€è¦çš„ä¾èµ–ï¼Œåˆ†åˆ«å¯¹åº”mavenåº“å’Œæ’ä»¶</p></blockquote><h1 id="é€šè¿‡-mevenCentral-å¼•å…¥-jar-åŒ…"><a href="#é€šè¿‡-mevenCentral-å¼•å…¥-jar-åŒ…" class="headerlink" title="é€šè¿‡ mevenCentral å¼•å…¥ jar åŒ…"></a>é€šè¿‡ <strong>mevenCentral</strong> å¼•å…¥ jar åŒ…</h1><p>ä½¿ç”¨ compile æ·»åŠ  jar åŒ…</p><blockquote><p>ç”¨æ¥è§£ææ‰€éœ€è¦çš„ä¾èµ–åœ¨classpathä¸­å¯ç”¨ï¼Œå¹¶ä¸”å°†å®ƒä»¬æ‰“åŒ…ã€‚</p></blockquote><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/2020-9-10-1.gif" alt=""></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200910180423.png" alt=""></p><p>ä¾èµ–å®Œæˆ</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200910182006.png" alt=""></p><p>åœ¨ ç”¨æˆ·çš„ user/ç”¨æˆ·å/.gradle/caches/modules-2/files-2.1 ä¸‹æœ‰æˆ‘ä»¬åŠ è½½çš„ jar åŒ…</p><h1 id="demo-å¼•å…¥ä¸€ä¸ªspringåŒ…-å¹¶æµ‹è¯•ä½¿ç”¨"><a href="#demo-å¼•å…¥ä¸€ä¸ªspringåŒ…-å¹¶æµ‹è¯•ä½¿ç”¨" class="headerlink" title="demo å¼•å…¥ä¸€ä¸ªspringåŒ… å¹¶æµ‹è¯•ä½¿ç”¨"></a>demo å¼•å…¥ä¸€ä¸ªspringåŒ… å¹¶æµ‹è¯•ä½¿ç”¨</h1><h3 id="åœ¨-mavenRepository-ä¸­å¼•å…¥jar-åŒ…"><a href="#åœ¨-mavenRepository-ä¸­å¼•å…¥jar-åŒ…" class="headerlink" title="åœ¨ mavenRepository ä¸­å¼•å…¥jar åŒ…"></a>åœ¨ mavenRepository ä¸­å¼•å…¥jar åŒ…</h3><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200911162643.png" alt=""></p><pre><code class="groovy">// https://mvnrepository.com/artifact/org.springframework/spring-contextcompile group: &#39;org.springframework&#39;, name: &#39;spring-context&#39;, version: &#39;5.2.8.RELEASE&#39;</code></pre><h3 id="å¼•å…¥åçš„ä¾èµ–åŒ…ä½ç½®æŸ¥çœ‹"><a href="#å¼•å…¥åçš„ä¾èµ–åŒ…ä½ç½®æŸ¥çœ‹" class="headerlink" title="å¼•å…¥åçš„ä¾èµ–åŒ…ä½ç½®æŸ¥çœ‹"></a>å¼•å…¥åçš„ä¾èµ–åŒ…ä½ç½®æŸ¥çœ‹</h3><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200911162549.png" alt=""></p><h3 id="å¼€å§‹æµ‹è¯•"><a href="#å¼€å§‹æµ‹è¯•" class="headerlink" title="å¼€å§‹æµ‹è¯•"></a>å¼€å§‹æµ‹è¯•</h3><p><strong>åˆ›å»º æ¥å£ â€AccountDaoâ€œ</strong></p><p>ä½ç½® â€com.gradlelearn.daoâ€œ</p><pre><code class="java">public interface AccountDao {    public List findAll();}</code></pre><p>ä½œä¸ºæ¥å£ï¼ŒæŸ¥è¯¢æ–¹æ³•</p><p><strong>åˆ›å»º â€AccountDaoImplâ€œ</strong></p><p>ä½ç½® â€com.gradlelearn.dao.implâ€œ</p><pre><code class="java">public class AccountDaoImpl implements AccountDao {    @Override    public List findAll() {        System.out.println(&quot;test&quot;);        return null;    }}</code></pre><p>å®ç°æŸ¥è¯¢åŠŸèƒ½</p><h4 id="æµ‹è¯•æ–¹æ³•"><a href="#æµ‹è¯•æ–¹æ³•" class="headerlink" title="æµ‹è¯•æ–¹æ³•"></a>æµ‹è¯•æ–¹æ³•</h4><p><strong>åˆ›å»º â€AccountTestâ€œ</strong></p><p>ä½ç½® test æ–‡ä»¶ä¸‹ â€com.gradle.testâ€œ</p><p><strong>ClassPathXmlApplicationContext</strong> ç±»å‹</p><blockquote><p>è·å¾—å½“å‰ bean å®¹å™¨</p><p>åˆ›å»ºå¯¹è±¡ ApplicationContext ç±»å‹</p></blockquote><p><strong>applicationContext.getBean</strong> æ–¹æ³•</p><blockquote><p>ä»å®¹å™¨ä¸­è·å¾—å½“å‰ Dao</p></blockquote><pre><code class="java">public class AccountTest {    @Test    public void acccountTest() {        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;bean.xml&quot;);        AccountDao bean = applicationContext.getBean(AccountDao.class);        bean.findAll();    }}</code></pre><h4 id="æµ‹è¯•ç»“æœ"><a href="#æµ‹è¯•ç»“æœ" class="headerlink" title="æµ‹è¯•ç»“æœ"></a>æµ‹è¯•ç»“æœ</h4><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200911164758.png" alt=""></p><h3 id="æ‰“åŒ…-jar-åŒ…"><a href="#æ‰“åŒ…-jar-åŒ…" class="headerlink" title="æ‰“åŒ… jar åŒ…"></a>æ‰“åŒ… jar åŒ…</h3><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/2020-9-11-0.gif" alt=""></p><p><strong>jar åŒ…çš„ä½ç½®</strong></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200911165345.png" alt=""></p><h1 id="åˆ›å»º-web-å·¥ç¨‹-demo"><a href="#åˆ›å»º-web-å·¥ç¨‹-demo" class="headerlink" title="åˆ›å»º web å·¥ç¨‹ demo"></a>åˆ›å»º web å·¥ç¨‹ demo</h1><h1 id="è¡¥å……"><a href="#è¡¥å……" class="headerlink" title="è¡¥å……"></a>è¡¥å……</h1><h5 id="æ‰©å±•å±æ€§"><a href="#æ‰©å±•å±æ€§" class="headerlink" title="æ‰©å±•å±æ€§"></a>æ‰©å±•å±æ€§</h5><p>ä½¿ç”¨ ext æ‰©å±•å—å¯ä»¥ä¸€æ¬¡æ·»åŠ å¤šä¸ªå±æ€§ã€‚</p><p>å£°æ˜å¤šä¸ªå±æ€§ã€‚æ·»åŠ äº†é”®å€¼å¯¹çš„å±æ€§é›†åˆã€‚</p><pre><code class="groovy">ext.versions = [minSdk:21,targetSdk:29]</code></pre><h5 id="apply-plugin"><a href="#apply-plugin" class="headerlink" title="apply plugin"></a>apply plugin</h5><p>æ­¤æ–¹å¼ç”¨æ¥å¼•å…¥ <strong>Gradle å®˜æ–¹æ’ä»¶åº“</strong>ã€‚</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200915181918.png" alt=""></p><h5 id="apply-from"><a href="#apply-from" class="headerlink" title="apply from"></a>apply from</h5><p>å¼•ç”¨æœ¬åœ°èµ„æº</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200915182720.png" alt=""></p><h2 id="android"><a href="#android" class="headerlink" title="android"></a>android</h2><p>è¿™ä¸ªé—­åŒ…ä¸»è¦ä¸ºäº†é…ç½®é¡¹ç›®ç»“æ„çš„å„ç§å±æ€§ã€‚</p><h5 id="compileSdkVersion"><a href="#compileSdkVersion" class="headerlink" title="compileSdkVersion"></a>compileSdkVersion</h5><p>è®¾ç½®ç¼–è¯‘æ—¶ç”¨çš„Androidç‰ˆæœ¬</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200915183321.png" alt=""></p><h2 id="defaultConfig-é—­åŒ…"><a href="#defaultConfig-é—­åŒ…" class="headerlink" title="defaultConfig é—­åŒ…"></a>defaultConfig é—­åŒ…</h2><p>é»˜è®¤é—­åŒ…</p><h5 id="applicationId"><a href="#applicationId" class="headerlink" title="applicationId"></a>applicationId</h5><p>é¡¹ç›®çš„åŒ…å</p><h5 id="minSdkVersion"><a href="#minSdkVersion" class="headerlink" title="minSdkVersion"></a>minSdkVersion</h5><p>æœ€ä½å…¼å®¹ç‰ˆæœ¬</p><h5 id="targetSdkVersion"><a href="#targetSdkVersion" class="headerlink" title="targetSdkVersion"></a>targetSdkVersion</h5><p>ç›®æ ‡å…¼å®¹ç‰ˆæœ¬</p><h5 id="versionCode"><a href="#versionCode" class="headerlink" title="versionCode"></a>versionCode</h5><p>é¡¹ç›®ç‰ˆæœ¬å·</p><h5 id="versionName"><a href="#versionName" class="headerlink" title="versionName"></a>versionName</h5><p>ç‰ˆæœ¬åç§°</p><h5 id="testInstrumentationRunner"><a href="#testInstrumentationRunner" class="headerlink" title="testInstrumentationRunner"></a>testInstrumentationRunner</h5><p>ç”¨æ¥è¿›è¡Œ AndroidJUnitRunner è¿›è¡Œå•å…ƒæµ‹è¯•</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200915183913.png" alt="detailtConfigé—­åŒ…"></p><h2 id="buildTypes-é—­åŒ…"><a href="#buildTypes-é—­åŒ…" class="headerlink" title="buildTypes é—­åŒ…"></a>buildTypes é—­åŒ…</h2><p>ç”Ÿæˆå®‰è£…æ–‡ä»¶çš„ä¸»è¦é…ç½®ï¼Œå¤šæ•°ä¸ºä¸¤ä¸ªå­é—­åŒ…ï¼Œ    ä¸€ä¸ªdebugé—­åŒ…ï¼Œ<strong>ç”¨äºæŒ‡å®šç”Ÿæˆæµ‹è¯•ç‰ˆå®‰è£…æ–‡ä»¶çš„é…ç½®</strong>ï¼Œå¯å¿½ç•¥ã€‚ä¸€ä¸ªreleaseé—­åŒ…ï¼Œ<strong>ç”¨äºæŒ‡å®šç”Ÿæˆæ­£å¼ç‰ˆçš„é…ç½®</strong>ã€‚ä¸¤è€…é…ç½®å‚æ•°å¤§å¤šä¸€è‡´ï¼ŒåŒºåˆ«ä¸º<strong>é»˜è®¤å±æ€§é…ç½®ä¸ä¸€æ ·</strong>ã€‚</p><h5 id="minifyEnabled"><a href="#minifyEnabled" class="headerlink" title="minifyEnabled"></a>minifyEnabled</h5><p>æ˜¯å¦å¯¹ä»£ç è¿›è¡Œæ··æ·†</p><h5 id="proguardFiles"><a href="#proguardFiles" class="headerlink" title="proguardFiles"></a>proguardFiles</h5><p>æŒ‡å®šæ··æ·†çš„è§„åˆ™æ–‡ä»¶</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200915185118.png" alt=""></p><h2 id="dependenciesé—­åŒ…"><a href="#dependenciesé—­åŒ…" class="headerlink" title="dependenciesé—­åŒ…"></a>dependenciesé—­åŒ…</h2><p>å®šä¹‰äº†é¡¹ç›®çš„ä¾èµ–å…³ç³»ï¼Œä¸‰ç§ä¾èµ–æ–¹å¼ï¼š<strong>æœ¬åœ°ä¾èµ–ï¼Œåº“ä¾èµ–ï¼Œå’Œè¿œç¨‹ä¾èµ–</strong>ã€‚</p><blockquote><p>è‡ªAndroidStudio3.0å compile å¼•å…¥åº“ä¸å†ä½¿ç”¨ï¼Œè€Œé€šè¿‡apiå’Œimplementationï¼Œapiå®Œå…¨ç­‰åŒäºå…ˆå‰çš„ compile</p><p>ï¼Œé€šè¿‡ api å¼•å…¥ æ•´ä¸ªé¡¹ç›®æ˜¯å¯ä»¥ä½¿ç”¨å½“å‰çš„ä¾èµ–åº“çš„ã€‚<strong>implementation å¼•å…¥çš„åº“åªæœ‰å¯¹åº”çš„ Module ä½¿ç”¨</strong>ã€‚</p><p>åœ¨ä½¿ç”¨ compileæ—¶å¯¼è‡´æ¨¡å—ä¹‹é—´çš„è€¦åˆè¿‡é«˜ï¼Œä¸åˆ©äºé¡¹ç›®çš„æ‹†è§£ï¼Œ<strong>é€šè¿‡ implementationåšåˆ°é™ä½è€¦åˆæé«˜å®‰å…¨æ€§</strong>ã€‚</p></blockquote><p>Moduleï¼šæŒ‡é¡¹ç›®ä¸­åˆ›å»ºçš„ä¸åŒModuleã€‚</p><h5 id="implementation"><a href="#implementation" class="headerlink" title="implementation"></a>implementation</h5><p>è¿œç¨‹ä¾èµ–</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200915190215.png" alt=""></p><h5 id="testImplementation-å’Œ-androidTestImplementation"><a href="#testImplementation-å’Œ-androidTestImplementation" class="headerlink" title="testImplementation å’Œ androidTestImplementation"></a>testImplementation å’Œ androidTestImplementation</h5><p>æµ‹è¯•ç”¨ä¾èµ–åº“</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200915190143.png" alt=""></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200915190127.png" alt=""></p><h1 id="groovy-å¿«é€Ÿä½¿ç”¨"><a href="#groovy-å¿«é€Ÿä½¿ç”¨" class="headerlink" title="groovy å¿«é€Ÿä½¿ç”¨"></a>groovy å¿«é€Ÿä½¿ç”¨</h1><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/2020-9-10-0.gif" alt=""></p><p>æ‰“å¼€ idea çš„ groovy ç¼–è¾‘å™¨</p><h3 id="åŸºç¡€è¯­æ³•"><a href="#åŸºç¡€è¯­æ³•" class="headerlink" title="åŸºç¡€è¯­æ³•"></a>åŸºç¡€è¯­æ³•</h3><p><strong>groovy hellow wordï¼</strong></p><pre><code class="groovy">println(&quot;hello world!&quot;);</code></pre><p>groovy æ›´ç±»ä¼¼äº java è¯­è¨€ã€‚</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200910113424.png" alt=""></p><p><strong>groovy å¯ä»¥çœç•¥æœ«å°¾ â€œ;â€å·</strong></p><pre><code class="groovy">println(&quot;hello world!&quot;)</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200910112155.png" alt=""></p><p><strong>groovy å¯ä»¥ çœç•¥æ‹¬å·</strong></p><pre><code class="groovy">println &quot;hello world!&quot;</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200910120309.png" alt=""></p><p><strong>å®šä¹‰å˜é‡</strong></p><pre><code class="groovy">def x = 15println x</code></pre><p>def ä¿®é¥°ç¬¦æ˜¯ <strong>å¼±ç±»å‹</strong> å£°æ˜ï¼Œgroovyä¼šè‡ªåŠ¨æ ¹æ®æƒ…å†µæ¥ç»™å˜é‡èµ‹äºˆå¯¹åº”çš„ç±»å‹ã€‚</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200910150342.png" alt=""></p><p><strong>å®šä¹‰é›†åˆ</strong></p><pre><code class="groovy">def x = [&#39;x&#39;, &#39;f&#39;, &#39;c&#39;]x &lt;&lt; &#39;y&#39;println x</code></pre><p>å®šä¹‰é›†åˆï¼šé€šè¿‡ â€œ[]â€ ä¸­æ‹¬å·å£°æ˜</p><p>é›†åˆæ·»åŠ æ•°æ®ï¼Œâ€&lt;&lt;â€ åŒå°äºå·å³å¯</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200910151126.png" alt=""></p><p><strong>æå–å…ƒç´ </strong></p><pre><code class="groovy">x.get(2)</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200910151255.png" alt=""></p><p>æå–å…ƒç´ ä¸‹æ ‡ä¸º 2 çš„å…ƒç´ </p><h4 id="å®šä¹‰map"><a href="#å®šä¹‰map" class="headerlink" title="å®šä¹‰map"></a><strong>å®šä¹‰map</strong></h4><p><strong>å£°æ˜map</strong></p><pre><code class="groovy">def m = [&#39;key1&#39;: &#39;value1&#39;]</code></pre><p>åœ¨åˆå§‹åŒ–æ—¶å¿…é¡»è¦æœ‰åˆå§‹åŒ–çš„å€¼ï¼Œç”¨æ¥å¯¹å¼±ç±»å‹è¿›è¡Œä¿®æ”¹ã€‚</p><p><strong>æ·»åŠ é”®å€¼å¯¹</strong></p><pre><code class="groovy">m.key2 = &quot;value2&quot;</code></pre><p>æ‰“å°é”®å€¼å¯¹</p><pre><code class="groovy">println m.get(&#39;key2&#39;)println m</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200910152935.png" alt=""></p><h3 id=""><a href="#" class="headerlink" title=""></a></h3><h3 id="groovy-ä¸­çš„é—­åŒ…"><a href="#groovy-ä¸­çš„é—­åŒ…" class="headerlink" title="groovy ä¸­çš„é—­åŒ…"></a>groovy ä¸­çš„é—­åŒ…</h3><p><strong>ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿ</strong></p><p>groovyä¸­çš„ä¸€ä¸ªä»£ç å—ã€‚ç”¨äºåœ¨<strong>gradleä¸­æŠŠé—­åŒ…å½“ä½œå‚æ•°ä½¿ç”¨</strong>ã€‚</p><p><strong>å®šä¹‰é—­åŒ…å’Œæºå¸¦å‚æ•°çš„é—­åŒ…</strong></p><pre><code class="groovy">def b = {    println &quot;hello world!&quot;}</code></pre><pre><code class="groovy">def b = {   v-&gt; println &quot;hello world! $v&quot;}</code></pre><p>èŠ±æ‹¬å· â€œ{}â€ å³ä¸ºé—­åŒ…çš„æ ·å¼ã€‚</p><p>v è¡¨ç¤ºä¸€ä¸ªå˜é‡ï¼Œé€šè¿‡ â€œ$vâ€ å¼•ç”¨å˜é‡ã€‚</p><p><strong>é—­åŒ…ä½œä¸ºæ–¹æ³•çš„å‚æ•°ï¼Œä¸ºé—­åŒ…æ·»åŠ å‚æ•°</strong></p><pre><code class="groovy">def method(Closure closure) {    closure()}</code></pre><pre><code class="groovy">def method(Closure closure) {    closure(&quot;arguments&quot;)}</code></pre><p>Closureï¼šä¸ºé—­åŒ…çš„ç±»å‹ï¼Œä½äº â€œgroovy.langâ€ åŒ…ä¸‹ã€‚</p><p>å­—ç¬¦â€œargumentsâ€ä½œä¸ºå‚æ•°ä¼ é€’ç»™äº†é—­åŒ…ï¼Œ<strong>åœ¨ä½¿ç”¨æ—¶å°†å¯¹åº”é—­åŒ…æ·»åŠ åˆ°æ–¹æ³•ä¸­å³å¯</strong>ã€‚</p><p><strong>ä½¿ç”¨é—­åŒ…</strong></p><pre><code class="groovy">method (b)</code></pre><p>method ä¸ºè‡ªå·±åˆ›å»ºçš„æ–¹æ³•ã€‚</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200910155625.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> gradle </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> gradle </tag>
            
            <tag> groovy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RxJava2 Android ä¸­ä½¿ç”¨</title>
      <link href="/2020/08/21/Android-RxJava/"/>
      <url>/2020/08/21/Android-RxJava/</url>
      
        <content type="html"><![CDATA[<h2 id="ä»€ä¹ˆæ˜¯RxJava"><a href="#ä»€ä¹ˆæ˜¯RxJava" class="headerlink" title="ä»€ä¹ˆæ˜¯RxJava"></a>ä»€ä¹ˆæ˜¯RxJava</h2><p>å®ç°å¼‚æ­¥æ“ä½œçš„åº“</p><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><h4 id="æ·»åŠ ä¾èµ–"><a href="#æ·»åŠ ä¾èµ–" class="headerlink" title="æ·»åŠ ä¾èµ–"></a>æ·»åŠ ä¾èµ–</h4><pre><code class="groovy">    implementation &quot;io.reactivex.rxjava2:rxjava:2.2.6&quot;    implementation &quot;io.reactivex.rxjava2:rxandroid:2.1.0&quot;</code></pre><h4 id="ä½¿ç”¨ä¸€æ¬¡è®¢é˜…å¹¶æ‰“å°å‡ºæ¥"><a href="#ä½¿ç”¨ä¸€æ¬¡è®¢é˜…å¹¶æ‰“å°å‡ºæ¥" class="headerlink" title="ä½¿ç”¨ä¸€æ¬¡è®¢é˜…å¹¶æ‰“å°å‡ºæ¥"></a>ä½¿ç”¨ä¸€æ¬¡è®¢é˜…å¹¶æ‰“å°å‡ºæ¥</h4><ul><li>éœ€è¦ Observable.fromArray æ–¹æ³•</li></ul><blockquote><p>fromArrayç”¨æ¥åˆ›å»ºä¸€ä¸ªObservableï¼ˆè¢«è§‚å¯Ÿè€…ï¼‰å¯¹è±¡ï¼Œå¯ä»¥å°†ä¸€ä¸ªæ•°ç»„è½¬åŒ–ä¸ºå¯è¢«è§‚å¯Ÿçš„åºåˆ—å¹¶ä¸”å°†å®ƒçš„æ•°æ®é€ä¸ªå‘é€ã€‚</p><p>è¿”å›å€¼ï¼šObservable</p></blockquote><ul><li>éœ€è¦ subscribe æ–¹æ³•</li></ul><blockquote><p>subscribe åªç”¨äºè¿æ¥è¢«è§‚å¯Ÿè€…å’Œè§‚å¯Ÿè€…</p></blockquote><ul><li>éœ€è¦ Consumber ç±»ä½œä¸ºå‚æ•°</li></ul><blockquote><p>å½“ä½ åªå…³å¿ƒè§‚å¯Ÿè€…çš„onNextæ–¹æ³•æ—¶å¯ä»¥ä½¿ç”¨Consumerç±»</p></blockquote><ul><li>éœ€è¦ Subscriber.onNext() æ–¹æ³•</li></ul><blockquote><p>è¢«è§‚å¯Ÿè€…æ‰§è¡ŒSubscriber.onNext()æ–¹æ³•æ—¶ä¼šåœ¨ è§‚å¯Ÿè€… è®¢é˜…æ—¶å¤å†™è¯¥æ–¹æ³•æ¥è¿›è¡Œå‘é€æ•°æ®</p></blockquote><p>å¯åŠ¨å®ƒå³å¯</p><pre><code class="kotlin">        Observable.fromArray(&quot;Ted&quot;, &quot;Ryan&quot;, &quot;Billy&quot;)            .subscribe { onNext -&gt; println(&quot;name: $onNext&quot;) </code></pre><p>è§‚å¯Ÿè€…æ‰“å°äº†å­—ç¬¦</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200824012835.png" alt=""></p><p><a href="https://www.youtube.com/watch?v=v7drKJyxo10&list=PL8g0JDLEKun5cDCSkiLkZ1t4r0kE4j0sV" target="_blank" rel="noopener">Android Kotlin - RxJava Intro</a></p><h4 id="åˆ·æ–°ä¸€æ¬¡ç•Œé¢æ§ä»¶"><a href="#åˆ·æ–°ä¸€æ¬¡ç•Œé¢æ§ä»¶" class="headerlink" title="åˆ·æ–°ä¸€æ¬¡ç•Œé¢æ§ä»¶"></a>åˆ·æ–°ä¸€æ¬¡ç•Œé¢æ§ä»¶</h4><ul><li>éœ€è¦ Obserbable.subscribeOn()</li></ul><blockquote><p>æŒ‡å®šObservableï¼ˆè¢«è§‚å¯Ÿè€…ï¼‰è‡ªèº«åœ¨å“ªä¸ªè°ƒåº¦å™¨ä¸Šæ‰§è¡Œ</p></blockquote><ul><li>éœ€è¦ Schedule() çº¿ç¨‹æ§åˆ¶å™¨</li></ul><blockquote><p>ä½œç”¨ï¼šæŒ‡å®šæ¯ä¸€æ®µä»£ç åœ¨ä»€ä¹ˆæ ·çš„çº¿ç¨‹ä¸­æ‰§è¡Œ</p></blockquote><ul><li>éœ€è¦ filer() è¿‡æ»¤æ“ä½œç¬¦å·</li></ul><blockquote><p>ä½œç”¨ï¼šè¾“å‡ºè¿‡æ»¤æ¡ä»¶åçš„ç»“æœé¡¹ã€‚</p></blockquote><ul><li>éœ€è¦ Obserbable.observeOn() æ–¹æ³•</li></ul><blockquote><p>æŒ‡å®š Subscribe æ‰€è¿è¡Œåœ¨çš„çº¿ç¨‹ã€‚æˆ–è€…äº‹ä»¶æ¶ˆè´¹çš„çº¿ç¨‹ã€‚</p><p>æŒ‡å®šä¸€ä¸ªè§‚å¯Ÿè€…åœ¨å“ªä¸ªè°ƒåº¦å™¨ä¸Šè§‚å¯Ÿè¿™ä¸ªObservableã€‚</p><p><strong>observeOn()å¯ä»¥å¤šæ¬¡ä½¿ç”¨ï¼Œå¯ä»¥éšæ„å˜æ¢çº¿ç¨‹</strong>ã€‚</p></blockquote><ul><li>ä½¿ç”¨ AndroidSchedulers.mainThread() æ–¹æ³•</li></ul><blockquote><p>åˆ‡æ¢è‡³ä¸»çº¿ç¨‹</p></blockquote><pre><code class="kotlin">        Observable.fromArray(&quot;Ted&quot;, &quot;Ryan&quot;, &quot;Billy&quot;)            .subscribeOn(Schedulers.newThread())            .filter { item -&gt; item == &quot;Ted&quot; }            .observeOn(AndroidSchedulers.mainThread())            .subscribe { onNext -&gt; textView.text = onNext }</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200825112654.png" alt=""></p><h4 id="æ‰§è¡Œä¸€æ¬¡ç½‘ç»œè®¿é—®"><a href="#æ‰§è¡Œä¸€æ¬¡ç½‘ç»œè®¿é—®" class="headerlink" title="æ‰§è¡Œä¸€æ¬¡ç½‘ç»œè®¿é—®"></a>æ‰§è¡Œä¸€æ¬¡ç½‘ç»œè®¿é—®</h4><ul><li>ä½¿ç”¨ Observable.create() æ–¹æ³•</li></ul><blockquote><p>ä½œç”¨ï¼šåˆ›å»ºä¸€ä¸ªè¢«è§‚å¯Ÿè€…ã€‚</p><p>å¯ä»¥é€šè¿‡æ³›å‹<String>æŒ‡å®šå‘é€æ•°æ®çš„ç±»å‹</p><p>å‚æ•°ï¼šå¤å†™ ObservableOnSubscribe ç±»å‹ï¼Œå½“è¢«è§‚å¯Ÿè€…è¢«è®¢é˜…æ—¶ä¼šæ‰§è¡Œ subscribe() ä¸­çš„äº‹ä»¶ã€‚</p></blockquote><ul><li>éœ€è¦ onError() æ–¹æ³•</li></ul><blockquote><p>è¢«è§‚å¯Ÿè€…æ‰§è¡ŒSubscriber.onError()æ–¹æ³•æ—¶ä¼šåœ¨ è§‚å¯Ÿè€… è®¢é˜…æ—¶å¤å†™è¯¥æ–¹æ³•æ¥è¿›è¡Œå‘é€æ•°æ®</p><p>å‚æ•°ï¼š å‘é€çš„æ³›å‹æ•°æ®ç±»å‹</p></blockquote><ul><li>éœ€è¦ onComplate() æ–¹æ³•</li></ul><blockquote><p>è¢«è§‚å¯Ÿè€…æ‰§è¡ŒSubscriber.onComplate()æ–¹æ³•æ—¶ä¼šåœ¨ è§‚å¯Ÿè€… è®¢é˜…æ—¶å¤å†™è¯¥æ–¹æ³•æ¥è¿›è¡Œå‘é€æ•°æ®</p><p>å‚æ•°ï¼š å‘é€çš„æ³›å‹æ•°æ®ç±»å‹</p></blockquote><p>åˆ›å»º æ–¹æ³• getTextFromNetwork () </p><p>åˆ›å»º Observable ï¼ˆè¢«è§‚å¯Ÿè€…ï¼‰å¤„ç†å®Œæˆåå‘é€äº‹ä»¶ï¼ŒsubscribeOn è®© subscribe åˆ°ä¸€ä¸ªæ–°çš„çº¿ç¨‹ä¸­æ‰§è¡Œï¼ŒobserveOn åˆ‡æ¢è§‚å¯Ÿè€…çš„çº¿ç¨‹åˆ°ä¸»çº¿ç¨‹åˆ·æ–°UIï¼Œå¹¶ä¸æ–­æ¥å—è¢«è§‚å¯Ÿè€…å‘é€æ¥çš„äº‹ä»¶ã€‚<strong>è¿™æ˜¯ä¸€ä¸ªå¼‚æ­¥çš„æ“ä½œã€‚</strong></p><pre><code class="kotlin">    fun getTextFromNetwork() {        val task = Observable.create&lt;String&gt; { subscriber -&gt;            try {                subscriber.onNext(&quot;ç½‘ç»œè®¿é—®&quot;)            } catch (e: Exception) {                subscriber.onError(e)            }            subscriber.onComplete()        }        task.subscribeOn(Schedulers.newThread())        task.observeOn(AndroidSchedulers.mainThread())            .subscribe { onNext -&gt; textView.text = onNext }    }</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200825210344.png" alt=""></p><p>åœ¨è°ƒç”¨ MainActivity </p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200825211048.png" alt=""></p><h4 id=""><a href="#" class="headerlink" title=""></a></h4><h2 id="è¡¥å……"><a href="#è¡¥å……" class="headerlink" title="è¡¥å……"></a>è¡¥å……</h2><h3 id="Observer-æ¥å£"><a href="#Observer-æ¥å£" class="headerlink" title="Observer æ¥å£"></a>Observer æ¥å£</h3><pre><code class="kotlin">        val observer = object: Observable&lt;String&gt;() {            //è§‚å¯Ÿè€…æ¥æ”¶äº‹ä»¶å‰ï¼Œé»˜è®¤æœ€å…ˆè°ƒç”¨å¤å†™ onSubscribe()            override fun subscribeActual(observer: Observer&lt;in String&gt;?) {                TODO(&quot;Not yet implemented&quot;)            }        }</code></pre><h3 id="Subscriber-æ¥å£"><a href="#Subscriber-æ¥å£" class="headerlink" title="Subscriber æ¥å£"></a>Subscriber æ¥å£</h3><p>Subscriber æ¥å£å¯¹ Observer æ¥å£è¿›è¡Œäº†æ‰©å±•</p><pre><code class="kotlin">        val subscribe= object : Subscriber&lt;String&gt;{            //è¢«è§‚å¯Ÿè€…è°ƒç”¨ onSubscribe æ—¶å‘é€äº‹ä»¶ï¼Œè§‚å¯Ÿè€…ä¼šè°ƒç”¨æ­¤æ–¹æ³•è¿›è¡Œå“åº”æ¥å—æ­¤äº‹ä»¶            override fun onSubscribe(s: Subscription?) {                TODO(&quot;Not yet implemented&quot;)            }            //è¢«è§‚å¯Ÿè€…è°ƒç”¨ onNext æ—¶å‘é€äº‹ä»¶ï¼Œè§‚å¯Ÿè€…ä¼šè°ƒç”¨æ­¤æ–¹æ³•è¿›è¡Œå“åº”æ¥å—æ­¤äº‹ä»¶            override fun onNext(t: String?) {                TODO(&quot;Not yet implemented&quot;)            }            //è¢«è§‚å¯Ÿè€…è°ƒç”¨ onError æ—¶å‘é€äº‹ä»¶ï¼Œè§‚å¯Ÿè€…ä¼šè°ƒç”¨æ­¤æ–¹æ³•è¿›è¡Œå“åº”æ¥å—æ­¤äº‹ä»¶            override fun onError(t: Throwable?) {                TODO(&quot;Not yet implemented&quot;)            }            //è¢«è§‚å¯Ÿè€…è°ƒç”¨ onComplete æ—¶å‘é€äº‹ä»¶ï¼Œè§‚å¯Ÿè€…ä¼šè°ƒç”¨æ­¤æ–¹æ³•è¿›è¡Œå“åº”æ¥å—æ­¤äº‹ä»¶            override fun onComplete() {                TODO(&quot;Not yet implemented&quot;)            }        }</code></pre><h3 id="Singleä¸SingleObserver"><a href="#Singleä¸SingleObserver" class="headerlink" title="Singleä¸SingleObserver"></a>Singleä¸SingleObserver</h3><p><strong>ä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨ Singleã€‚</strong></p><p>å¦‚æœä½ ä½¿ç”¨ä¸€ä¸ªå•ä¸€çš„è¿ç»­äº‹ä»¶æµï¼Œæ—¢ç„¶åªæœ‰ä¸€ä¸ªonNext()äº‹ä»¶ï¼Œæ¥ç€å°±è§¦å‘onCompleteæˆ–è€…onErrorï¼Œè¿™æ ·ä½ ä½¿ç”¨Singleã€‚</p><p><strong>Singleå…±åŒ…å«é‚£äº›</strong></p><p>ä¸€ä¸ªæ­£å¸¸å¤„ç†æˆåŠŸçš„onSuccessï¼Œå¦ä¸€ä¸ªå¤„ç†å¤±è´¥çš„onErrorï¼Œå½“ç„¶å®ƒä¹‹å‘é€ä¸€æ¬¡ä¿¡æ¯ï¼Œå…¶ä¸­Singleç±»ä¼¼äºObservableã€‚</p><p><strong>è¢«è§‚å¯Ÿè€…</strong></p><pre><code class="kotlin">        val single: Single&lt;String&gt; = Single.create&lt;String&gt;(object : SingleOnSubscribe&lt;String&gt; {            override fun subscribe(emitter: SingleEmitter&lt;String&gt;) {                emitter.onSuccess(&quot;t&quot;)                emitter.onSuccess(&quot;c&quot;)                // è¿ç»­å‘é€ä¸¤æ¬¡æ˜¯ä¸èƒ½æˆåŠŸçš„ã€‚            }        })</code></pre><p><strong>è§‚å¯Ÿè€…</strong></p><pre><code class="kotlin">        single.subscribe(object : SingleObserver&lt;String&gt; {            // åœ¨è¢«è§‚å¯Ÿè€…è°ƒç”¨ onSubscribe åï¼Œè§‚å¯Ÿè€…å›è°ƒåˆ°è¿™é‡Œã€‚            override fun onSubscribe(d: Disposable) {            }            // åœ¨è¢«è§‚å¯Ÿè€…è°ƒç”¨ onSuccess åï¼Œè§‚å¯Ÿè€…å›è°ƒåˆ°è¿™é‡Œã€‚            override fun onSuccess(t: String) {                tv.text = t            }            // åœ¨è¢«è§‚å¯Ÿè€…è°ƒç”¨ onError åï¼Œè§‚å¯Ÿè€…å›è°ƒåˆ°è¿™é‡Œã€‚            override fun onError(e: Throwable) {            }        })</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/2020-10-10-0.gif" alt="å¹¶æ²¡æœ‰æŒ‰ç…§é¢„æœŸå˜æˆâ€œcâ€"></p><p>æ‰€æœ‰ singleåªé€‚åˆå•æ¬¡äº‹ä»¶æµã€‚</p><h2 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h2><p>RxJava æ˜¯åŸºäº<strong>äº‹ä»¶æµçš„ã€å®ç°å¼‚æ­¥æ“ä½œçš„åº“</strong></p><h2 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h2><p>å®ç°å¼‚æ­¥æ“ä½œ</p><h4 id="ä»€ä¹ˆæ˜¯åŒæ­¥"><a href="#ä»€ä¹ˆæ˜¯åŒæ­¥" class="headerlink" title="ä»€ä¹ˆæ˜¯åŒæ­¥"></a>ä»€ä¹ˆæ˜¯åŒæ­¥</h4><p>åœ¨æ‰§è¡ŒåŠŸèƒ½å‰å¿…é¡»ä¸€ä»¶ä¸€ä»¶åšå®Œæ‰èƒ½è¿›è¡Œä¸‹ä¸€æ­¥ã€‚</p><h4 id="ä»€ä¹ˆæ˜¯å¼‚æ­¥"><a href="#ä»€ä¹ˆæ˜¯å¼‚æ­¥" class="headerlink" title="ä»€ä¹ˆæ˜¯å¼‚æ­¥"></a>ä»€ä¹ˆæ˜¯å¼‚æ­¥</h4><p>ä¸åŒæ­¥æ˜¯ç›¸å¯¹çš„ï¼Œåœ¨æˆ‘ä»¬æ‰§è¡Œå®ŒæŸä¸ªåŠŸèƒ½ä¹‹åï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦ç«‹åˆ»å¾—åˆ°ç»“æœï¼Œæˆ‘ä»¬å¯ä»¥æ­£ç¡®çš„åšå…¶ä»–çš„æ“ä½œï¼Œè¿™ä¸ªåŠŸèƒ½å¯ä»¥åœ¨å®Œæˆåé€šçŸ¥æˆ–è€…å›è°ƒå‘Šè¯‰æˆ‘ä»¬ï¼›</p><p>ä¾‹å¦‚ï¼šåå°ä¸‹è½½çš„ä¾‹å­ä¸­ï¼Œåœ¨æ‰§è¡Œä¸‹è½½åŠŸèƒ½åï¼Œæˆ‘ä»¬æ— éœ€å…³å¿ƒå®ƒçš„ä¸‹è½½è¿‡ç¨‹ï¼Œåœ¨å®ƒä¸‹è½½å®Œæ¯•ä¹‹åé€šçŸ¥æˆ‘ä»¬å°±å¯ä»¥äº†ã€‚</p><h2 id="è§‚å¯Ÿè€…æ¨¡å¼"><a href="#è§‚å¯Ÿè€…æ¨¡å¼" class="headerlink" title="è§‚å¯Ÿè€…æ¨¡å¼"></a>è§‚å¯Ÿè€…æ¨¡å¼</h2><p><a href="https://www.runoob.com/design-pattern/observer-pattern.html" target="_blank" rel="noopener">è§‚å¯Ÿè€…æ¨¡å¼</a></p><p>å½“å¯¹è±¡é—´å­˜åœ¨ä¸€å¯¹å¤šçš„å…³ç³»æ—¶ï¼Œåˆ™ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserver Pattermï¼‰ã€‚    ä¾‹å¦‚ï¼šå½“å‰å¯¹è±¡è¢«ä¿®æ”¹æ—¶è¿™ä¼šé€šçŸ¥ä¾èµ–å®ƒçš„å¯¹è±¡ã€‚è§‚å¯Ÿè€…æ¨¡å¼å±äºè¡Œä¸ºå‹æ¨¡å¼ã€‚</p><h3 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><p><strong>æ„å›¾</strong>:å®šä¹‰å¯¹è±¡ä¹‹é—´çš„ä¸€ç§å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½å¾—åˆ°é€šçŸ¥å¹¶ä¸”è¢«è‡ªåŠ¨æ›´æ–°ã€‚</p><p><strong>ä¸»è¦è§£å†³</strong>:ä¸€ä¸ªå¯¹è±¡çŠ¶æ€æ”¹å˜ç»™å…¶ä»–å¯¹è±¡é€šçŸ¥çš„é—®é¢˜ï¼Œè€Œä¸”è¦è€ƒè™‘åˆ°æ˜“ç”¨æ€§å’Œä½è€¦åˆï¼Œä¿è¯é«˜åº¦çš„åä½œã€‚</p><p><strong>ä½•æ—¶ä½¿ç”¨</strong>:ä¸€ä¸ªå¯¹è±¡ï¼ˆç›®æ ‡å¯¹è±¡ï¼‰çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜ï¼Œæ‰€æœ‰çš„ä¾èµ–å¯¹è±¡ï¼ˆè§‚å¯Ÿè€…å¯¹è±¡)éƒ½å°†å¾—åˆ°é€šçŸ¥ï¼Œè¿›è¡Œå¹¿æ’­é€šçŸ¥ã€‚</p><p>å¦‚ä½•è§£å†³å½“å¯¹è±¡é—´å­˜åœ¨ä¸€å¯¹å¤šå…³ç³»æ—¶ï¼Œåˆ™ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserver Patternï¼‰ã€‚æ¯”å¦‚ï¼Œå½“ä¸€ä¸ªå¯¹è±¡è¢«ä¿®æ”¹æ—¶ï¼Œåˆ™ä¼šè‡ªåŠ¨é€šçŸ¥ä¾èµ–å®ƒçš„å¯¹è±¡ã€‚è§‚å¯Ÿè€…æ¨¡å¼å±äºè¡Œä¸ºå‹æ¨¡å¼ã€‚</p><p><strong>å¦‚ä½•è§£å†³</strong>ï¼šä½¿ç”¨é¢å‘å¯¹è±¡æŠ€æœ¯ï¼Œå¯ä»¥å°†è¿™ç§å…³ç³»å¼±åŒ–ã€‚</p><p><strong>å…³é”®ä»£ç </strong>ï¼šåœ¨æŠ½è±¡ç±»ä¸­æœ‰ä¸€ä¸ªArrayListå­˜æ”¾è§‚å¯Ÿè€…ã€‚</p><p><strong>åº”ç”¨å®ä¾‹</strong>ï¼š</p><ol><li>æ‹å–æ—¶ï¼Œæ‹å–å¸ˆè§‚å¯Ÿæœ€é«˜æ ‡ä»·ï¼Œç„¶åé€šçŸ¥å…¶ä»–ç«ä»·è€…ç«ä»·ã€‚</li><li>è©è¨é€šè¿‡æ´’æ°´æ‹›æ¥è€ä¹Œé¾Ÿï¼Œè€ä¹Œé¾Ÿå°±æ˜¯è§‚å¯Ÿè€…ï¼Œè§‚å¯Ÿè©è¨çš„æ´’æ°´åŠ¨ä½œ</li></ol><p><strong>ä¼˜ç‚¹</strong>ï¼š</p><ol><li>è§‚å¯Ÿè€…å’Œè¢«è§‚å¯Ÿè€…æ˜¯æŠ½è±¡è€¦åˆçš„ã€‚</li><li>å»ºç«‹ä¸€å¥—è§¦å‘æœºåˆ¶</li></ol><p><strong>ç¼ºç‚¹</strong>ï¼š</p><ol><li>å¦‚æœä¸€ä¸ªè¢«è§‚å¯Ÿè€…å¯¹è±¡æœ‰å¾ˆå¤šç›´æ¥å’Œé—´æ¥çš„è§‚å¯Ÿè€…çš„è¯ï¼Œå°†æ‰€æœ‰çš„è§‚å¯Ÿè€…éƒ½é€šçŸ¥åˆ°ä¼šèŠ±è´¹å¾ˆå¤šæ—¶é—´ã€‚</li><li>å¦‚æœè§‚å¯Ÿè€…å’Œè§‚å¯Ÿç›®æ ‡ä¹‹é—´æœ‰å¾ªç¯ä¾èµ–çš„è¯ï¼Œè§‚å¯Ÿç›®æ ‡ä¼šè§¦å‘å®ƒä»¬ä¹‹é—´è¿›è¡Œå¾ªç¯è°ƒç”¨ï¼Œå¯èƒ½å¯¼è‡´ç³»ç»Ÿå´©æºƒã€‚</li><li>è§‚å¯Ÿè€…æ¨¡å¼æ²¡æœ‰ç›¸åº”çš„æœºåˆ¶è®©è§‚å¯Ÿè€…çŸ¥é“æ‰€è§‚å¯Ÿçš„ç›®æ ‡å¯¹è±¡æ˜¯æ€ä¹ˆå‘ç”Ÿå˜åŒ–çš„ï¼Œè€Œä»…ä»…çŸ¥é“è§‚å¯Ÿç›®æ ‡å‘é€å˜åŒ–ã€‚</li></ol><p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š</p><p>ä¸€ä¸ªæŠ½è±¡æ¨¡å‹æœ‰ä¸¤ä¸ªæ–¹é¢ï¼Œå…¶ä¸­ä¸€ä¸ªæ–¹é¢ä¾èµ–äºå¦ä¸€ä¸ªæ–¹é¢ã€‚å°†è¿™äº›æ–¹é¢å°è£…åˆ°ç‹¬ç«‹çš„å¯¹è±¡ä¸­ä½¿å®ƒä»¬å¯ä»¥å„è‡ªç‹¬ç«‹çš„æ”¹å˜å’Œå¤ç”¨ã€‚</p><p>ä¸€ä¸ªå¯¹è±¡çš„æ”¹å˜å°†å¯¼è‡´ä¸€ä¸ªæˆ–å¤šä¸ªå¯¹è±¡ä¹Ÿå‘ç”Ÿæ”¹å˜ï¼Œè€Œä¸çŸ¥é“æœ‰å¤šå°‘å¯¹è±¡æ”¹å˜ï¼Œå¯ä»¥é™ä½å¯¹è±¡ä¹‹é—´çš„è€¦åˆåº¦ã€‚</p><p>ä¸€ä¸ªå¯¹è±¡å¿…é¡»é€šçŸ¥å…¶ä»–å¯¹è±¡ï¼Œè€Œä¸çŸ¥é“è¿™ä¸ªå¯¹è±¡æ—¶è°ã€‚</p><p>éœ€è¦åœ¨ç³»ç»Ÿä¸­åˆ›å»ºä¸€ä¸ªè§¦å‘é“¾ï¼ŒAå¯¹è±¡çš„è¡Œä¸ºå°†å½±å“Bå¯¹è±¡ï¼ŒBå¯¹è±¡çš„è¡Œä¸ºå°†å½±å“Cå¯¹è±¡â€¦â€¦ã€‚å¯ä»¥ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼åˆ›å»ºä¸€ç§é“¾å¼è§¦å‘æœºåˆ¶ã€‚</p><h3 id="è°æ˜¯è§‚å¯Ÿè€…è°æ˜¯è¢«è§‚å¯Ÿè€…ï¼Ÿ"><a href="#è°æ˜¯è§‚å¯Ÿè€…è°æ˜¯è¢«è§‚å¯Ÿè€…ï¼Ÿ" class="headerlink" title="è°æ˜¯è§‚å¯Ÿè€…è°æ˜¯è¢«è§‚å¯Ÿè€…ï¼Ÿ"></a>è°æ˜¯è§‚å¯Ÿè€…è°æ˜¯è¢«è§‚å¯Ÿè€…ï¼Ÿ</h3><p>å½“ä½ åšå‡ºäº†æŸäº›åŠ¨ä½œå¦ä¸€ä¸ªäººæ ¹æ®ä½ çš„åŠ¨ä½œåšå‡ºæŸäº›è¡Œä¸ºï¼Œè¿™æ—¶ä½ å°±æ˜¯è¢«è§‚å¯Ÿè€…ï¼Œå¦ä¸€ä¸ªäººæ˜¯è§‚å¯Ÿè€…ã€‚</p><h2 id="è®¢é˜…-å‘å¸ƒæ¨¡å¼"><a href="#è®¢é˜…-å‘å¸ƒæ¨¡å¼" class="headerlink" title="è®¢é˜…-å‘å¸ƒæ¨¡å¼"></a>è®¢é˜…-å‘å¸ƒæ¨¡å¼</h2><p>è®¢é˜…-å‘å¸ƒæ¨¡å¼æ˜¯è§‚å¯Ÿè€…æ¨¡å¼çš„å¦ä¸€ä¸ªåˆ«ç§°ã€‚</p><p>ä½†æ˜¯éšç€æ—¶é—´çš„å˜åŒ–ï¼Œå·²ç»ç‹¬ç«‹äºè§‚å¯Ÿè€…æ¨¡å¼ï¼Œæˆä¸ºå¦ä¸€ç§çš„è®¾è®¡æ¨¡å¼ã€‚</p><p>åœ¨ç°åœ¨çš„å‘å¸ƒè®¢é˜…æ¨¡å¼ä¸­ï¼Œæˆä¸ºå‘å¸ƒè€…çš„æ¶ˆæ¯å‘é€è€…ä¸ä¼šå°†ä¿¡æ¯ç›´æ¥å‘é€ç»™è®¢é˜…è€…ï¼Œè¿™æ„å‘³è¿™å‘å¸ƒè€…å’Œè®¢é˜…è€…ä¸çŸ¥é“å½¼æ­¤çš„å­˜åœ¨ã€‚åœ¨å‘å¸ƒè€…å’Œè®¢é˜…è€…ä¹‹é—´å­˜åœ¨ç¬¬ä¸‰ä¸ªç»„ä»¶ï¼Œç§°ä¸ºè°ƒåº¦ä¸­å¿ƒæˆ–äº‹ä»¶é€šé“ï¼Œå®ƒç»´æŒç€å‘å¸ƒè€…å’Œè®¢é˜…è€…ä¹‹é—´çš„è”ç³»ï¼Œè¿‡æ»¤æ‰€æœ‰å‘å¸ƒè€…ä¼ å…¥çš„ä¿¡æ¯å¹¶ç›¸åº”çš„åˆ†å‘ç»™å®ƒçš„è®¢é˜…è€…ã€‚</p><p>ä¾‹å­ï¼š</p><p>ä½ åœ¨å¾®åšå…³æ³¨äº†Aï¼ŒåŒæ—¶å…¶ä»–å¾ˆå¤šäººä¹Ÿå…³æ³¨äº†Aï¼Œé‚£ä¹ˆå½“Aå‘å¸ƒåŠ¨æ€çš„æ—¶å€™ï¼Œå¾®åšå°±ä¼šä¸ºä½ æ¨é€è¿™æ¡åŠ¨æ€ã€‚Aå°±æ˜¯å‘å¸ƒè€…ï¼Œä½ æ˜¯è®¢é˜…è€…ï¼Œå¾®åšå°±æ˜¯è°ƒåº¦ä¸­å¿ƒï¼Œä½ å’ŒAä¹‹é—´æ²¡æœ‰ç›´æ¥çš„æ¶ˆæ¯å¾€æ¥ï¼Œå…¨æ˜¯é€šè¿‡å¾®åšæ¥åè°ƒçš„ã€‚</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/2020-8-3-1.gif" alt="å¦‚æœæœ‰äº›æ–¹æ³•æ²¡æœ‰è¯¦ç»†è¯´æ˜ä½ å¯ä»¥è‡ªè¡Œæœç´¢æŸ¥çœ‹"></p><p><strong>å¼•ç”¨ï¼š</strong></p><p><a href="(https://www.cnblogs.com/onepixel/p/10806891.html)">è§‚å¯Ÿè€…æ¨¡å¼ä¸è®¢é˜…å‘å¸ƒæ¨¡å¼çš„åŒºåˆ«</a></p><p><a href="https://maxwell-nc.github.io/android/rxjava2-1.html#Single%E5%92%8CSingleObserver" target="_blank" rel="noopener"><strong>RxJava 2.x ä½¿ç”¨è¯¦è§£(ä¸€) å¿«é€Ÿå…¥é—¨</strong></a></p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> RxJava </tag>
            
            <tag> è½¯ä»¶å·¥ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>koinä¾èµ–æ³¨å…¥æ¡†æ¶</title>
      <link href="/2020/08/13/%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5-koin/"/>
      <url>/2020/08/13/%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5-koin/</url>
      
        <content type="html"><![CDATA[<h2 id="koinçš„ä½¿ç”¨"><a href="#koinçš„ä½¿ç”¨" class="headerlink" title="koinçš„ä½¿ç”¨"></a>koinçš„ä½¿ç”¨</h2><p><a href="https://www.youtube.com/watch?v=eH9UrAwKEcE&t=140s" target="_blank" rel="noopener">Dependency Injection with Koin - Android Kotlin tutorial</a></p><p><a href="https://github.com/AndyJennifer/koin_doc_zh" target="_blank" rel="noopener">koin ä¸­æ–‡ DOC</a></p><h4 id="æ·»åŠ ä¾èµ–åº“"><a href="#æ·»åŠ ä¾èµ–åº“" class="headerlink" title="æ·»åŠ ä¾èµ–åº“"></a>æ·»åŠ ä¾èµ–åº“</h4><pre><code>    implementation &#39;org.koin:koin-androidx-viewmodel:2.0.1&#39;    implementation &#39;org.koin:koin-android:2.0.1&#39;</code></pre><h4 id="éœ€è¦åˆ›å»ºä¾èµ–å¯¹è±¡"><a href="#éœ€è¦åˆ›å»ºä¾èµ–å¯¹è±¡" class="headerlink" title="éœ€è¦åˆ›å»ºä¾èµ–å¯¹è±¡"></a>éœ€è¦åˆ›å»ºä¾èµ–å¯¹è±¡</h4><p>è¿™é‡Œåˆ›å»ºä¸‰ä¸ªç±»ï¼ŒStudentï¼ŒSchoolCourseï¼ŒFriendã€‚</p><ul><li>Studentç±»</li></ul><blockquote><p>ä¾èµ–äºSchoolCourseï¼ŒFriendç±»çš„æ–¹æ³•ã€‚</p></blockquote><pre><code class="kotlin">class Student(val course: SchoolCourse,val friend: Friend) {    fun beSmart() {        course.study()        friend.hangout()    }}</code></pre><ul><li>SchoolCourseç±»</li></ul><blockquote><p>æä¾›æ–¹æ³• study è´Ÿè´£æ‰“å° â€œI am studyingâ€</p></blockquote><pre><code>class SchoolCourse {    fun study() {        println(&quot;I am studying&quot;)    }}</code></pre><ul><li>Friend ç±»</li></ul><blockquote><p>æä¾›æ–¹æ³• hangout è´Ÿè´£æ‰“å° â€œWeâ€™re hanging outâ€</p></blockquote><pre><code>class Friend {    fun hangout() {        println(&quot;We&#39;re hanging out&quot;)    }}</code></pre><h4 id="å®šä¹‰ä¾èµ–é›†åˆ"><a href="#å®šä¹‰ä¾èµ–é›†åˆ" class="headerlink" title="å®šä¹‰ä¾èµ–é›†åˆ"></a>å®šä¹‰ä¾èµ–é›†åˆ</h4><p>åˆ›å»º Modeles æ–‡ä»¶ </p><ul><li>éœ€è¦ä½¿ç”¨ module æ–¹æ³•</li></ul><blockquote><p>æä¾›æ‰€éœ€è¦çš„ä¾èµ–</p></blockquote><ul><li>éœ€è¦ signle æ–¹æ³•</li></ul><blockquote><p>ä½¿å½“å‰ä¾èµ–ä¸ºä¸€ä¸ªå•ä¾‹çš„å¯¹è±¡</p></blockquote><ul><li>éœ€è¦ factory æ–¹æ³•</li></ul><blockquote><p>å®šä¹‰ä¸€ä¸ªå·¥åœºæ¯æ¬¡è°ƒç”¨åˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹</p></blockquote><ul><li>éœ€è¦ get() æ–¹æ³•</li></ul><blockquote><p>get ç”¨äºæœ€ç»ˆå®ç°æ³¨å…¥</p></blockquote><pre><code>val appModule: Module = module {    single { SchoolCourse() }    factory { Friend() }    factory { Student(get(), get()) }}</code></pre><h4 id="å¯åŠ¨-Koin"><a href="#å¯åŠ¨-Koin" class="headerlink" title="å¯åŠ¨ Koin"></a>å¯åŠ¨ Koin</h4><ul><li><p>éœ€è¦ç³»ç»Ÿåœ¨åˆ›å»ºæ—¶ç¬¬ä¸€ä¸ªå¯åŠ¨Applicationå®ä¾‹</p><blockquote><p>ä¿®æ”¹ application ä¸­çš„ name å±æ€§ ä½¿å¾—åº”ç”¨ç¬¬ä¸€ä¸ªå¯åŠ¨å®ƒ</p></blockquote></li></ul><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200813224142.png" alt=""></p><ul><li>éœ€è¦åˆ›å»º MyApp</li></ul><blockquote><p>ç¬¬ä¸€ä¸ªå¯åŠ¨çš„Applicationå®ä¾‹</p></blockquote><ul><li>éœ€è¦ startKoin</li></ul><blockquote><p>ç”¨æ¥å¯åŠ¨Koin</p></blockquote><ul><li>éœ€è¦ modules</li></ul><blockquote><p>æ³¨å†Œå£°æ˜çš„Module</p></blockquote><ul><li>éœ€è¦ androidContext</li></ul><blockquote><p>å‘Koinä¸­æ³¨å…¥context</p></blockquote><pre><code>class MyApp : Application() {    override fun onCreate() {        super.onCreate()        startKoin {            androidContext(this@MyApp)            modules(listOf(appModule))        }    }}</code></pre><h4 id="ä½¿ç”¨-koin-å®ç°æ³¨å…¥"><a href="#ä½¿ç”¨-koin-å®ç°æ³¨å…¥" class="headerlink" title="ä½¿ç”¨ koin å®ç°æ³¨å…¥"></a>ä½¿ç”¨ koin å®ç°æ³¨å…¥</h4><p>åœ¨éœ€è¦æ³¨å…¥çš„åœ°æ–¹ä½¿ç”¨</p><ul><li>éœ€è¦ä½¿ç”¨ get()</li></ul><blockquote><p>é æ‡’åŠ è½½ï¼Œæ³¨å…¥å®ä¾‹</p></blockquote><p>é€šè¿‡ æ³¨å…¥ä¾èµ–å®Œæˆåçš„å®ä¾‹è°ƒç”¨beSmart()æ–¹æ³•</p><pre><code>        val student = get&lt;Student&gt;()        student.beSmart()        val student2 = get&lt;Student&gt;()        student2.beSmart()</code></pre><h4 id="å®Œæˆæ³¨å…¥"><a href="#å®Œæˆæ³¨å…¥" class="headerlink" title="å®Œæˆæ³¨å…¥"></a>å®Œæˆæ³¨å…¥</h4><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/image-20200813233756977.png" alt=""></p><h4 id="ä»€ä¹ˆæ˜¯-koinï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-koinï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ koinï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ koinï¼Ÿ</h4><p>ä¸€ä¸ªè½»é‡çº§çš„ä¾èµ–æ³¨å…¥ç»„ä»¶ã€‚</p><h2 id="è¡¥å……"><a href="#è¡¥å……" class="headerlink" title="è¡¥å……"></a>è¡¥å……</h2><p><a href="https://zhuanlan.zhihu.com/p/188485918" target="_blank" rel="noopener">Koin in Android: æ›´ç®€å•çš„ä¾èµ–æ³¨å…¥</a></p><h4 id="Get"><a href="#Get" class="headerlink" title="Get"></a>Get</h4><p>get()ç”¨äºå®ç°æ³¨å…¥ã€‚</p><p>å½“ä½ æ‰€å±ç±»å‹ä¸ç¡®å®šæ—¶ï¼Œå¯ä»¥æŒ‡å®šç±»å‹ã€‚get<Type>()</p><h4 id="å£°æ˜ï¼šç»‘å®šä¸€ä¸ªæ¥å£"><a href="#å£°æ˜ï¼šç»‘å®šä¸€ä¸ªæ¥å£" class="headerlink" title="å£°æ˜ï¼šç»‘å®šä¸€ä¸ªæ¥å£"></a>å£°æ˜ï¼šç»‘å®šä¸€ä¸ªæ¥å£</h4><p>ä¸€ä¸ª  single æˆ–è€… factory å£°æ˜å°†ä¼šä½¿ç”¨å…¶ç»™å®šçš„ lambda è¡¨è¾¾å¼ç±»å‹ã€‚æ¯”å¦‚ single{T}ï¼Œè¯¥å£°æ˜æ‰€åŒ¹é…çš„ç±»å‹å°±æ˜¯è¡¨è¾¾å¼æ‰€å£°æ˜çš„ç±»å‹ T è®©æˆ‘ä»¬ä»¥ä¸€ä¸ªç±»åŠå…¶å®ç°çš„æ¥å£ä¸ºä¾‹ï¼š</p><pre><code class="java">// Service interfaceinterface Service{    fun doSomething()}// Service Implementationclass ServiceImp() : Service {    fun doSomething() { ... }}</code></pre><p>åœ¨koinæ¨¡å—(module)ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Kotilnä¸‹çš„ as æ“ä½œç¬¦ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code class="java">val myModule = module {    // åªåŒ¹é… Service ç±»å‹    single { ServiceImp() }    // åªåŒ¹é… Service ç±»å‹    single { ServiceImp() as Service }}</code></pre><p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨æ¨æ–­ç±»å‹è¡¨è¾¾å¼</p><pre><code class="java">val myModule = module {    // åªåŒ¹é… Service ç±»å‹    single { ServiceImp() }    // åªåŒ¹é… Service ç±»å‹    single&lt;Service&gt; { ServiceImp() }}</code></pre><p>ç¬¬äºŒç§é£æ ¼æ˜¯é¦–é€‰çš„ï¼Œåœ¨æ¥ä¸‹æ¥çš„æ–‡æ¡£ä¸­ï¼Œä¹Ÿä¼šä½¿ç”¨è¯¥æ–¹æ³•ã€‚</p><h4 id="Bind"><a href="#Bind" class="headerlink" title="Bind"></a>Bind</h4><ul><li><p><code>bind()</code> - ä¸ºç»™å®šçš„å¯¹è±¡å£°æ˜æ·»åŠ è¦ç»‘å®šçš„ç±»å‹</p><p>Bind æ˜¯ä¸€ä¸ªä¸­è¾å‡½æ•°ï¼Œå¯ä»¥ç”¨äºæŠŠä¸€ä¸ªServiceå…³è”åˆ°å¤šä¸ªç±»ã€‚ä¾‹å¦‚ç°åœ¨æœ‰ä¸¤ä¸ªæ¥å£ï¼šToolï¼ŒFlammableï¼ŒStoveå®ç°äº†è¿™ä¸¤ä¸ªæ¥å£ã€‚æ˜¾ç„¶å¦‚æœåªå®šä¹‰1ä¸ªServiceæ˜¯ä¸èƒ½åŒæ—¶æ³¨å…¥Stoveå’Œè¿™ä¸¤ä¸ªæ¥å£çš„ã€‚</p><p>è¿™æ˜¯å°±å¯ä»¥å‘æŒ¥Bindçš„ä½œç”¨äº†</p><pre><code>val myModule = module{    factory { Stove() } bind Tool::class bind Flammable::class // &lt;- here!    factory { Chef(get()) }}</code></pre><p>è¿™ä¹ˆä¸€æ¥ï¼Œä¸‹é¢çš„ä¸‰ä¸ªæ³¨å…¥éƒ½æ˜¯åˆæ³•çš„ï¼Œå¹¶éƒ½ä¼šå¾—åˆ°ä¸€ä¸ª Stove å®ä¾‹ï¼š</p><pre><code>val chef: Chef = get()val tool:Tool = get()val flammable:Flammable = get()</code></pre></li></ul><h4 id="named"><a href="#named" class="headerlink" title="named"></a>named</h4><p>é™å®šç¬¦ï¼Œç”¨æ¥åŒºåˆ«åŒä¸€ä¸ªç±»çš„ä¸åŒå®ä¾‹</p><p>ä½¿ç”¨</p><pre><code class="java"> single(named(&quot;dev&quot;)) { DataRepository() } single(named(&quot;test&quot;)) { DataRepository() }</code></pre><h4 id="name-å±æ€§"><a href="#name-å±æ€§" class="headerlink" title="name å±æ€§"></a>name å±æ€§</h4><p>å¯é€šè¿‡nameæˆ–è€…classæ£€ç´¢åˆ°å¯¹åº”çš„å®ä¾‹</p><p>ä½¿ç”¨</p><pre><code class="kotlin">    factory(name = MAIN) {        AndroidSchedulers.mainThread()    }</code></pre><h2 id="ä¾èµ–æ³¨å…¥å’Œæ§åˆ¶åè½¬"><a href="#ä¾èµ–æ³¨å…¥å’Œæ§åˆ¶åè½¬" class="headerlink" title="ä¾èµ–æ³¨å…¥å’Œæ§åˆ¶åè½¬"></a>ä¾èµ–æ³¨å…¥å’Œæ§åˆ¶åè½¬</h2><h3 id="ä¾èµ–æ³¨å…¥ï¼ˆDependency-Injectionï¼Œç®€ç§°-DIï¼‰"><a href="#ä¾èµ–æ³¨å…¥ï¼ˆDependency-Injectionï¼Œç®€ç§°-DIï¼‰" class="headerlink" title="ä¾èµ–æ³¨å…¥ï¼ˆDependency  Injectionï¼Œç®€ç§° DIï¼‰"></a>ä¾èµ–æ³¨å…¥ï¼ˆDependency  Injectionï¼Œç®€ç§° DIï¼‰</h3><p>ä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥ï¼Ÿ</p><p>å‡è®¾ A æ˜¯ è€³æœºï¼ŒB æ˜¯æ’­æ”¾å™¨ã€‚</p><p>å½“ A ä¾èµ– B æ—¶ï¼ˆä¹Ÿå°±æ˜¯è€³æœºæƒ³è¦æ’­æ”¾ä»¥éŸ³ä¹æ—¶ï¼‰ï¼ŒA è¦æƒ³æ’­æ”¾éŸ³ä¹å°±å¿…é¡»è¦æœ‰Bçš„å®ä¾‹ï¼Œä¹Ÿå°±æ˜¯</p><ol><li>é€šè¿‡Açš„æ¥å£ï¼ŒæŠŠBä¼ å…¥ï¼›</li><li>é€šè¿‡Açš„æ„é€ ï¼ŒæŠŠBä¼ å…¥ï¼›</li><li>é€šè¿‡å°±è¯¥Açš„å±æ€§ï¼ŒæŠŠBä¼ å…¥ï¼›</li></ol><p>è¿™äº›è¿‡ç¨‹å«åš<strong>ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰</strong></p><h3 id="æ§åˆ¶åè½¬ï¼ˆInversion-of-Controlï¼Œç®€ç§°-Iocï¼‰"><a href="#æ§åˆ¶åè½¬ï¼ˆInversion-of-Controlï¼Œç®€ç§°-Iocï¼‰" class="headerlink" title="æ§åˆ¶åè½¬ï¼ˆInversion of Controlï¼Œç®€ç§° Iocï¼‰"></a>æ§åˆ¶åè½¬ï¼ˆInversion of Controlï¼Œç®€ç§° Iocï¼‰</h3><p>ä½†æ˜¯ A å¹¶ä¸èƒ½æ§åˆ¶ B ä½•æ—¶æ’­æ”¾(åˆ›å»º)æˆ–è€…å…³é—­(é”€æ¯)ï¼Œä»…ä½¿ç”¨ B ï¼Œé‚£ä¹ˆ B çš„æ§åˆ¶æƒäº¤ç»™ A ä¹‹å¤–çš„äº‹åŠ¡å¤„ç†ï¼Œè¿™äº›å«åš <strong>æ§åˆ¶åè½¬ï¼ˆIocï¼‰</strong></p><h3 id="ä¸ºä»€ä¹ˆéœ€è¦ä¾èµ–æ³¨å…¥"><a href="#ä¸ºä»€ä¹ˆéœ€è¦ä¾èµ–æ³¨å…¥" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦ä¾èµ–æ³¨å…¥"></a>ä¸ºä»€ä¹ˆéœ€è¦ä¾èµ–æ³¨å…¥</h3><p>é™ä½è€¦åˆ</p><p>ä»€ä¹ˆæ˜¯è€¦åˆ</p><p>è€¦åˆæ€§(Coupling)ï¼Œä¹Ÿå«è€¦åˆåº¦ï¼Œæ˜¯å¯¹æ¨¡å—é—´å…³è”ç¨‹åº¦çš„åº¦é‡ã€‚ä¸¤ä¸ªæˆ–å¤šä¸ªåŠŸèƒ½æ¨¡å—ä¹‹é—´çš„å…³è”ç¨‹åº¦ã€‚</p><p>ä»€ä¹ˆæ˜¯è§£è€¦</p><p>è§£é™¤ç±»ï¼ˆæ¨¡å—ï¼‰ä¹‹é—´çš„ç›´æ¥å…³ç³»ï¼Œå°†ç›´æ¥å…³ç³»è½¬æ¢æˆé—´æ¥å…³ç³»</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/2020-8-3-1.gif" alt="å¦‚æœæœ‰äº›æ–¹æ³•æ²¡æœ‰è¯¦ç»†è¯´æ˜ä½ å¯ä»¥è‡ªè¡Œæœç´¢æŸ¥çœ‹"></p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> è½¯ä»¶å·¥ç¨‹ </tag>
            
            <tag> Kotlin </tag>
            
            <tag> koin </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>BottomSheetã€BottomShaeetDialogä½¿ç”¨æµç¨‹</title>
      <link href="/2020/08/06/BottomSheets/"/>
      <url>/2020/08/06/BottomSheets/</url>
      
        <content type="html"><![CDATA[<h1 id="BottomSheet"><a href="#BottomSheet" class="headerlink" title="BottomSheet"></a>BottomSheet</h1><p>Demo ä»£ç  <a href="https://medium.com/@droidbyme/android-bottom-sheet-7e9cfcec6427" target="_blank" rel="noopener">https://medium.com/@droidbyme/android-bottom-sheet-7e9cfcec6427</a><br>ä½¿ç”¨ BottomSheetã€BottomSheetDialogã€BottomSheetDialogFragment</p><h4 id="BottomSheetä½¿ç”¨æµç¨‹"><a href="#BottomSheetä½¿ç”¨æµç¨‹" class="headerlink" title="BottomSheetä½¿ç”¨æµç¨‹"></a>BottomSheetä½¿ç”¨æµç¨‹</h4><p>BottomSheetå®ç°æŒ‰é’®åœ¨ç‚¹å‡»ä¹‹åæ»‘åŠ¨å¸ƒå±€.ä¸è”åŠ¨ä¹Ÿæ˜¯å¯ä»¥çš„åªè¦ä¸è®¾ç½®å®ƒå°±å¯ä»¥äº†ã€‚</p><p><strong>è¢«è”åŠ¨çš„å¸ƒå±€ä½¿ç”¨</strong></p><pre><code>app:layout_behavior=&quot;@string/bottom_sheet_behavior&quot;</code></pre><p><strong>è”åŠ¨æŒ‰é’®ä½¿ç”¨å±æ€§</strong></p><pre><code>app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot;&gt;</code></pre><p><img src="/img/Snipaste_2020-07-17_21-58-16.png" alt=""></p><p><strong>åœ¨åˆå§‹åŒ–æ—¶è¢«è”åŠ¨</strong></p><pre><code>          //  è®¾ç½®ç»‘å®šåŠ¨ä½œ        //  æ§ä»¶å’Œå®ƒç»‘å®š        var buttomSheetBehavior = BottomSheetBehavior.from(bottom_sheet_layout)</code></pre><p><strong>è®¾ç½®æŒ‰é’®äº†</strong></p><p>ä¹Ÿå°±æ˜¯åœ¨ç°åœ¨ç›‘å¬æŒ‰é’®çš„æ—¶å€™æ‰è¿›è¡Œè¿™ä¸ªæŒ‰é’®çš„è”åŠ¨æ»‘åŠ¨</p><pre><code>     btnBottomSheet.setOnClickListener {            if (buttomSheetBehavior.getState() != BottomSheetBehavior.STATE_EXPANDED)                buttomSheetBehavior.state = BottomSheetBehavior.STATE_EXPANDED            else                buttomSheetBehavior.state = BottomSheetBehavior.STATE_COLLAPSED        }</code></pre><p>è®¾ç½®åœ¨æ˜¾ç¤ºæ—¶ä¸æ˜¾ç¤º,ä¸æ˜¾ç¤ºæ—¶æ˜¾ç¤ºã€‚</p><p>è®¾ç½®ç›‘å¬å™¨åœ¨å®ƒè¢«æ‹–åŠ¨ã€æ»‘åŠ¨ã€åˆ‡æ¢æ—¶äº§ç”Ÿæç¤ºã€‚</p><pre><code>        buttomSheetBehavior.setBottomSheetCallback(object : BottomSheetCallback() {            //è¿™é‡Œæ˜¯æ‹–æ‹½ä¸­çš„å›è°ƒï¼Œæ ¹æ®slideOffsetå¯ä»¥åšä¸€äº›åŠ¨ç”»            override fun onSlide(bottomSheet: View, slideOffset: Float) {            }            //è¿™é‡Œæ˜¯bottomSheetçŠ¶æ€çš„æ”¹å˜            override fun onStateChanged(bottomSheet: View, newState: Int) {                when (newState) {                    BottomSheetBehavior.STATE_EXPANDED -&gt; {                        Toast.makeText(this@MainActivity, &quot;å±•å¼€&quot;, Toast.LENGTH_LONG).show()                    }                    BottomSheetBehavior.STATE_COLLAPSED -&gt; {                        Toast.makeText(this@MainActivity, &quot;å…³é—­&quot;, Toast.LENGTH_LONG).show()                    }                    BottomSheetBehavior.STATE_DRAGGING -&gt; {                        Toast.makeText(this@MainActivity, &quot;æ‹–æ‹½çŠ¶æ€&quot;, Toast.LENGTH_LONG).show()                    }                    BottomSheetBehavior.STATE_HIDDEN -&gt; {                        Toast.makeText(this@MainActivity, &quot;éšè—çŠ¶æ€&quot;, Toast.LENGTH_LONG).show()                    }                    BottomSheetBehavior.STATE_SETTLING -&gt; {                        Toast.makeText(                            this@MainActivity,                            &quot; æ‹–æ‹½æ¾å¼€ä¹‹ååˆ°è¾¾ç»ˆç‚¹ä½ç½®ï¼ˆcollapsed or expandedï¼‰å‰çš„çŠ¶æ€&quot;,                            Toast.LENGTH_LONG                        ).show()                    }                }            }        })</code></pre><h4 id="BottomSheetDialogä½¿ç”¨æµç¨‹"><a href="#BottomSheetDialogä½¿ç”¨æµç¨‹" class="headerlink" title="BottomSheetDialogä½¿ç”¨æµç¨‹"></a>BottomSheetDialogä½¿ç”¨æµç¨‹</h4><p>ç‚¹å‡»æŒ‰é’®ä¹‹åå¼¹å‡ºDialogæç¤º(å¸ƒå±€ç•Œé¢æœ‰ä¸”å‡†å¤‡å¥½çš„)</p><p><strong>è®¾ç½®æŒ‰é’®çš„ç›‘å¬å™¨ï¼Œç‚¹å‡»ä¹‹åç›´æ¥å¼¹å‡ºDialogçª—å£ã€‚</strong></p><pre><code>  /*        * Javaå‡½æ•°å¼æ¥å£        * å¼¹çª—æç¤º        * */        btnBottomSheetDialog.setOnClickListener {            //ä½¿ç”¨å¸ƒå±€åŠ è½½å™¨layoutInflater            val view = layoutInflater.inflate(R.layout.fragment_bottom_sheet, null)            //å®ä¾‹è¯BottomSheetDialog():ç”¨æ¥å®ç°å¼¹å‡ºæç¤ºåŠŸèƒ½            val dialog = BottomSheetDialog(this)            dialog.setContentView(view)            dialog.show()        }</code></pre><h4 id="BottomSheetDialogFragmentåœ¨å½“å‰ç•Œé¢åŠ è½½Dialogç¢ç‰‡"><a href="#BottomSheetDialogFragmentåœ¨å½“å‰ç•Œé¢åŠ è½½Dialogç¢ç‰‡" class="headerlink" title="BottomSheetDialogFragmentåœ¨å½“å‰ç•Œé¢åŠ è½½Dialogç¢ç‰‡"></a>BottomSheetDialogFragmentåœ¨å½“å‰ç•Œé¢åŠ è½½Dialogç¢ç‰‡</h4><pre><code>        /*        * åœ¨å½“å‰ç•Œé¢åŠ è½½ç¢ç‰‡        * */        btnBottomSheetDialogFragment.setOnClickListener {            val bottomSHeetFragment = BottomSheetFragment()            bottomSHeetFragment.show(supportFragmentManager, bottomSHeetFragment.tag)        }</code></pre><p><strong>å‡†å¤‡å¥½è¦åŠ è½½çš„ç¢ç‰‡,å®ƒæ˜¯è¦æœ‰bottom_sheet_dialogç±»å‹çš„ç•Œé¢</strong></p>]]></content>
      
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MediaStoreè®¿é—®å›¾ç‰‡ã€è§†é¢‘</title>
      <link href="/2020/08/01/MediaStore%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
      <url>/2020/08/01/MediaStore%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="ä½¿ç”¨â€MediaStoreâ€è®¿é—®å›¾ç‰‡ã€è§†é¢‘çš„ç¼©ç•¥å›¾"><a href="#ä½¿ç”¨â€MediaStoreâ€è®¿é—®å›¾ç‰‡ã€è§†é¢‘çš„ç¼©ç•¥å›¾" class="headerlink" title="ä½¿ç”¨â€MediaStoreâ€è®¿é—®å›¾ç‰‡ã€è§†é¢‘çš„ç¼©ç•¥å›¾"></a>ä½¿ç”¨â€MediaStoreâ€è®¿é—®å›¾ç‰‡ã€è§†é¢‘çš„ç¼©ç•¥å›¾</h2><h3 id="éœ€è¦åŠ¨æ€ç”³è¯·æƒé™"><a href="#éœ€è¦åŠ¨æ€ç”³è¯·æƒé™" class="headerlink" title="éœ€è¦åŠ¨æ€ç”³è¯·æƒé™"></a>éœ€è¦åŠ¨æ€ç”³è¯·æƒé™</h3><p>éœ€è¦é…ç½®æ–‡ä»¶ä¸­æ·»åŠ è¦ ç”³è¯·çš„æƒé™ â€œAndroidManifest.xmlâ€</p><pre><code class="xml">&lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;</code></pre><h4 id="æ³¨å†ŒåŠ¨æ€æƒé™"><a href="#æ³¨å†ŒåŠ¨æ€æƒé™" class="headerlink" title="æ³¨å†ŒåŠ¨æ€æƒé™"></a>æ³¨å†ŒåŠ¨æ€æƒé™</h4><ul><li><p>éœ€è¦è‡ªå®šä¹‰ â€œcheckReadExternalStoragePermission()â€æ–¹æ³•</p></li><li><p>éœ€è¦ â€œBuild.VERSION.SDK_INTâ€æ–¹æ³•è·å¾—å½“å‰ç³»ç»Ÿçš„ç‰ˆæœ¬å·</p></li><li><p>éœ€è¦ â€œBuild.VERSION_CODES.Mâ€è¡¨ç¤ºå®‰å“6</p></li><li><p>éœ€è¦ â€œContextCompat.checkSelfPermission()â€æ–¹æ³•, åˆ¤æ–­æ˜¯å¦è·å¾—äº†æƒé™.</p></li></ul><blockquote><p>å‚æ•°1:ä¸Šä¸‹æ–‡.å‚æ•°2:è¦åˆ¤æ–­çš„æƒé™. </p><p>è¿”å›å€¼:PackageManager.<strong>PERMISSION_GRANTED</strong> <strong>è¡¨ç¤ºæˆäºˆæƒé™</strong>,PackageManager.<strong>PERMISSION_DENIED</strong>  = -1    <strong>è¡¨ç¤ºæƒé™æœªå¼€å¯</strong>ï¼›</p></blockquote><ul><li>éœ€è¦ â€œshouldShowRequestPermissionRationale()â€æ–¹æ³•.</li></ul><blockquote><p>åˆ¤æ–­å½“å‰æƒé™æ˜¯å¦è¢«æ‹’ç»,å¹¶ä¸”æ˜¾ç¤ºçª—å£,æ˜¾ç¤ºâ€è¿è¡Œâ€å’Œâ€æ‹’ç»â€é€‰é¡¹.</p><p>ç¬¬ä¸€æ¬¡ä¸æ˜¾ç¤ºâ€ä¸å†æé†’â€æŒ‰é’®,ç¬¬äºŒæ¬¡çª—å£æ·»åŠ â€ä¸å†æ˜¾ç¤ºé€‰æ‹©æ¡†â€ã€‚</p><p>è¿”å›å€¼:æ‹’ç»è¿”å› true ,å…è®¸è¿”å› false æˆ–è€… ä¸å†æé†’é€‰ä¸­å è¿”å› false</p></blockquote><ul><li>éœ€è¦ â€œrequestPermission()â€æ–¹æ³•.</li></ul><blockquote><p>ç”¨æ¥ç”³è¯·ç³»ç»Ÿæƒé™. <strong>æ¯æ¬¡è¢«è°ƒç”¨æ—¶éƒ½ä¼šå›è°ƒâ€onRequestPermissionsResult()â€æ–¹æ³•ã€‚</strong></p><p>å‚æ•°1:è¦ç”³è¯·çš„æƒé™.</p><p>å‚æ•°2:è¦ç”³è¯·æƒé™çš„ code ä»¥ç”¨æ¥åœ¨ç”³è¯·æ–¹æ³•å›è°ƒæ—¶ç¡®å®šæ˜¯å½“å‰çš„ç”³è¯·æ“ä½œ.</p></blockquote><p>åœ¨éœ€è¦æ³¨å†Œæƒé™çš„æ´»åŠ¨ä¸Šæ·»åŠ </p><pre><code>    private fun checkReadExternalStoragePermission() {        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {            if (ContextCompat.checkSelfPermission(                    this,                    permission.READ_EXTERNAL_STORAGE                ) == PackageManager.PERMISSION_GRANTED            ) {                   } else {                if (shouldShowRequestPermissionRationale(permission.READ_EXTERNAL_STORAGE)) {                    Toast.makeText(this, &quot;App needs to view thumbnails&quot;, Toast.LENGTH_LONG).show()                }                requestPermissions(                    arrayOf(permission.READ_EXTERNAL_STORAGE),                    READ_EXTERNAL_STORAGE_PERMISSION_RESULT                )            }        } else {        }    }</code></pre><pre><code>    private val READ_EXTERNAL_STORAGE_PERMISSION_RESULT: Int = 0</code></pre><ul><li>éœ€è¦é‡å†™ â€œonRequestPermissionsResult()â€æ–¹æ³•</li></ul><blockquote><p>ç”³è¯·æƒé™æ—¶ä¼šè°ƒç”¨å®ƒ(ç”³è¯·æƒé™æ—¶çš„å›è°ƒ)</p><p>å‚æ•°1:ç”³è¯·æƒé™æ—¶çš„Code,è¡¨ç¤ºç”³è¯·æƒé™çš„æ“ä½œæ˜¯å¦ç›¸åŒ.</p><p>å‚æ•°2:è¿™æ˜¯è¦ç”³è¯·çš„æƒé™æ°¸è¿œä¸ä¸ºç©º.</p><p>å‚æ•°3:è¡¨ç¤ºæƒé™æˆæƒçš„ç»“æœæ°¸è¿œå°è£…åœ¨grantResultæ•°ç»„ä¸­</p></blockquote><pre><code>override fun onRequestPermissionsResult(        requestCode: Int,        permissions: Array&lt;out String&gt;,        grantResults: IntArray    ) {        super.onRequestPermissionsResult(requestCode, permissions, grantResults)        when (requestCode) {            READ_EXTERNAL_STORAGE_PERMISSION_RESULT -&gt; {                if (grantResults[0] == PackageManager.PERMISSION_GRANTED) {                    Toast.makeText(this, &quot;now have access to view thumbs&quot;, Toast.LENGTH_LONG).show()                }            }        }    }</code></pre><h3 id="éœ€è¦RecyclerViewçš„é€‚é…å™¨"><a href="#éœ€è¦RecyclerViewçš„é€‚é…å™¨" class="headerlink" title="éœ€è¦RecyclerViewçš„é€‚é…å™¨"></a>éœ€è¦RecyclerViewçš„é€‚é…å™¨</h3><p><a href="https://thecara.github.io/2020/07/26/RecyclerView%E5%9C%A8Kotlin%E4%B8%AD%E7%9A%84%E4%BD%BF%E7%94%A8/#toc-heading-7">ä½¿ç”¨æ­¤æ¡ˆä¾‹åˆ›å»ºé€‚é…å™¨</a></p><p>åˆå§‹åŒ–æ§ä»¶ä¸å†å¤è¿°äº†,</p><ul><li>éœ€è¦å˜é‡â€mMediaStoreCursorâ€</li></ul><blockquote><p>è¡¨ç¤ºå½“å‰çš„Cursor</p></blockquote><pre><code>class MediaStoreAdapter(private val mActivity: Activity) :    RecyclerView.Adapter&lt;MediaStoreAdapter.ViewHolder&gt;() {    private var mMediaStoreCursor: Cursor? = null        }</code></pre><ul><li><strong>éœ€è¦è‡ªå®šä¹‰â€getBitmapFromMediaStore()â€æ–¹æ³•</strong></li></ul><blockquote><p>è·å¾—ç³»ç»Ÿä¸­å›¾ç‰‡å’Œè§†é¢‘çš„ç¼©ç•¥å›¾.é€šè¿‡Cursorè·å¾—ç…§ç‰‡å’ŒVideoçš„ç¼©ç•¥å›¾</p><p>å‚æ•°1:ç§»åŠ¨åˆ°å¯¹åº”Cursorçš„è¡Œ.</p></blockquote><ul><li>éœ€è¦ä½¿ç”¨â€Cursor.getColumnIndex()â€æ–¹æ³•</li></ul><blockquote><p>è·å¾—å½“å‰MediaStoreCursorçš„â€å‚æ•°1â€çš„ç´¢å¼•</p><p>å‚æ•°1:è¦ç´¢å¼•çš„ä½ç½®</p><p>è¿”å›å€¼: è¿”å›åœ¨å½“å‰ Cursor ä¸­çš„ä½ç½®,æ²¡æœ‰è¿”å› -1 </p></blockquote><ul><li>éœ€è¦ä½¿ç”¨â€Cursor.getInt()â€™æ–¹æ³•</li></ul><blockquote><p>è·å¾—â€Cursorâ€ä¸­ç´¢å¼•(åˆ—)çš„æ•°å€¼.</p><p>å‚æ•°1:ä½ æƒ³è¦è·å¾—çš„åˆ—</p><p>è¿”å›å€¼:è¿”å›æŒ‡å®šåˆ—çš„æ•°å€¼</p></blockquote><ul><li>éœ€è¦ â€œMediaStore.Images.Thumbnails.getThumbnailâ€æ–¹æ³•</li></ul><blockquote><p>è·å¾—ç¼©ç•¥å›¾.</p><p>å‚æ•°1:è¡¨ç¤ºå†…å®¹æä¾›å™¨. å‚æ•°2:å½“å‰â€Cursorâ€ç¼©ç•¥å›¾çš„ID. </p><p>å‚æ•°3:è¿”å›æ—¶çš„æ¸…æ™°åº¦.MICRO_KIND,MINI_KINDå­—é¢æ„æ€ä¸ºå¾®å‹å’Œè¿·ä½ ç¼©ç•¥æ¨¡å¼,å‰è€…åˆ†è¾¨ç‡æ›´ä½.</p><p>è¿”å›å€¼:è¿”å›ä¸€ä¸ªBitmapæ ¼å¼</p></blockquote><p>åœ¨é€‚é…å™¨ä¸­æ·»åŠ </p><pre><code>class MediaStoreAdapter(private val mActivity: Activity) :    RecyclerView.Adapter&lt;MediaStoreAdapter.ViewHolder&gt;() {              private fun getBitmapFromMediaStore(position: Int): Bitmap? {        val idIndex: Int = mMediaStoreCursor!!.getColumnIndex(MediaStore.Files.FileColumns._ID)        val mediaTypeIndex: Int =            mMediaStoreCursor!!.getColumnIndex(MediaStore.Files.FileColumns.MEDIA_TYPE)        mMediaStoreCursor!!.moveToPosition(position)        when (mMediaStoreCursor!!.getInt(mediaTypeIndex)) {            // å½“å‰ç±»å‹ä¸º IMAGE æ—¶            MediaStore.Files.FileColumns.MEDIA_TYPE_IMAGE -&gt; {                return MediaStore.Images.Thumbnails.getThumbnail(                    mActivity.contentResolver,                    mMediaStoreCursor!!.getLong(idIndex),                    MediaStore.Images.Thumbnails.MICRO_KIND, null                )            }            // å½“å‰ç±»å‹ä¸º VIDEO            MediaStore.Files.FileColumns.MEDIA_TYPE_VIDEO -&gt; {                return MediaStore.Video.Thumbnails.getThumbnail(                    mActivity.contentResolver,                    mMediaStoreCursor!!.getLong(idIndex),                    MediaStore.Video.Thumbnails.MICRO_KIND, null                )            }        }        return null    }}</code></pre><ul><li><strong>éœ€è¦è‡ªå®šä¹‰æ–¹æ³•â€swapCursor()â€</strong></li></ul><blockquote><p>è·å¾—ä¸Šä¸€ä¸ªCursor.</p></blockquote><ul><li>éœ€è¦ â€œnotifyDataSetChanged()â€ æ–¹æ³•</li></ul><blockquote><p>æ£€æµ‹å½“å‰UIçº¿ç¨‹,åˆ·æ–°UI</p></blockquote><pre><code>class MediaStoreAdapter(private val mActivity: Activity) :    RecyclerView.Adapter&lt;MediaStoreAdapter.ViewHolder&gt;() {   private fun swapCursor(cursor: Cursor): Cursor? {        if (mMediaStoreCursor == cursor) {            return null        }        val oldCursor: Cursor? = mMediaStoreCursor        this.mMediaStoreCursor = cursor        if (cursor != null) {            this.notifyDataSetChanged()        }        return oldCursor    }}</code></pre><ul><li><strong>éœ€è¦ è‡ªå®šä¹‰æ–¹æ³•â€changeCursor()â€</strong></li></ul><blockquote><p>æ£€æµ‹ä¸Šä¸€ä¸ªCursor,ç”¨æ¥å…³é—­ä¸Šä¸ªCursor.</p></blockquote><pre><code>class MediaStoreAdapter(private val mActivity: Activity) :    RecyclerView.Adapter&lt;MediaStoreAdapter.ViewHolder&gt;() {        fun changeCursor(cursor: Cursor?) {        val oldCursor: Cursor? = swapCursor(cursor!!)        if (oldCursor != null)            oldCursor.close()    }}</code></pre><ul><li>éœ€è¦é‡å†™ â€œonBindViewHolder()â€æ–¹æ³•</li></ul><pre><code>    override fun onBindViewHolder(holder: ViewHolder, position: Int) {        val bitmap: Bitmap? = getBitmapFromMediaStore(position)        if (bitmap != null) {            holder.mediastoreImageView.setImageBitmap(bitmap)        }    }</code></pre><ul><li>éœ€è¦é‡å†™â€getItemCount()â€æ–¹æ³•</li></ul><pre><code>    override fun getItemCount(): Int {        return if (mMediaStoreCursor == null) 0 else mMediaStoreCursor!!.count    }</code></pre><ul><li>éœ€è¦é‡å†™â€onCreateViewHolder()â€æ–¹æ³•</li></ul><pre><code>    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {        val view =            LayoutInflater.from(parent.context).inflate(R.layout.media_image_view, parent, false)        return ViewHolder(view)    }</code></pre><h3 id="éœ€è¦â€LoaderManager-LoaderCallbacksâ€"><a href="#éœ€è¦â€LoaderManager-LoaderCallbacksâ€" class="headerlink" title="éœ€è¦â€LoaderManager.LoaderCallbacksâ€"></a>éœ€è¦â€LoaderManager.LoaderCallbacksâ€</h3><ul><li>éœ€è¦å®ç°LoaderManager.LoaderCallbacks<cursor>.(åœ¨MediaMainActivity)</li></ul><blockquote><p>åœ¨éœ€è¦çš„Fragmentæˆ–Activityä¸­å®ç°å®ƒã€‚</p></blockquote><pre><code>class MediaMainActivity : AppCompatActivity(), LoaderManager.LoaderCallbacks&lt;Cursor&gt; {}</code></pre><ul><li>éœ€è¦é‡å†™â€onCreateLoaderâ€</li></ul><blockquote><p>åœ¨è°ƒç”¨initLoader()è¿”å›æ—¶åˆ›å»ºä¸€ä¸ªLoader.</p><p>æ ¹æ®ä¼ å…¥çš„ID,åˆå§‹åŒ–å¹¶è¿”å›ä¸€ä¸ªæ–°çš„åŠ è½½å™¨.</p></blockquote><ul><li>éœ€è¦è¿”å›çš„åˆ—</li></ul><blockquote><p>MediaStore.Files.FileColums.ID è¿”å›Idåˆ—</p><p>MediaStore.Files.FIleColums.DATE_ADDED å›¾ç‰‡è¢«æ·»åŠ çš„æ—¶é—´</p><p>MediaStore.Files.FileColums.MEDIA_TYPE åª’ä½“ç±»å‹</p><p>MediaStore.Files.FileColums.MEDIA_TYPE_IMAGE å›¾ç‰‡åˆ—(ç´¢å¼•)</p><p>MediaStore.Files.FileColums.MEDIA_TYPE_VIDEO è§†é¢‘åˆ—(ç´¢å¼•)</p></blockquote><ul><li>éœ€è¦â€CursorLoader()â€åŒ¿åç±»</li></ul><blockquote><p>å®ƒæŸ¥è¯¢ContentResolverç„¶åè¿”å›ä¸€ä¸ªCursor.</p><p>å‚æ•°1:ä¸Šä¸‹æ–‡. å‚æ•°2:è¦æ“ä½œçš„URI.å½“å‰è¡¨ç¤ºæ‰€æœ‰å›¾ç‰‡çš„URI.</p><p>å‚æ•°3:è¦è¿”å›çš„åˆ—. å‚æ•°4:ä¸€ä¸ªè¿‡æ»¤å™¨,è¡¨æ˜å“ªäº›è¡Œè¦è¢«è¿”å›.å½“å‰è¿”å›ç±»å‹ä¸ºIMAGE æˆ– VIDEO</p><p>å‚æ•°5:ç”¨ä½œè¿‡æ»¤å™¨çš„å‚æ•°. </p><p>å‚æ•°6:è®¾ç½®æ’åº.ç›¸å½“äºSQLè¯­å¥ä¸­Order by.è¿™é‡Œä½¿ç”¨ DATA_ADDED + DESC è¡¨ç¤ºæŒ‰ç…§æ—¶é—´è¿›è¡Œæ’åº.</p></blockquote><pre><code class="kotlin">    override fun onCreateLoader(p0: Int, p1: Bundle?): androidx.loader.content.Loader&lt;Cursor&gt; {        val projection = arrayOf&lt;String&gt;(            MediaStore.Files.FileColumns._ID,            MediaStore.Files.FileColumns.DATE_ADDED,            MediaStore.Files.FileColumns.MEDIA_TYPE        )        // SQLå‘½ä»¤        val selection =            MediaStore.Files.FileColumns.MEDIA_TYPE +                    &quot; = &quot; + MediaStore.Files.FileColumns.MEDIA_TYPE_IMAGE + &quot; or &quot; + MediaStore.Files.FileColumns.MEDIA_TYPE +                    &quot; = &quot; + MediaStore.Files.FileColumns.MEDIA_TYPE_VIDEO        return object : CursorLoader(            this,            MediaStore.Files.getContentUri(&quot;external&quot;),            projection,            selection,            null,            MediaStore.Files.FileColumns.DATE_ADDED + &quot; DESC &quot;        ) {}    }</code></pre><ul><li>éœ€è¦é‡å†™ â€œonLoadFinished()â€æ–¹æ³•</li></ul><blockquote><p>æ›´æ–°UIæ“ä½œ.å½“ä¸€ä¸ªåŠ è½½å™¨å®Œæˆäº†å®ƒçš„è£…è½½è¿‡ç¨‹åè¢«è°ƒç”¨.</p></blockquote><ul><li>éœ€è¦è°ƒç”¨changeCursor()æ–¹æ³•</li></ul><blockquote><p>åˆ·æ–°å½“å‰å‚æ•°1,å…³é—­ä¸Šä¸€ä¸ªCursor</p><p>å‚æ•°1:å½“å‰çš„Cursor</p></blockquote><pre><code>class MediaMainActivity : AppCompatActivity(), LoaderManager.LoaderCallbacks&lt;Cursor&gt; {    override fun onLoadFinished(loader: androidx.loader.content.Loader&lt;Cursor&gt;, data: Cursor?) {        mMediaStoreAdapter?.changeCursor(data!!)    }}</code></pre><ul><li>éœ€è¦é‡å†™â€onLoaderReset()â€æ–¹æ³•</li></ul><blockquote><p>ä½•æ—¶é‡Šæ”¾å†…å­˜,å½“ä¸€ä¸ªåŠ è½½å™¨å®Œæˆäº†å®ƒçš„è£…è½½å·¥ä½œä¹‹åè¢«è°ƒç”¨</p></blockquote><pre><code>class MediaMainActivity : AppCompatActivity(), LoaderManager.LoaderCallbacks&lt;Cursor&gt; {   override fun onLoaderReset(loader: androidx.loader.content.Loader&lt;Cursor&gt;) {        mMediaStoreAdapter?.changeCursor(null)    }}</code></pre><ul><li><p>éœ€è¦åœ¨ç”¨äºæƒé™å’Œç”³è¯·æƒé™ä¹‹åæ·»åŠ </p></li><li><p>éœ€è¦åœ¨â€onRequestPermissionsResult()â€ä¸­è°ƒç”¨â€getSupportLoaderManager.initLoader()â€</p></li></ul><blockquote><p>å¯åŠ¨åŠ è½½å™¨</p><p>å‚æ•°1:ä¸€ä¸ªå”¯ä¸€çš„IDæ¥æ ‡å¿—åŠ è½½å™¨.</p><p>å‚æ•°2:å¯é€‰å‚æ•°,ç”¨äºåŠ è½½åˆå§‹åŒ–æ—¶(æœ¬ä¾‹ä¸ºnull)</p><p>å‚æ•°3:LoaderManager.LoaderCallbacksçš„å®ç°.è¢«LoaderMangerè°ƒç”¨ä»¥æŠ¥å‘ŠåŠ è½½äº‹ä»¶,åœ¨ä¾‹å­ä¸­æ˜¯ä¼ é€’ç»™è‡ªå·±â€thisâ€</p></blockquote><pre><code>when (requestCode) {            READ_EXTERNAL_STORAGE_PERMISSION_RESULT -&gt; {                if (grantResults[0] == PackageManager.PERMISSION_GRANTED) {                //æ·»åŠ  supportLoaderManager.initLoader(MEDIASTORE_LODAR_ID, null, this)                }            }        }</code></pre><ul><li>éœ€è¦åœ¨â€checkReadExternalStoragePermission()â€ä¸­è°ƒç”¨</li><li>éœ€è¦åœ¨æ‹¥æœ‰æƒé™åè°ƒç”¨,åœ¨â€checkSelfPermission()â€åˆ¤æ–­æ‹¥æœ‰æƒé™åè°ƒç”¨</li></ul><pre><code>        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {                  if (ContextCompat.checkSelfPermission(                    this,                    permission.READ_EXTERNAL_STORAGE                ) == PackageManager.PERMISSION_GRANTED            ) {              //æ·»åŠ   supportLoaderManager.initLoader(MEDIASTORE_LODAR_ID, null, this)            }         } else {            //æ·»åŠ   supportLoaderManager.initLoader(MEDIASTORE_LODAR_ID, null, this)        }</code></pre><p>ps:æ˜¾ç¤ºäº†åœ¨å“ªé‡Œæ·»åŠ å…¶ä»–çš„ä»£ç ä¸ç”¨ä¿®æ”¹.</p><ul><li>éœ€è¦æ·»åŠ å”¯ä¸€çš„IDæ ‡å¿—åŠ è½½å™¨.</li></ul><pre><code>class MediaMainActivity : AppCompatActivity(), LoaderManager.LoaderCallbacks&lt;Cursor&gt; {    private val MEDIASTORE_LODAR_ID: Int = 0}</code></pre><ul><li>éœ€è¦GridLayoutManger,åœ¨ â€œonCreate()â€ ä¸­æ·»åŠ </li></ul><blockquote><p>è®¾ç½®RecyclerViewçš„å¸ƒå±€</p><p>å‚æ•°1:ä¸Šä¸‹æ–‡ . å‚æ•°2:å¤šå°‘åˆ—</p></blockquote><pre><code>val gridLayoutManager: GridLayoutManager = GridLayoutManager(this, 3)</code></pre><ul><li>éœ€è¦RecyclerViewçš„setLayoutManager</li></ul><blockquote><p>è®¾ç½® GridLayoutManager</p></blockquote><pre><code>thumbnailRecyclerView.layoutManager = gridLayoutManager</code></pre><ul><li>éœ€è¦è®¾ç½®é€‚é…å™¨çœç•¥..</li></ul><h3 id="ä½¿ç”¨-â€œGlideâ€çš„æ–¹å¼åŠ è½½å›¾ç‰‡"><a href="#ä½¿ç”¨-â€œGlideâ€çš„æ–¹å¼åŠ è½½å›¾ç‰‡" class="headerlink" title="ä½¿ç”¨ â€œGlideâ€çš„æ–¹å¼åŠ è½½å›¾ç‰‡"></a>ä½¿ç”¨ â€œGlideâ€çš„æ–¹å¼åŠ è½½å›¾ç‰‡</h3><ul><li>éœ€è¦æ·»åŠ ä¾èµ–</li></ul><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200803180403.png" alt=""></p><ul><li>éœ€è¦â€œMediaStore.Files.FileColumns.DATAâ€ï¼ˆéœ€è¦åœ¨onCreateLoaderçš„projectionä¿®æ”¹ï¼‰</li></ul><blockquote><p>è¡¨è¿°ç´¢å¼•åœ¨ç£ç›˜ä¸­ä½ç½®</p></blockquote><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200803180843.png" alt=""></p><p>éœ€è¦åˆ›å»ºè‡ªå®šä¹‰è¿”å›â€œgetUriFromMediaStore()â€ï¼ˆåœ¨MediaStoreAdapterä¸­æ·»åŠ ï¼‰</p><blockquote><p>è·å¾—ç¼©ç•¥å›¾åœ¨ContentResolverä¸­çš„uri</p><p>å‚æ•°1ï¼šmediaçš„é‚£ä¸ªè¡Œ</p></blockquote><p>éœ€è¦â€œUri.parse()â€ æ–¹æ³•</p><blockquote><p>å°†å­—ç¬¦ä¸²è§£ææˆuriå¯¹è±¡</p></blockquote><pre><code>    private fun getUriFromMediaStore(position: Int): Uri {        val dataIndex: Int = mMediaStoreCursor!!.getColumnIndex(MediaStore.Files.FileColumns.DATA)        mMediaStoreCursor!!.moveToPosition(position)        val mediaUri: Uri =            Uri.parse(&quot;file://&quot; + mMediaStoreCursor!!.getString(dataIndex).toString())        return mediaUri    }</code></pre><p>éœ€è¦â€œGlideâ€ - (åœ¨onBindViewHolder()ä¸­æ·»åŠ )</p><blockquote><p>with(content:Content) - éœ€è¦ä¸Šä¸‹æ–‡</p><p>load(uri:String) - å›¾ç‰‡çš„uri</p><p>centerCrop() - å°†å›¾ç‰‡æŒ‰æ¯”ä¾‹ç¼©æ”¾åˆ°è¶³ä»¥å¡«å……ImageViewçš„å°ºå¯¸ï¼Œä½†æ˜¯å›¾ç‰‡å¯èƒ½ä¼šæ˜¾ç¤ºä¸å®Œæ•´ã€‚</p><p>override(width,height) é‡æ–°æ”¹å˜å›¾ç‰‡å¤§å°ã€‚</p><p>into() - ä½ éœ€è¦æ˜¾ç¤ºå›¾ç‰‡çš„ç›®æ ‡ã€‚</p></blockquote><pre><code>      Glide.with(mActivity).load(getUriFromMediaStore(position)).centerCrop().override(96, 96)            .into(holder.mediastoreImageView)</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200803184305.png" alt=""></p><h2 id="ä»€ä¹ˆæ˜¯Loader"><a href="#ä»€ä¹ˆæ˜¯Loader" class="headerlink" title="ä»€ä¹ˆæ˜¯Loader"></a>ä»€ä¹ˆæ˜¯Loader</h2><p><a href="http://www.jcodecraeer.com/a/anzhuokaifa/developer/2014/0325/1602.html" target="_blank" rel="noopener">android åŠ è½½å™¨loaderè¯¦è§£</a></p><p>Loaderç®€åŒ–äº†activityå’ŒFragmentä¸­å¼‚æ­¥åŠ è½½æ•°æ®çš„æ­¥éª¤.</p><p>ç‰¹ç‚¹:é€‚ç”¨äºæ¯ä¸ªActivityå’ŒFragment,æä¾›å¼‚æ­¥åŠ è½½çš„å®ç°æ–¹å¼,ç›‘å¬æ•°æ®æº,åœ¨æ•°æ®å‘ç”Ÿæ”¹å˜æ—¶è‡ªåŠ¨è¿”å›æ–°çš„ç»“æœã€‚å½“ç”±äºé…ç½®æ”¹å˜åè¢«é‡æ–°åˆ›å»ºå,å®ƒä»¬è‡ªåŠ¨é‡æ–°é“¾æ¥ä¸Šä¸€ä¸ªåŠ è½½æ¸¸æ ‡,æ‰€ä»¥ä¸å¿…é‡æ–°æŸ¥æ•°æ®.</p><p>loader API è¯´æ˜</p><table><thead><tr><th align="center">Class/Interface</th><th align="center">æè¿°</th></tr></thead><tbody><tr><td align="center">LoaderManager</td><td align="center">ä¸€ä¸ªä¸Activityå’ŒFragmentç›¸å…³è”çš„æŠ½è±¡ç±»,å®ƒç®¡ç†ä¸€ä¸ªæˆ–è€…å¤šä¸ªLoaderå®ä¾‹,å¸®åŠ©ä¸€ä¸ªåº”ç”¨ç®¡ç†å“ªäº›ä¸Activityæˆ–Fragmentçš„å£°æ˜å‘¨æœŸç›¸å…³çš„é•¿æ—¶é—´æ“ä½œ.å¸¸è§æ–¹å¼æ˜¯ä¸CursorLoaderä¸€èµ·ä½¿ç”¨,ç„¶ååº”ç”¨ä¹Ÿå¯ä»¥è‡ªå·±å†™ä¸€ä¸ªåŠ è½½å…¶ä»–æ•°æ®ç±»å‹æˆ–è€…æ•°æ®æºçš„loaderã€‚<strong>æ¯ä¸ªActivityæˆ–è€…Fragmentåªæœ‰ä¸€ä¸ªLoaderManager.ä½†æ˜¯ä¸€ä¸ªLoaderManagerå¯ä»¥æ‹¥æœ‰å¤šä¸ªåŠ è½½å™¨</strong></td></tr><tr><td align="center">LoaderManager.LoaderCallbacks</td><td align="center">ç”¨äºä¸€ä¸ªå®¢æˆ·ç«¯ä¸LoaderManageräº¤äº’çš„ä¼šè°ƒæ¥å£.ä¾‹å¦‚,ä½ ä½¿ç”¨å›è°ƒæ–¹æ³•onCreateLoader()æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„åŠ è½½å™¨.</td></tr><tr><td align="center">Loader</td><td align="center">ä¸€ä¸ªæ‰§è¡Œå¼‚æ­¥æ•°æ®åŠ è½½çš„æŠ½è±¡ç±»,å®ƒæ˜¯åŠ è½½å™¨çš„åŸºç¡€ç±».ä½ å¯ä»¥ä½¿ç”¨ç»å…¸çš„CursorLoader,ä½†æ˜¯ä½ ä¹Ÿå¯ä»¥å®ç°ä½ çš„å­ç±».ä¸€æ—¦åŠ è½½å™¨è¢«æ¿€æ´»,å®ƒä»¬å°†ç›‘å¬å®ƒçš„æ•°æ®æºå¹¶ä¸”åœ¨æ•°æ®æ”¹å˜æ—¶å‘é€æ–°çš„ç»“æœ.</td></tr><tr><td align="center">AsyncTaskLoader</td><td align="center">æä¾›ä¸€ä¸ªAsyncTaskæ¥æ‰§è¡Œå¼‚æ­¥åŠ è½½å·¥ä½œçš„æŠ½è±¡ç±»</td></tr><tr><td align="center">CursorLoader</td><td align="center">AsyncTaskLoaderçš„å­ç±»,å®ƒæŸ¥è¯¢ContentResolverç„¶åè¿”å›ä¸€ä¸ªCursor.è¿™ä¸ªç±»ä¸ºæŸ¥è¯¢Cursorä»¥æ ‡å‡†çš„æ–¹å¼å®ç°äº†åŠ è½½å™¨åè®®,å®ƒçš„æ¸¸æ ‡æŸ¥è¯¢æ˜¯é€šè¿‡AsyncTaskLoaderåœ¨åå°çº¿ç¨‹ä¸­æ‰§è¡Œ,ä»è€Œä¸ä¼šé˜»æ–­çº¿ç¨‹</td></tr></tbody></table><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/2020-8-3-1.gif" alt="å¦‚æœæœ‰äº›æ–¹æ³•æ²¡æœ‰è¯¦ç»†è¯´æ˜ä½ å¯ä»¥è‡ªè¡Œæœç´¢æŸ¥çœ‹"></p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> Kotlin </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SQLite Database ä½¿ç”¨</title>
      <link href="/2020/07/28/SQLite-Database-%E4%BD%BF%E7%94%A8/"/>
      <url>/2020/07/28/SQLite-Database-%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="åˆ›å»ºæ•°æ®åº“"><a href="#åˆ›å»ºæ•°æ®åº“" class="headerlink" title="åˆ›å»ºæ•°æ®åº“"></a>åˆ›å»ºæ•°æ®åº“</h2><h5 id="éœ€è¦-åˆ›å»ºæ•°æ®åº“-ç±»-â€œMyHelperâ€"><a href="#éœ€è¦-åˆ›å»ºæ•°æ®åº“-ç±»-â€œMyHelperâ€" class="headerlink" title="éœ€è¦ åˆ›å»ºæ•°æ®åº“ ç±» â€œMyHelperâ€"></a>éœ€è¦ åˆ›å»ºæ•°æ®åº“ ç±» â€œMyHelperâ€</h5><pre><code class="kotlin">class MyHelper(    private val mContext: Context? = null,    private val dbname: String = &quot;mydb&quot;,    private val version: Int = 1) : SQLiteOpenHelper(mContext, dbname, null, version) {    /*    * éœ€è¦å˜é‡sqlç¡®å®šè¡¨çš„æ ¼å¼    * éœ€è¦ execSQL()æ‰§è¡Œåˆ›å»ºè¡¨çš„åŠ¨ä½œ    * */    override fun onCreate(p0: SQLiteDatabase?) {        // åˆ›å»ºæ•°æ®åº“è¡¨        val sql: String =            &quot;CREATE TABLE PRODUCTS (_id INTEGER PRIMARY KEY AUTOINCREMENT, NAME TEXT, DESCRIPTION TEXT, PRICE READ)&quot;        // æ‰§è¡Œåˆ›å»ºè¡¨çš„åŠ¨ä½œ        p0?.execSQL(sql)    }    /*    *    * */    override fun onUpgrade(p0: SQLiteDatabase?, p1: Int, p2: Int) {        TODO(&quot;Not yet implemented&quot;)    }}</code></pre><ul><li>åˆ›å»ºæ•°æ®åº“éœ€è¦ç»§æ‰¿SQLiteOpenHelper()ç±»å‹,éœ€è¦å››ä¸ªå‚æ•°è¿›è¡Œåˆå§‹åŒ–</li><li>(å››ä¸ªå‚æ•°:mContext:ä¸Šä¸‹æ–‡,dbname: æ•°æ®åº“åç§°,version:æ•°æ®åº“ç‰ˆæœ¬,factory:null)</li><li>éœ€è¦å®ç°ä¸¤ä¸ªæ–¹æ³•onCreate()å’ŒonUpgrade()æ–¹æ³•</li></ul><h5 id="åœ¨éœ€è¦åˆ›å»ºæ•°æ®åº“æ—¶è°ƒç”¨"><a href="#åœ¨éœ€è¦åˆ›å»ºæ•°æ®åº“æ—¶è°ƒç”¨" class="headerlink" title="åœ¨éœ€è¦åˆ›å»ºæ•°æ®åº“æ—¶è°ƒç”¨"></a>åœ¨éœ€è¦åˆ›å»ºæ•°æ®åº“æ—¶è°ƒç”¨</h5><pre><code class="kotlin"> var myHelper: MyHelper = MyHelper(mContext = this) val sqlLiteDatabase: SQLiteDatabase = myHelper.readableDatabase</code></pre><p>è¿™æ—¶æ•°æ®åº“å°±åˆ›å»ºå®Œæˆäº†</p><h2 id="æ’å…¥æ•°æ®"><a href="#æ’å…¥æ•°æ®" class="headerlink" title="æ’å…¥æ•°æ®"></a>æ’å…¥æ•°æ®</h2><p>åˆ›å»ºä»“åº“åæ’å…¥æ•°æ®</p><p>éœ€è¦â€ContentValues()â€ç±»å‹</p><p>éœ€è¦â€SQLiteDatabaseçš„insert()â€æ–¹æ³•</p><p>åœ¨â€è‡ªå®šä¹‰æ•°æ®åº“ä¸­â€ä¸­æ·»åŠ æ–¹æ³•</p><pre><code>    private fun instertData(        name: String,        description: String,        price: Double,        database: SQLiteDatabase    ) {        // ContentValues() ç±»å‹è´Ÿè´£å­˜æ”¾é”®å€¼çš„æ•°æ®.ä½ åªéœ€è¦è®°ä½å®ƒæ˜¯å¾€æ•°æ®åº“ä¸­å­˜æ”¾æ•°æ®çš„.        val values: ContentValues = ContentValues()        values.put(&quot;NAME&quot;, name)        values.put(&quot;DESCRIPTION&quot;, description)        values.put(&quot;PRICE&quot;, price)        // å‘å½“å‰æ•°æ®åº“(database)æ’å…¥æ•°æ®(values)        database.insert(&quot;PRODUCTS&quot;, null, values)    }</code></pre><p>åœ¨<strong>å¤–éƒ¨è¦æ’å…¥æ•°æ®</strong>è®¾ç½®ç±»å‹ä¸º â€œpublicâ€å³å¯ã€‚</p><p>æ’å…¥æ•°æ®åœ¨å¤–éƒ¨è°ƒç”¨æ–¹æ³•</p><pre><code>        // insert        instertData(&quot;Jam&quot;, &quot;Fruit Jam&quot;, 300.1, p0!!)        instertData(&quot;Yli&quot;, &quot;Te Jam&quot;, 305.13, p0!!)        instertData(&quot;Tom Li&quot;, &quot;Zhou Jam&quot;, 210.7, p0!!)</code></pre><h2 id="è¯»å–æ•°æ®"><a href="#è¯»å–æ•°æ®" class="headerlink" title="è¯»å–æ•°æ®"></a>è¯»å–æ•°æ®</h2><p>éœ€è¦â€MyHelperâ€è‡ªå®šä¹‰<strong>æ•°æ®åº“ç±»çš„å®ä¾‹</strong></p><p>éœ€è¦â€MyHelper.readableDatabaseâ€æ–¹æ³•è¯»å–æ•°æ®åº“æ–¹æ³•<strong>è¿”å›ä¸€ä¸ªå¯å¯¹æ•°æ®åº“è¯»å†™çš„å¯¹è±¡</strong>.</p><p>éœ€è¦â€sqlLiteDatabase.rawQuery()â€æ–¹æ³•<strong>è·å¾—(æ•°æ®åº“è¡¨)æ¯è¡Œçš„é›†åˆ</strong>(Cursorç±»å‹).</p><pre><code>  // å®ä¾‹è¯è‡ªå®šä¹‰çš„æ•°æ®ç±»        var myHelper: MyHelper = MyHelper(mContext = this)        // åˆ›å»ºæ•°æ®åº“        val sqlLiteDatabase: SQLiteDatabase = myHelper.readableDatabase        val cursor: Cursor =            sqlLiteDatabase.rawQuery(&quot;SELECT NAME, PRICE FROM PRODUCTS&quot;, arrayOf&lt;String&gt;())        if (cursor != null)            cursor.moveToFirst()        val builder: StringBuilder = StringBuilder()        do {            val name: String = cursor.getString(0)            val price: Double = cursor.getDouble(1)            builder.append(&quot;NAME - &quot; + name + &quot;PRICE - &quot; + price)        } while (cursor.moveToNext())        // è¿™æ˜¯åœ¨ç•Œé¢ä¸Šåˆ·æ–°äº†è¯»å–çš„æ•°æ®        text_view.setText(builder.toString())</code></pre><p><img src="1595946627126.png" alt=""></p><h4 id="æŒ‰ç…§æ¡ä»¶æŸ¥è¯¢æŒ‡å®šæ•°æ®"><a href="#æŒ‰ç…§æ¡ä»¶æŸ¥è¯¢æŒ‡å®šæ•°æ®" class="headerlink" title="æŒ‰ç…§æ¡ä»¶æŸ¥è¯¢æŒ‡å®šæ•°æ®"></a>æŒ‰ç…§æ¡ä»¶æŸ¥è¯¢æŒ‡å®šæ•°æ®</h4><pre><code>   val cursor: Cursor =            sqlLiteDatabase.rawQuery(&quot;SELECT NAME, PRICE FROM PRODUCTS WHERE NAME = ?&quot;, arrayOf&lt;String&gt;(&quot;Tom Li&quot;))</code></pre><p>æŸ¥è¯¢ åˆ— â€œNAME,PRICEâ€ æ¥è‡ªè¡¨ â€œPRODUCTSâ€ æ ¹æ®æ¡ä»¶ â€œNAME = ?â€</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200731132244.png" alt=""></p><p>æŸ¥è¯¢å®Œæˆ</p><h2 id="ä»€ä¹ˆæ˜¯Cursorç±»å‹"><a href="#ä»€ä¹ˆæ˜¯Cursorç±»å‹" class="headerlink" title="ä»€ä¹ˆæ˜¯Cursorç±»å‹"></a>ä»€ä¹ˆæ˜¯Cursorç±»å‹</h2><p><a href="https://blog.csdn.net/android_zyf/article/details/53420267" target="_blank" rel="noopener">å¼•ç”¨:Androidä¸­çš„Cursoråˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•ç†è§£Cursorçš„æ–¹æ³•éƒ½åœ¨åšä»€ä¹ˆäº‹æƒ…ï¼Ÿ</a></p><blockquote><p>Cursoræ˜¯æ¯è¡Œçš„é›†åˆ</p></blockquote><p>è¡¨ä¸­å…±æœ‰å¤šè¡Œæ•°æ®.</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200729122947.png" alt=""></p><p>å‡å¦‚:è·å¾—é€šè¿‡â€selectâ€è¯­å¥â€genderâ€è·å¾—ç¬¦åˆè¿™åˆ—çš„ç”·æ€§é‚£ä¹ˆå¾—åˆ°çš„æ˜¯ â€œå¼ ä¸‰,èµµå…­â€è¿™ä¸¤è¡Œæ•°æ®.ä¹Ÿå°±æ˜¯<strong>è¯´ â€œCursorâ€ç±»å‹å­˜æ”¾äº†ä¸¤è¡Œæ•°æ®ã€‚</strong></p><h4 id="å¦‚ä½•è·å¾—Cursorç±»å‹"><a href="#å¦‚ä½•è·å¾—Cursorç±»å‹" class="headerlink" title="å¦‚ä½•è·å¾—Cursorç±»å‹"></a>å¦‚ä½•è·å¾—Cursorç±»å‹</h4><p>é€šè¿‡æ•°æ®åº“å¯¹è±¡çš„æ–¹æ³•è·å¾—ã€‚ğŸ‘‡</p><pre><code>SQLiteDataBase db;Cursor cursor = db.query(å„ç§å‚æ•°);</code></pre><p>è¿™äº›å°±æ˜¯æ¯ä¸€è¡Œçš„é›†åˆ</p><h4 id="ç´¢å¼•åœ¨Cursorä¸­æ˜¯ä»€ä¹ˆ"><a href="#ç´¢å¼•åœ¨Cursorä¸­æ˜¯ä»€ä¹ˆ" class="headerlink" title="ç´¢å¼•åœ¨Cursorä¸­æ˜¯ä»€ä¹ˆ"></a>ç´¢å¼•åœ¨Cursorä¸­æ˜¯ä»€ä¹ˆ</h4><p>åœ¨Cursorä¸­ç´¢å¼•æŒ‡çš„å°±æ˜¯<strong>è¡¨ä¸­çš„åˆ—</strong></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200731174701.png" alt=""></p><p>è¿”å›äº†â€PRICEâ€åˆ—åœ¨è¡¨ä¸­çš„ç´¢å¼•(ä½ç½®)ã€‚</p><h4 id="å…³äºä¸ºä½•è¦ä½¿ç”¨-â€œmoveToFirst-â€-æ–¹æ³•"><a href="#å…³äºä¸ºä½•è¦ä½¿ç”¨-â€œmoveToFirst-â€-æ–¹æ³•" class="headerlink" title="å…³äºä¸ºä½•è¦ä½¿ç”¨ â€œmoveToFirst()â€ æ–¹æ³•"></a>å…³äºä¸ºä½•è¦ä½¿ç”¨ â€œmoveToFirst()â€ æ–¹æ³•</h4><p>åˆ©ç”¨åè¯æ³•,<strong>ä¸ä½¿ç”¨â€moveToFirst()â€æ–¹æ³•,</strong>è·å¾—æ¸¸æ ‡å,ç›´æ¥è¾“å‡ºå½“å‰çš„â€positionâ€å€¼</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200729210143.png" alt=""></p><p><strong>â€œpositionâ€çš„å€¼ä¼šç›´æ¥è¾“å‡º â€œ-1â€</strong>,ä¹Ÿå°±æ˜¯è¯´å½“æˆ‘ä»¬ä¸é€‚ç”¨â€moveToFirst()â€æ–¹æ³•æ—¶å®ƒä¼šåœ¨åæ ‡â€positionâ€(0)çš„<strong>ä¸Šè¾¹</strong>ã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬åº”è¯¥ä½¿ç”¨æ–¹æ³•â€moveToFirst()â€ä½¿â€positionâ€ä¸ºâ€0â€ã€‚</p><h4 id="æºç åˆ†æ-ä½¿ç”¨â€moveToNext-â€æ–¹æ³•æ˜¯å¦‚ä½•å¾—çŸ¥éå†å®Œæˆçš„"><a href="#æºç åˆ†æ-ä½¿ç”¨â€moveToNext-â€æ–¹æ³•æ˜¯å¦‚ä½•å¾—çŸ¥éå†å®Œæˆçš„" class="headerlink" title="æºç åˆ†æ ä½¿ç”¨â€moveToNext()â€æ–¹æ³•æ˜¯å¦‚ä½•å¾—çŸ¥éå†å®Œæˆçš„?"></a>æºç åˆ†æ ä½¿ç”¨â€moveToNext()â€æ–¹æ³•æ˜¯å¦‚ä½•å¾—çŸ¥éå†å®Œæˆçš„?</h4><p>å…ˆè¯´æ˜ <strong>è°ƒç”¨â€moveToNext()â€æ–¹æ³•æœ€æ€»ä¼šè°ƒç”¨â€moveToPosition()â€æ–¹æ³•</strong></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200729212802.png" alt=""></p><p>ğŸ‘†ç•Œé¢åœ¨è¢«åˆå§‹åŒ–æ—¶,æŒ‡å½“å‰é¡µé¢çš„å¯¹è±¡ã€‚è¿™æ—¶æº<strong>ç ä¸­çš„â€mPos=-1â€ä¼šè¢«åœ¨ä¸€ä¸ªç©ºå‚æ•°æ„é€ æ–¹æ³•é‡Œåˆå§‹åŒ–</strong>ã€‚</p><p>ä»…ç†è§£çš„è¯: <strong>â€œmoveToFirst()â€è°ƒç”¨çš„æ˜¯â€moveToPostion(0)â€,â€moveToNext()â€ è°ƒç”¨çš„æ˜¯â€moveToNext(mPos+1)â€,æ‰€ä»¥è¯´å½“é¦–æ¬¡è°ƒç”¨çš„ä»–ä»¬ä¸¤ä¸ªçš„ç»“æœæ˜¯ä¸€æ ·çš„ã€‚</strong></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200729215028.png" alt=""></p><p>ps:ä¸ªäººç†è§£:åœ¨ä½¿ç”¨â€cursor.moveToFirst()â€å…ˆè¿›è¡Œåˆ¤æ–­å¯ä»¥æ›´æœ‰æ•ˆçš„é¿å…ç©ºæŒ‡é’ˆå¼‚å¸¸j</p><h2 id="æ›´æ–°æ•°æ®"><a href="#æ›´æ–°æ•°æ®" class="headerlink" title="æ›´æ–°æ•°æ®"></a>æ›´æ–°æ•°æ®</h2><p>éœ€è¦ä¿®æ”¹<strong>æ•°æ®åº“è¿”å›çš„ç±»å‹ä¸ºå¯å†™å…¥ç±»å‹</strong></p><pre><code class="kotlin">        // åˆ›å»ºæ•°æ®åº“        val sqlLiteDatabase: SQLiteDatabase = myHelper.writableDatabase</code></pre><p>éœ€è¦ â€œContentValues()â€ ç±»å‹å­˜æ”¾æ›´æ–°çš„å€¼</p><pre><code>        //æ›´æ–°æ•°æ®        val values: ContentValues = ContentValues()        values.put(&quot;PRICE&quot;, 280)        // å‚æ•°1:è¡¨ç¤ºæ›´æ–°çš„è¡¨.å‚æ•°2:è¡¨ç¤ºæ›´æ–°çš„æ•°æ®.å‚æ•°3:è¡¨ç¤ºæ¡ä»¶(è¡¨ç¤ºé€šè¿‡é‚£ä¸ªæ¡ä»¶æ›´æ–°å€¼) å‚æ•°4:æ¡ä»¶çš„å€¼        sqlLiteDatabase.update(&quot;PRODUCTS&quot;, values, &quot;_id = ?&quot;, arrayOf&lt;String&gt;(&quot;1&quot;))</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200731130854.png" alt=""></p><p>â€œ280â€ä»·æ ¼æ›´æ–°äº†</p><h4 id="å¤šæ¡ä»¶æ›´æ–°"><a href="#å¤šæ¡ä»¶æ›´æ–°" class="headerlink" title="å¤šæ¡ä»¶æ›´æ–°"></a>å¤šæ¡ä»¶æ›´æ–°</h4><p>æ›´æ–°è¡¨ â€œ<strong>PRODUCTS</strong>â€œ çš„å€¼ â€œ<strong>values</strong>â€œ,æ ¹æ® â€œ<strong>NAME</strong>â€œä¸ºâ€<strong>Tom Li</strong>â€œ å’Œâ€<strong>DESCRIPTION</strong>â€œ ä¸º â€œ<strong>Zhou Jam</strong>â€œ çš„è¡Œä¸­çš„æ•°æ®.</p><pre><code>sqlLiteDatabase.update(&quot;PRODUCTS&quot;, values, &quot;NAME = ? AND DESCRIPTION = ?&quot;, arrayOf&lt;String&gt;(&quot;Tom Li&quot;,&quot;Zhou Jam&quot;))</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200731132831.png" alt=""></p><h2 id="åˆ é™¤æ•°æ®"><a href="#åˆ é™¤æ•°æ®" class="headerlink" title="åˆ é™¤æ•°æ®"></a>åˆ é™¤æ•°æ®</h2><p>åœ¨è·å¾—æ•°æ®åº“çš„<strong>å¯å†™å…¥ç±»å‹åã€‚</strong> è°ƒç”¨ â€œdelete()â€æ–¹æ³•ã€‚</p><pre><code>        // æ ¹æ®æ¡ä»¶åˆ é™¤ä¸€è¡Œæ•°æ®        // å‚æ•°1:è¦åˆ é™¤çš„è¡¨åå­—,å‚æ•°2:é€‰æ‹©åˆ é™¤çš„æ¡ä»¶(æ ¹æ®è¿™ä¸ªæ¡ä»¶åˆ é™¤),å‚æ•°3:æ¡ä»¶çš„å€¼        sqlLiteDatabase.delete(&quot;PRODUCTS&quot;, &quot;_id=?&quot;, arrayOf&lt;String&gt;(&quot;1&quot;))</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200731131332.png" alt=""></p><p>åˆ é™¤æˆåŠŸäº†.</p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> SQLite </tag>
            
            <tag> Cursor </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°æ®åº“ç´¢å¼•</title>
      <link href="/2020/07/28/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B4%A2%E5%BC%95/"/>
      <url>/2020/07/28/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B4%A2%E5%BC%95/</url>
      
        <content type="html"><![CDATA[<h2 id="ä»€ä¹ˆæ˜¯æ•°æ®åº“ç´¢å¼•"><a href="#ä»€ä¹ˆæ˜¯æ•°æ®åº“ç´¢å¼•" class="headerlink" title="ä»€ä¹ˆæ˜¯æ•°æ®åº“ç´¢å¼•"></a>ä»€ä¹ˆæ˜¯æ•°æ®åº“ç´¢å¼•</h2><p>MySqlå®˜ç½‘çš„ä»‹ç»,ç´¢å¼•æ˜¯å¸®åŠ©<code>MySQL</code>é«˜æ•ˆè·å¾—æ•°æ®çš„ç»“æ„ã€‚ç±»ä¼¼äºä¹¦æœ¬çš„ç›®å½•,ä»è€Œæé«˜æŸ¥è¯¢é€Ÿåº¦ã€‚</p><p><a href="https://segmentfault.com/a/1190000022341554" target="_blank" rel="noopener">åˆæ¢MySQLç´¢å¼•</a></p>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®åº“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Chocolateyçš„é…ç½®ä¸åº”ç”¨çš„å®‰è£…</title>
      <link href="/2020/07/26/choco%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%BA%94%E7%94%A8%E7%9A%84%E5%AE%89%E8%A3%85/"/>
      <url>/2020/07/26/choco%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%BA%94%E7%94%A8%E7%9A%84%E5%AE%89%E8%A3%85/</url>
      
        <content type="html"><![CDATA[<h2 id="ä½¿ç”¨-Chocolateyå®‰è£…7zip"><a href="#ä½¿ç”¨-Chocolateyå®‰è£…7zip" class="headerlink" title="ä½¿ç”¨ Chocolateyå®‰è£…7zip"></a>ä½¿ç”¨ Chocolateyå®‰è£…7zip</h2><p>å…¨ç¨‹ä½¿ç”¨ç§‘å­¦ä¸Šç½‘</p><pre><code>choco install 7zip</code></pre><h2 id="å¦‚ä½•å®‰è£…Chocolatey"><a href="#å¦‚ä½•å®‰è£…Chocolatey" class="headerlink" title="å¦‚ä½•å®‰è£…Chocolatey"></a>å¦‚ä½•å®‰è£…Chocolatey</h2><p><a href="https://chocolatey.org/install.ps1" target="_blank" rel="noopener">åœ¨æ¡Œé¢ä¸‹è½½</a></p><p>ä½¿ç”¨ç®¡ç†å‘˜æ‰“å¼€cmdè®¿é—®åˆ°ä¸‹è½½çš„ç›®å½•ä¸­</p><p>è¾“å…¥ğŸ‘‡.å®‰è£…çš„åŒæ—¶è¦ä½¿ç”¨ç§‘å­¦ä¸Šç½‘</p><pre><code>@powershell -NoProfile -ExecutionPolicy Bypass -Command &quot;iex ((New-Object System.Net.WebClient).DownloadString(&#39;install.ps1&#39;))&quot; &amp;&amp; SET &quot;PATH=%PATH%;%ALLUSERSPROFILE%\chocolatey\bin&quot;</code></pre><p>æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸï¼š</p><p>choco</p><p><img src="1595823753408.png" alt=""></p><h2 id="ä»€ä¹ˆæ˜¯Chocolatey"><a href="#ä»€ä¹ˆæ˜¯Chocolatey" class="headerlink" title="ä»€ä¹ˆæ˜¯Chocolatey"></a>ä»€ä¹ˆæ˜¯Chocolatey</h2><p>Chocolateyæ˜¯ä¸€ä¸ªWindowsä¸‹çš„è½¯ä»¶åŒ…ç®¡ç†å™¨ï¼Œä½ å¯ä»¥åƒåœ¨ç±»Unixç³»ç»Ÿä¸­ä½¿ç”¨Yumå’ŒAPTä¸€æ ·ä½¿ç”¨å®ƒï¼Œåœ¨Windowsä¸­å®ç°è‡ªåŠ¨åŒ–è½»æ¾ç®¡ç†Windowsè½¯ä»¶çš„æ‰€æœ‰æ–¹é¢ã€‚</p><p> <a href="https://zh.wikipedia.org/zh-cn/Chocolatey" target="_blank" rel="noopener">ç»´åŸºç™¾ç§‘</a></p><h2 id="æ›´å¤š"><a href="#æ›´å¤š" class="headerlink" title="æ›´å¤š"></a>æ›´å¤š</h2>]]></content>
      
      
      <categories>
          
          <category> Chocolatey </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Chocolatey </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>kotlin in Action-Kotlinå®æˆ˜</title>
      <link href="/2020/07/26/kotlin-in-Action-Kotlin%E5%AE%9E%E6%88%98/"/>
      <url>/2020/07/26/kotlin-in-Action-Kotlin%E5%AE%9E%E6%88%98/</url>
      
        <content type="html"><![CDATA[<h2 id="2-Kotlin-åŸºç¡€"><a href="#2-Kotlin-åŸºç¡€" class="headerlink" title="2 Kotlin åŸºç¡€"></a>2 Kotlin åŸºç¡€</h2><h3 id="2-1-åŸºæœ¬è¦ç´ -å‡½æ•°å˜é‡"><a href="#2-1-åŸºæœ¬è¦ç´ -å‡½æ•°å˜é‡" class="headerlink" title="2.1 åŸºæœ¬è¦ç´ : å‡½æ•°å˜é‡"></a>2.1 åŸºæœ¬è¦ç´ : å‡½æ•°å˜é‡</h3><h4 id="2-1-3-å˜é‡"><a href="#2-1-3-å˜é‡" class="headerlink" title="2.1.3 å˜é‡"></a>2.1.3 å˜é‡</h4><p><strong>å¯å˜å˜é‡å’Œä¸å¯å˜å˜é‡</strong></p><ul><li>valâ€“ä¸å¯å˜å¼•ç”¨ã€‚ä½¿ç”¨valå£°æ˜çš„å˜é‡ä¸èƒ½åœ¨åˆå§‹åŒ–ä¹‹åå†æ¬¡èµ‹å€¼ã€‚å®ƒå¯¹åº”çš„æ˜¯javaä¸­çš„finalå˜é‡</li><li>varâ€“å¯å˜å¼•ç”¨ã€‚è¿™ç§å˜é‡çš„å€¼å¯ä»¥è¢«æ”¹å˜ã€‚è¿™ç§å£°æ˜å¯¹åº”çš„æ˜¯æ™®é€š(éfinal)å˜é‡</li></ul><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/1595899792330.png" alt=""></p><p>ğŸ‘†åœ¨å®šä¹‰äº†valå˜é‡çš„ä»£ç å—æœŸé—´,<strong>valå˜é‡åªèƒ½è¿›è¡Œå”¯ä¸€ä¸€æ¬¡åˆå§‹åŒ–</strong>ã€‚ä½†æ˜¯,å¦‚æœç¼–è¯‘å™¨èƒ½ç¡®ä¿åªæœ‰å”¯ä¸€ä¸€æ¬¡åˆå§‹åŒ–è¯­å¥ä¼šè¢«æ‰§è¡Œ,å¯ä»¥æ ¹æ®æ¡ä»¶ä½¿ç”¨ä¸åŒçš„å€¼æ¥åˆå§‹åŒ–å®ƒã€‚</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/1595899976491.png" alt=""></p><p>è‡ªèº«ä¸å¯å˜(åªå¯ä»¥æ‰§è¡Œä¸€æ¬¡,åˆå§‹åŒ–ä¸€æ¬¡)</p><p>æ³¨æ„,å°½ç®¡valå¼•ç”¨è‡ªèº«æ˜¯ä¸å¯å˜çš„,ä½†æ˜¯å®ƒæŒ‡å‘çš„å¯¹è±¡<strong>`å¯èƒ½</strong>`æ˜¯å¯å˜çš„ã€‚åˆ—å¦‚</p><pre><code>val languages = arrayListOf(&quot;Java&quot;)lenguages.add(&quot;Kotlin&quot;)</code></pre><h3 id="2-3-è¡¨ç¤ºå’Œå¤„ç†é€‰æ‹©ï¼šæšä¸¾å’Œâ€œwhenâ€"><a href="#2-3-è¡¨ç¤ºå’Œå¤„ç†é€‰æ‹©ï¼šæšä¸¾å’Œâ€œwhenâ€" class="headerlink" title="2.3 è¡¨ç¤ºå’Œå¤„ç†é€‰æ‹©ï¼šæšä¸¾å’Œâ€œwhenâ€"></a>2.3 è¡¨ç¤ºå’Œå¤„ç†é€‰æ‹©ï¼šæšä¸¾å’Œâ€œwhenâ€</h3><h4 id="2-3-5-æ™ºèƒ½è½¬æ¢ï¼šåˆå¹¶ç±»å‹æ£€æŸ¥å’Œè½¬æ¢"><a href="#2-3-5-æ™ºèƒ½è½¬æ¢ï¼šåˆå¹¶ç±»å‹æ£€æŸ¥å’Œè½¬æ¢" class="headerlink" title="2.3.5 æ™ºèƒ½è½¬æ¢ï¼šåˆå¹¶ç±»å‹æ£€æŸ¥å’Œè½¬æ¢"></a>2.3.5 æ™ºèƒ½è½¬æ¢ï¼šåˆå¹¶ç±»å‹æ£€æŸ¥å’Œè½¬æ¢</h4><h5 id="kotlinæ™ºèƒ½è½¬æ¢çš„æ¡ˆä¾‹"><a href="#kotlinæ™ºèƒ½è½¬æ¢çš„æ¡ˆä¾‹" class="headerlink" title="kotlinæ™ºèƒ½è½¬æ¢çš„æ¡ˆä¾‹"></a>kotlinæ™ºèƒ½è½¬æ¢çš„æ¡ˆä¾‹</h5><h6 id="è¡¨è¾¾å¼ç±»å‹å±‚æ¬¡"><a href="#è¡¨è¾¾å¼ç±»å‹å±‚æ¬¡" class="headerlink" title="è¡¨è¾¾å¼ç±»å‹å±‚æ¬¡"></a>è¡¨è¾¾å¼ç±»å‹å±‚æ¬¡</h6><pre><code class="kotlin">interface Exprclass Num(val value: Int) : Expr    // ç®€å•çš„å€¼å¯¹è±¡ç±»ï¼Œåªæœ‰ä¸€ä¸ªå±æ€§valueï¼Œå®ç°äº†Expræ¥å£class Sum(val left: Expr, val right: Expr) : Expr   // Sumè¿ç®—çš„å®å‚å¯ä»¥æ˜¯ä»»ä½•Expr:Num æˆ–è€… Sum</code></pre><h6 id="å¯¹è¡¨è¾¾å¼æ±‚å€¼"><a href="#å¯¹è¡¨è¾¾å¼æ±‚å€¼" class="headerlink" title="å¯¹è¡¨è¾¾å¼æ±‚å€¼"></a>å¯¹è¡¨è¾¾å¼æ±‚å€¼</h6><pre><code class="kotlin">fun eval(e: Expr): Int {    if (e is Num) {//        val n = e.value as Num //æ˜¾ç¤ºçš„è½¬æ¢ä¸ºNumç±»å‹å¤šä½™çš„        return e.value    }    if (e is Sum) {        return eval(e.left) + eval(e.right) // å˜é‡ e è¢«æ™ºèƒ½çš„è½¬æ¢äº†ç±»å‹    }    throw IllegalArgumentException(&quot;test&quot;)}</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200831171911.png" alt=""></p><p>ç»“æœ</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200831171248.png" alt=""></p><h5 id="â€œisâ€-ä¿®é¥°ç¬¦"><a href="#â€œisâ€-ä¿®é¥°ç¬¦" class="headerlink" title="â€œisâ€ ä¿®é¥°ç¬¦"></a>â€œisâ€ ä¿®é¥°ç¬¦</h5><p>åœ¨ kotlin ä¸­ï¼Œä½ è¦ä½¿ç”¨ is æ£€æŸ¥æ¥åˆ¤æ–­ä¸€ä¸ªå˜é‡æ˜¯å¦æ˜¯æŸä¸ªç±»å‹ã€‚</p><h5 id="ä»€ä¹ˆæ—¶å€™è¿›è¡Œæ™ºèƒ½è½¬æ¢ï¼Ÿ"><a href="#ä»€ä¹ˆæ—¶å€™è¿›è¡Œæ™ºèƒ½è½¬æ¢ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ—¶å€™è¿›è¡Œæ™ºèƒ½è½¬æ¢ï¼Ÿ"></a>ä»€ä¹ˆæ—¶å€™è¿›è¡Œæ™ºèƒ½è½¬æ¢ï¼Ÿ</h5><p>å¦‚æœä½ æ£€æŸ¥è¿‡ä¸€ä¸ªå˜é‡æ˜¯æŸç§ç±»å‹ï¼Œåé¢å°±ä¸å†éœ€è¦è½¬æ¢å®ƒäº†ï¼Œå¯ä»¥å°±æŠŠå®ƒå½“ä½œä½ æ£€æŸ¥è¿‡çš„ç±»å‹ä½¿ç”¨ã€‚äº‹å®ä¸Šç¼–è¯‘å™¨ä¸ºä½ æ‰§è¡Œäº†ç±»å‹è½¬æ¢ï¼Œæˆ‘ä»¬æŠŠè¿™ç§è¡Œä¸ºç§°ä¸º <strong>æ™ºèƒ½è½¬æ¢ã€‚</strong></p><h2 id="4-ç±»ã€å¯¹è±¡å’Œæ¥å£"><a href="#4-ç±»ã€å¯¹è±¡å’Œæ¥å£" class="headerlink" title="4 ç±»ã€å¯¹è±¡å’Œæ¥å£"></a>4 ç±»ã€å¯¹è±¡å’Œæ¥å£</h2><h3 id="4-1-å®šä¹‰ç±»ç»§æ‰¿ç»“æ„"><a href="#4-1-å®šä¹‰ç±»ç»§æ‰¿ç»“æ„" class="headerlink" title="4.1 å®šä¹‰ç±»ç»§æ‰¿ç»“æ„"></a>4.1 å®šä¹‰ç±»ç»§æ‰¿ç»“æ„</h3><h4 id="4-1-1-Kotlin-ä¸­çš„æ¥å£"><a href="#4-1-1-Kotlin-ä¸­çš„æ¥å£" class="headerlink" title="4.1.1 Kotlin ä¸­çš„æ¥å£"></a>4.1.1 Kotlin ä¸­çš„æ¥å£</h4><h5 id="å£°æ˜æ¥å£"><a href="#å£°æ˜æ¥å£" class="headerlink" title="å£°æ˜æ¥å£"></a>å£°æ˜æ¥å£</h5><pre><code class="kotlin">interface Clickable{    fun click()}</code></pre><h5 id="å®ç°æ¥å£"><a href="#å®ç°æ¥å£" class="headerlink" title="å®ç°æ¥å£"></a>å®ç°æ¥å£</h5><pre><code>class Button : Clickble {    override fun click() {        println(&quot;I was clicked&quot;)    }}</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200826205307.png" alt=""></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200826205356.png" alt=""></p><h5 id="Kotlinå®ç°æ¥å£ä¸-Java-æœ‰é‚£äº›ä¸åŒ"><a href="#Kotlinå®ç°æ¥å£ä¸-Java-æœ‰é‚£äº›ä¸åŒ" class="headerlink" title="Kotlinå®ç°æ¥å£ä¸ Java æœ‰é‚£äº›ä¸åŒ"></a>Kotlinå®ç°æ¥å£ä¸ Java æœ‰é‚£äº›ä¸åŒ</h5><p>Kotlin åœ¨ç±»åé¢ä½¿ç”¨å†’å·æ¥ä»£æ›¿ <strong>Java</strong> ä¸­çš„ extends å’Œ implements å…³é”®è¯ã€‚ å’Œ Java ä¸€æ ·ï¼Œ<strong>ä¸€ä¸ªç±»å¯ä»¥å®ç°ä»»æ„å¤šä¸ªæ¥å£</strong>ï¼Œä½†<strong>åªèƒ½ç»§æ‰¿ä¸€ä¸ªç±»å‹</strong>ã€‚</p><h5 id="override-ä¿®é¥°ç¬¦çš„ä½œç”¨"><a href="#override-ä¿®é¥°ç¬¦çš„ä½œç”¨" class="headerlink" title="override ä¿®é¥°ç¬¦çš„ä½œç”¨"></a>override ä¿®é¥°ç¬¦çš„ä½œç”¨</h5><ul><li>ç›¸åŒ</li></ul><p>ä¸ Java ä¸­çš„ @Override æ³¨è§£ç±»ä¼¼ï¼Œ<strong>override ä¿®é¥°ç¬¦ç”¨æ¥æ ‡æ³¨è¢«é‡å†™çš„çˆ¶ç±»æˆ–è€…æ¥å£çš„æ–¹æ³•å’Œå±æ€§</strong>ã€‚</p><ul><li>ä¸åŒ</li></ul><p>åœ¨ Kotlin ä¸­ä½¿ç”¨ override ä¿®é¥°ç¬¦æ˜¯å¼ºåˆ¶è¦æ±‚çš„ã€‚<strong>è¿™ä¼šé¿å…å…ˆå†™å‡ºå®ç°æ–¹æ³•å†æ·»åŠ æŠ½è±¡æ–¹æ³•é€ æˆçš„æ„å¤–é‡å†™ï¼š</strong>ä½ çš„ä»£ç å°†ä¸èƒ½ç¼–è¯‘ï¼Œé™¤éä½ æ˜¾å¼åœ°å°†è¿™ä¸ªæ–¹æ³•æ ‡æ³¨ä¸º Override æˆ–è€…é‡å‘½åå®ƒã€‚</p><h5 id="å¦‚ä½•ç»™æ¥å£æ·»åŠ ä¸€ä¸ªé»˜è®¤å®ç°çš„æ–¹æ³•"><a href="#å¦‚ä½•ç»™æ¥å£æ·»åŠ ä¸€ä¸ªé»˜è®¤å®ç°çš„æ–¹æ³•" class="headerlink" title="å¦‚ä½•ç»™æ¥å£æ·»åŠ ä¸€ä¸ªé»˜è®¤å®ç°çš„æ–¹æ³•"></a>å¦‚ä½•ç»™æ¥å£æ·»åŠ ä¸€ä¸ªé»˜è®¤å®ç°çš„æ–¹æ³•</h5><p>æ¥å£çš„æ–¹æ³•å¯ä»¥æœ‰ä¸€ä¸ªé»˜è®¤å®ç°çš„æ–¹æ³•ã€‚</p><pre><code class="kotlin">interface Clickable{    fun click() // æ™®é€šçš„æ–¹æ³•å£°æ˜    fun showOff() = println(&quot;I&#39;m clickable!&quot;) // å¸¦é»˜è®¤å®ç°çš„æ–¹æ³•}</code></pre><h5 id="å®ç°ä¸€ä¸ªå¸¦æœ‰é»˜è®¤å®ç°çš„æ–¹æ³•çš„æ¥å£è¦æ³¨æ„ä»€ä¹ˆ"><a href="#å®ç°ä¸€ä¸ªå¸¦æœ‰é»˜è®¤å®ç°çš„æ–¹æ³•çš„æ¥å£è¦æ³¨æ„ä»€ä¹ˆ" class="headerlink" title="å®ç°ä¸€ä¸ªå¸¦æœ‰é»˜è®¤å®ç°çš„æ–¹æ³•çš„æ¥å£è¦æ³¨æ„ä»€ä¹ˆ"></a>å®ç°ä¸€ä¸ªå¸¦æœ‰é»˜è®¤å®ç°çš„æ–¹æ³•çš„æ¥å£è¦æ³¨æ„ä»€ä¹ˆ</h5><p>å¦‚æœä½ å®ç°äº†è¿™ä¸ªæ¥å£ï¼Œä½ éœ€è¦ä¸º click æä¾›ä¸€ä¸ªå®ç°ã€‚å¯ä»¥é‡æ–°å®šä¹‰ showOff() æ–¹æ³•çš„è¡Œä¸ºï¼Œæˆ–è€…å¦‚æœä½ å¯¹é»˜è®¤è¡Œä¸ºæ„Ÿåˆ°æ»¡æ„ä¹Ÿå¯ä»¥ç›´æ¥çœç•¥å®ƒã€‚ï¼ˆé»˜è®¤å®ç°çš„æ–¹æ³•ä¹Ÿå¯ä»¥è¢«é‡å†™ï¼‰</p><h5 id="å®šä¹‰å®ç°äº†åŒæ ·æ–¹æ³•çš„æ¥å£"><a href="#å®šä¹‰å®ç°äº†åŒæ ·æ–¹æ³•çš„æ¥å£" class="headerlink" title="å®šä¹‰å®ç°äº†åŒæ ·æ–¹æ³•çš„æ¥å£"></a>å®šä¹‰å®ç°äº†åŒæ ·æ–¹æ³•çš„æ¥å£</h5><pre><code class="kotlin">interface Focusable {    fun setFocus(b: Boolean) = println(&quot;I ${if (b) &quot;got&quot; else &quot;lost&quot;} focus.&quot;)    fun showOff() = println(&quot;I&#39;m focusable!&quot;)}</code></pre><h5 id="åœ¨ç±»ä¸­å®ç°ä¸¤ä¸ªæœ‰ç›¸åŒé»˜è®¤å®ç°æ–¹æ³•çš„æ¥å£ä¼šå‘ç”Ÿä»€ä¹ˆ"><a href="#åœ¨ç±»ä¸­å®ç°ä¸¤ä¸ªæœ‰ç›¸åŒé»˜è®¤å®ç°æ–¹æ³•çš„æ¥å£ä¼šå‘ç”Ÿä»€ä¹ˆ" class="headerlink" title="åœ¨ç±»ä¸­å®ç°ä¸¤ä¸ªæœ‰ç›¸åŒé»˜è®¤å®ç°æ–¹æ³•çš„æ¥å£ä¼šå‘ç”Ÿä»€ä¹ˆ"></a>åœ¨ç±»ä¸­å®ç°ä¸¤ä¸ªæœ‰ç›¸åŒé»˜è®¤å®ç°æ–¹æ³•çš„æ¥å£ä¼šå‘ç”Ÿä»€ä¹ˆ</h5><p>åœ¨è¿™ä¸¤ä¸ªæ¥å£ä¸­éƒ½å¸¦æœ‰é»˜è®¤å®ç°çš„ showOff() æ–¹æ³•ï¼šåœ¨æ²¡æœ‰æ˜¾ç¤ºçš„å®ç° showOff() ,ä¼šå¾—åˆ°ç¼–è¯‘é”™è¯¯ä¿¡æ¯ã€‚</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200827000446.png" alt=""></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200827000526.png" alt=""></p><h6 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h6><p>å¿…é¡»æ˜¾å¼çš„å®ç°ç›¸åŒæ–¹æ³•ã€‚</p><h5 id="è°ƒç”¨ç»§æ‰¿-æ¥å£-çš„é»˜è®¤å®ç°æ–¹æ³•"><a href="#è°ƒç”¨ç»§æ‰¿-æ¥å£-çš„é»˜è®¤å®ç°æ–¹æ³•" class="headerlink" title="è°ƒç”¨ç»§æ‰¿(æ¥å£)çš„é»˜è®¤å®ç°æ–¹æ³•"></a>è°ƒç”¨ç»§æ‰¿(æ¥å£)çš„é»˜è®¤å®ç°æ–¹æ³•</h5><pre><code class="kotlin">class Button : Clickable, Focusable {    override fun click() {        TODO(&quot;Not yet implemented&quot;)    }    //å¦‚æœåŒæ ·çš„ç»§æ‰¿æˆå‘˜ä¸æ­¢ä¸€ä¸ªå®ç°ï¼Œå¿…é¡»æä¾›ä¸€ä¸ªæ˜¾ç¤ºçš„å®ç°ã€‚    override fun showOff() {        // ä½¿ç”¨å°–æ‹¬å·åŠ ä¸Šçˆ¶ç±»åå­—çš„â€œsuperâ€è¡¨æ˜äº†ä½ æƒ³è¦è°ƒç”¨å“ªä¸€ä¸ªçˆ¶ç±»çš„æ–¹æ³•        super&lt;Clickable&gt;.showOff()        super&lt;Focusable&gt;.showOff()    }}</code></pre><p>é€šè¿‡è°ƒç”¨ç»§æ‰¿çš„ä¸¤ä¸ªçˆ¶ç±»å‹ä¸­çš„å®ç°æ¥å®ç° showOff() ã€‚</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200827005257.png" alt=""></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200827005432.png" alt=""></p><h4 id="4-1-2-openã€final-å’Œ-abstract-ä¿®é¥°ç¬¦ï¼šé»˜è®¤ä¸º-final"><a href="#4-1-2-openã€final-å’Œ-abstract-ä¿®é¥°ç¬¦ï¼šé»˜è®¤ä¸º-final" class="headerlink" title="4.1.2 openã€final å’Œ abstract ä¿®é¥°ç¬¦ï¼šé»˜è®¤ä¸º final"></a>4.1.2 openã€final å’Œ abstract ä¿®é¥°ç¬¦ï¼šé»˜è®¤ä¸º final</h4><h5 id="kotlin-ä¸­å¦‚ä½•ç»§æ‰¿ä¸€ä¸ªç±»"><a href="#kotlin-ä¸­å¦‚ä½•ç»§æ‰¿ä¸€ä¸ªç±»" class="headerlink" title="kotlin ä¸­å¦‚ä½•ç»§æ‰¿ä¸€ä¸ªç±»"></a>kotlin ä¸­å¦‚ä½•ç»§æ‰¿ä¸€ä¸ªç±»</h5><p>å¦‚æœä½ æƒ³è¦åˆ›å»ºä¸€ä¸ªç±»çš„å­ç±»ï¼Œéœ€è¦ä½¿ç”¨ open ä¿®é¥°ç¬¦æ¥æ ‡ç¤ºè¿™ä¸ªç±»ã€‚æ­¤å¤–<strong>éœ€è¦ç»™æ¯ä¸ªå¯ä»¥è¢«é‡å†™çš„å±æ€§æˆ–è€…æ–¹æ³•æ·»åŠ  open å±æ€§</strong>ã€‚</p><h5 id="å£°æ˜ä¸€ä¸ªå¸¦open-æ–¹æ³•çš„-open-ç±»"><a href="#å£°æ˜ä¸€ä¸ªå¸¦open-æ–¹æ³•çš„-open-ç±»" class="headerlink" title="å£°æ˜ä¸€ä¸ªå¸¦open æ–¹æ³•çš„ open ç±»"></a>å£°æ˜ä¸€ä¸ªå¸¦open æ–¹æ³•çš„ open ç±»</h5><pre><code class="kotlin">open class RichButton : Clickable {    fun disable() {}    // è¿™ä¸ªå‡½æ•°æ˜¯ final çš„ï¼š ä¸èƒ½åœ¨å­ç±»ä¸­é‡å†™å®ƒã€‚    open fun animate() {} // è¿™ä¸ªå‡½æ•°æ˜¯ open çš„ï¼š å¯ä»¥åœ¨å­ç±»ä¸­é‡å†™å®ƒ    // è¿™ä¸ªå‡½æ•°é‡å†™äº† open å‡½æ•°å¹¶ä¸”å®ƒæœ¬èº«åŒæ ·æ˜¯ open çš„    override fun click() {        TODO(&quot;Not yet implemented&quot;)    }}</code></pre><h5 id="é»˜è®¤-final-çš„å¥½å¤„"><a href="#é»˜è®¤-final-çš„å¥½å¤„" class="headerlink" title="é»˜è®¤ final çš„å¥½å¤„"></a>é»˜è®¤ final çš„å¥½å¤„</h5><p>ç±»é»˜è®¤ final å¸¦æ¥äº†ä¸€ä¸ªé‡è¦çš„å¥½å¤„å°±æ˜¯è¿™ä½¿å¾—åœ¨å¤§é‡çš„åœºæ™¯ä¸­çš„åªèƒ½è½¬æ¢æˆä¸ºå¯èƒ½ã€‚</p><h5 id="æ™ºèƒ½è½¬æ¢çš„å‰æ"><a href="#æ™ºèƒ½è½¬æ¢çš„å‰æ" class="headerlink" title="æ™ºèƒ½è½¬æ¢çš„å‰æ"></a>æ™ºèƒ½è½¬æ¢çš„å‰æ</h5><p><strong>æ™ºèƒ½è½¬æ¢åªèƒ½åœ¨è¿›è¡Œç±»å‹æ£€æŸ¥åæ²¡æœ‰æ”¹å˜è¿‡çš„å˜é‡ä¸Šèµ·çš„ä½œç”¨ã€‚</strong>å¯¹äºä¸€ä¸ªç±»æ¥è¯´ï¼Œè¿™æ„å‘³ç€<strong>æ™ºèƒ½è½¬æ¢åœ¨valç±»å‹å¹¶ä¸”æ²¡æœ‰è‡ªå®šä¹‰è®¿é—®å™¨çš„ç±»å±æ€§ä¸Šä½¿ç”¨</strong>ã€‚ è¿™ä¸ªå‰ææ„å‘³ç€å±æ€§å¿…é¡»æ˜¯ final çš„ï¼Œå¦åˆ™å¦‚æœä¸€ä¸ªå­ç±»å¯ä»¥é‡å†™å±æ€§å¹¶ä¸”å®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰çš„è®¿é—®å™¨å°†ä¼šæ‰“ç ´æ™ºèƒ½è½¬æ¢çš„å…³é”®å‰æã€‚</p><h5 id="æŠ½è±¡ç±»çš„é»˜è®¤ä¿®é¥°ç¬¦"><a href="#æŠ½è±¡ç±»çš„é»˜è®¤ä¿®é¥°ç¬¦" class="headerlink" title="æŠ½è±¡ç±»çš„é»˜è®¤ä¿®é¥°ç¬¦"></a>æŠ½è±¡ç±»çš„é»˜è®¤ä¿®é¥°ç¬¦</h5><p>æŠ½è±¡æˆå‘˜å§‹ç»ˆæ˜¯opençš„ï¼Œæ‰€ä»¥ä¸éœ€è¦æ˜¾å¼åœ°ä½¿ç”¨openä¿®é¥°ç¬¦ã€‚</p><h5 id="å£°æ˜ä¸€ä¸ªæŠ½è±¡ç±»"><a href="#å£°æ˜ä¸€ä¸ªæŠ½è±¡ç±»" class="headerlink" title="å£°æ˜ä¸€ä¸ªæŠ½è±¡ç±»"></a>å£°æ˜ä¸€ä¸ªæŠ½è±¡ç±»</h5><pre><code class="kotlin">abstract class Animated {    abstract fun animate()  // è¿™ä¸ªå‡½æ•°æ˜¯æŠ½è±¡çš„ï¼šå®ƒæ²¡æœ‰å®ç°å¿…é¡»è¢«å­ç±»é‡å†™    // æŠ½è±¡ç±»ä¸­çš„éæŠ½è±¡å‡½æ•° å¹¶ä¸æ˜¯é»˜è®¤ open çš„ï¼Œä½†æ˜¯å¯ä»¥æ ‡æ³¨ä¸º opençš„    open fun stopAnimating() {    }    fun animateTwice() {}}</code></pre><h4 id="4-1-4-å†…éƒ¨ç±»å’ŒåµŒå¥—ç±»ï¼šé»˜è®¤åµŒå¥—ç±»"><a href="#4-1-4-å†…éƒ¨ç±»å’ŒåµŒå¥—ç±»ï¼šé»˜è®¤åµŒå¥—ç±»" class="headerlink" title="4.1.4 å†…éƒ¨ç±»å’ŒåµŒå¥—ç±»ï¼šé»˜è®¤åµŒå¥—ç±»"></a>4.1.4 å†…éƒ¨ç±»å’ŒåµŒå¥—ç±»ï¼šé»˜è®¤åµŒå¥—ç±»</h4><p>å†…éƒ¨ç±»ï¼šéé™æ€åµŒå¥—ç±»ï¼Œä¹Ÿè¢«æˆä¸ºå†…éƒ¨ç±»ã€‚</p><p>åµŒå¥—ç±»ï¼šé™æ€åµŒå¥—ç±»ï¼ŒåµŒå¥—ç±»å¤šç§°ä¸ºï¼šé™æ€åµŒå¥—ç±»ã€‚</p><h5 id="Kotlinä¸­åµŒå¥—ç±»å’ŒJavaä¸­çš„ä¸åŒ"><a href="#Kotlinä¸­åµŒå¥—ç±»å’ŒJavaä¸­çš„ä¸åŒ" class="headerlink" title="Kotlinä¸­åµŒå¥—ç±»å’ŒJavaä¸­çš„ä¸åŒ"></a>Kotlinä¸­åµŒå¥—ç±»å’ŒJavaä¸­çš„ä¸åŒ</h5><p>åœ¨Kotlinä¸­çš„åµŒå¥—ç±»ä¸èƒ½è®¿é—®å¤–éƒ¨ç±»çš„å®ä¾‹ï¼Œé™¤éä½ ç‰¹åˆ«çš„åšå‡ºè¦æ±‚ã€‚ </p><h5 id="åœ¨åºåˆ—åŒ–æ—¶ä½¿ç”¨å†…éƒ¨ç±»"><a href="#åœ¨åºåˆ—åŒ–æ—¶ä½¿ç”¨å†…éƒ¨ç±»" class="headerlink" title="åœ¨åºåˆ—åŒ–æ—¶ä½¿ç”¨å†…éƒ¨ç±»"></a>åœ¨åºåˆ—åŒ–æ—¶ä½¿ç”¨å†…éƒ¨ç±»</h5><p>åœ¨ä½ å®šä¹‰ä¸€ä¸ª View å…ƒç´ ï¼Œå®ƒçš„çŠ¶æ€æ—¶å¯åºåˆ—åŒ–çš„ã€‚<strong>æƒ³è¦åºåˆ—åŒ–ä¸€ä¸ªè§†å›¾å¯èƒ½å¹¶ä¸å®¹æ˜“ï¼Œä½†æ˜¯å¯ä»¥æŠŠæ‰€æœ‰éœ€è¦çš„æ•°æ®å¤åˆ¶åˆ°å¦ä¸€ä¸ªè¾…åŠ©ç±»ä¸­å»ã€‚</strong></p><pre><code class="kotlin">interface State : Serializableinterface View {    fun getCurrentState(): State    fun restoreState(state: State) {}}</code></pre><p>å£°æ˜Stateæ¥å£å»å®ç°Serializableã€‚Viewæ¥å£å£°æ˜äº†å¯ä»¥ç”¨æ¥ä¿å­˜è§†å›¾çŠ¶æ€çš„getCurrentStateå’ŒrestoreStateæ–¹æ³•ã€‚</p><h5 id="ç”¨å†…éƒ¨ç±»çš„javaä»£ç æ¥å®ç°View"><a href="#ç”¨å†…éƒ¨ç±»çš„javaä»£ç æ¥å®ç°View" class="headerlink" title="ç”¨å†…éƒ¨ç±»çš„javaä»£ç æ¥å®ç°View"></a>ç”¨å†…éƒ¨ç±»çš„javaä»£ç æ¥å®ç°View</h5><pre><code class="java">public class Button implements View{    @Override    public State getCurrentState(){        return new ButtonState();    }    @Override    public voiew restoreState(State state){        /**/    }    public class ButtonState implements State{        /**/    }}</code></pre><p>é—®é¢˜ï¼šåœ¨è¿è¡Œæ—¶ä½ ä¼šå¾—åˆ° java.io.NotSerializable.Exception:Button å¼‚å¸¸ï¼Œåœ¨ä½ åºåˆ—åŒ–å£°æ˜çš„æŒ‰é’®çŠ¶æ€æ—¶ã€‚è¿™ä¸ªå¯èƒ½çœ‹èµ·æ¥ä¼šå¾ˆå¥‡æ€ªï¼šä½ åºåˆ—åŒ–çš„å˜é‡æ˜¯ButtonStateç±»å‹ï¼Œä¸ºä»€ä¹ˆä¼šæœ‰Buttonå¼‚å¸¸å‘¢ï¼Ÿ</p><h5 id="æ— æ³•åºåˆ—åŒ–çš„åŸå› "><a href="#æ— æ³•åºåˆ—åŒ–çš„åŸå› " class="headerlink" title="æ— æ³•åºåˆ—åŒ–çš„åŸå› "></a>æ— æ³•åºåˆ—åŒ–çš„åŸå› </h5><p>åœ¨javaä¸­ï¼Œå½“ä½ åœ¨å¦ä¸€ä¸ªç±»ä¸­å£°æ˜ä¸€ä¸ªç±»æ—¶ï¼Œå®ƒä¼šé»˜è®¤å˜æˆå†…éƒ¨ç±»ã€‚æ¡ˆä¾‹ä¸­ï¼šButtonStateç±»éšç¤ºçš„å­˜å‚¨äº†å®ƒçš„å¤–éƒ¨Buttonç±»çš„åº”ç”¨ã€‚ä»è€Œè§£é‡Šäº†ä¸ºä»€ä¹ˆButtonStateä¸èƒ½è¢«åºåˆ—åŒ–ã€‚</p><h5 id="ä¿®å¤æ— æ³•åºåˆ—åŒ–"><a href="#ä¿®å¤æ— æ³•åºåˆ—åŒ–" class="headerlink" title="ä¿®å¤æ— æ³•åºåˆ—åŒ–"></a>ä¿®å¤æ— æ³•åºåˆ—åŒ–</h5><p><strong>éœ€è¦å£°æ˜ButtonStateç±»æ˜¯staticçš„</strong>ã€‚å°†åµŒå¥—ç±»å£°æ˜ä¸ºstaticä¼šå†²è¿™ä¸ªç±»ä¸­åˆ é™¤åŒ…å›´å®ƒçš„ç±»çš„éšå¼å¼•ç”¨ã€‚</p><h5 id="åœ¨kotlinä¸­ä½¿ç”¨åµŒå¥—ç±»æ¥å®ç°-View"><a href="#åœ¨kotlinä¸­ä½¿ç”¨åµŒå¥—ç±»æ¥å®ç°-View" class="headerlink" title="åœ¨kotlinä¸­ä½¿ç”¨åµŒå¥—ç±»æ¥å®ç° View"></a>åœ¨kotlinä¸­ä½¿ç”¨åµŒå¥—ç±»æ¥å®ç° View</h5><pre><code class="kotlin">class Button : View {    override fun getCurrentState(): State {        TODO(&quot;Not yet implemented&quot;)    }    override fun restoreState(state: State) {        TODO(&quot;Not yet implemented&quot;)    }    // è¿™ä¸ªç±»ä¸Javaä¸­çš„é™æ€æ½œé€ƒç±»ç±»ä¼¼    class ButtonState : State {    }}</code></pre><p><strong>kotlinä¸­é»˜è®¤è¡Œä¸ºæ˜¯åµŒå¥—ç±»ã€‚</strong></p><h5 id="å¦‚ä½•è®©é»˜è®¤åµŒå¥—ç±»çš„ç±»å‹å˜ä¸ºå†…éƒ¨ç±»ï¼"><a href="#å¦‚ä½•è®©é»˜è®¤åµŒå¥—ç±»çš„ç±»å‹å˜ä¸ºå†…éƒ¨ç±»ï¼" class="headerlink" title="å¦‚ä½•è®©é»˜è®¤åµŒå¥—ç±»çš„ç±»å‹å˜ä¸ºå†…éƒ¨ç±»ï¼"></a>å¦‚ä½•è®©é»˜è®¤åµŒå¥—ç±»çš„ç±»å‹å˜ä¸ºå†…éƒ¨ç±»ï¼</h5><p>è¦æŠŠå®ƒï¼ˆåµŒå¥—ç±»ï¼‰å˜æˆä¸ºä¸€ä¸ªå†…éƒ¨ç±»æ¥æŒæœ‰ä¸€ä¸ªå¤–éƒ¨ç±»çš„å¼•ç”¨çš„è¯éœ€è¦ä½¿ç”¨ <strong>inner</strong> ä¿®é¥°ç¬¦ã€‚</p><h5 id="kotlinä¸­å†…éƒ¨ç±»è®¿é—®å¤–éƒ¨ç±»"><a href="#kotlinä¸­å†…éƒ¨ç±»è®¿é—®å¤–éƒ¨ç±»" class="headerlink" title="kotlinä¸­å†…éƒ¨ç±»è®¿é—®å¤–éƒ¨ç±»"></a>kotlinä¸­å†…éƒ¨ç±»è®¿é—®å¤–éƒ¨ç±»</h5><p>åœ¨kotlinä¸­å¼•ç”¨å¤–éƒ¨ç±»å®ä¾‹çš„è¯­æ³•ä¸javaä¸åŒã€‚éœ€è¦ä½¿ç”¨this@Outerä»Innerç±»å»è®¿é—®Outerç±»ã€‚</p><h4 id="4-1-5-å¯†å°ç±»ï¼šå®šä¹‰å—é™çš„ç±»ç»§æ‰¿ç»“æ„"><a href="#4-1-5-å¯†å°ç±»ï¼šå®šä¹‰å—é™çš„ç±»ç»§æ‰¿ç»“æ„" class="headerlink" title="4.1.5 å¯†å°ç±»ï¼šå®šä¹‰å—é™çš„ç±»ç»§æ‰¿ç»“æ„"></a>4.1.5 å¯†å°ç±»ï¼šå®šä¹‰å—é™çš„ç±»ç»§æ‰¿ç»“æ„</h4><h5 id="ä»€ä¹ˆæ˜¯å¯†å°ç±»â€sealedâ€œ"><a href="#ä»€ä¹ˆæ˜¯å¯†å°ç±»â€sealedâ€œ" class="headerlink" title="ä»€ä¹ˆæ˜¯å¯†å°ç±»â€sealedâ€œ"></a>ä»€ä¹ˆæ˜¯å¯†å°ç±»â€sealedâ€œ</h5><p>sealed ç±»ã€‚ä¸ºçˆ¶ç±»æ·»åŠ äº†ä¸€ä¸ªæ–°çš„ sealed ä¿®é¥°ç¬¦ï¼Œå¯å¯¹åˆ›å»ºçš„å­ç±»åšå‡ºä¸¥æ ¼çš„é™åˆ¶ã€‚<strong>æ‰€æœ‰çš„å­ç±»å¿…é¡»åµŒå¥—åœ¨çˆ¶ç±»ä¸­ã€‚</strong></p><h5 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å¯†å°ç±»ï¼ˆå®šä¹‰å—é™çš„ç±»ç»§æ‰¿ç»“æ„ï¼‰"><a href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å¯†å°ç±»ï¼ˆå®šä¹‰å—é™çš„ç±»ç»§æ‰¿ç»“æ„ï¼‰" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å¯†å°ç±»ï¼ˆå®šä¹‰å—é™çš„ç±»ç»§æ‰¿ç»“æ„ï¼‰"></a>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å¯†å°ç±»ï¼ˆå®šä¹‰å—é™çš„ç±»ç»§æ‰¿ç»“æ„ï¼‰</h5><p><strong>ä½œä¸ºæ¥å£å®ç°çš„è¡¨è¾¾å¼ ğŸ‘‡</strong></p><pre><code class="kotlin">interface Exprclass Num(val value: Int) : Exprclass Sum(val left: Expr, val right: Expr):Exprfun eval(e: Expr): Int =    when (e) {        is Num -&gt; e.value        is Sum -&gt; eval(e.left) + eval(e.right)        else -&gt; // å¿…é¡»æ£€æŸ¥ else åˆ†æ”¯            throw  IllegalArgumentException(&quot;Unknown expression!&quot;)    }</code></pre><p><strong>å½“ä½¿ç”¨ when ç»“æ„æ¥æ‰§è¡Œè¡¨è¾¾å¼çš„æ—¶å€™ï¼ŒKotlin ç¼–è¯‘å™¨ä¼šå¼ºåˆ¶æ£€æŸ¥é»˜è®¤é€‰é¡¹</strong>ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<strong>ä¸èƒ½è¿”å›ä¸€ä¸ªæœ‰æ„ä¹‰çš„å€¼ï¼Œæ‰€ä»¥ç›´æ¥è¿”å›å¼‚å¸¸çŠ¶æ€ã€‚</strong></p><p>æ›´é‡è¦çš„æ˜¯ï¼Œå¦‚æœä½ æ·»åŠ äº†ä¸€ä¸ªæ–°çš„å­ç±»ï¼Œç¼–è¯‘å™¨å¹¶ä¸èƒ½å‘ç°ä½ ä¿®æ”¹äº†ã€‚<strong>å¦‚æœä½ å¿˜è®°æ·»åŠ ä¸€ä¸ªæ–°çš„åˆ†æ”¯ï¼Œå°±ä¼šé€‰æ‹©é»˜è®¤é€‰é¡¹ï¼Œè¿™åˆå¯èƒ½å¯¼è‡´æ½œåœ¨çš„ bugã€‚</strong></p><h5 id="å¦‚ä½•ä½¿ç”¨å¯†å°ç±»-â€œsealedâ€"><a href="#å¦‚ä½•ä½¿ç”¨å¯†å°ç±»-â€œsealedâ€" class="headerlink" title="å¦‚ä½•ä½¿ç”¨å¯†å°ç±» â€œsealedâ€"></a>å¦‚ä½•ä½¿ç”¨å¯†å°ç±» â€œsealedâ€</h5><pre><code class="kotlin">sealed class Expr { //å°†åŸºç±»æ ‡è®°ä¸ºå°é—­çš„    class Num(val value: Int) : Expr()    class Sum(val left: Expr, val right: Expr) : Expr() // å°†æ‰€æœ‰å¯èƒ½çš„ç±»ä½œä¸ºåµŒå¥—ç±»åˆ—å‡º}fun eval(expr: Expr): Int =    // â€œwhenâ€è¡¨è¾¾å¼è¦†ç›–äº†æ‰€æœ‰çš„å¯èƒ½æƒ…å†µï¼Œæ‰€ä»¥ä¸å†éœ€è¦ else åˆ†æ”¯    when (expr) {        is Expr.Num -&gt; expr.value        is Expr.Sum -&gt; eval(expr.left) + eval(expr.right)    }</code></pre><p><strong>å¦‚æœä½ åœ¨ when è¡¨è¾¾å¼ä¸­å¤„ç†äº†æ‰€æœ‰çš„ sealed ç±»çš„å­ç±»ï¼Œä½ å°±ä¸å†éœ€è¦æä¾›é»˜è®¤åˆ†æ”¯ã€‚</strong>æ³¨æ„ï¼Œsealed ä¿®é¥°ç¬¦éšå«çš„è¿™ä¸ªç±»æ˜¯ä¸€ä¸ª open ç±»ï¼Œä½ ä¸å†éœ€è¦æ˜¾å¼åœ°æ·»åŠ  open ä¿®é¥°ç¬¦ã€‚</p><h3 id="4-2-å£°æ˜ä¸€ä¸ªå¸¦é»˜è®¤æ„é€ æ–¹æ³•æˆ–å±æ€§çš„ç±»"><a href="#4-2-å£°æ˜ä¸€ä¸ªå¸¦é»˜è®¤æ„é€ æ–¹æ³•æˆ–å±æ€§çš„ç±»" class="headerlink" title="4.2 å£°æ˜ä¸€ä¸ªå¸¦é»˜è®¤æ„é€ æ–¹æ³•æˆ–å±æ€§çš„ç±»"></a>4.2 å£°æ˜ä¸€ä¸ªå¸¦é»˜è®¤æ„é€ æ–¹æ³•æˆ–å±æ€§çš„ç±»</h3><p><strong>kotlinä¸­æ„é€ æ–¹æ³•å’Œjavaä¸­æœ‰é‚£äº›ä¸åŒ</strong></p><p>ä¸javaä¸­ä¸€ä¸ªç±»å¯ä»¥å£°æ˜ä¸€ä¸ªæˆ–å¤šä¸ªæ„é€ æ–¹æ³•ã€‚kotlinä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼Œåªæ˜¯åšå‡ºäº†ä¸€äº›ä¿®æ”¹ï¼šåŒºåˆ†äº†ä¸»æ„é€ æ–¹æ³•ï¼ˆé€šå¸¸æ˜¯ä¸»è¦è€Œç®€æ´çš„åˆå§‹åŒ–ç±»çš„æ–¹æ³•ï¼Œå¹¶ä¸”åœ¨ç±»ä½“å¤–éƒ¨å£°æ˜ï¼‰å’Œä»æ„é€ æ–¹æ³•ã€‚</p><h4 id="4-2-1-åˆå§‹åŒ–ç±»ï¼šä¸»æ„é€ æ–¹æ³•å’Œåˆå§‹åŒ–ä»£ç å—"><a href="#4-2-1-åˆå§‹åŒ–ç±»ï¼šä¸»æ„é€ æ–¹æ³•å’Œåˆå§‹åŒ–ä»£ç å—" class="headerlink" title="4.2.1 åˆå§‹åŒ–ç±»ï¼šä¸»æ„é€ æ–¹æ³•å’Œåˆå§‹åŒ–ä»£ç å—"></a>4.2.1 åˆå§‹åŒ–ç±»ï¼šä¸»æ„é€ æ–¹æ³•å’Œåˆå§‹åŒ–ä»£ç å—</h4><h5 id="ä»€ä¹ˆæ˜¯ä¸»æ„é€ æ–¹æ³•ã€‚"><a href="#ä»€ä¹ˆæ˜¯ä¸»æ„é€ æ–¹æ³•ã€‚" class="headerlink" title="ä»€ä¹ˆæ˜¯ä¸»æ„é€ æ–¹æ³•ã€‚"></a>ä»€ä¹ˆæ˜¯ä¸»æ„é€ æ–¹æ³•ã€‚</h5><pre><code class="kotlin">class User(val nickname:String)</code></pre><p>è¿™æ®µè¢«æ‹¬å·å›´èµ·æ¥çš„ä»£ç å—å°±å«<strong>åšä¸»æ„é€ æ–¹æ³•</strong>ã€‚å®ƒæœ‰ä¸¤ä¸ªç›®çš„ï¼šè¡¨æ˜æ„é€ æ–¹æ³•çš„<strong>å‚æ•°</strong>ï¼Œä»¥åŠå®šä¹‰ä½¿ç”¨è¿™ä¸ª<strong>å‚æ•°</strong>çš„å±æ€§ã€‚</p><h5 id="æ˜ç¡®çš„ä¸»æ„é€ æ–¹æ³•å£°æ˜"><a href="#æ˜ç¡®çš„ä¸»æ„é€ æ–¹æ³•å£°æ˜" class="headerlink" title="æ˜ç¡®çš„ä¸»æ„é€ æ–¹æ³•å£°æ˜"></a>æ˜ç¡®çš„ä¸»æ„é€ æ–¹æ³•å£°æ˜</h5><pre><code class="kotlin">class User constructor(_nickname: String) {   // å¸¦ä¸€ä¸ªå‚æ•°çš„ä¸»æ„é€ æ–¹æ³•    val nickname: String    init {  // åˆå§‹åŒ–ä»£ç å—        nickname = _nickname    }}</code></pre><p>ç°åœ¨æ¥çœ‹çœ‹å®ŒæˆåŒæ ·åŠŸèƒ½çš„ä»£ç å…·ä½“æ˜¯ä»€ä¹ˆæ ·å­ã€‚</p><blockquote><p>ä¸¤ä¸ªå…³é”®è¯ <strong>construtor</strong> å’Œ <strong>init</strong>ã€‚ constructor å…³é”®è¯ç”¨æ¥å¼€å§‹ä¸€ä¸ª<strong>æ„é€ æ–¹æ³•</strong>æˆ–è€…<strong>ä»æ„é€ æ–¹æ³•</strong>çš„å£°æ˜ã€‚init å…³é”®è¯ç”¨æ¥å¼•å…¥åˆå§‹åŒ–ä»£ç å—ã€‚è¿™ç§ä»£ç å—åŒ…å«äº†ç±»åœ¨åˆ›å»ºæ—¶æ‰§è¡Œçš„ä»£ç ï¼Œå¹¶ä¸”ä¼šå’Œä¸»æ„é€ æ–¹æ³•ä¸€èµ·ä½¿ç”¨ã€‚<strong>å› ä¸ºä¸»æ„é€ æ–¹æ³•æœ‰è¯­æ³•é™åˆ¶ï¼Œä¸èƒ½åŒ…å«åˆå§‹åŒ–ä»£ç ï¼Œè¿™å°±æ˜¯éœ€è¦åˆå§‹åŒ–ä»£ç å—ï¼ˆinitï¼‰çš„åŸå› ã€‚</strong>åŒæ—¶å¯ä»¥åˆ›å»ºå¤šä¸ªåˆå§‹åŒ–ä»£ç å—ã€‚</p></blockquote><h5 id="ç”¨å‚æ•°æ¥åˆå§‹åŒ–å±æ€§"><a href="#ç”¨å‚æ•°æ¥åˆå§‹åŒ–å±æ€§" class="headerlink" title="ç”¨å‚æ•°æ¥åˆå§‹åŒ–å±æ€§"></a>ç”¨å‚æ•°æ¥åˆå§‹åŒ–å±æ€§</h5><pre><code class="kotlin">class User(_nickname: String) { // å¸¦ä¸€ä¸ªå‚æ•°çš„æ„é€ æ–¹æ³•    val nickname: String = _nickname    // ç”¨å‚æ•°æ¥åˆå§‹åŒ–å±æ€§}</code></pre><blockquote><p>åœ¨ä¾‹å­ä¸­ï¼Œä¸éœ€è¦æŠŠåˆå§‹åŒ–ä»£ç æ”¾åœ¨åˆå§‹åŒ–ä»£ç å—ä¸­ï¼Œå› ä¸ºå®ƒå¯ä»¥ä¸nicknameå±æ€§å£°æ˜ç»“åˆã€‚å¦‚æœä¸»æ„é€ æ–¹æ³•æ²¡æœ‰æ³¨è§£æˆ–å¯è§æ€§ä¿®é¥°ç¬¦ï¼ŒåŒæ ·å¯ä»¥å»é™¤ constructor å…³é”®è¯ã€‚</p></blockquote><h5 id="ç”¨æœ€ç®€æ´çš„æ–¹æ³•å†æ¬¡åˆå§‹åŒ–ç±»"><a href="#ç”¨æœ€ç®€æ´çš„æ–¹æ³•å†æ¬¡åˆå§‹åŒ–ç±»" class="headerlink" title="ç”¨æœ€ç®€æ´çš„æ–¹æ³•å†æ¬¡åˆå§‹åŒ–ç±»"></a>ç”¨æœ€ç®€æ´çš„æ–¹æ³•å†æ¬¡åˆå§‹åŒ–ç±»</h5><pre><code class="kotlin">class User(val nickname:String)    // â€œvalâ€ æ„å‘³ç›¸å¯¹åº”çš„å±æ€§ä¼šç”¨æ„é€ æ–¹æ³•çš„å‚æ•°æ¥åˆå§‹åŒ–ã€‚</code></pre><p>å‰å‡ ä¸ªæ¡ˆä¾‹ç”¨ val å…³é”®è¯å£°æ˜äº†å±æ€§ã€‚å¦‚æœå±æ€§ç”¨ç›¸å¯¹åº”çš„æ„é€ æ–¹æ³•å‚æ•°æ¥åˆå§‹åŒ–ï¼Œ<strong>ä»£ç å¯ä»¥é€šè¿‡æŠŠ val å…³é”®è¯åŠ è½½å‚æ•°å‰çš„æ–¹æ³•æ¥ç®€åŒ–å®ƒ</strong>ã€‚å¯ä»¥ç”¨æ¥ä»£æ›¿ç±»ä¸­çš„å±æ€§å®šä¹‰äº†ã€‚</p><h5 id="ä¸ºæ„é€ æ–¹æ³•æä¾›é»˜è®¤å€¼"><a href="#ä¸ºæ„é€ æ–¹æ³•æä¾›é»˜è®¤å€¼" class="headerlink" title="ä¸ºæ„é€ æ–¹æ³•æä¾›é»˜è®¤å€¼"></a>ä¸ºæ„é€ æ–¹æ³•æä¾›é»˜è®¤å€¼</h5><pre><code class="kotlin">class User(val nickname: String, val isSubscribed: Boolean = true) // ä¸ºæ„é€ æ–¹æ³•æä¾›ä¸€ä¸ªé»˜è®¤å€¼    </code></pre><p>å¯ä»¥åƒå‡½æ•°å‚æ•°ä¸€æ ·ä¸ºæ„é€ æ–¹æ³•å£°æ˜é»˜è®¤å€¼ã€‚</p><h5 id="å¦‚ä½•è®©ä¸€ä¸ªç±»ä¸è¢«å…¶ä»–ä»£ç å®ä¾‹åŒ–"><a href="#å¦‚ä½•è®©ä¸€ä¸ªç±»ä¸è¢«å…¶ä»–ä»£ç å®ä¾‹åŒ–" class="headerlink" title="å¦‚ä½•è®©ä¸€ä¸ªç±»ä¸è¢«å…¶ä»–ä»£ç å®ä¾‹åŒ–"></a>å¦‚ä½•è®©ä¸€ä¸ªç±»ä¸è¢«å…¶ä»–ä»£ç å®ä¾‹åŒ–</h5><p>å¦‚æœæƒ³è¦ä½ çš„ç±»ä¸è¢«å…¶ä»–ä»£ç å®ä¾‹åŒ–ï¼Œå¿…é¡»æŠŠæ„é€ æ–¹æ³•æ ‡è®°ä¸º privateã€‚</p><pre><code class="kotlin">class Secretive private constructor()   // è¿™ä¸ªç±»æœ‰ private æ„é€ æ–¹æ³•</code></pre><h4 id="4-2-2-æ„é€ æ–¹æ³•ï¼šç”¨ä¸åŒçš„æ–¹æ³•æ¥åˆå§‹åŒ–æ–¹æ³•"><a href="#4-2-2-æ„é€ æ–¹æ³•ï¼šç”¨ä¸åŒçš„æ–¹æ³•æ¥åˆå§‹åŒ–æ–¹æ³•" class="headerlink" title="4.2.2 æ„é€ æ–¹æ³•ï¼šç”¨ä¸åŒçš„æ–¹æ³•æ¥åˆå§‹åŒ–æ–¹æ³•"></a>4.2.2 æ„é€ æ–¹æ³•ï¼šç”¨ä¸åŒçš„æ–¹æ³•æ¥åˆå§‹åŒ–æ–¹æ³•</h4><h5 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å¤šç§æ–¹æ³•åˆå§‹åŒ–çˆ¶ç±»"><a href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å¤šç§æ–¹æ³•åˆå§‹åŒ–çˆ¶ç±»" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å¤šç§æ–¹æ³•åˆå§‹åŒ–çˆ¶ç±»"></a><strong>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å¤šç§æ–¹æ³•åˆå§‹åŒ–çˆ¶ç±»</strong></h5><p>æœ€å¸¸è§çš„ä¸€ç§å°±æ˜¯å½“ä½ éœ€è¦æ‰©å±•ä¸€ä¸ªæ¡†æ¶ç±»æ¥æä¾›å¤šä¸ªæ„é€ æ–¹æ³•ï¼Œä»¥ä¾¿äºé€šè¿‡ä¸åŒçš„æ–¹æ³•æ¥åˆå§‹åŒ–ç±»çš„æ—¶å€™ã€‚</p><h5 id="çˆ¶ç±»ä½¿ç”¨ä»æ„é€ æ–¹æ³•"><a href="#çˆ¶ç±»ä½¿ç”¨ä»æ„é€ æ–¹æ³•" class="headerlink" title="çˆ¶ç±»ä½¿ç”¨ä»æ„é€ æ–¹æ³•"></a><strong>çˆ¶ç±»ä½¿ç”¨ä»æ„é€ æ–¹æ³•</strong></h5><pre><code class="kotlin">open class View {    constructor(ctx: Context) { // ä»æ„é€ æ–¹æ³•        //some code    }    constructor(ctx: Context, attr: AttributeSet) { // ä»æ„é€ æ–¹æ³•        //some code    }}</code></pre><h5 id="æ‰©å±•çˆ¶ç±»"><a href="#æ‰©å±•çˆ¶ç±»" class="headerlink" title="æ‰©å±•çˆ¶ç±»"></a>æ‰©å±•çˆ¶ç±»</h5><pre><code class="kotlin">class MyButton : View {    constructor(ctx: Context) : super(ctx) {        // è°ƒç”¨çˆ¶ç±»æ„é€ æ–¹æ³•    }    constructor(ctx: Context, attr: AttributeSet) : super(ctx, attr) {    }}</code></pre><h5 id="è°ƒç”¨çˆ¶ç±»çš„å¦ä¸€ä¸ªæ„é€ æ–¹æ³•"><a href="#è°ƒç”¨çˆ¶ç±»çš„å¦ä¸€ä¸ªæ„é€ æ–¹æ³•" class="headerlink" title="è°ƒç”¨çˆ¶ç±»çš„å¦ä¸€ä¸ªæ„é€ æ–¹æ³•"></a>è°ƒç”¨çˆ¶ç±»çš„å¦ä¸€ä¸ªæ„é€ æ–¹æ³•</h5><pre><code class="kotlin">class MyButton : View {    constructor(ctx: Context) : this(ctx, My_SYTLE) {        // å§”æ‰˜ç»™è¿™ä¸ªç±»çš„å¦ä¸€ä¸ªæ„é€ æ–¹æ³•    }    constructor(ctx: Context, attr: AttributeSet) : super(ctx, attr) {    }}</code></pre><p>ä»<strong>æ„é€ æ–¹æ³•</strong>ä¸­è°ƒç”¨ä½ è‡ªå·±ç±»çš„å¦ä¸€ä¸ª<strong>æ„é€ æ–¹æ³•</strong>ã€‚</p><p>å¯ä»¥ä¿®æ”¹ MyButtonç±» <strong>ä½¿å¾—ä¸€ä¸ªæ„é€ æ–¹æ³•å§”æ‰˜ç»™åŒä¸€ä¸ªç±»çš„å¦ä¸€ä¸ªæ„é€ æ–¹æ³•</strong>ï¼Œä¸ºå‚æ•°ä¼ å…¥é»˜è®¤å€¼ï¼Œå›¾ä¸‹ğŸ‘‡ã€‚ç¬¬äºŒä¸ªæ–¹æ³•ç»§ç»­è°ƒç”¨super()ã€‚</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200906113216.png" alt=""></p><h4 id="4-2-3-å®ç°åœ¨æ¥å£ä¸­å£°æ˜çš„å±æ€§"><a href="#4-2-3-å®ç°åœ¨æ¥å£ä¸­å£°æ˜çš„å±æ€§" class="headerlink" title="4.2.3 å®ç°åœ¨æ¥å£ä¸­å£°æ˜çš„å±æ€§"></a>4.2.3 å®ç°åœ¨æ¥å£ä¸­å£°æ˜çš„å±æ€§</h4><h5 id="åœ¨æ¥å£ä¸­å£°æ˜ä¸€ä¸ªå±æ€§"><a href="#åœ¨æ¥å£ä¸­å£°æ˜ä¸€ä¸ªå±æ€§" class="headerlink" title="åœ¨æ¥å£ä¸­å£°æ˜ä¸€ä¸ªå±æ€§"></a>åœ¨æ¥å£ä¸­å£°æ˜ä¸€ä¸ªå±æ€§</h5><pre><code class="kotlin">interface User {    val nickname: String}</code></pre><p>æ¥å£å¯ä»¥åŒ…å«æŠ½è±¡å±æ€§å£°æ˜ã€‚</p><p>è¿™æ„å‘³è¿™<strong>å®ç°Useræ¥å£çš„ç±»éœ€è¦</strong>æä¾›ä¸€ä¸ªå–å¾—nicknameå€¼çš„æ–¹å¼ã€‚</p><h5 id="å®ç°æ¥å£ä¸­çš„å±æ€§-ä¸‰ç§"><a href="#å®ç°æ¥å£ä¸­çš„å±æ€§-ä¸‰ç§" class="headerlink" title="å®ç°æ¥å£ä¸­çš„å±æ€§ ä¸‰ç§"></a>å®ç°æ¥å£ä¸­çš„å±æ€§ ä¸‰ç§</h5><p>ç¬¬ä¸€ç§</p><pre><code class="kotlin">// ä¸»æ„é€ æ–¹æ³•å±æ€§class PrivateUser(override val nickname: String) : User {}</code></pre><p>å¯¹äº PrivateUser æ¥è¯´ï¼Œ<strong>ä½ æ˜¯ç”¨äº†é—´æ¥çš„è¯­æ³•ç›´æ¥åœ¨ä¸»æ„é€ æ–¹æ³•ä¸­å£°æ˜äº†ä¸€ä¸ªå±æ€§</strong>ã€‚è¿™ä¸ªå±æ€§å®ç°äº†æ¥è‡ªäºUserçš„æŠ½è±¡å±æ€§ï¼Œæ‰€ä»¥ä½ å°†å…¶æ ‡è®°ä¸º overrideã€‚</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200908100413.png" alt=""></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200908095819.png" alt=""></p><p>è¿è¡Œç»“æœ</p><p>ç¬¬äºŒç§</p><pre><code class="kotlin">class SubscribingUser(val email: String) : User {    override val nickname: String get() = email.substringBefore(&#39;@&#39;)  // è‡ªå®šä¹‰getter}</code></pre><p>å¯¹äº SubscribeingUser æ¥è¯´ï¼Œnikenameå±æ€§é€šè¿‡ä¸€ä¸ªè‡ªå®šä¹‰ getter å®ç°ã€‚<strong>è¿™ä¸ªå±æ€§æ²¡æœ‰ä¸€ä¸ªæ”¯æŒå­—æ®µæ¥å­˜å‚¨å®ƒçš„å€¼ï¼Œå®ƒåªæœ‰ä¸€ä¸ª getter åœ¨æ¯æ¬¡è°ƒç”¨æ—¶ä» email ä¸­å¾—åˆ°æ˜µç§°ã€‚</strong></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200908100342.png" alt=""></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200908100257.png" alt=""></p><p>è¿è¡Œç»“æœ</p><p>ç¬¬ä¸‰ç§</p><pre><code class="kotlin">class FacebookUser(val accoundId: Int) : User {    override val nickname = getFacebookName(accoundId)  // å±æ€§åˆå§‹åŒ–    fun getFacebookName(text: String): String {        return text    }}</code></pre><p>nicknameåœ¨SubscribingUserå’ŒFackbookUserä¸­çš„ä¸åŒå®ç°ã€‚å³ä½¿å®ƒä»¬çœ‹èµ·æ¥å¾ˆç›¸ä¼¼ï¼Œç¬¬ä¸€ä¸ªå±æ€§æœ‰ä¸€ä¸ªè‡ªå®šä¹‰getteråœ¨æ¯æ¬¡è®¿é—®æ—¶è®¡ç®— subscringBeforeï¼Œç„¶å FackbookUserä¸­çš„å±æ€§æœ‰ä¸€ä¸ª<strong>æ”¯æŒå­—æ®µæ¥å­˜å‚¨åœ¨ç±»åˆå§‹åŒ–æ—¶è®¡ç®—å¾—åˆ°æ•°æ®</strong>ã€‚</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200908104646.png" alt=""></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200908111027.png" alt=""></p><p>è¿è¡Œç»“æœ</p><h3 id="4-3-ç¼–è¯‘å™¨ç”Ÿæˆçš„æ–¹æ³•-æ•°æ®ç±»å’Œå§”æ‰˜"><a href="#4-3-ç¼–è¯‘å™¨ç”Ÿæˆçš„æ–¹æ³•-æ•°æ®ç±»å’Œå§”æ‰˜" class="headerlink" title="4.3 ç¼–è¯‘å™¨ç”Ÿæˆçš„æ–¹æ³•:æ•°æ®ç±»å’Œå§”æ‰˜"></a>4.3 ç¼–è¯‘å™¨ç”Ÿæˆçš„æ–¹æ³•:æ•°æ®ç±»å’Œå§”æ‰˜</h3><h4 id="4-3-2-æ•°æ®ç±»-è‡ªåŠ¨ç”Ÿæˆé€šç”¨æ–¹æ³•çš„å®ç°"><a href="#4-3-2-æ•°æ®ç±»-è‡ªåŠ¨ç”Ÿæˆé€šç”¨æ–¹æ³•çš„å®ç°" class="headerlink" title="4.3.2 æ•°æ®ç±»:è‡ªåŠ¨ç”Ÿæˆé€šç”¨æ–¹æ³•çš„å®ç°."></a>4.3.2 æ•°æ®ç±»:è‡ªåŠ¨ç”Ÿæˆé€šç”¨æ–¹æ³•çš„å®ç°.</h4><p>å®ç°ä¸€ä¸ªæ•°æ®ç±»éœ€è¦é‡å†™æ–¹æ³•:toStringã€equalså’Œhashcodeã€‚</p><p><strong>æ•°æ®ç±»</strong></p><pre><code class="kotlin">data class Client(val name:String,val postalCode:Int)</code></pre><p>è¿™æ˜¯ä¸€ä¸ªæ•°æ®ç±»,é‡å†™äº†æ‰€æœ‰æ ‡å‡†çš„Javaæ–¹æ³•:</p><ul><li>equals ç”¨æ¥æ¯”è¾ƒå®ä¾‹</li><li>hashCodeç”¨æ¥ä½œä¸ºä¾‹å¦‚HashMapè¿™ç§åŸºäºå“ˆå¸Œå®¹å™¨çš„é”®</li><li>toStringç”¨æ¥ä¸ºç±»ç”ŸæˆæŒ‰å£°æ˜é¡ºåºæ’åˆ—çš„æ‰€æœ‰å­—æ®µçš„å­—ç¬¦ä¸²è¡¨è¾¾å½¢å¼</li></ul><h3 id="4-4-â€œobjectâ€-å…³é”®å­—ï¼š-å°†å£°æ˜ä¸€ä¸ªç±»ä¸åˆ›å»ºä¸€ä¸ªå®ä¾‹ç»“åˆèµ·æ¥"><a href="#4-4-â€œobjectâ€-å…³é”®å­—ï¼š-å°†å£°æ˜ä¸€ä¸ªç±»ä¸åˆ›å»ºä¸€ä¸ªå®ä¾‹ç»“åˆèµ·æ¥" class="headerlink" title="4.4 â€œobjectâ€ å…³é”®å­—ï¼š å°†å£°æ˜ä¸€ä¸ªç±»ä¸åˆ›å»ºä¸€ä¸ªå®ä¾‹ç»“åˆèµ·æ¥"></a>4.4 â€œobjectâ€ å…³é”®å­—ï¼š å°†å£°æ˜ä¸€ä¸ªç±»ä¸åˆ›å»ºä¸€ä¸ªå®ä¾‹ç»“åˆèµ·æ¥</h3><p>è¿™ä¸ªå…³é”®è¯å®šä¹‰ä¸€ä¸ªç±»å¹¶åŒæ—¶åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼ˆæ¢å¥è¯è¯´å°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼‰ã€‚</p><ul><li><strong>å¯¹è±¡å£°æ˜</strong>æ˜¯å®šä¹‰ä¸€ä¸ªå•ä¾‹çš„ä¸€ç§æ–¹å¼ã€‚</li><li><strong>ä¼´ç”Ÿå¯¹è±¡</strong>å¯ä»¥æŒæœ‰<strong>å·¥åœºæ–¹æ³•</strong>å’Œå…¶ä»–ä¸è¿™ä¸ªç±»çš„ç›¸å…³ï¼Œä½†æ˜¯åœ¨è°ƒç”¨æ—¶å¹¶ä¸ä¾èµ–ç±»å®ä¾‹æ–¹æ³•ã€‚<strong>å®ƒä»¬çš„æˆå‘˜å¯ä»¥é€šè¿‡ç±»åæ¥è®¿é—®</strong>ã€‚</li><li><strong>å¯¹è±¡è¡¨è¾¾å¼ç”¨æ¥ä»£æ›¿Javaçš„åŒ¿åå†…éƒ¨ç±»</strong></li></ul><h4 id="4-4-1-å¯¹è±¡å£°æ˜ï¼šåˆ›å»ºå•ä¾‹æ˜“å¦‚åæŒ"><a href="#4-4-1-å¯¹è±¡å£°æ˜ï¼šåˆ›å»ºå•ä¾‹æ˜“å¦‚åæŒ" class="headerlink" title="4.4.1 å¯¹è±¡å£°æ˜ï¼šåˆ›å»ºå•ä¾‹æ˜“å¦‚åæŒ"></a>4.4.1 å¯¹è±¡å£°æ˜ï¼šåˆ›å»ºå•ä¾‹æ˜“å¦‚åæŒ</h4><h5 id="ä¸ºä»€ä¹ˆä½¿ç”¨å¯¹è±¡å£°æ˜ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆä½¿ç”¨å¯¹è±¡å£°æ˜ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆä½¿ç”¨å¯¹è±¡å£°æ˜ï¼Ÿ"></a>ä¸ºä»€ä¹ˆä½¿ç”¨å¯¹è±¡å£°æ˜ï¼Ÿ</h5><p>åœ¨é¢å‘å¯¹è±¡ç³»ç»Ÿä¸­ä¸€ä¸ªç›¸å½“å¸¸è§çš„æƒ…å½¢å°±æ˜¯åªéœ€è¦ä¸€ä¸ªå®ä¾‹çš„ç±»ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªå¯¹è±¡å£°æ˜æ¥è¡¨ç¤ºä¸€ä¸ªç»„ç»‡çš„å·¥èµ„å•ã€‚</p><h5 id="åœ¨Javaä¸­æ˜¯å¦‚ä½•å®ç°å•ä¾‹æ¨¡å¼ï¼Ÿ"><a href="#åœ¨Javaä¸­æ˜¯å¦‚ä½•å®ç°å•ä¾‹æ¨¡å¼ï¼Ÿ" class="headerlink" title="åœ¨Javaä¸­æ˜¯å¦‚ä½•å®ç°å•ä¾‹æ¨¡å¼ï¼Ÿ"></a>åœ¨Javaä¸­æ˜¯å¦‚ä½•å®ç°å•ä¾‹æ¨¡å¼ï¼Ÿ</h5><p>å®šä¹‰ä¸€ä¸ªä½¿ç”¨privateæ„é€ æ–¹æ³•å¹¶ä¸”ç”¨é™æ€å­—æ®µæ¥æŒæœ‰è¿™ä¸ªç±»ä»…æœ‰çš„å®ä¾‹ã€‚</p><h5 id="ä»€ä¹ˆæ˜¯å¯¹è±¡å£°æ˜"><a href="#ä»€ä¹ˆæ˜¯å¯¹è±¡å£°æ˜" class="headerlink" title="ä»€ä¹ˆæ˜¯å¯¹è±¡å£°æ˜"></a>ä»€ä¹ˆæ˜¯å¯¹è±¡å£°æ˜</h5><p>Kotliné€šè¿‡ä½¿ç”¨å¯¹è±¡å£°æ˜åŠŸèƒ½ä¸ºè¿™ä¸€åˆ‡æä¾›äº†æœ€é«˜çº§çš„è¯­è¨€æ”¯æŒã€‚<strong>å¯¹è±¡å£°æ˜å°†ç±»å£°æ˜ä¸è¯¥ç±»çš„å•ä¸€å®ä¾‹å£°æ˜ç»“åˆåˆ°äº†ä¸€èµ·ã€‚</strong></p><h5 id="å¯¹è±¡å£°æ˜ä½¿ç”¨"><a href="#å¯¹è±¡å£°æ˜ä½¿ç”¨" class="headerlink" title="å¯¹è±¡å£°æ˜ä½¿ç”¨"></a>å¯¹è±¡å£°æ˜ä½¿ç”¨</h5><pre><code>object Payroll {    val allEmployees = arrayListOf&lt;Person&gt;()    fun calculateSalary() {        for (person in allEmployees){        }    }}</code></pre><p>å¯¹è±¡å£°æ˜é€šè¿‡ object å…³é”®è¯å¼•å…¥ã€‚ä¸ç±»ä¸€æ ·ï¼Œä¸€ä¸ªå¯¹è±¡å£°æ˜ä¹Ÿå¯ä»¥åŒ…å«å±æ€§ã€æ–¹æ³•ã€åˆå§‹åŒ–è¯­å¥å—ç­‰çš„å£°æ˜ï¼Œå”¯ä¸€ä¸å…è®¸çš„æ˜¯æ„é€ æ–¹æ³•ã€‚å¯¹è±¡å£°æ˜åœ¨å®šä¹‰æ—¶å°±åˆ›å»ºäº†æ„é€ å¯¹è±¡ï¼Œä¸éœ€è¦åœ¨ä»£ç çš„å…¶ä»–åœ°æ–¹è°ƒç”¨æ„é€ æ–¹æ³•ã€‚å¯¹è±¡å£°æ˜åŒæ ·å¯ä»¥ç»§æ‰¿ç±»å’Œæ¥å£ã€‚</p><h2 id="è¡¥å……"><a href="#è¡¥å……" class="headerlink" title="è¡¥å……"></a>è¡¥å……</h2><h3 id="å­—æ®µå’Œå±æ€§"><a href="#å­—æ®µå’Œå±æ€§" class="headerlink" title="å­—æ®µå’Œå±æ€§"></a>å­—æ®µå’Œå±æ€§</h3><p><a href="https://blog.csdn.net/chenchunlin526/article/details/71424844" target="_blank" rel="noopener">æ·±å…¥ç†è§£Javaä¸­çš„å­—æ®µä¸å±æ€§çš„åŒºåˆ«</a></p><h4 id="å±æ€§å’Œå­—æ®µçš„åŒºåˆ«"><a href="#å±æ€§å’Œå­—æ®µçš„åŒºåˆ«" class="headerlink" title="å±æ€§å’Œå­—æ®µçš„åŒºåˆ«"></a>å±æ€§å’Œå­—æ®µçš„åŒºåˆ«</h4><p>å±æ€§ï¼ˆpropertyï¼‰ï¼Œé€šå¸¸å¯ä»¥ç†è§£ä¸ºget å’Œ set æ–¹æ³•ã€‚</p><p>å­—æ®µï¼ˆfieldï¼‰ï¼Œé€šå¸¸å«åš <strong>ç±»æˆå‘˜</strong>ï¼Œæˆ–è€… <strong>ç±»å˜é‡</strong> ï¼Œæœ‰æ—¶ä¹Ÿå« åŸŸ ï¼Œç†è§£ä¸º æ•°æ®æˆå‘˜ï¼Œç”¨æ¥æ‰¿æ‹…æ•°æ®çš„ã€‚</p><h4 id="å±æ€§å’Œå­—æ®µè¯¦è§£"><a href="#å±æ€§å’Œå­—æ®µè¯¦è§£" class="headerlink" title="å±æ€§å’Œå­—æ®µè¯¦è§£"></a>å±æ€§å’Œå­—æ®µè¯¦è§£</h4><p><strong>å­—æ®µï¼ˆfieldï¼‰</strong></p><p>ç±»æˆå‘˜ï¼ˆå­—æ®µfieldï¼‰ï¼Œé€šå¸¸åœ¨ç±»ä¸­å®šä¹‰æˆå‘˜å˜é‡ä¾‹å¦‚ï¼š</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200909213136.png" alt=""></p><p>è§£é‡Šä¸ºï¼š<strong>FacebookUserç±»æ‹¥æœ‰æˆå‘˜å˜é‡nicknameï¼Œæœ‰ä¸€ä¸ªå­—æ®µ nicknameã€‚</strong></p><p>å­—æ®µä¸€èˆ¬ç”¨äºæ‰¿æ‹…æ•°æ®ï¼Œæ‰€ä»¥ä¸ºäº†æ•°æ®çš„å®‰å…¨æ€§ï¼Œä¸€èˆ¬è®¾ç½®ä¸ºç§æœ‰çš„ã€‚</p><p>å­—æ®µå’Œå¸¸é‡æè¿°çš„ç±»çš„æ•°æ®ï¼ˆåŸŸï¼‰ï¼Œå½“è¿™äº›æ•°æ®çš„æŸäº›éƒ¨åˆ†ä¸è¿è¡Œå¤–ç•Œè®¿é—®æ—¶ï¼Œ<strong>æ ¹æ®â€å¯¹è±¡å°è£…â€œåŸåˆ™ï¼Œåº”è¯¥å°½é‡é¿å…å°†ç±»çš„å­—æ®µä»¥å…¬æœ‰æ–¹å¼æä¾›ç»™å¤–éƒ¨</strong>ã€‚é™¤å•¦finalä¿®é¥°çš„å¸¸é‡ã€‚</p><p><strong>å±æ€§ï¼ˆpropertyï¼‰</strong></p><p><strong>å±æ€§åªå±€é™äºç±»ä¸­æ–¹æ³•çš„å£°æ˜ï¼Œå¹¶ä¸ä¸ç±»ä¸­å…¶å®ƒæˆå‘˜ç›¸å…³</strong>ï¼Œæ•°æ®JavaBeanèŒƒç•´ï¼š</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200909220317.png" alt=""></p><p>è¿™æ˜¯ä¸€ä¸ªå±æ€§ï¼Œä¸€ä¸ªå­—æ®µã€‚</p><p>æ€»ç»“ï¼šå±æ€§æ˜¯å¯¹å­—æ®µçš„å°è£…ï¼Œä¾›å¤–éƒ¨è®¿é—®ã€‚é€šå¸¸<strong>å±æ€§</strong>å°†å¯¹åº”çš„<strong>ç§æœ‰å­—æ®µ</strong>é€šè¿‡å°è£…æˆå…¬å…±å±æ€§ï¼Œä»¥ä¾¿äºå¤–ç•Œè®¿é—®å’Œä¿®æ”¹ã€‚</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/2020-8-3-1.gif" alt="å¦‚æœæœ‰äº›æ–¹æ³•æ²¡æœ‰è¯¦ç»†è¯´æ˜ä½ å¯ä»¥è‡ªè¡Œæœç´¢æŸ¥çœ‹"></p>]]></content>
      
      
      <categories>
          
          <category> Kotlin </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> Kotlin </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RecyclerViewåœ¨Kotlinä¸­çš„ä½¿ç”¨</title>
      <link href="/2020/07/26/RecyclerView%E5%9C%A8Kotlin%E4%B8%AD%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
      <url>/2020/07/26/RecyclerView%E5%9C%A8Kotlin%E4%B8%AD%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="åˆ›å»ºé¡¹ç›®RecyclerExampleé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®RecyclerExampleé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®RecyclerExampleé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®RecyclerExampleé¡¹ç›®</h2><h3 id="éœ€è¦å¼•å…¥ä¾èµ–"><a href="#éœ€è¦å¼•å…¥ä¾èµ–" class="headerlink" title="éœ€è¦å¼•å…¥ä¾èµ–"></a>éœ€è¦å¼•å…¥ä¾èµ–</h3><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/1595735673809.png" alt=""></p><h3 id="éœ€è¦å­é¡¹å¸ƒå±€"><a href="#éœ€è¦å­é¡¹å¸ƒå±€" class="headerlink" title="éœ€è¦å­é¡¹å¸ƒå±€"></a>éœ€è¦å­é¡¹å¸ƒå±€</h3><p>åœ¨ â€œRecyclerViewExample\app\src\main\res\layoutâ€ä¸‹åˆ›å»º â€œexample_item.xmlâ€ ğŸ‘‡</p><pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;androidx.cardview.widget.CardView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;    android:layout_width=&quot;match_parent&quot;    android:layout_height=&quot;wrap_content&quot;&gt;    &lt;RelativeLayout        android:layout_width=&quot;match_parent&quot;        android:layout_height=&quot;match_parent&quot;        android:padding=&quot;8dp&quot;&gt;        &lt;ImageView            android:id=&quot;@+id/image_view&quot;            android:layout_width=&quot;50dp&quot;            android:layout_height=&quot;50dp&quot;            android:layout_marginEnd=&quot;8dp&quot;            android:src=&quot;@drawable/ic_baseline_android_24&quot; /&gt;        &lt;TextView            android:id=&quot;@+id/text_view_1&quot;            android:layout_width=&quot;wrap_content&quot;            android:layout_height=&quot;wrap_content&quot;            android:layout_toEndOf=&quot;@+id/image_view&quot;            android:text=&quot;Line 1&quot;            android:textColor=&quot;@color/cardview_dark_background&quot;            android:textSize=&quot;18sp&quot; /&gt;        &lt;TextView            android:id=&quot;@+id/text_view_2&quot;            android:layout_width=&quot;wrap_content&quot;            android:layout_height=&quot;wrap_content&quot;            android:layout_below=&quot;@+id/text_view_1&quot;            android:layout_toEndOf=&quot;@+id/image_view&quot;            android:text=&quot;Line 2&quot; /&gt;    &lt;/RelativeLayout&gt;&lt;/androidx.cardview.widget.CardView&gt;</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/1595735521036.png" alt=""></p><p>éœ€è¦è‡ªå®šä¹‰çš„å›¾ç‰‡ â†“</p><p>é€‰ä¸­â€drawableâ€æ–‡ä»¶å¤¹,é€‰ä¸­â€Newâ€,é€‰ä¸­â€Vactor Assetâ€</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200915232142.png" alt=""></p><p>é€‰ä¸­â€Clip Artâ€ é€‰ä¸­å–œæ¬¢çš„å›¾å½¢å°±å¯ä»¥äº†ã€‚ç‚¹å‡» â€œNextâ€,å†ç‚¹å‡» Finishã€‚ åˆ›å»ºä¸‰ä¸ªã€‚</p><h3 id="éœ€è¦-æ•°æ®ç±»ğŸ‘‡"><a href="#éœ€è¦-æ•°æ®ç±»ğŸ‘‡" class="headerlink" title="éœ€è¦ æ•°æ®ç±»ğŸ‘‡"></a>éœ€è¦ æ•°æ®ç±»ğŸ‘‡</h3><p>åœ¨ â€œrecyclerviewexampleâ€ åŒ…ä¸‹</p><pre><code>/** *   @DATE : 2020/7/26 *   @Time : 11:42 *   @By : TheCara *   &quot;data&quot; æ•°æ®ç±» */data class Exampleitem(val imageResource: Int, val text1: String, val text2: String)</code></pre><h3 id="éœ€è¦é€‚é…å™¨"><a href="#éœ€è¦é€‚é…å™¨" class="headerlink" title="éœ€è¦é€‚é…å™¨"></a>éœ€è¦é€‚é…å™¨</h3><p>éœ€è¦é€‚é…å™¨â€ExampleAdapterâ€</p><pre><code>/** *   @DATE : 2020/7/27 *   @Time : 15:54 *   @By : TheCara *   éœ€è¦ç»§æ‰¿RecyclerView.Adapterç±»å‹ *   éœ€è¦å†…åµŒç±»ç»§æ‰¿RecyclerView.ViewHolderç±»å‹ */class ExampleAdapter(private val exampleList: List&lt;ExampleItem&gt;) :    RecyclerView.Adapter&lt;ExampleAdapter.ExampleViewHolder&gt;() {    // å…³é”®æ–¹æ³•ï¼Œç”¨äºç¡®å®šåˆ—è¡¨é¡¹    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ExampleViewHolder {        val view = LayoutInflater.from(parent.context).inflate(R.layout.example_item, parent, false)        return ExampleViewHolder(view)    }    override fun getItemCount() = exampleList.size    // å°†æ•°æ®å’Œå®¹å™¨ç»‘å®š    override fun onBindViewHolder(holder: ExampleViewHolder, position: Int) {        val currenItem = exampleList[position]        holder.imageView.setImageResource(currenItem.imageResource)        holder.textView1.setText(currenItem.text1)        holder.textView2.setText(currenItem.text1)    }    // è·å¾—æ¯ä¸ªæ§ä»¶çš„å®ä¾‹,éœ€è¦ExampleViewHolderçš„å‚æ•°(å­é¡¹å¸ƒå±€)ä½œä¸ºRecyclerView.ViewHolder()ç”¨ä½œå®ä¾‹åŒ–    class ExampleViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView) {        val imageView: ImageView = itemView.image_view        val textView1: TextView = itemView.text_view_1        val textView2: TextView = itemView.text_view_2    }}</code></pre><p>åœ¨â€MainActivityâ€ä¿®æ”¹</p><pre><code>class MainActivity : AppCompatActivity() {    override fun onCreate(savedInstanceState: Bundle?) {        super.onCreate(savedInstanceState)        setContentView(R.layout.activity_main)        val listExample = generateDummyList(500)        recycler_view.adapter = ExampleAdapter(listExample)        // è®¾ç½®RecyclerViewçš„å¸ƒå±€ç®¡ç†å™¨        recycler_view.layoutManager = LinearLayoutManager(this)        // ç¡®ä¿RecyclerViewçš„å°ºå¯¸æ˜¯ä¸€ä¸ªå¸¸æ•°        recycler_view.setHasFixedSize(true)    }    // è·å¾—å¸ƒå±€ä¸­çš„æ•°æ®    private fun generateDummyList(size: Int): List&lt;ExampleItem&gt; {        val list = ArrayList&lt;ExampleItem&gt;()        // ä½¿â½¤åŒºé—´&quot;until&quot;        for (i in 0 until size) {            val drawable = when (i % 4) {                0 -&gt; R.drawable.ic_baseline_add_to_home_screen_24                1 -&gt; R.drawable.ic_baseline_airline_seat_flat_angled_24                2 -&gt; R.drawable.ic_baseline_airline_seat_recline_extra_24                else -&gt; R.drawable.ic_baseline_android_24            }            val item = ExampleItem(drawable, &quot;Line $i&quot;, &quot;Line 2&quot;)            list += item        }        return list    }}</code></pre><p>ğŸ‘†â€setHasFixedSize()â€æ–¹æ³•:å½“æˆ‘ä»¬ç¡®å®šItemçš„æ”¹å˜ä¸ä¼šå½±å“RecyclerViewçš„å®½é«˜æ—¶,å¯ä»¥<strong>è®¾ç½®è¿™ä¸ªæ–¹æ³•</strong>,å¹¶ä¸”Adapterçš„å¢åˆ æ–¹æ³•å»åˆ·æ–°RecyclerView,è€Œä¸æ˜¯é€šè¿‡notifyDataSetChanged()ã€‚(å…¶å®å¯ä»¥ç›´æ¥è®¾ç½®ä¸ºtrueï¼Œå½“éœ€è¦æ”¹å˜å®½é«˜çš„æ—¶å€™å°±ç”¨notifyDataSetChanged()å»æ•´ä½“åˆ·æ–°ä¸€ä¸‹)</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/1595841353310.png" alt=""></p><h2 id="æ·»åŠ -å¢åˆ -åŠŸèƒ½"><a href="#æ·»åŠ -å¢åˆ -åŠŸèƒ½" class="headerlink" title="æ·»åŠ  å¢åˆ  åŠŸèƒ½"></a>æ·»åŠ  å¢åˆ  åŠŸèƒ½</h2><h2 id="ä½¿ç”¨RecyclerViewåœ¨æ¡ˆä¾‹ä¸­éœ€è¦ä»€ä¹ˆ"><a href="#ä½¿ç”¨RecyclerViewåœ¨æ¡ˆä¾‹ä¸­éœ€è¦ä»€ä¹ˆ" class="headerlink" title="ä½¿ç”¨RecyclerViewåœ¨æ¡ˆä¾‹ä¸­éœ€è¦ä»€ä¹ˆ"></a>ä½¿ç”¨RecyclerViewåœ¨æ¡ˆä¾‹ä¸­éœ€è¦ä»€ä¹ˆ</h2><ul><li>éœ€è¦å¼•å…¥ä¾èµ–</li><li>éœ€è¦é€‚é…å™¨</li><li>éœ€è¦ItemLayout</li><li>éœ€è¦æ•°æ®ç±»</li><li>æ§åˆ¶å™¨éœ€è¦åˆå§‹åŒ–</li></ul>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> Kotlin </tag>
            
            <tag> RecyclerView </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DataBindingçš„ä½¿ç”¨</title>
      <link href="/2020/07/24/DataBinding%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
      <url>/2020/07/24/DataBinding%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="DataBinding-é…åˆ-LiveData-å’Œ-ViewModel-ä½¿ç”¨"><a href="#DataBinding-é…åˆ-LiveData-å’Œ-ViewModel-ä½¿ç”¨" class="headerlink" title="DataBinding é…åˆ LiveData å’Œ ViewModel ä½¿ç”¨"></a>DataBinding é…åˆ LiveData å’Œ ViewModel ä½¿ç”¨</h2><ol><li>éœ€è¦åˆ›å»ºMyViewModelç±»,ç»§æ‰¿ViewModel</li><li>éœ€è¦æ·»åŠ DataBindingçš„gradle(app)é…ç½®ä¿¡æ¯</li></ol><p>æ·»åŠ é…ç½®ä¿¡æ¯ åœ¨gradle(app)ä¸­æ·»åŠ  â†“</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/Snipaste_2020-07-25_10-40-29.png" alt=""></p><h4 id="åˆ›å»ºMyViewModel-â†“"><a href="#åˆ›å»ºMyViewModel-â†“" class="headerlink" title="åˆ›å»ºMyViewModel â†“"></a>åˆ›å»ºMyViewModel â†“</h4><pre><code>/** *   @DATE : 2020/7/24 *   @Time : 21:10 *   @By : TheCara *  è´Ÿè´£å¤„ç†ç•Œé¢æ•°æ® *  éœ€è¦ LiveData æ¥è§‚å¯Ÿæ•°æ®åˆ·æ–°UI */class MyViewModel : ViewModel() {    var numberLiveData = MutableLiveData&lt;Int&gt;()    init {        numberLiveData.value = 0    }    // åŠ å€¼    fun add() {        numberLiveData?.value = numberLiveData?.value?.plus(1)    }}</code></pre><h4 id="ä¿®æ”¹MainActivity-â†“"><a href="#ä¿®æ”¹MainActivity-â†“" class="headerlink" title="ä¿®æ”¹MainActivity â†“"></a>ä¿®æ”¹MainActivity â†“</h4><pre><code>/** éœ€è¦ ActivityMainBinding ç±»ç”¨æ¥ç»‘å®šæ•°æ®* éœ€è¦ MyViewModel æ¥å’Œ ActivityMainBinding ç»‘å®šæ•°æ®* */class MainActivity : AppCompatActivity() {    var myViewModel: MyViewModel? = null    // è®¾ç½®ç±»å‹ä¸ºå¯ç©ºç±»å‹    var activityMainBinding: ActivityMainBinding? = null    //ActivityMainBinding æ˜¯åœ¨DataBingdingé…ç½®å®Œæˆä¹‹åè‡ªåŠ¨ç”Ÿæˆçš„    override fun onCreate(savedInstanceState: Bundle?) {        super.onCreate(savedInstanceState)        // åˆå§‹åŒ–DataBindingUtil,ç”¨æ¥ç»‘å®šå¸ƒå±€        activityMainBinding = DataBindingUtil.setContentView(this, R.layout.activity_main)        // åˆå§‹åŒ–æ•°æ®ç±»        var myViewModel = ViewModelProviders.of(this).get(MyViewModel::class.java)        activityMainBinding?.myViewModel=myViewModel        activityMainBinding?.lifecycleOwner = this    }}</code></pre><h4 id="å¸ƒå±€-ä½¿ç”¨-â€œdataâ€-æ ‡ç­¾-â†“"><a href="#å¸ƒå±€-ä½¿ç”¨-â€œdataâ€-æ ‡ç­¾-â†“" class="headerlink" title="å¸ƒå±€ ä½¿ç”¨ â€œdataâ€ æ ‡ç­¾ â†“"></a>å¸ƒå±€ ä½¿ç”¨ â€œdataâ€ æ ‡ç­¾ â†“</h4><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/1595645673021.png" alt=""></p><p>éœ€è¦ layout å¸ƒå±€ä¿å­˜å¸ƒå±€,éœ€è¦ â€œdata â€œæ ‡ç­¾ä¿å­˜ç»‘å®šæ¥çš„æ•°æ®,éœ€è¦ â€œvariableâ€ æ ‡ç­¾è®¾ç½®å˜é‡ã€‚</p><h4 id="éœ€è¦ä½¿ç”¨-â€œ-â€-æ–¹å¼è®¿é—®å˜é‡-â†“"><a href="#éœ€è¦ä½¿ç”¨-â€œ-â€-æ–¹å¼è®¿é—®å˜é‡-â†“" class="headerlink" title="éœ€è¦ä½¿ç”¨ â€œ@{}â€ æ–¹å¼è®¿é—®å˜é‡ â†“"></a>éœ€è¦ä½¿ç”¨ â€œ@{}â€ æ–¹å¼è®¿é—®å˜é‡ â†“</h4><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/1595645903565.png" alt=""></p><h4 id="éœ€è¦ä½¿ç”¨-â€œ-å‚æ•°-gt-æ–¹æ³•-å‚æ•°-â€è®¿é—®æ–¹æ³•-â†“"><a href="#éœ€è¦ä½¿ç”¨-â€œ-å‚æ•°-gt-æ–¹æ³•-å‚æ•°-â€è®¿é—®æ–¹æ³•-â†“" class="headerlink" title="éœ€è¦ä½¿ç”¨ â€œ@{(å‚æ•°)-&gt;æ–¹æ³•(å‚æ•°)}â€è®¿é—®æ–¹æ³• â†“"></a>éœ€è¦ä½¿ç”¨ â€œ@{(å‚æ•°)-&gt;æ–¹æ³•(å‚æ•°)}â€è®¿é—®æ–¹æ³• â†“</h4><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/1595645888188.png" alt=""></p><p>demo â†“</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/1595646636793.png" alt=""></p><h2 id="ä»€ä¹ˆæ˜¯DataBinding"><a href="#ä»€ä¹ˆæ˜¯DataBinding" class="headerlink" title="ä»€ä¹ˆæ˜¯DataBinding"></a>ä»€ä¹ˆæ˜¯DataBinding</h2><p>DataBindingæ˜¯è°·æ­Œåœ¨2015å¹´I/Oå¼€å‘è€…å¤§ä¼šä¸Šå‘å¸ƒçš„ä¸€ä¸ªæ•°æ®ç»‘å®šæ¡†æ¶,ä¹Ÿå°±æ˜¯æŠŠæ•°æ®æ†ç»‘åˆ°UIä¸Š,DataBindingå¯ä»¥è®©Activityå’ŒFragmentå‡å°‘é€»è¾‘,ä½¿å…¶æ–¹ä¾¿ç»´æŠ¤ã€‚åŒæ—¶ä¹Ÿèƒ½æé«˜æ€§èƒ½,é¿å…ç©ºæŒ‡é’ˆå¼‚å¸¸,åŒæ—¶DataBindingä¹Ÿæ”¯æŒåŒå‘ç»‘å®š,ä½¿UIçš„æ”¹å˜åŒæ—¶åŒæ­¥åˆ°æ•°æ®ä¸Š,DataBindingä¸æ˜¯MVVMæ¶æ„çš„å¿…éœ€å“ã€‚</p><h2 id="DataBindingæœ‰å“ªäº›ä¼˜ç¼ºç‚¹"><a href="#DataBindingæœ‰å“ªäº›ä¼˜ç¼ºç‚¹" class="headerlink" title="DataBindingæœ‰å“ªäº›ä¼˜ç¼ºç‚¹"></a>DataBindingæœ‰å“ªäº›ä¼˜ç¼ºç‚¹</h2><p><strong>ä¼˜ç‚¹</strong></p><ol><li>å‡å°‘Activityå’ŒFragmentçš„é€»è¾‘å¤„ç†,ä½¿Activityå’ŒFragmenté€»è¾‘æ›´åŠ æ¸…æ™°ã€‚</li><li>æé«˜æ€§èƒ½,é¿å…å†…å­˜æ³„æ¼ä»¥åŠç©ºæŒ‡é’ˆ</li><li>æ”¯æŒåŒå‘ç»‘å®š,å½“Viewæ”¹å˜çš„æ—¶å€™ä¼šé€šçŸ¥Model,å½“Modelæ”¹å˜æ—¶ä¼šé€šçŸ¥View</li></ol><p><strong>ç¼ºç‚¹</strong></p><ol><li>bugéš¾å®šä½,å‡ºç°bugæ—¶æ— æ³•å®šä½åˆ°æ˜¯Viewä¸­çš„bugè¿˜æ˜¯Modelä¸­çš„bug,åˆæˆ–æ˜¯ç¼–å†™çš„é€»è¾‘bugã€‚</li><li>åŒå‘ç»‘å®šä¸åˆ©äºViewçš„å¤ç”¨</li></ol><p>å¼•ç”¨:<a href="https://juejin.im/post/5edb12346fb9a047da364349#heading-2" target="_blank" rel="noopener">https://juejin.im/post/5edb12346fb9a047da364349#heading-2</a></p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> DataBinding </tag>
            
            <tag> Kotlin </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LiveDataä¸ViewModel</title>
      <link href="/2020/07/20/LiveData/"/>
      <url>/2020/07/20/LiveData/</url>
      
        <content type="html"><![CDATA[<h4 id="å•ç‹¬ä½¿ç”¨LiveData"><a href="#å•ç‹¬ä½¿ç”¨LiveData" class="headerlink" title="å•ç‹¬ä½¿ç”¨LiveData"></a>å•ç‹¬ä½¿ç”¨LiveData</h4><ol><li>åˆ›å»ºLiveDataå®ä¾‹ã€‚æŒæœ‰ç‰¹å®šçš„æ•°æ®ç±»å‹ï¼Œä¾‹å¦‚ int ,Stringã€‚</li><li>åˆ›å»ºä¸€ä¸ªObserverå¯¹è±¡,å¹¶ä¸”å®ç°onChanged()æ–¹æ³•ã€‚åœ¨onChanged()æ–¹æ³•ç±»å¯ä»¥è¿›è¡ŒUIçš„åˆ·æ–°ç­‰ã€‚</li><li>ä½¿ç”¨LiveDataå®ä¾‹çš„observe(â€¦,â€¦)æ–¹æ³•,å°†Observerå¯¹è±¡æ·»åŠ åˆ°LiveDataä¸­ã€‚æ–¹æ³•åŸå‹ä¸º <strong>observe(LifecycleOwner owner,Observer observer)</strong>,ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯LifecycleOwnerå¯¹è±¡ï¼Œä¸ºLiveDataèƒ½å¤Ÿç›‘å¬ç”Ÿå‘½å‘¨æœŸçš„èƒ½åŠ›æ¥æºã€‚ç¬¬äºŒä¸ªå‚æ•°ä¸ºæˆ‘ä»¬çš„ç›‘å¬å¯¹è±¡ã€‚</li></ol><p>æ·»åŠ LiveDataå’ŒViewModelçš„ä¾èµ– â†“</p><pre><code>// æ·»åŠ LiveDataå’ŒViewModelçš„ä¾èµ–implementation &#39;android.arch.lifecycle:extensions:1.1.1&#39;</code></pre><p>ç•Œé¢å‡†å¤‡æŒ‰é’®ç”¨æ¥å¼€å¯,ä½¿å¾—UIåˆ·æ–° â†“</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/Snipaste_2020-07-20_15-48-40.png" alt=""></p><p> MainActivityä¸­çš„ä»£ç  â†“</p><pre><code>class MainActivity : AppCompatActivity() {    val TAG = &quot;MainActivity&quot;    val btnStart = btn_start    val mTvNumber = tv_number    var mNumberLiveData: MutableLiveData&lt;Int&gt;? = null // å£°æ˜å˜é‡    override fun onCreate(savedInstanceState: Bundle?) {        super.onCreate(savedInstanceState)        setContentView(R.layout.activity_main)        mNumberLiveData = MutableLiveData()        btnStart.setOnClickListener { view: View? -&gt;            thread {                var number = 0                while (number &lt; 5) {                    mNumberLiveData?.postValue(number)                    Log.d(TAG, &quot;setOnClickListener&quot; + number)                    Thread.sleep(3000)                    number++                }            }        }        mNumberLiveData?.observe(this, object : Observer&lt;Int&gt; {            override fun onChanged(t: Int?) {                mTvNumber.setText(&quot;&quot; + t)                Log.d(TAG, &quot;onChanged&quot; + t)            }        })    }}</code></pre><p>ç•Œé¢çš„TextViewä¼šæ ¹æ®æ•°æ®è¿›è¡Œåˆ·æ–°ã€‚</p><h4 id="å•ç‹¬ä½¿ç”¨ViewModel"><a href="#å•ç‹¬ä½¿ç”¨ViewModel" class="headerlink" title="å•ç‹¬ä½¿ç”¨ViewModel"></a>å•ç‹¬ä½¿ç”¨ViewModel</h4><ol><li>åˆ›å»ºViewModelçš„ç»§æ‰¿ç±»</li><li>åœ¨æ§åˆ¶å™¨ä¸­å®ä¾‹åŒ–ç»§æ‰¿ç±»</li></ol><p>åˆ›å»ºViewModelç»§æ‰¿ç±» â†“</p><pre><code>class MyViewModel() : ViewModel() {    var number = 0}</code></pre><p>ä¿®æ”¹æ§åˆ¶å™¨ â†“</p><pre><code>class MainActivity : AppCompatActivity() {    val TAG = &quot;MainActivity&quot;    override fun onCreate(savedInstanceState: Bundle?) {        super.onCreate(savedInstanceState)        setContentView(R.layout.activity_main)        // ViewModelProvider.of() è·å¾—MyViewModelæŒä¹…ç±»ç”¨æ¥ä¿å­˜UIæ•°æ®        // &quot;MyViewModel::class.java&quot; åå°„å¼•ç”¨ç±»å‹        var myViewModel = ViewModelProviders.of(this).get(MyViewModel::class.java)        tv_number.setText(myViewModel.number.toString())        btn_start.setOnClickListener {            myViewModel.number++            tv_number.setText(myViewModel.number.toString())        }    }}</code></pre><p>ç®€å•çš„ç•Œé¢æ ·å¼ â†“</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/Snipaste_2020-07-21_19-16-39.png" alt=""></p><h4 id="LiveDataå’ŒViewModelé…åˆä½¿ç”¨"><a href="#LiveDataå’ŒViewModelé…åˆä½¿ç”¨" class="headerlink" title="LiveDataå’ŒViewModelé…åˆä½¿ç”¨"></a>LiveDataå’ŒViewModelé…åˆä½¿ç”¨</h4><ol><li>éœ€è¦æœ‰ViewModelçš„ç»§æ‰¿ç±»</li><li>éœ€è¦åœ¨ViewModelçš„ç»§æ‰¿ç±»ä¸­å®ä¾‹åŒ–LiveDataç±»å‹</li><li>éœ€è¦åœ¨æ§åˆ¶å™¨ä¸­åˆå§‹åŒ–ViewModelçš„ç»§æ‰¿ç±»</li><li>éœ€è¦è°ƒç”¨LiveDataçš„observeçš„æ–¹æ³•</li></ol><pre><code>class MyViewModel : ViewModel() {    var mutableLiveData = MutableLiveData&lt;Int&gt;()    init {        mutableLiveData.value=0    }    fun getLive(): MutableLiveData&lt;Int&gt; {        return mutableLiveData    }    fun addNumber(number: Int) {        mutableLiveData?.value=number+ mutableLiveData.value!!    }}</code></pre><pre><code>class MainActivity : AppCompatActivity() {    override fun onCreate(savedInstanceState: Bundle?) {        super.onCreate(savedInstanceState)        setContentView(R.layout.activity_main)        // è·å¾—MyViewModelå®ä¾‹        var myViewModel = ViewModelProviders.of(this).get(MyViewModel::class.java)        btn_addone.setOnClickListener {            myViewModel?.addNumber(1)        }        myViewModel?.getLive()?.observe(this, object : Observer&lt;Int&gt; {            override fun onChanged(t: Int?) {                tv_number.setText(t.toString())            }        })    }}</code></pre><h4 id="ä»€ä¹ˆæ˜¯LiveData"><a href="#ä»€ä¹ˆæ˜¯LiveData" class="headerlink" title="ä»€ä¹ˆæ˜¯LiveData"></a>ä»€ä¹ˆæ˜¯LiveData</h4><p>LiveDataæ˜¯ä¸€ä¸ªå¯ä»¥è§‚å¯Ÿçš„æ•°æ®æŒæœ‰ç±»,ä½†æ˜¯ä¸åŒäºé€šå¸¸çš„è§‚å¯Ÿè€…,å®ƒå…·æœ‰å£°æ˜å‘¨æœŸçš„æ„ŸçŸ¥èƒ½åŠ›ã€‚é€šä¿—äº›è®²,å®ƒæ‰€æŒæœ‰çš„æ•°æ®å‘ç”Ÿæ”¹å˜æ—¶,å¹¶ä¸”Lifecycleå¯¹è±¡è¿˜å¤„äºæ´»è·ƒçŠ¶æ€,LiveDataå°†ç«‹å³é€šçŸ¥è§‚å¯Ÿè€…æ•°æ®å‘ç”Ÿäº†å˜åŒ–ã€‚ç›¸æ¯”äºä¸åŒçš„è§‚å¯Ÿè€…å®ƒå¤šäº†ç”Ÿå‘½å‘¨æœŸå’Œæ„ŸçŸ¥èƒ½åŠ›ã€‚</p><h4 id="ä»€ä¹ˆæ˜¯ViewModel"><a href="#ä»€ä¹ˆæ˜¯ViewModel" class="headerlink" title="ä»€ä¹ˆæ˜¯ViewModel"></a>ä»€ä¹ˆæ˜¯ViewModel</h4><p>ç®€å•è¯´ViewModelæ˜¯ä¸€ç§ç”¨æ¥å­˜å‚¨å’Œç®¡ç†UIç›¸å…³æ•°æ®çš„ç±»ã€‚ä½†æ˜¯ä¸å…¶ä»–çš„Modelä¸åŒçš„æ˜¯,ä»–æ”¯æŒåœ¨ç³»ç»Ÿæ”¹å˜æ—¶ä¿å­˜æ•°æ®ã€‚</p><p>å½“å±å¹•å‘ç”Ÿæ”¹å˜æ—¶,ä¼šå¯¼è‡´Activity/Fragmenté‡æ–°ç»˜åˆ¶,ä¼šå¯¼è‡´æˆ‘ä»¬ä¹‹å‰çš„æ•°æ®ä¸¢å¤±ã€‚æ¯”å¦‚,åœ¨EditTextä¸­è¾“å…¥äº†å†…å®¹,ä½†æ˜¯å½“å±å¹•æ‰­è½¬æ—¶,ä¼šå‘ç°editTextä¸­çš„æ–‡æœ¬è¢«æ¸…ç©ºäº†ã€‚</p><p>å½“å¯¹äºä¸€ä¸‹ç®€å•çš„æ•°æ®,æˆ‘ä»¬å¯ä»¥é€šè¿‡Activityçš„onSaveInstanceState()æ–¹æ³•ä¸­å‚¨å­˜,ç„¶åé€šè¿‡onCreate()ä¸­è¿›è¡Œæ¢å¤,ä½†æ˜¯è¿™ç§æ–¹å¼åªé€‚åˆå­˜å‚¨å°‘é‡çš„æ•°æ®ï¼Œå¹¶ä¸”æ˜¯èƒ½è¢«åºåˆ—åŒ–å’Œååºåˆ—çš„æ•°æ®ã€‚è€Œå¯¹é‚£äº›å¤§é‡çš„æ•°æ®åˆ™ä¸é€‚ç”¨ã€‚</p><p>æ­¤å¤–,å®ƒä¹Ÿä½¿Viewçš„æ•°æ®æŒæœ‰è€…å’ŒViewcontrolleré€»è¾‘æ›´åŠ åˆ†ç¦»ï¼Œä¾¿äºè§£è€¦å’Œæµ‹è¯•ã€‚</p><p>å¼•ç”¨:<a href="https://juejin.im/post/5ca9f9156fb9a05e3d0a8aea#heading-6" target="_blank" rel="noopener">https://juejin.im/post/5ca9f9156fb9a05e3d0a8aea#heading-6</a></p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> Kotlin </tag>
            
            <tag> LiveData </tag>
            
            <tag> ViewModel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git</title>
      <link href="/2020/07/19/git%E8%AE%BE%E7%BD%AE%E6%8F%90%E4%BA%A4%E6%96%87%E4%BB%B6%E5%A4%A7%E5%B0%8F/"/>
      <url>/2020/07/19/git%E8%AE%BE%E7%BD%AE%E6%8F%90%E4%BA%A4%E6%96%87%E4%BB%B6%E5%A4%A7%E5%B0%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¿®æ”¹æäº¤æ–‡ä»¶å¤§å°"><a href="#ä¿®æ”¹æäº¤æ–‡ä»¶å¤§å°" class="headerlink" title="ä¿®æ”¹æäº¤æ–‡ä»¶å¤§å°"></a>ä¿®æ”¹æäº¤æ–‡ä»¶å¤§å°</h1><p>åœ¨è¦æäº¤çš„é¡¹ç›®æ ¹ç›®å½•ä¸‹ä½¿ç”¨ã€‚</p><pre><code>$ git config --local http.postBuffer 524288000</code></pre><p>è®¾ç½®ä¸º500MBã€‚</p><h1 id="æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯"><a href="#æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯" class="headerlink" title="æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯"></a>æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯</h1><pre><code>git branch</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200923155804.png" alt="æœ¬åœ°çš„ä¸¤ä¸ªåˆ†æ”¯"></p><h1 id="æŸ¥çœ‹è¿œç¨‹ä»“åº“æ‰€æœ‰åˆ†æ”¯"><a href="#æŸ¥çœ‹è¿œç¨‹ä»“åº“æ‰€æœ‰åˆ†æ”¯" class="headerlink" title="æŸ¥çœ‹è¿œç¨‹ä»“åº“æ‰€æœ‰åˆ†æ”¯"></a>æŸ¥çœ‹è¿œç¨‹ä»“åº“æ‰€æœ‰åˆ†æ”¯</h1><pre><code>git branch -r</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200923155838.png" alt="è¿œç¨‹ä»“åº“çš„åˆ†æ”¯"></p><h1 id="æŸ¥çœ‹æœ¬åœ°ä»“åº“å’Œè¿œç¨‹ä»“åº“"><a href="#æŸ¥çœ‹æœ¬åœ°ä»“åº“å’Œè¿œç¨‹ä»“åº“" class="headerlink" title="æŸ¥çœ‹æœ¬åœ°ä»“åº“å’Œè¿œç¨‹ä»“åº“"></a>æŸ¥çœ‹æœ¬åœ°ä»“åº“å’Œè¿œç¨‹ä»“åº“</h1><pre><code>git branch -a</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200923160933.png" alt="æœ¬åœ°å’Œè¿œç¨‹å…±æœ‰ä»“åº“"></p><h1 id="åˆ›å»ºæœ¬åœ°åˆ†æ”¯"><a href="#åˆ›å»ºæœ¬åœ°åˆ†æ”¯" class="headerlink" title="åˆ›å»ºæœ¬åœ°åˆ†æ”¯"></a>åˆ›å»ºæœ¬åœ°åˆ†æ”¯</h1><pre><code>git branch annotationVersion</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200923120947.png" alt="åˆ›å»ºäº†æœ¬åœ°åˆ†æ”¯"></p><h1 id="åˆ‡æ¢åˆ°åˆ›å»ºçš„åˆ†æ”¯"><a href="#åˆ‡æ¢åˆ°åˆ›å»ºçš„åˆ†æ”¯" class="headerlink" title="åˆ‡æ¢åˆ°åˆ›å»ºçš„åˆ†æ”¯"></a>åˆ‡æ¢åˆ°åˆ›å»ºçš„åˆ†æ”¯</h1><pre><code>git checkout åˆ†æ”¯</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200923121359.png" alt="åˆ‡æ¢åˆ°åˆ›å»ºçš„ annotationVersion åˆ†æ”¯"></p><h1 id="æœ¬åœ°åˆ†æ”¯æäº¤åˆ°è¿œç¨‹åˆ†æ”¯"><a href="#æœ¬åœ°åˆ†æ”¯æäº¤åˆ°è¿œç¨‹åˆ†æ”¯" class="headerlink" title="æœ¬åœ°åˆ†æ”¯æäº¤åˆ°è¿œç¨‹åˆ†æ”¯"></a>æœ¬åœ°åˆ†æ”¯æäº¤åˆ°è¿œç¨‹åˆ†æ”¯</h1><p><strong>åˆ‡æ¢åˆ°åˆ›å»ºçš„åˆ†æ”¯</strong>ï¼ˆannotationVersionï¼‰ã€‚</p><pre><code>git push origin annotationVersion</code></pre><p>å¦‚æœ<strong>è¿œç¨‹ä»“åº“</strong>æ²¡æœ‰è¿™ä¸ªåˆ†æ”¯ï¼Œé‚£ä¹ˆä¹Ÿä¼šåˆ›å»ºä¸€ä¸ªè¯¥åˆ†æ”¯ã€‚</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200923153643.png" alt="ç”±äºè¿œç¨‹ä»“åº“æ²¡æœ‰æœ¬åœ°çš„åˆ†æ”¯åœ¨pushæ—¶è‡ªåŠ¨åˆ›å»ºäº†annotationVersionåˆ†æ”¯"></p><h1 id="æœ¬åœ°è·å¾—ä¸€ä¸ªè¿œç¨‹åˆ†æ”¯"><a href="#æœ¬åœ°è·å¾—ä¸€ä¸ªè¿œç¨‹åˆ†æ”¯" class="headerlink" title="æœ¬åœ°è·å¾—ä¸€ä¸ªè¿œç¨‹åˆ†æ”¯"></a>æœ¬åœ°è·å¾—ä¸€ä¸ªè¿œç¨‹åˆ†æ”¯</h1><p>ä½¿ç”¨å‘½ä»¤</p><pre><code>git pull &lt;è¿œç¨‹ä¸»æœºå&gt; &lt;è¿œç¨‹åˆ†æ”¯å&gt;:&lt;æœ¬åœ°åˆ†æ”¯å&gt;ä¾‹å¦‚git pull origin v1.0:v1.0</code></pre><p>pull äº†<strong>è¿œç¨‹ä»“åº“çš„v1.0åˆ†æ”¯</strong>æœ¬åœ°å‘½å<strong>ä¸ºv1.0</strong></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200923172540.png" alt="pull å®Œæˆ"></p><h1 id="åˆå¹¶æœ¬åœ°ä¸¤ä¸ªåˆ†æ”¯"><a href="#åˆå¹¶æœ¬åœ°ä¸¤ä¸ªåˆ†æ”¯" class="headerlink" title="åˆå¹¶æœ¬åœ°ä¸¤ä¸ªåˆ†æ”¯"></a>åˆå¹¶æœ¬åœ°ä¸¤ä¸ªåˆ†æ”¯</h1><p>å¦‚æœå½“å‰åˆ†æ”¯ï¼ˆannotationVersionï¼‰åˆ†æ”¯ï¼Œæƒ³ä¸è¿œç¨‹åˆ†æ”¯ master åˆå¹¶ï¼ˆmergeï¼‰ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š</p><p>åˆ‡æ¢åˆ° master åˆ†æ”¯ï¼š</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200923161205.png" alt="masteråˆ†æ”¯"></p><p>åœ¨ master åˆ†æ”¯åˆå¹¶å¦ä¸€ä¸ªåˆ†æ”¯ï¼ˆannotationVersionï¼‰ï¼š</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200923161241.png" alt="åˆå¹¶å®Œæˆ"></p><p>éšåå¯ä»¥å°†masteråˆ†æ”¯ push æ‰ï¼ˆç”¨æ¥æäº¤ä¸¤ä¸ªåˆå¹¶äº†ä»“åº“ï¼‰ï¼š</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200923161838.png" alt="pushå®Œæˆ"></p>]]></content>
      
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo-theme-materyä½¿ç”¨æ‰‹å†Œ</title>
      <link href="/2020/07/19/hexo-theme-%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/"/>
      <url>/2020/07/19/hexo-theme-%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/</url>
      
        <content type="html"><![CDATA[<h4 id="ä¿®æ”¹å¤´éƒ¨çš„æ¸å˜é¢œè‰²"><a href="#ä¿®æ”¹å¤´éƒ¨çš„æ¸å˜é¢œè‰²" class="headerlink" title="ä¿®æ”¹å¤´éƒ¨çš„æ¸å˜é¢œè‰²"></a>ä¿®æ”¹å¤´éƒ¨çš„æ¸å˜é¢œè‰²</h4><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/Snipaste_2020-07-19_18-44-57.png" alt=""></p><p>ä¿®æ”¹è·Ÿç›®å½•ä¸‹çš„ themes\hexo-theme-matery\source\css\matery.css æ–‡ä»¶ã€‚ä¿®æ”¹â€bg-colorâ€å³å¯ã€‚</p><h4 id="ä¿®æ”¹åº•éƒ¨çš„åŠ è½½è¿›åº¦æ¡"><a href="#ä¿®æ”¹åº•éƒ¨çš„åŠ è½½è¿›åº¦æ¡" class="headerlink" title="ä¿®æ”¹åº•éƒ¨çš„åŠ è½½è¿›åº¦æ¡"></a>ä¿®æ”¹åº•éƒ¨çš„åŠ è½½è¿›åº¦æ¡</h4><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/Snipaste_2020-07-19_18-47-15.png" alt=""></p><p>ä¿®æ”¹â€progress-barâ€å³å¯ã€‚</p><h4 id="æ·»åŠ æœç´¢åŠŸèƒ½"><a href="#æ·»åŠ æœç´¢åŠŸèƒ½" class="headerlink" title="æ·»åŠ æœç´¢åŠŸèƒ½"></a>æ·»åŠ æœç´¢åŠŸèƒ½</h4><p>ä¸‹è½½æ’ä»¶,ä¿®æ”¹é…ç½®å³å¯ã€‚</p><pre><code>npm install hexo-generator-search --save</code></pre><p>åœ¨æ ¹ç›®å½•ä¸‹å®‰è£…æ’ä»¶ã€‚</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/Snipaste_2020-07-20_08-57-52.png" alt=""></p><p>ä¿®æ”¹é…ç½®ä¿¡æ¯ã€‚</p><p>æ‰“å¼€æ ¹ç›®å½•ä¸‹çš„ â€œ_config.ymlâ€æ–‡ä»¶,æ·»åŠ é…ç½®ä¿¡æ¯ã€‚</p><pre><code>search:  path: search.xml  field: post</code></pre><h4 id="ä¿®æ”¹å‹æƒ…é“¾æ¥"><a href="#ä¿®æ”¹å‹æƒ…é“¾æ¥" class="headerlink" title="ä¿®æ”¹å‹æƒ…é“¾æ¥"></a>ä¿®æ”¹å‹æƒ…é“¾æ¥</h4><p>åœ¨ â€œBlog\source_data\friends.jsonâ€ ç›®å½•ä¸‹ä¿®æ”¹é…ç½®æ–‡ä»¶</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/1595649945373.png" alt=""></p><h4 id="è‡ªåŠ¨æ·»åŠ æ–‡ç« çš„åç§°ã€æ—¶é—´ç­‰ä¿¡æ¯"><a href="#è‡ªåŠ¨æ·»åŠ æ–‡ç« çš„åç§°ã€æ—¶é—´ç­‰ä¿¡æ¯" class="headerlink" title="è‡ªåŠ¨æ·»åŠ æ–‡ç« çš„åç§°ã€æ—¶é—´ç­‰ä¿¡æ¯"></a>è‡ªåŠ¨æ·»åŠ æ–‡ç« çš„åç§°ã€æ—¶é—´ç­‰ä¿¡æ¯</h4><p>éœ€è¦åˆ›å»ºæ–‡ä»¶ â€œscaffolds\post.mdâ€</p><pre><code class="yaml">---title: {{ title }}date: {{ date }}tags: [æ ‡ç­¾]author: ç”¨æˆ·åtop: falsecover: falsetoc: truemathjax: truecategories: &quot;åˆ†ç±»&quot;---</code></pre><h4 id="å®Œæ•´å®ä¾‹"><a href="#å®Œæ•´å®ä¾‹" class="headerlink" title="å®Œæ•´å®ä¾‹"></a>å®Œæ•´å®ä¾‹</h4><p>ğŸ‘‡ä¿®æ”¹æ–‡ç« å°é¢,ä¿®æ”¹æ–‡ç« è½®æ’­å›¾ç­‰</p><pre><code class="yaml">---title: {{title}}date: {{data}}author: ä½œè€…åå­—img: /source/images/xxx.jpg &quot;æ–‡ç« ç‰¹å¾å›¾,è·¯å¾„åœ¨sourceä¸­&quot;top: true &quot;æ¨èæ–‡ç« &quot;cover: true &quot;è¡¨ç¤ºè¯¥æ–‡ç« æ˜¯å¦éœ€è¦åŠ å…¥åˆ°é¦–é¡µè½®æ’­å°é¢ä¸­&quot;coverImg: /images/1.jpg &quot;è½®æ’­å›¾ä¸­çš„å°é¢,è®¿é—®çš„æ˜¯&quot;source&quot;ä¸‹çš„&quot;images&quot;&quot;password: 8d969eef6ecad3c29a3a629280e686cf0c3f5d5a86aff3ca12020c923adc6c92toc: false &quot;æ˜¯å¦å¼€å¯ TOCï¼Œå¯ä»¥é’ˆå¯¹æŸç¯‡æ–‡ç« å•ç‹¬å…³é—­ TOC çš„åŠŸèƒ½ã€‚å‰ææ˜¯åœ¨ä¸»é¢˜çš„ config.yml ä¸­æ¿€æ´»äº† toc é€‰é¡¹&quot;mathjax: false &quot;æ˜¯å¦å¼€å¯æ•°å­¦å…¬å¼æ”¯æŒ,æœ¬æ–‡ç« æ˜¯å¦å¼€å¯ mathjaxï¼Œä¸”éœ€è¦åœ¨ä¸»é¢˜çš„ _config.yml æ–‡ä»¶ä¸­ä¹Ÿéœ€è¦å¼€å¯æ‰è¡Œ&quot;summary: è¿™æ˜¯ä½ è‡ªå®šä¹‰çš„æ–‡ç« æ‘˜è¦å†…å®¹ï¼Œå¦‚æœè¿™ä¸ªå±æ€§æœ‰å€¼ï¼Œæ–‡ç« å¡ç‰‡æ‘˜è¦å°±æ˜¾ç¤ºè¿™æ®µæ–‡å­—ï¼Œå¦åˆ™ç¨‹åºä¼šè‡ªåŠ¨æˆªå–æ–‡ç« çš„éƒ¨åˆ†å†…å®¹ä½œä¸ºæ‘˜è¦categories: Markdowntags:  - Typora  - Markdown---</code></pre><h2 id="æ–‡ç« -Front-matter-ä»‹ç»"><a href="#æ–‡ç« -Front-matter-ä»‹ç»" class="headerlink" title="æ–‡ç«  Front-matter ä»‹ç»"></a>æ–‡ç«  Front-matter ä»‹ç»</h2><h3 id="Front-matter-é€‰é¡¹è¯¦è§£"><a href="#Front-matter-é€‰é¡¹è¯¦è§£" class="headerlink" title="Front-matter é€‰é¡¹è¯¦è§£"></a>Front-matter é€‰é¡¹è¯¦è§£</h3><p><code>Front-matter</code> é€‰é¡¹ä¸­çš„æ‰€æœ‰å†…å®¹å‡ä¸º<strong>éå¿…å¡«</strong>çš„ã€‚ä½†æˆ‘ä»ç„¶å»ºè®®è‡³å°‘å¡«å†™ <code>title</code> å’Œ <code>date</code> çš„å€¼ã€‚</p><table><thead><tr><th>é…ç½®é€‰é¡¹</th><th>é»˜è®¤å€¼</th><th>æè¿°</th></tr></thead><tbody><tr><td>title</td><td><code>Markdown</code> çš„æ–‡ä»¶æ ‡é¢˜</td><td>æ–‡ç« æ ‡é¢˜ï¼Œå¼ºçƒˆå»ºè®®å¡«å†™æ­¤é€‰é¡¹</td></tr><tr><td>date</td><td>æ–‡ä»¶åˆ›å»ºæ—¶çš„æ—¥æœŸæ—¶é—´</td><td>å‘å¸ƒæ—¶é—´ï¼Œå¼ºçƒˆå»ºè®®å¡«å†™æ­¤é€‰é¡¹ï¼Œä¸”æœ€å¥½ä¿è¯å…¨å±€å”¯ä¸€</td></tr><tr><td>author</td><td>æ ¹ <code>_config.yml</code> ä¸­çš„ <code>author</code></td><td>æ–‡ç« ä½œè€…</td></tr><tr><td>img</td><td><code>featureImages</code> ä¸­çš„æŸä¸ªå€¼</td><td>æ–‡ç« ç‰¹å¾å›¾ï¼Œæ¨èä½¿ç”¨å›¾åºŠ(è…¾è®¯äº‘ã€ä¸ƒç‰›äº‘ã€åˆæ‹äº‘ç­‰)æ¥åšå›¾ç‰‡çš„è·¯å¾„.å¦‚: <code>http://xxx.com/xxx.jpg</code></td></tr><tr><td>top</td><td><code>true</code></td><td>æ¨èæ–‡ç« ï¼ˆæ–‡ç« æ˜¯å¦ç½®é¡¶ï¼‰ï¼Œå¦‚æœ <code>top</code> å€¼ä¸º <code>true</code>ï¼Œåˆ™ä¼šä½œä¸ºé¦–é¡µæ¨èæ–‡ç« </td></tr><tr><td>cover</td><td><code>false</code></td><td><code>v1.0.2</code>ç‰ˆæœ¬æ–°å¢ï¼Œè¡¨ç¤ºè¯¥æ–‡ç« æ˜¯å¦éœ€è¦åŠ å…¥åˆ°é¦–é¡µè½®æ’­å°é¢ä¸­</td></tr><tr><td>coverImg</td><td>æ— </td><td><code>v1.0.2</code>ç‰ˆæœ¬æ–°å¢ï¼Œè¡¨ç¤ºè¯¥æ–‡ç« åœ¨é¦–é¡µè½®æ’­å°é¢éœ€è¦æ˜¾ç¤ºçš„å›¾ç‰‡è·¯å¾„ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™é»˜è®¤ä½¿ç”¨æ–‡ç« çš„ç‰¹è‰²å›¾ç‰‡</td></tr><tr><td>password</td><td>æ— </td><td>æ–‡ç« é˜…è¯»å¯†ç ï¼Œå¦‚æœè¦å¯¹æ–‡ç« è®¾ç½®é˜…è¯»éªŒè¯å¯†ç çš„è¯ï¼Œå°±å¯ä»¥è®¾ç½® <code>password</code> çš„å€¼ï¼Œè¯¥å€¼å¿…é¡»æ˜¯ç”¨ <code>SHA256</code> åŠ å¯†åçš„å¯†ç ï¼Œé˜²æ­¢è¢«ä»–äººè¯†ç ´ã€‚å‰ææ˜¯åœ¨ä¸»é¢˜çš„ <code>config.yml</code> ä¸­æ¿€æ´»äº† <code>verifyPassword</code> é€‰é¡¹</td></tr><tr><td>toc</td><td><code>true</code></td><td>æ˜¯å¦å¼€å¯ TOCï¼Œå¯ä»¥é’ˆå¯¹æŸç¯‡æ–‡ç« å•ç‹¬å…³é—­ TOC çš„åŠŸèƒ½ã€‚å‰ææ˜¯åœ¨ä¸»é¢˜çš„ <code>config.yml</code> ä¸­æ¿€æ´»äº† <code>toc</code> é€‰é¡¹</td></tr><tr><td>mathjax</td><td><code>false</code></td><td>æ˜¯å¦å¼€å¯æ•°å­¦å…¬å¼æ”¯æŒ ï¼Œæœ¬æ–‡ç« æ˜¯å¦å¼€å¯ <code>mathjax</code>ï¼Œä¸”éœ€è¦åœ¨ä¸»é¢˜çš„ <code>_config.yml</code> æ–‡ä»¶ä¸­ä¹Ÿéœ€è¦å¼€å¯æ‰è¡Œ</td></tr><tr><td>summary</td><td>æ— </td><td>æ–‡ç« æ‘˜è¦ï¼Œè‡ªå®šä¹‰çš„æ–‡ç« æ‘˜è¦å†…å®¹ï¼Œå¦‚æœè¿™ä¸ªå±æ€§æœ‰å€¼ï¼Œæ–‡ç« å¡ç‰‡æ‘˜è¦å°±æ˜¾ç¤ºè¿™æ®µæ–‡å­—ï¼Œå¦åˆ™ç¨‹åºä¼šè‡ªåŠ¨æˆªå–æ–‡ç« çš„éƒ¨åˆ†å†…å®¹ä½œä¸ºæ‘˜è¦</td></tr><tr><td>categories</td><td>æ— </td><td>æ–‡ç« åˆ†ç±»ï¼Œæœ¬ä¸»é¢˜çš„åˆ†ç±»è¡¨ç¤ºå®è§‚ä¸Šå¤§çš„åˆ†ç±»ï¼Œåªå»ºè®®ä¸€ç¯‡æ–‡ç« ä¸€ä¸ªåˆ†ç±»</td></tr><tr><td>tags</td><td>æ— </td><td>æ–‡ç« æ ‡ç­¾ï¼Œä¸€ç¯‡æ–‡ç« å¯ä»¥å¤šä¸ªæ ‡ç­¾</td></tr><tr><td>keywords</td><td>æ–‡ç« æ ‡é¢˜</td><td>æ–‡ç« å…³é”®å­—ï¼ŒSEO æ—¶éœ€è¦</td></tr><tr><td>reprintPolicy</td><td>cc_by</td><td>æ–‡ç« è½¬è½½è§„åˆ™ï¼Œ å¯ä»¥æ˜¯ cc_by, cc_by_nd, cc_by_sa, cc_by_nc, cc_by_nc_nd, cc_by_nc_sa, cc0, noreprint æˆ– pay ä¸­çš„ä¸€ä¸ª</td></tr></tbody></table><h2 id="å¤‡ä»½å’Œè¿˜åŸBlog"><a href="#å¤‡ä»½å’Œè¿˜åŸBlog" class="headerlink" title="å¤‡ä»½å’Œè¿˜åŸBlog"></a>å¤‡ä»½å’Œè¿˜åŸBlog</h2><h3 id="å¤‡ä»½githubåˆ›å»ºç§æœ‰ä»“åº“"><a href="#å¤‡ä»½githubåˆ›å»ºç§æœ‰ä»“åº“" class="headerlink" title="å¤‡ä»½githubåˆ›å»ºç§æœ‰ä»“åº“"></a>å¤‡ä»½githubåˆ›å»ºç§æœ‰ä»“åº“</h3><p>ç§æœ‰ä»“åº“è®¾ç½®ä¸ºåå­—Blog(ä¸æ–‡ä»¶å¤¹åå­—ç›¸åŒå³å¯),å°†æ–‡ä»¶ä¸‹è½½åˆ°Blogçš„æ ¹ç›®å½•ä¸‹,å°†â€.gitâ€æ–‡ä»¶å’Œâ€.gitignoreâ€æ–‡ä»¶æ‹–æ‹½åˆ°Blogç›®å½•ä¸‹ã€‚</p><p>â€˜â€™.gitignoreâ€™æ–‡ä»¶å†…æ·»åŠ è¦å¿½è§†çš„æ–‡ä»¶å¤¹</p><pre><code>.DS_StoreThumbs.dbdb.json*.lognode_modules/public/.deploy*/</code></pre><p>æ­£å¸¸æäº¤å³å¯</p><p>ps:å¯èƒ½ä¼šå‡ºç°æ–‡ä»¶å¤¹è¿‡å¤§çš„åŸå›  </p><p><a href="https://thecara.github.io/2020/07/19/git%E8%AE%BE%E7%BD%AE%E6%8F%90%E4%BA%A4%E6%96%87%E4%BB%B6%E5%A4%A7%E5%B0%8F/">åŠæ³•</a></p><h3 id="è¿˜åŸBlog"><a href="#è¿˜åŸBlog" class="headerlink" title="è¿˜åŸBlog"></a>è¿˜åŸBlog</h3><p>å»ºè®®:ä½¿ç”¨æ–°çš„ç”µè„‘æˆ–è€…ä½¿ç”¨è™šæ‹Ÿæœºæ¥æµ‹è¯•</p><p>å®‰è£…git,é…ç½®git </p><p>ä½¿ç”¨â€git Bashâ€ è¾“å…¥ğŸ‘‡.</p><pre><code>$ git config --global user.name &quot;your name&quot;$ git config --global user.email &quot;your_email@youremail.com&quot;ssh-keygen -t rsa -C &quot;è‡ªå·±çš„é‚®ç®±&quot;</code></pre><p><a href="https://github.com/settings/ssh/new" target="_blank" rel="noopener">è®¾ç½®SHH</a></p><p>å®Œæˆåä¼šå‡ºç°shhæ–‡ä»¶çš„ç›®å½•,æ‰“å¼€â€.pubâ€ç±»å‹æ–‡ä»¶å°†å†…å®¹å¤åˆ¶åˆ°è¿™é‡Œã€‚</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/1595819104102.png" alt=""></p><p>å®Œæˆåå…‹éš†æˆ‘ä»¬çš„â€Blogâ€</p><h3 id="å®‰è£…nove-js"><a href="#å®‰è£…nove-js" class="headerlink" title="å®‰è£…nove.js"></a>å®‰è£…nove.js</h3><p>åœ¨Blogç›®å½•ä¸‹ä½¿ç”¨â€git Bashâ€</p><p>ç›´æ¥å®‰è£… hexo,å¦‚æœç½‘ç»œè¿‡æ…¢å»ºè®®é…ç½®ä»“åº“.</p><pre><code>$ npm install -g cnpm --registry=https://registry.npm.taobao.org</code></pre><p><a href="https://developer.aliyun.com/mirror/NPM" target="_blank" rel="noopener">æ›´å¤š</a></p><pre><code>npm i hexo-cli -g æˆ–è€… npm install hexo --save</code></pre><p>æ­å»º</p><pre><code class="g">hexo ghexo shexo d</code></pre><p>ps:</p><p>å¦‚æœå‡ºç° â€œERROR Plugin load failed: hexo-prism-pluginâ€é”™è¯¯ ç›´æ¥åˆ é™¤â€node_modules\hexo-prism-pluginâ€ä¸‹çš„æ–‡ä»¶å¤¹ã€‚</p><p>å®‰è£… nove.js è‡ªåŠ¨å®‰è£…choco<a href="https://thecara.github.io/2020/07/26/choco%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%BA%94%E7%94%A8%E7%9A%84%E5%AE%89%E8%A3%85/">å¯èƒ½ä¼šæŠ¥é”™ä½¿ç”¨</a></p><p>å¼•ç”¨:<a href="https://github.com/blinkfox/hexo-theme-matery/blob/develop/README_CN.md" target="_blank" rel="noopener">https://github.com/blinkfox/hexo-theme-matery/blob/develop/README_CN.md</a></p><h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><p>åœ¨ä½¿ç”¨ ç›®å½•å¯¼èˆªæ—¶ä¸å»ºè®® â€œæ ‡é¢˜â€ é…åˆ â€œæ— åºåˆ—è¡¨â€ ä½¿ç”¨</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/2020-8-19-0.gif" alt=""></p><p>ä¼šå‡ºç°æ— æ³•è·³è½¬åˆ°æŒ‡å®šç›®å½•ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> hexo-theme </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
            <tag> hexo-theme </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
