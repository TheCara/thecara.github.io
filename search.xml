<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>æ¯æ—¥é‡åˆ°çš„é—®é¢˜</title>
      <link href="/2022/02/12/all-bug/"/>
      <url>/2022/02/12/all-bug/</url>
      
        <content type="html"><![CDATA[<p>ğŸ’˜</p>]]></content>
      
      
      <categories>
          
          <category> bug </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bug </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DASHåè®®</title>
      <link href="/2021/06/25/DASH/"/>
      <url>/2021/06/25/DASH/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»€ä¹ˆæ˜¯-DASH"><a href="#ä»€ä¹ˆæ˜¯-DASH" class="headerlink" title="ä»€ä¹ˆæ˜¯ DASH"></a>ä»€ä¹ˆæ˜¯ DASH</h1><p>DASHï¼ˆMPEG-DASH)æ˜¯Dynamic Adaptive Straming over HTTP çš„ç¼©å†™ï¼Œåœ¨å›½é™…æ ‡å‡†MPEG 2014å¹´ä»½ä¸­æ¨å‡ºçš„æŠ€æœ¯æ ‡å‡†ï¼Œç›®çš„æ˜¯å½¢æˆIPç½‘ç»œæ‰¿è½½å•ä¸€æ ¼å¼çš„æµåª’ä½“å¹¶æä¾›é«˜æ•ˆä¸é«˜è´¨é‡æœåŠ¡çš„ç»Ÿä¸€æ–¹æ¡ˆï¼Œè§£å†³å¤šåˆ¶å¼ä¼ è¾“æ–¹æ¡ˆï¼ˆHTTP Live Streamingï¼ŒMicrosoft Smooth Streamingï¼ŒHTTP Dynamic Streamingï¼‰å¹¶å­˜æ ¼å±€ä¸‹çš„å­˜å‚¨ä¸æœåŠ¡èƒ½åŠ›æµªè´¹ã€è¿è¥é«˜æˆæœ¬ä¸å¤æ‚åº¦ã€ç³»ç»Ÿé—´äº’æ“ä½œå¼±ç­‰é—®é¢˜ã€‚</p><blockquote></blockquote><h1 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h1><p><a href="https://www.cnblogs.com/lidabo/p/13223961.html" target="_blank" rel="noopener">å‰ç«¯è¦æ‡‚çš„è§†é¢‘çŸ¥è¯†DASHåè®®</a></p>]]></content>
      
      
      <categories>
          
          <category> æµåª’ä½“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Internet </tag>
            
            <tag> æµåª’ä½“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨shhæ¨é€æ–‡ä»¶</title>
      <link href="/2021/06/21/%E4%BD%BF%E7%94%A8shh%E6%8E%A8%E9%80%81%E6%96%87%E4%BB%B6/"/>
      <url>/2021/06/21/%E4%BD%BF%E7%94%A8shh%E6%8E%A8%E9%80%81%E6%96%87%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<h1 id="é…ç½®-SSH"><a href="#é…ç½®-SSH" class="headerlink" title="é…ç½® SSH"></a>é…ç½® SSH</h1><p>å®‰è£…å¥½ git åç”ŸæˆSSHå¯†é’¥å¯¹</p><pre><code class="sh">ssh-keygen -t rea -c &quot;ä½ çš„é‚®ç®±@example.com&quot;</code></pre><p>é»˜è®¤ï¼ˆWindowsï¼‰ä¼šåœ¨â€œç”¨æˆ·/.sshâ€æ–‡ä»¶ä¸‹ç”Ÿæˆä¸€å¯¹å¯†é’¥ï¼Œåˆ†åˆ«ä¸º å…¬é’¥ï¼Œç§é’¥ã€‚</p><p>ç§é’¥ï¼šid_rsa</p><p>å…¬é’¥ï¼šid_rsa.pub</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20210621185244.png" alt=""></p><p>æ‰“å¼€è·å–<strong>å…¬é’¥</strong></p><h1 id="åœ¨-github-ä¸Šé…ç½®SSH"><a href="#åœ¨-github-ä¸Šé…ç½®SSH" class="headerlink" title="åœ¨ github ä¸Šé…ç½®SSH"></a>åœ¨ github ä¸Šé…ç½®SSH</h1><p>ç™»å½•ä½ çš„ github è´¦å·</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20210621185412.png" alt="é€‰æ‹© Settings"></p><p>è¿›å…¥åç‚¹å‡» SSH and GPG kays</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20210621185639.png" alt=""></p><p>é€‰æ‹© title å’Œ key</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20210621185745.png" alt=""></p><p>æ·»åŠ å®Œæˆåé…å¯¹å®Œæˆäº†ã€‚</p><h1 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h1><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20210621185959.png" alt=""></p><p>è¾“å…¥</p><pre><code class="sh">ssh git@github.com</code></pre><p>å…¶ä»–æ“ä½œå’Œæ­£å¸¸ æ¨é€ï¼Œæ‹‰å–ä¸€æ ·æ›´å¤šçš„æ˜¯å°‘äº†éªŒè¯å¯†ç ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¡ç®—æœºç½‘ç»œåè®®</title>
      <link href="/2021/06/05/network/"/>
      <url>/2021/06/05/network/</url>
      
        <content type="html"><![CDATA[<h1 id="ç½‘ç»œå±‚æ¬¡åˆ’åˆ†"><a href="#ç½‘ç»œå±‚æ¬¡åˆ’åˆ†" class="headerlink" title="ç½‘ç»œå±‚æ¬¡åˆ’åˆ†"></a>ç½‘ç»œå±‚æ¬¡åˆ’åˆ†</h1><p>ä¸ºä¿ƒä½¿ä¸åŒè®¡ç®—æœºå‚å®¶ç”Ÿäº§çš„è®¡ç®—æœºèƒ½å¤Ÿç›¸äº’é€šä¿¡ï¼Œä»¥ä¾¿å»ºç«‹æ›´å¤§èŒƒå›´çš„è®¡ç®—æœºç½‘ç»œï¼Œå›½é™…æ ‡å‡†åŒ–ç»„ç»‡ï¼ˆISOï¼‰äº 1978 å¹´æå‡ºäº†â€œå¼€æ”¾ç³»ç»Ÿäº’è”å‚è€ƒæ¨¡å‹â€ï¼Œå³OSI/RMæ¨¡å‹ï¼ˆOpen System Interconnection/Reference Modelï¼‰ã€‚å°†è®¡ç®—æœºç½‘ç»œç»“æ„çš„é€šè®¯åè®®åˆ’åˆ†ä¸ºä¸ƒå±‚ï¼Œç”±ï¼šç‰©ç†å±‚ï¼ˆPhysics Layerï¼‰ã€æ•°æ®é“¾è·¯å±‚ï¼ˆData Link Layerï¼‰ã€ç½‘ç»œå±‚ï¼ˆNetwork Layerï¼‰ã€ä¼ è¾“å±‚ï¼ˆTransport Layerï¼‰ã€ä¼šè¯å±‚ï¼ˆSession Layerï¼‰ã€è¡¨ç¤ºå±‚ï¼ˆPresentation Layerï¼‰ã€åº”ç”¨å±‚ï¼ˆApplication Layerï¼‰ã€‚å…¶ä¸­ä¼ è¾“å±‚å®Œæˆæ•°æ®ä¼ é€æœåŠ¡ã€‚</p><table><thead><tr><th>OSI ä¸ƒå±‚ç½‘ç»œæ¨¡å‹</th><th>TCP/IPå››å±‚æ¦‚å¿µæ¨¡å‹</th><th>å¯¹åº”ç½‘ç»œåè®®</th></tr></thead><tbody><tr><td>åº”ç”¨å±‚ï¼ˆApplicationï¼‰</td><td>åº”ç”¨å±‚</td><td>HTTPã€TFTPã€FTPã€NFSã€WAISã€SMTP</td></tr><tr><td>è¡¨ç¤ºå±‚ï¼ˆPresentationï¼‰</td><td>åº”ç”¨å±‚</td><td>Telentã€Rloginã€SNMPã€Gopher</td></tr><tr><td>ä¼šè¯å±‚ï¼ˆSessionï¼‰</td><td>åº”ç”¨å±‚</td><td>SMTPã€DNS</td></tr><tr><td>ä¼ è¾“å±‚ï¼ˆTransportï¼‰</td><td>ä¼ è¾“å±‚</td><td>TCPã€UDPã€</td></tr><tr><td>ç½‘ç»œå±‚ï¼ˆNetworkï¼‰</td><td>ç½‘ç»œå±‚</td><td>IPã€ICMPã€ARPã€RARPã€AKPã€UUCP</td></tr><tr><td>æ•°æ®é“¾è·¯å±‚ï¼ˆData Linkï¼‰</td><td>æ•°æ®é“¾è·¯å±‚</td><td>FDDIã€Ethernetã€Arpanetã€PDNã€SLIPã€PPP</td></tr><tr><td>ç‰©ç†å±‚ï¼ˆPhysicalï¼‰</td><td>æ•°æ®é“¾è·¯å±‚</td><td>IEEE 802.1Aï¼ŒIEEE 802.2 åˆ° IEEE802.11</td></tr></tbody></table><p>1.<strong>ç‰©ç†å±‚ï¼ˆPhysical Layerï¼‰</strong></p><p><strong>ç‰©ç†å±‚ç¡®ä¿åŸå§‹çš„æ•°æ®å¯åœ¨å„ç§ç‰©ç†åª’ä½“ä¸Šä¼ è¾“ã€‚</strong></p><p>2.<strong>æ•°æ®é“¾è·¯å±‚ï¼ˆData Link Layerï¼‰</strong></p><ul><li>æ•°æ®é“¾è·¯å±‚ä¸ºç½‘ç»œå±‚æä¾›å¯é çš„æ•°æ®ä¼ è¾“ï¼›</li><li>åŸºæœ¬æ•°æ®å•ä½ä¸ºå¸§</li><li>ä¸»è¦çš„åè®®ï¼šä»¥å¤ªç½‘åè®®ï¼›</li><li>ä¸¤ä¸ªé‡è¦è®¾å¤‡åç§°ï¼šç½‘æ¡¥å’Œäº¤æ¢æœºã€‚</li></ul><p>3.<strong>ç½‘ç»œå±‚ï¼ˆNetwork Layerï¼‰</strong></p><p>ç½‘ç»œå±‚çš„ç›®çš„æ˜¯å®ç°ä¸¤ä¸ªç«¯ç³»ç»Ÿä¹‹é—´çš„æ•°æ®åŒåä¼ è¾“ï¼Œå…·ä½“åŠŸèƒ½åŒ…æ‹¬å¯»å€å’Œè·¯ç”±é€‰æ‹©ã€é“¾æ¥çš„å»ºç«‹ã€ä¿æŒå’Œç»ˆæ­¢ç­‰ã€‚å®ƒæä¾›çš„æœåŠ¡ä½¿ä¼ è¾“å±‚ä¸éœ€è¦äº†è§£ç½‘ç»œä¸­çš„æ•°æ®ä¼ è¾“å’Œäº¤æ¢æŠ€æœ¯ã€‚</p><ul><li><p>ç½‘ç»œå±‚è´Ÿè´£å¯¹å­ç½‘é—´çš„æ•°æ®åŒ…è¿›è¡Œè·¯ç”±é€‰æ‹©ã€‚æ­¤å¤–ï¼Œç½‘ç»œå±‚è¿˜å¯ä»¥å®ç°æ‹¥å¡æ§åˆ¶ã€ç½‘ç»œäº’è¿ç­‰åŠŸèƒ½ï¼›</p></li><li><p>åŸºæœ¬æ•°æ®å•ä½IPæ•°æ®åŒ…ï¼›</p></li><li><p>åŒ…å«ä¸»è¦åè®®ï¼š</p><p>IPåè®®ï¼ˆInternet Protocolï¼Œå› ç‰¹ç½‘äº’è”åè®®ï¼‰ï¼›</p><p>ICMP åè®®ï¼ˆInternet Control Message Protocalï¼Œå› ç‰¹ç½‘æ§åˆ¶æŠ¥æ–‡åè®®ï¼‰ï¼›</p><p>ARP åè®® ï¼ˆAddress Resolution Protocal ï¼Œåœ°å€è§£æåè®®ï¼‰ï¼›</p><p>RARPåè®® ï¼ˆReverse Address Resolution Protocalï¼Œé€†åœ°å€è§£æåè®®ï¼‰ã€‚</p></li><li><p>é‡è¦è®¾å¤‡ï¼šè·¯ç”±å™¨ã€‚</p></li></ul><h1 id="Socket-ç¼–ç¨‹"><a href="#Socket-ç¼–ç¨‹" class="headerlink" title="Socket ç¼–ç¨‹"></a>Socket ç¼–ç¨‹</h1><h4 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p><strong>socket æ„ä¸ºâ€œæ’åº§â€ï¼Œè®¡ç®—æœºé¢†åŸŸç§°ä¸ºâ€œå¥—æ¥å­—â€ï¼Œå®ƒæ˜¯è®¡ç®—æœºä¹‹é—´è¿›è¡Œé€šè®¯çš„ä¸€ç§çº¦å®šæˆ–ä¸€ç§æ–¹å¼ï¼Œä¸€å°è®¡ç®—æœºå¯ä»¥æ¥æ”¶å…¶ä»–è®¡ç®—æœºçš„æ•°æ®ï¼Œä¹Ÿå¯ä»¥å‘å…¶å®ƒè®¡ç®—æœºå‘é€æ•°æ®ã€‚</strong></p><p>Socket æ˜¯ç½‘ç»œç¼–ç¨‹çš„ä¸€ä¸ªæŠ½è±¡æ¦‚å¿µã€‚é€šå¸¸ä¸€ä¸ªSocketè¡¨ç¤ºâ€œæ‰“å¼€ä¸€ä¸ªç½‘ç»œé“¾æ¥â€ï¼Œè€Œæ‰“å¼€ä¸€ä¸ªSocketéœ€è¦çŸ¥é“ç›®æ ‡è®¡ç®—æœºçš„IPåœ°å€å’Œç«¯å£å·ï¼Œå†é€‰æ‹©åè®®ç±»å‹ã€‚</p><p>åœ¨ socket çš„æ¡ˆä¾‹ä¸­ï¼ŒæœåŠ¡å™¨ä¸æµè§ˆå™¨ï¼šåœ¨æµè§ˆå™¨è·å–ç”¨æˆ·çš„URLåï¼Œå‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼ŒæœåŠ¡å™¨åˆ†ææ¥æ”¶åˆ°çš„URLï¼Œå°†å¯¹åº”çš„ç½‘é¡µå†…å®¹è¿”å›åˆ°æµè§ˆå™¨ï¼ˆå®¢æˆ·ç«¯ï¼‰ï¼Œæµè§ˆå™¨å†è§£æå’Œæ¸²æŸ“ï¼Œå°†æ–‡å­—ã€å›¾ç‰‡ã€è§†é¢‘ç­‰å…ƒç´ å‘ˆç°ç»™ç”¨æˆ·ã€‚</p><h4 id="UNIX-Linux-ä¸­çš„socketï¼"><a href="#UNIX-Linux-ä¸­çš„socketï¼" class="headerlink" title="UNIX/Linux ä¸­çš„socketï¼"></a>UNIX/Linux ä¸­çš„socketï¼</h4><p>åœ¨ç³»ç»Ÿä¸­ï¼Œä¸ºäº†ç»Ÿä¸€å„ç§ç¡¬ä»¶çš„æ“ä½œï¼Œå¹¶ç®€åŒ–æ¥å£ï¼Œä¸åŒçš„ç¡¬ä»¶è®¾å¤‡ä¹Ÿè¢«çœ‹æˆä¸€ä¸ªæ–‡ä»¶ã€‚å¯¹è¿™äº›æ–‡ä»¶çš„æ“ä½œï¼Œç­‰åŒäºå¯¹ç£ç›˜ä¸Šæ™®é€šæ–‡ä»¶çš„æ“ä½œã€‚</p><p>åœ¨UNIX/å’ŒLinuxä¸­ä¼šç»™æ¯ä¸ªæ–‡ä»¶åˆ†é…ä¸€ä¸ªIDï¼Œè¿™ä¸ªIDå°±æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œè¢«ç§°ä¸º æ–‡ä»¶æè¿°ç¬¦ï¼ˆFile Descriptorï¼‰ã€‚ä¾‹å¦‚ï¼š</p><ul><li>0è¡¨ç¤ºä¸€ä¸ªæ ‡å‡†è¾“å…¥æ–‡ä»¶ï¼ˆstdinï¼‰ï¼Œå®ƒå¯¹åº”çš„ç¡¬ä»¶è®¾å¤‡å°±æ˜¯é”®ç›˜ï¼›</li><li>1è¡¨ç¤ºä¸€ä¸ªæ ‡å‡†è¾“å‡ºæ–‡ä»¶ï¼ˆstdoutï¼‰ï¼Œå®ƒå¯¹åº”çš„è®¾å¤‡å°±æ˜¯æ˜¾ç¤ºå™¨ï¼›</li></ul><p>UNIX/Linuxç¨‹åºåœ¨æ‰§è¡Œä»»ä½•å½¢å¼çš„I/Oæ“ä½œæ—¶ï¼Œéƒ½æ˜¯åœ¨è¯»å–æˆ–è€…å†™å…¥ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ã€‚æ–‡ä»¶æè¿°ç¬¦æ˜¯ä¸€ä¸ªå’Œæ‰“å¼€æ–‡ä»¶ç›¸å…³è”çš„æ•´æ•°ï¼Œå®ƒèƒŒåå¯èƒ½æ˜¯ä¸€ä¸ªç¡¬ç›˜ä¸Šçš„æ™®é€šæ–‡ä»¶ã€FIFOã€ç®¡é“ã€ç»ˆç«¯ã€é”®ç›˜ã€æ˜¾ç¤ºä¸”ç­‰ï¼Œæˆ–è€…ç½‘ç»œè¿æ¥ã€‚</p><p><strong>ç½‘ç»œè¿æ¥ä¹Ÿæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œå®ƒä¹Ÿæœ‰æ–‡ä»¶æè¿°ç¬¦ï¼</strong></p><p>å¯ä»¥é€šè¿‡socket()å‡½æ•°æ¥åˆ›å»ºä¸€ä¸ªç½‘ç»œè¿æ¥ï¼Œæˆ–è€…è¯´æ‰“å¼€ä¸€ä¸ªç½‘ç»œæ–‡ä»¶ï¼Œsocket()çš„è¿”å›å€¼å°±æ˜¯æ–‡ä»¶æè¿°ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ™®é€šçš„æ–‡ä»¶æ“ä½œå‡½æ•°æ¥ä¼ è¾“æ•°æ®äº†ã€‚</p><ul><li>ç”¨read()è¯»å–ä»è¿œç¨‹è®¡ç®—æœºä¼ æ¥çš„æ•°æ®ï¼›</li><li>ç”¨write()å‘è¿œç¨‹è®¡ç®—æœºå†™å…¥æ•°æ®ï¼›</li></ul><p>ä½¿ç”¨socket()åˆ›å»ºè¿æ¥åï¼Œå‰©ä¸‹çš„å°±æ˜¯æ–‡ä»¶æ“ä½œäº†ã€‚</p><h4 id="WIndowsç³»ç»Ÿä¸­çš„Socket"><a href="#WIndowsç³»ç»Ÿä¸­çš„Socket" class="headerlink" title="WIndowsç³»ç»Ÿä¸­çš„Socket()!"></a>WIndowsç³»ç»Ÿä¸­çš„Socket()!</h4><p>Windows ä¸­çš„â€œæ–‡ä»¶æè¿°ç¬¦â€è¢«ç§°ä¸ºâ€œæ–‡ä»¶å¥æŸ„â€ã€‚</p><p>Windowsä¸ä¼šæŠŠSocketå½“ä½œæ–‡ä»¶ï¼Œä¼šæŠŠå®ƒå½“ä½œä¸€ä¸ªç½‘ç»œè¿æ¥æ¥å¯¹å¾…ï¼Œå› æ­¤éœ€è¦è°ƒç”¨ä¸“é—¨é’ˆå¯¹socketè€Œè®¾è®¡çš„æ•°æ®ä¼ è¾“å‡½æ•°ï¼Œè¿™é‡Œå°±ç”¨ä¸åˆ°é’ˆå¯¹æ–‡ä»¶æ“ä½œçš„å‡½æ•°äº†ã€‚</p><h4 id="å®¢æˆ·ç«¯"><a href="#å®¢æˆ·ç«¯" class="headerlink" title="å®¢æˆ·ç«¯"></a>å®¢æˆ·ç«¯</h4><p>åœ¨åˆ›å»º TCP è¿æ¥æ—¶ä¸»åŠ¨å‘èµ·çš„å«å®¢æˆ·ç«¯ï¼Œè¢«åŠ¨å“åº”çš„å«æœåŠ¡å™¨ã€‚</p><h4 id="æœåŠ¡å™¨"><a href="#æœåŠ¡å™¨" class="headerlink" title="æœåŠ¡å™¨"></a>æœåŠ¡å™¨</h4><p>æœåŠ¡å™¨ç¼–ç¨‹éœ€è¦æœåŠ¡å™¨è¿›ç¨‹ç»‘å®šä¸€ä¸ªç«¯å£æ¥ç›‘å¬æ¥è‡ªå…¶ä»–å®¢æˆ·ç«¯çš„è¿æ¥ã€‚å½“æŸä¸ªå®¢æˆ·ç«¯è¿æ¥æ—¶ï¼ŒæœåŠ¡å™¨å°±ä¸è¯¥å®¢æˆ·ç«¯å»ºç«‹Socketè¿æ¥ï¼Œéšåçš„é€šè®¯å°±é è¿™ä¸ªSocketè¿æ¥ã€‚</p><h1 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a><strong>å¼•ç”¨</strong></h1><p><a href="https://www.runoob.com/w3cnote/summary-of-network.html" target="_blank" rel="noopener">è®¡ç®—æœºç½‘ç»œåŸºç¡€çŸ¥è¯†æ€»ç»“</a> </p><p><a href="http://c.biancheng.net/view/2123.html" target="_blank" rel="noopener">socketæ˜¯ä»€ä¹ˆï¼Ÿå¥—æ¥å­—æ˜¯ä»€ä¹ˆï¼Ÿ</a></p>]]></content>
      
      
      <categories>
          
          <category> Internet </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Internet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…³äºé“¾å¼è°ƒç”¨</title>
      <link href="/2021/03/19/%E5%85%B3%E4%BA%8E%E9%93%BE%E5%BC%8F%E8%B0%83%E7%94%A8/"/>
      <url>/2021/03/19/%E5%85%B3%E4%BA%8E%E9%93%BE%E5%BC%8F%E8%B0%83%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»€ä¹ˆæ˜¯é“¾å¼è°ƒç”¨"><a href="#ä»€ä¹ˆæ˜¯é“¾å¼è°ƒç”¨" class="headerlink" title="ä»€ä¹ˆæ˜¯é“¾å¼è°ƒç”¨"></a>ä»€ä¹ˆæ˜¯é“¾å¼è°ƒç”¨</h1><p>å½“è°ƒç”¨çš„æ ·å¼ä¸ºè¿™æ ·æ—¶ã€‚</p><blockquote><p>å¯ä»¥ä¸å—é™åˆ¶çš„é€šè¿‡â€.â€æ“ä½œç¬¦è°ƒç”¨æ–¹æ³•ã€‚</p><pre><code class="java">a.b().c()</code></pre><p>æ­¤æ–¹æ³•èµ·æºäº java8</p></blockquote><h1 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h1><blockquote><p>æ¯ä¸ªæ–¹æ³•è¿”å›å¯¹è±¡æœ¬èº«å³å¯</p><pre><code class="java">public class Book{    private String name;    private String author;    public static create(){        return new Student();    }    public void setName(String name){        this.name = name;     }    public void setAuthor(String author){        this.age = age;     }    public Student name(String name){        this.name = name;         return this;    }    public Student author(String author){        this.author = author;         return this;    }}</code></pre><pre><code class="java">/*    è°ƒç”¨    */public class Main{    public static void main(String[] ages){        Book b = new Book()        b.setName(&quot;é“¾å¼è°ƒç”¨&quot;)        b.setAuthor(&quot;TheCara&quot;)        Book b2 = Book.create().name(&quot;é›†åˆ&quot;).author(&quot;ç½‘å‹&quot;)    }}</code></pre><p><strong>ä¼˜ç¼ºç‚¹</strong></p><p>ä¼˜ï¼šæ–¹æ³•å…³ç³»è”ç³»ç´§å¯†ï¼Œç®€æ´ã€‚</p><p>ç¼ºï¼šæ–¹æ³•ä¹‹é—´ä¾èµ–äºä¸Šä¸€ä¸ªæ–¹æ³•ï¼Œè¿”å›ç©ºæŒ‡é’ˆä¼šæŠ¥é”™ã€‚</p></blockquote><h1 id="é™æ€ä½¿ç”¨"><a href="#é™æ€ä½¿ç”¨" class="headerlink" title="é™æ€ä½¿ç”¨"></a>é™æ€ä½¿ç”¨</h1><p>å¼•ç”¨ï¼š</p><p><a href="https://blog.ahao.moe//posts/what_is_Methods_Chaining_in_Java.html" target="_blank" rel="noopener"><strong>ä»€ä¹ˆæ˜¯é“¾å¼è°ƒç”¨</strong></a></p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android PendingIntent</title>
      <link href="/2020/12/07/Android-PendingIntent/"/>
      <url>/2020/12/07/Android-PendingIntent/</url>
      
        <content type="html"><![CDATA[<h1 id="PendingIntent"><a href="#PendingIntent" class="headerlink" title="PendingIntent"></a>PendingIntent</h1><blockquote><p>æè¿°</p><p>A description of an Intent and target action to perform with it. Instances of this class are created with <code>getActivity</code>, <code>getActivities</code>, <code>getBroadcast</code>, and <code>getService</code>; the returned object can be handed to other applications so that they can perform the action you described on your behalf at a later time.</p><p>å®ƒç”±getActivityï¼ŒgetServiceï¼ŒgetBroadcastæ¥åˆ›å»ºå¯¹è±¡ã€‚</p><p>ç”¨äºä¸€ç§ç‰¹æ®Šçš„å¼‚æ­¥å¤„ç†æœºåˆ¶ã€‚å¯å½’ç»“ä¸º â€œå¼‚æ­¥æ¿€å‘â€ï¼Œè¿™ç§å¼‚æ­¥æ¿€å‘å¸¸å¸¸æ˜¯è¦è·¨è¿›ç¨‹æ‰§è¡Œçš„ã€‚æ¯”å¦‚è¯´ Aè¿›ç¨‹ä½œä¸ºå‘èµ·æ®µï¼Œå®ƒå¯ä»¥ä»ç³»ç»Ÿè·å¾—ä¸€ä¸ªPendingIntentï¼Œç„¶åAè¿›ç¨‹å¯ä»¥å°†PendingIntentå¯¹è±¡é€šè¿‡binderæœºåˆ¶â€œä¼ é€’â€œç»™Bè¿›ç¨‹ï¼Œå†é€šè¿‡Bè¿›ç¨‹åœ¨æœªæ¥çš„æŸä¸ªåˆé€‚æ—¶æœºï¼Œâ€å›è°ƒâ€œPendingIntentå¯¹è±¡çš„send()åŠ¨ä½œï¼Œå®Œæˆæ¿€å‘ã€‚</p><p>PendingIntentçš„ç”Ÿå‘½å‘¨æœŸä¸ä¸ä¸»è¿›ç¨‹ç›¸å…³ã€‚å¤–éƒ¨ç¨‹åºåªèƒ½è°ƒç”¨ä¸Šè¿°ä¸‰ä¸ªç»„ä»¶ã€‚</p></blockquote><h4 id="getActivity"><a href="#getActivity" class="headerlink" title="getActivity"></a>getActivity</h4><pre><code class="kotlin">static fun getActivity(    context: Context!,     requestCode: Int,     intent: Intent!,     flags: Int): PendingIntent!</code></pre><blockquote><p>Retrieve a PendingIntent that will start a new activity, like calling <code>Context#startActivity(Intent)</code>. Note that the activity will be started outside of the context of an existing activity, so you must use the <code>Intent#FLAG_ACTIVITY_NEW_TASK</code> launch flag in the Intent.</p><p>è·å¾—ä¸€ä¸ªç”¨äºå¯åŠ¨ç‰¹å®šActivityçš„PendingIntentã€‚</p></blockquote><h4 id="ä¸‰ä¸ªè¿”å›éœ€è¦ç”¨åˆ°çš„å‚æ•°"><a href="#ä¸‰ä¸ªè¿”å›éœ€è¦ç”¨åˆ°çš„å‚æ•°" class="headerlink" title="ä¸‰ä¸ªè¿”å›éœ€è¦ç”¨åˆ°çš„å‚æ•°"></a>ä¸‰ä¸ªè¿”å›éœ€è¦ç”¨åˆ°çš„å‚æ•°</h4><ul><li>contextï¼šä¸Šä¸‹æ–‡å¯¹è±¡</li><li>requstCodeï¼šè¯·æ±‚ç ï¼Œå‘ä»¶äººçš„ç§äººè¯·æ±‚ä»£ç ï¼ˆå½“å‰æœªä½¿ç”¨ï¼‰</li><li>intentï¼šè¯·æ±‚æ„å›¾ã€‚ç”¨äºè¦æŒ‡æ˜è¦å¯åŠ¨çš„ç±»ä»¥åŠæ•°æ®çš„ä¼ é€’</li><li>flagsï¼šè¿™æ˜¯ä¸€ä¸ªå…³é”®çš„æ ‡å¿—ä½</li></ul><h4 id="flagså¸¸é‡"><a href="#flagså¸¸é‡" class="headerlink" title="flagså¸¸é‡"></a>flagså¸¸é‡</h4><p>FLAG_CANCEL_CURRENT</p><pre><code class="kotlin">static val FLAG_CANCEL_CURRENT: Int</code></pre><blockquote><p>Flag indicating that if the described PendingIntent already exists, the current one should be canceled before generating a new one. For use with <code>getActivity</code>, <code>getBroadcast</code>, and <code>getService</code>.</p><p>å¦‚æœæ–°è¯·æ±‚çš„ PendingIntent å‘ç°å·²ç»å­˜åœ¨æ—¶ï¼Œå–æ¶ˆå·²å­˜åœ¨çš„ï¼Œç”¨æ–°çš„ PendingInent æ›¿æ¢</p></blockquote><p>FLAG_IMMUTABLE</p><pre><code class="kotlin">static val FLAG_IMMUTABLE: Int</code></pre><blockquote><p>Flag indicating that the created PendingIntent should be immutable. This means that the additional intent argument passed to the send methods to fill in unpopulated properties of this intent will be ignored.</p><p>è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªä¸å¯å˜çš„ PendingIntentã€‚</p></blockquote><p>FLAG_NO_CREATE</p><pre><code>static val FLAG_NO_CREATE: Int</code></pre><blockquote><p>Flag indicating that if the described PendingIntent does not already exist, then simply return null instead of creating it. For use with <code>getActivity</code>, <code>getBroadcast</code>, and <code>getService</code>.</p><p>å¦‚æœæ–°è¯·æ±‚çš„ PendingIntent å‘ç°å·²ç»å­˜åœ¨æ—¶ï¼Œå¿½è§†æ–°è¯·æ±‚çš„ï¼Œç»§ç»­ä½¿ç”¨å·²ç»å­˜åœ¨çš„è¯·æ±‚ã€‚è¾ƒå°‘ä½¿ç”¨ã€‚</p></blockquote><p>FLAG_ONE_SHOT</p><pre><code class="kotlin">static val FLAG_ONE_SHOT: Int</code></pre><blockquote><p>Flag indicating that this PendingIntent can be used only once. For use with <code>getActivity</code>, <code>getBroadcast</code>, and <code>getService</code>.</p><p>è¡¨ç¤º PendingIntent åªèƒ½ä½¿ç”¨ä¸€æ¬¡ï¼Œå¦‚æœå·²ç»ä½¿ç”¨è¿‡ï¼Œé‚£ä¹ˆ getxxxæ–¹æ³•æ—¶ä¼šè¿”å›ä¸ºNULLï¼Œä¹Ÿå°±æ˜¯è¯´åŒç±»é€šçŸ¥åªèƒ½ä½¿ç”¨ä¸€æ¬¡ï¼Œåç»­çš„é€šçŸ¥å•ç‹¬åæ— æ³•æ‰“å¼€ã€‚</p></blockquote><p>FLAG_UPDATE_CURRENT</p><pre><code>static val FLAG_UPDATE_CURRENT: Int</code></pre><blockquote><p>Flag indicating that if the described PendingIntent already exists, then keep it but replace its extra data with what is in this new Intent. For use with <code>getActivity</code>, <code>getBroadcast</code>, and <code>getService</code>.</p><p>å¦‚æœæ–°çš„è¯·æ±‚çš„PendingIntent å‘ç°å·²ç»å­˜åœ¨æ—¶ï¼Œå¦‚æœ Intent æœ‰å­—æ®µæ”¹å˜äº†ï¼Œåˆ™æ›´æ–°å·²å­˜åœ¨çš„ PendingIntent</p></blockquote><h4 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨:"></a>å¼•ç”¨:</h4><p><a href="https://developer.android.com/reference/kotlin/android/app/PendingIntent" target="_blank" rel="noopener">PendingIntent</a></p><p><a href="https://www.jianshu.com/p/a37f0ce2da2e" target="_blank" rel="noopener">PendingIntentçš„åŸºæœ¬ç†è§£</a></p><p><a href="https://www.jianshu.com/p/4a8fc0b78094" target="_blank" rel="noopener">Android PendingIntent</a></p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android-PackageManager</title>
      <link href="/2020/12/07/PackageManager/"/>
      <url>/2020/12/07/PackageManager/</url>
      
        <content type="html"><![CDATA[<h1 id="PackageManager"><a href="#PackageManager" class="headerlink" title="PackageManager"></a>PackageManager</h1><blockquote><p>Class for retrieving various kinds of information related to the application packages that are currently installed on the device. You can find this class through <code>Context#getPackageManager</code>.</p><p>PackageManager è´Ÿè´£ç®¡ç†åº”ç”¨ç¨‹åºå®‰è£…ã€å¸è½½å’Œå‡çº§çš„APIã€‚</p></blockquote><h4 id="getLaunchIntentForPackage"><a href="#getLaunchIntentForPackage" class="headerlink" title="getLaunchIntentForPackage"></a>getLaunchIntentForPackage</h4><pre><code class="kotlin">abstract fun getLaunchIntentForPackage(packageName: String): Intent?</code></pre><blockquote><p>Returns a â€œgoodâ€ intent to launch a front-door activity in a package. This is used, for example, to implement an â€œopenâ€ button when browsing through packages. The current implementation looks first for a main activity in the category <code>Intent#CATEGORY_INFO</code>, and next for a main activity in the category <code>Intent#CATEGORY_LAUNCHER</code>. Returns <code>null</code> if neither are found.</p><p>è´Ÿè´£è·å¾—åº”ç”¨ç¨‹åºLaunchçš„Intentã€‚</p><p>è¿”å›ä¸€ä¸ªâ€œåŒ…â€ä¸­çš„å…¥å£Activityçš„Intentï¼Œä¾‹å¦‚ï¼Œè¿™ä¸ªç±»ä¼¼äºåœ¨æµè§ˆåŒ…çš„â€œæ‰“å¼€â€æŒ‰é’®ã€‚è¿™ä¸ªå½“å‰çš„å®‰è£…å¯åŠ¨ç¬¬ä¸€æ­¥åœ¨category(CATEGORY_INFO)ä¸­å¯»æ‰¾main Activityï¼Œç„¶åcategory(CATEGORY_LAUNCHER)å¯»æ‰¾main Activityã€‚å¦‚æœæ‰¾ä¸åˆ°è¿”å› nullã€‚</p></blockquote><h5 id="å¼•ç”¨ï¼š"><a href="#å¼•ç”¨ï¼š" class="headerlink" title="å¼•ç”¨ï¼š"></a>å¼•ç”¨ï¼š</h5><p><a href="https://developer.android.com/reference/kotlin/android/content/pm/PackageManager" target="_blank" rel="noopener">PackageManager</a></p><p><a href="https://www.jianshu.com/p/c56376916d5e" target="_blank" rel="noopener">APKå®‰è£…æµç¨‹è¯¦è§£2â€”â€”PackageManagerç®€ä»‹</a></p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Androidåª’ä½“mediaåŒ…</title>
      <link href="/2020/12/02/Android%E5%AA%92%E4%BD%93media%E5%8C%85/"/>
      <url>/2020/12/02/Android%E5%AA%92%E4%BD%93media%E5%8C%85/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æ‰€å± android.support.v4.mediaåŒ…ä¸‹ </p></blockquote><h1 id="åª’ä½“æµè§ˆå™¨æœåŠ¡-MediaBrowserService"><a href="#åª’ä½“æµè§ˆå™¨æœåŠ¡-MediaBrowserService" class="headerlink" title="åª’ä½“æµè§ˆå™¨æœåŠ¡ MediaBrowserService"></a>åª’ä½“æµè§ˆå™¨æœåŠ¡ MediaBrowserService</h1><h4 id="å…³é”®ç±»å‹"><a href="#å…³é”®ç±»å‹" class="headerlink" title="å…³é”®ç±»å‹"></a>å…³é”®ç±»å‹</h4><ol><li>MediaBrowserServiceCompat åª’ä½“æµè§ˆå™¨æœåŠ¡</li><li>MediaBrowserCompat åª’ä½“æµè§ˆå™¨</li><li>MediaControllerCompat åª’ä½“æ§åˆ¶å™¨</li><li>MediaSessionCompat åª’ä½“ä¼šè¯</li></ol><h1 id="MediaBrowserServiceCompat"><a href="#MediaBrowserServiceCompat" class="headerlink" title="MediaBrowserServiceCompat"></a>MediaBrowserServiceCompat</h1><blockquote><p>ä½œç”¨</p><p>éŸ³ä¹æ’­æ”¾åå°æœåŠ¡ã€‚</p><p>å®¢æˆ·ç«¯ä¸­è·å–éŸ³ä¹æ•°æ®çš„æœåŠ¡ï¼Œæ‰€æœ‰çš„éŸ³ä¹æ•°æ®éƒ½é€šè¿‡è¯¥æœåŠ¡ä¸æœåŠ¡ç«¯è¿›è¡Œäº¤äº’è·å–ã€‚</p></blockquote><p>è¯¥ç±»æ˜¯Serviceç±»çš„å­ç±»ï¼Œå¯ä»¥ä½œä¸ºä¸€ä¸ªåå°æœåŠ¡æ¥ä½¿ç”¨ï¼Œå®ƒå®ç°åå°æœåŠ¡å¹¶ä¸èƒ½é€šè¿‡è‡ªèº«ç›´æ¥å®ç°ï¼Œè€Œæ˜¯é€šè¿‡MediaSessionCompatåª’ä½“ä¼šè¯æ¥å®ç°çš„ã€‚åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ä¼šè¯ä¼šä¸è¯¥æœåŠ¡å…³è”èµ·æ¥ï¼Œæ‰€æœ‰çš„æ’­æ”¾æ“ä½œéƒ½è¦ç»™MediaSessionCompatå®ç°ã€‚</p><p>è·å¾—æ•°æ®æ—¶ï¼Œé€šè¿‡ <strong>MediaBrowserServiceCompat</strong> çš„ä¸¤ä¸ªæ–¹æ³•æ¥å®ç°æ§åˆ¶</p><pre><code class="kotlin">@Nullable abstract fun onGetRoot(    @NonNull clientPackageName: String,     clientUid: Int,     @Nullable rootHints: Bundle?): MediaBrowserServiceCompat.BrowserRoot?</code></pre><blockquote><p>è°ƒç”¨ä»¥è·å–ç‰¹å®šå®¢æˆ·ç«¯æµè§ˆçš„æ ¹ä¿¡æ¯ã€‚</p><p>æ­¤æ–¹æ³•è‡ªåœ¨æœåŠ¡è¿æ¥æ—¶è°ƒç”¨ï¼Œå¦‚æœè¿”å›ä¸€ä¸ª rootIdä¸ºç©ºçš„BrowserRootåˆ™è¡¨ç¤ºå®¢æˆ·ç«¯å¯ä»¥è¿æ¥æœåŠ¡ï¼Œä¹Ÿå¯ä»¥è¿æ¥å…¶åª’ä½“èµ„æº</p><p>å¦‚æœè¿”å›nullåˆ™è¡¨ç¤ºå®¢æˆ·ç«¯ä¸èƒ½è¿æ¥åª’ä½“èµ„æº</p></blockquote><pre><code class="kotlin">abstract fun onLoadChildren(    @NonNull parentId: String,     @NonNull result: MediaBrowserServiceCompat.Result&lt;MutableList&lt;MediaBrowserCompat.MediaItem!&gt;!&gt;): Unit</code></pre><blockquote><p>æ¥è·å–æœ‰å…³åª’ä½“é¡¹ç›®çš„å­ä¿¡æ¯ã€‚</p><p>æ­¤æ–¹æ³•ä¸­çš„ parentId ä¸ä¸Šé¢çš„æ–¹æ³• onGetRoot ä¸­è¿”å›çš„RootIdæ²¡æœ‰å…³ç³»ï¼Œå®¢æˆ·ç«¯è¿æ¥åï¼Œå®ƒå¯ä»¥é€šè¿‡é‡å¤è°ƒç”¨MediaBrowserCompat.subscribe()æ–¹æ³•æ¥å‘èµ·æ•°æ®è¯·æ±‚ã€‚è€Œæ¯æ¬¡è°ƒç”¨subscribe()æ–¹æ³•éƒ½ä¼šè¿”å›onLoadChildren()å›è°ƒåˆ°è¯¥serviceä¸­ï¼Œç„¶åè¿”å›MediaBrowser.MediaItem()å¯¹è±¡åˆ—è¡¨</p><p>æ¯ä¸ªMediaIteméƒ½æœ‰å”¯ä¸€çš„Idå­—ç¬¦ä¸²ï¼Œå®ƒå…¶å®æ˜¯ä¸€ä¸ªéšå¼çš„tokenã€‚å½“å®¢æˆ·æƒ³æ‰“å¼€å­èœå•æˆ–è€…æ’­æ”¾itemæ—¶ï¼Œå®ƒå°±å°†IDä¼ å…¥ã€‚</p></blockquote><h1 id="MediaBrowserServiceCompat-BrowserRoot-æŠ½è±¡ç±»"><a href="#MediaBrowserServiceCompat-BrowserRoot-æŠ½è±¡ç±»" class="headerlink" title="MediaBrowserServiceCompat.BrowserRoot æŠ½è±¡ç±»"></a>MediaBrowserServiceCompat.BrowserRoot æŠ½è±¡ç±»</h1><blockquote><p>åŒ…å«æµè§ˆå™¨é¦–æ¬¡è¿æ¥å®¢æˆ·ç«¯çš„ä¿¡æ¯ã€‚</p></blockquote><table><thead><tr><th align="center">ä¿®é¥°ç¬¦</th><th align="center">ï¼ˆæ„é€ ï¼‰æ–¹æ³•</th><th align="center">æè¿°</th></tr></thead><tbody><tr><td align="center"></td><td align="center">MediaBrowserServiceCompat.BrowserRoot(String rootId,Bundle extras)</td><td align="center">rootIdï¼šæµè§ˆçš„æ ¹IDã€‚extrasï¼šæµè§ˆå™¨çš„é™„åŠ åŠŸèƒ½ã€‚</td></tr><tr><td align="center"></td><td align="center"></td><td align="center"></td></tr><tr><td align="center"></td><td align="center"></td><td align="center"></td></tr></tbody></table><h1 id="MediaBrowserServiceCompat-Result-ç±»"><a href="#MediaBrowserServiceCompat-Result-ç±»" class="headerlink" title="MediaBrowserServiceCompat.Result ç±»"></a>MediaBrowserServiceCompat.Result ç±»</h1><blockquote><p>å¼‚æ­¥å›è°ƒæ–¹æ³•çš„å®Œæˆå¤„ç†ç¨‹åº</p></blockquote><table><thead><tr><th align="center">ä¿®é¥°ç¬¦</th><th align="center">æ–¹æ³•</th><th align="center">æè¿°</th></tr></thead><tbody><tr><td align="center">void</td><td align="center">sendResult(T result)</td><td align="center">å°†ç»“æœå‘é€ç»™è°ƒç”¨è€…</td></tr><tr><td align="center">void</td><td align="center">detach()</td><td align="center">åˆ†ç¦»çº¿ç¨‹æ¶ˆæ¯ï¼Œå¹¶å…è®¸ç¨åè¿›è¡ŒsendResult(T)è°ƒç”¨ã€‚</td></tr><tr><td align="center"></td><td align="center"></td><td align="center"></td></tr></tbody></table><h1 id="MediaBrowserCompat"><a href="#MediaBrowserCompat" class="headerlink" title="MediaBrowserCompat"></a>MediaBrowserCompat</h1><h2 id="MediaBrowserCompat-MediaItemå¸¸é‡"><a href="#MediaBrowserCompat-MediaItemå¸¸é‡" class="headerlink" title="MediaBrowserCompat.MediaItemå¸¸é‡"></a>MediaBrowserCompat.MediaItemå¸¸é‡</h2><blockquote><p>ä¸€ä¸ªåŒ…å«å•ä¸ªåª’ä½“é¡¹ç›®ä¿¡æ¯çš„ç±»ï¼Œç”¨äºæµè§ˆåª’ä½“ã€‚</p></blockquote><p><strong>å¸¸é‡</strong></p><h3 id="FLAG-PLAYABLE"><a href="#FLAG-PLAYABLE" class="headerlink" title="FLAG_PLAYABLE"></a>FLAG_PLAYABLE</h3><pre><code class="java">int FLAG_PLAYABLE</code></pre><p>æ ‡å¿—ï¼šè¡¨ç¤ºè¯¥é¡¹ç›®å¯ä»¥æ’­æ”¾ã€‚</p><h3 id="FLAG-BROWSABLE"><a href="#FLAG-BROWSABLE" class="headerlink" title="FLAG_BROWSABLE"></a>FLAG_BROWSABLE</h3><pre><code>int FLAG_BROWSABLE</code></pre><p>æ ‡å¿—ï¼šè¡¨ç¤ºè¯¥é¡¹ç›®æœ‰å…¶è‡ªå·±çš„å­é¡¹ã€‚</p><h1 id="MediaControllerCompat-ç±»"><a href="#MediaControllerCompat-ç±»" class="headerlink" title="MediaControllerCompat ç±»"></a>MediaControllerCompat ç±»</h1><blockquote><p>å±äº media.session åŒ…ä¸‹ã€‚</p><p>å…è®¸åº”ç”¨ä¸æ­£åœ¨è¿›è¡Œçš„åª’ä½“ä¼šè¯è¿›è¡Œäº’åŠ¨ã€‚</p></blockquote><table><thead><tr><th align="center">æ–¹æ³•å</th><th align="center">å‚æ•°</th><th align="center">æè¿°</th><th align="center">è¿”å›å€¼</th></tr></thead><tbody><tr><td align="center">getMetadata</td><td align="center">æ— </td><td align="center">è·å–æ­¤ä¼šè¯çš„å½“å‰å…ƒæ•°æ®ã€‚</td><td align="center">è¿”å›MediadataCompatç±»</td></tr><tr><td align="center">getSessionActivity</td><td align="center">æ— </td><td align="center">è·å¾—ä¸å¯åŠ¨ä¼šè¯å…³è”çš„ç”¨æˆ·ç•Œé¢çš„æ„å›¾ï¼ˆå¦‚æœå­˜åœ¨çš„è¯ï¼‰</td><td align="center">PendingIntentæ„å›¾æˆ–è€…null</td></tr><tr><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td></tr></tbody></table><h1 id="MediaSessionCompat-ç±»"><a href="#MediaSessionCompat-ç±»" class="headerlink" title="MediaSessionCompat ç±»"></a>MediaSessionCompat ç±»</h1><blockquote><p>Allows interaction with media controllers, volume keys, media buttons, and transport controls.</p><p>å…è®¸ä¸åª’ä½“æ§åˆ¶å™¨ï¼ŒéŸ³é‡é”®ï¼Œåª’ä½“æŒ‰é’®å’Œä¼ è¾“æ§ä»¶è¿›è¡Œäº¤äº’ã€‚</p><p>å½“åº”ç”¨ç¨‹åºæƒ³è¦å‘å¸ƒåª’ä½“æ’­æ”¾ä¿¡æ¯æˆ–å¤„ç†åª’ä½“å¯†é’¥æ—¶ï¼Œåº”åˆ›å»ºMediaSessionã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œä¸€ä¸ªåº”ç”¨ç¨‹åºåªéœ€è¦ä¸€ä¸ªä¼šè¯è¿›è¡Œæ‰€æœ‰æ’­æ”¾ï¼Œä½†å¯åˆ›å»ºå¤šä¸ªä¼šè¯æ¥æä¾›æ›´ç²¾ç»†çš„åª’ä½“æ§åˆ¶ã€‚</p><p>ä¸€æ—¦åˆ›å»ºä¼šè¯ï¼Œä¼šè¯çš„æ‰€æœ‰è€…å¯ä»¥å°†å…¶ <code>session token</code>ä¼ é€’ç»™å…¶ä»–è¿›ç¨‹ï¼Œä»¥å…è®¸ä»–ä»¬åˆ›å»º <code>MediaControllerCompat</code>ä¸ä¼šè¯è¿›è¡Œäº¤äº’ã€‚</p><p>è¦æ¥æ”¶å‘½ä»¤ï¼Œåª’ä½“å¯†é’¥å’Œå…¶ä»–äº‹ä»¶ï¼Œ <code>MediaSessionCompat.Callback</code>å¿…é¡»ä½¿ç”¨ <code>setCallback(Callback)</code>è¿›è¡Œè®¾ç½®ã€‚</p><p>å½“åº”ç”¨ç¨‹åºå®Œæˆæ’­æ”¾æ—¶ï¼Œå®ƒå¿…é¡»è°ƒç”¨ <code>release()</code>æ¥æ¸…ç†ä¼šè¯å¹¶é€šçŸ¥ä»»ä½•æ§åˆ¶å™¨ã€‚</p><p>MediaSessionCompatå¯¹è±¡ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæ‰€æœ‰è°ƒç”¨éƒ½åº”è¯¥ä½¿ç”¨åŒä¸€ä¸ªçº¿ç¨‹ã€‚</p><p>è¿™æ˜¯å¸®åŠ©æ‚¨ä»¥å‘åå…¼å®¹çš„æ–¹å¼è®¿é—®APIçº§åˆ«4ä¹‹åå¼•å…¥çš„ <code>MediaSession</code>åŠŸèƒ½ã€‚</p><p>ps:æ‘˜è‡ª <a href="https://www.apiref.com/android-zh/android/support/v4/media/session/MediaSessionCompat.html" target="_blank" rel="noopener">apiref</a></p></blockquote><p><strong>æ„é€ æ–¹æ³•</strong></p><p><strong>MediaSessionCompat</strong></p><pre><code>MediaSessionCompat(@NonNull context: Context, @NonNull tag: String)</code></pre><blockquote><p>Creates a new session. You must call <code>release()</code> when finished with the session.</p><p>åˆ›å»ºå¯¹è±¡ã€‚åœ¨å®Œæˆæ—¶è¦è°ƒç”¨release()é‡Šæ”¾ã€‚</p><p>å‚æ•°1ï¼šåˆ›å»ºSessionçš„ä¸Šä¸‹æ–‡</p><p>å‚æ•°2ï¼šè°ƒè¯•æ—¶æ‰€ç”¨çš„ tagã€‚</p></blockquote><p><strong>MediaSessionCompat</strong></p><pre><code>MediaSessionCompat(@NonNull context: Context, @NonNull tag: String, @Nullable mbrComponent: ComponentName?, @Nullable mbrIntent: PendingIntent?)</code></pre><blockquote><p>Creates a new session with a specified media button receiver (a component name and/or a pending intent). You must call <code>release()</code> when finished with the session.</p><p>æŒ‡å®šä¸€ä¸ªåª’ä½“æ¥æ”¶å™¨æ¥åˆ›å»ºå¯¹è±¡ã€‚åœ¨å®Œæˆæ—¶è¦è°ƒç”¨release()é‡Šæ”¾ã€‚</p><p>å‚æ•°1ï¼šåˆ›å»ºSessionçš„ä¸Šä¸‹æ–‡</p><p>å‚æ•°2ï¼šè°ƒè¯•æ—¶æ‰€ç”¨çš„ tagã€‚</p><p>å‚æ•°3ï¼šæŒ‡å®šåª’ä½“æ¥æ”¶å™¨çš„åç§°</p><p>å‚æ•°4ï¼šå¤„ç†åª’ä½“æŒ‰é’®äº‹ä»¶çš„æ¥æ”¶å™¨ç»„ä»¶ã€‚å¯é€‰é€‰é¡¹ã€‚</p></blockquote><p><strong>setSessionToken</strong></p><pre><code>open fun setSessionToken(token: MediaSessionCompat.Token!): Unit</code></pre><blockquote><p>Call to set the media session.</p><p>This should be called as soon as possible during the serviceâ€™s startup. It may only be called once.</p><p>å‘¼å«è®¾ç½®åª’ä½“ä¼šè¯ã€‚</p><p>è¿™åº”è¯¥åœ¨æœåŠ¡å¯åŠ¨æœŸé—´å°½å¿«è°ƒç”¨ã€‚ å®ƒåªèƒ½è¢«è°ƒç”¨ä¸€æ¬¡ã€‚</p></blockquote><p><strong>getSessionToken</strong></p><pre><code>@Nullable open fun getSessionToken(): MediaSessionCompat.Token?</code></pre><blockquote><p>Gets the session token, or null if it has not yet been created or if it has been destroyed.</p><p>è·å–ä¼šè¯æ ‡è®°ï¼Œå¦‚æœå°šæœªåˆ›å»ºæˆ–å·²é”€æ¯å®ƒï¼Œåˆ™ä¸ºnullã€‚</p></blockquote><p><strong>setSessionActivity</strong></p><p>PendingInten piï¼šå¯åŠ¨åˆ°è¿™ä¸ªä¼šè¯ã€‚</p><pre><code>void setSessionActivity (PendingIntent pi)    </code></pre><blockquote><p>ä¸ºæ­¤ä¼šè¯è®¾ç½®å¯åŠ¨ç”¨æˆ·ç•Œé¢çš„æ„å›¾ã€‚ è¿™å¯ä»¥ç”¨ä½œåˆ°æ­£åœ¨è¿›è¡Œçš„åª’ä½“å±å¹•çš„å¿«é€Ÿé“¾æ¥ã€‚ æ„å›¾åº”è¯¥æ˜¯é’ˆå¯¹å¯èƒ½ä½¿ç”¨<code>startActivity(Intent)</code>å¼€å§‹çš„æ´»åŠ¨ã€‚</p></blockquote><h1 id="MediaSessonCompat-Tokenç±»"><a href="#MediaSessonCompat-Tokenç±»" class="headerlink" title="MediaSessonCompat.Tokenç±»"></a>MediaSessonCompat.Tokenç±»</h1><p>è¿è¡Œä¸­çš„Tokenã€‚è¡¨ç¤ºå¯èƒ½ä¼šè¢«ä¼šè¯çš„æ‰€æœ‰è€…ä¼ é€’ç»™åº”ç”¨ç¨‹åºï¼Œä»¥å…è®¸åˆ›å»ºä¸€ä¸ªMediaControllerCompatä¸ä¼šè¯è¿›è¡Œé€šä¿¡ã€‚</p><h1 id="MediaMetadataCompat"><a href="#MediaMetadataCompat" class="headerlink" title="MediaMetadataCompat"></a>MediaMetadataCompat</h1><blockquote><p>åŒ…å«æœ‰å…³é¡¹ç›®çš„å…ƒæ•°æ®ï¼Œä¾‹å¦‚æ ‡é¢˜ï¼Œè‰ºæœ¯å®¶ç­‰</p></blockquote><p><strong>å„ä¸ªå¸¸é‡</strong></p><table><thead><tr><th align="center">ç±»å‹</th><th></th></tr></thead><tbody><tr><td align="center">string</td><td><code>METADATA_KEY_ALBUM</code>åª’ä½“ä¸“è¾‘æ ‡é¢˜ã€‚</td></tr><tr><td align="center">string</td><td><code>METADATA_KEY_ALBUM_ART</code>åª’ä½“åŸå§‹èµ„æ–™ä¸“è¾‘çš„ä½œå“ä¸º <code>Bitmap</code> ã€‚</td></tr><tr><td align="center">string</td><td><code>METADATA_KEY_ALBUM_ARTIST</code>åª’ä½“åŸå§‹èµ„æ–™ä¸“è¾‘çš„è‰ºæœ¯å®¶ã€‚</td></tr><tr><td align="center">string</td><td><code>METADATA_KEY_ALBUM_ART_URI</code>ä½œä¸ºUrié£æ ¼å­—ç¬¦ä¸²çš„åª’ä½“åŸå§‹æºç›¸å†Œçš„å›¾ç‰‡ã€‚</td></tr><tr><td align="center">string</td><td><code>METADATA_KEY_ART</code>åª’ä½“ä½œå“ä¸º <code>Bitmap</code> ã€‚</td></tr><tr><td align="center">string</td><td><code>METADATA_KEY_ARTIST</code>åª’ä½“è‰ºæœ¯å®¶ã€‚</td></tr><tr><td align="center">string</td><td><code>METADATA_KEY_ART_URI</code>åª’ä½“çš„ä½œå“æ˜¯Urié£æ ¼çš„å­—ç¬¦ä¸²ã€‚</td></tr><tr><td align="center">string</td><td><code>METADATA_KEY_AUTHOR</code>åª’ä½“çš„ä½œè€…ã€‚</td></tr><tr><td align="center">string</td><td><code>METADATA_KEY_COMPILATION</code>åª’ä½“çš„ç¼–è¾‘çŠ¶æ€ã€‚</td></tr><tr><td align="center">string</td><td><code>METADATA_KEY_COMPOSER</code>åª’ä½“çš„ä½œæ›²å®¶ã€‚</td></tr><tr><td align="center">string</td><td><code>METADATA_KEY_DATE</code>åª’ä½“åˆ›å»ºæˆ–å‘å¸ƒçš„æ—¥æœŸã€‚</td></tr><tr><td align="center">string</td><td><code>METADATA_KEY_DISC_NUMBER</code>åª’ä½“åŸå§‹æ¥æºçš„å…‰ç›˜å·ç ã€‚</td></tr><tr><td align="center">string</td><td><code>METADATA_KEY_DISPLAY_DESCRIPTION</code>é€‚åˆå‘ç”¨æˆ·æ˜¾ç¤ºçš„è¯´æ˜ã€‚</td></tr><tr><td align="center">string</td><td><code>METADATA_KEY_DISPLAY_ICON</code>é€‚åˆå‘ç”¨æˆ·æ˜¾ç¤ºçš„å›¾æ ‡æˆ–ç¼©ç•¥å›¾ã€‚</td></tr><tr><td align="center">string</td><td><code>METADATA_KEY_DISPLAY_ICON_URI</code>é€‚åˆå‘ç”¨æˆ·æ˜¾ç¤ºçš„å›¾æ ‡æˆ–ç¼©ç•¥å›¾ã€‚</td></tr><tr><td align="center">string</td><td><code>METADATA_KEY_DISPLAY_SUBTITLE</code>é€‚åˆå‘ç”¨æˆ·æ˜¾ç¤ºçš„å­—å¹•ã€‚</td></tr><tr><td align="center">string</td><td><code>METADATA_KEY_DISPLAY_TITLE</code>é€‚åˆå‘ç”¨æˆ·æ˜¾ç¤ºçš„æ ‡é¢˜ã€‚</td></tr><tr><td align="center">string</td><td><code>METADATA_KEY_DURATION</code>åª’ä½“çš„æŒç»­æ—¶é—´ä»¥æ¯«ç§’ä¸ºå•ä½ã€‚</td></tr><tr><td align="center">string</td><td><code>METADATA_KEY_GENRE</code>åª’ä½“çš„æµæ´¾ã€‚</td></tr><tr><td align="center">string</td><td><code>METADATA_KEY_MEDIA_ID</code>ç”¨äºè¯†åˆ«å†…å®¹çš„å­—ç¬¦ä¸²é”®ã€‚</td></tr><tr><td align="center">string</td><td><code>METADATA_KEY_NUM_TRACKS</code>åª’ä½“åŸå§‹æ¥æºä¸­çš„æ›²ç›®æ•°é‡ã€‚</td></tr><tr><td align="center">string</td><td><code>METADATA_KEY_RATING</code>åª’ä½“æ•´ä½“è¯„åˆ†ã€‚</td></tr><tr><td align="center">string</td><td><code>METADATA_KEY_TITLE</code>åª’ä½“çš„æ ‡é¢˜ã€‚</td></tr><tr><td align="center">string</td><td><code>METADATA_KEY_TRACK_NUMBER</code>åª’ä½“çš„æ›²ç›®å·ç ã€‚</td></tr><tr><td align="center">string</td><td><code>METADATA_KEY_USER_RATING</code>ç”¨æˆ·å¯¹åª’ä½“çš„è¯„åˆ†ã€‚</td></tr><tr><td align="center">string</td><td><code>METADATA_KEY_WRITER</code>åª’ä½“çš„ä½œè€…ã€‚</td></tr><tr><td align="center">string</td><td><code>METADATA_KEY_YEAR</code>åª’ä½“åˆ›å»ºæˆ–å‘å¸ƒçš„ä¸€å¹´ã€‚</td></tr></tbody></table><table><thead><tr><th align="center">æ–¹æ³•å</th><th align="center">å‚æ•°</th><th align="center">æè¿°</th><th align="center">è¿”å›å€¼</th></tr></thead><tbody><tr><td align="center">getDescription</td><td align="center">æ— </td><td align="center">ä¸ºæ˜¾å¼ï¼Œè¿”å›æ¬¡å…ƒæ•°æ®çš„ç®€å•æè¿°</td><td align="center">MediaDescriptionCompat</td></tr><tr><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td></tr><tr><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td></tr></tbody></table><h1 id="PlaybackStateCompat-ç±»"><a href="#PlaybackStateCompat-ç±»" class="headerlink" title="PlaybackStateCompat ç±»"></a>PlaybackStateCompat ç±»</h1><blockquote><p>å­˜æ”¾çŠ¶æ€çš„å¸¸é‡ç±»</p></blockquote><table><thead><tr><th align="center">ç±»å‹</th><th align="center">æè¿°</th></tr></thead><tbody><tr><td align="center"><code>long</code></td><td align="center"><code>ACTION_FAST_FORWARD</code>è¡¨ç¤ºæ­¤ä¼šè¯æ”¯æŒå¿«è¿›å‘½ä»¤ã€‚</td></tr><tr><td align="center"><code>long</code></td><td align="center"><code>ACTION_PAUSE</code>è¡¨ç¤ºæ­¤ä¼šè¯æ”¯æŒæš‚åœå‘½ä»¤ã€‚</td></tr><tr><td align="center"><code>long</code></td><td align="center"><code>ACTION_PLAY</code>è¡¨ç¤ºæ­¤ä¼šè¯æ”¯æŒæ’­æ”¾å‘½ä»¤ã€‚</td></tr><tr><td align="center"><code>long</code></td><td align="center"><code>ACTION_PLAY_FROM_MEDIA_ID</code>è¡¨ç¤ºæ­¤ä¼šè¯æ”¯æŒä»åª’ä½“idå‘½ä»¤æ’­æ”¾ã€‚</td></tr><tr><td align="center"><code>long</code></td><td align="center"><code>ACTION_PLAY_FROM_SEARCH</code>è¡¨ç¤ºæ­¤ä¼šè¯æ”¯æŒæ¥è‡ªæœç´¢å‘½ä»¤çš„æ’­æ”¾ã€‚</td></tr><tr><td align="center"><code>long</code></td><td align="center"><code>ACTION_PLAY_FROM_URI</code>è¡¨ç¤ºæ­¤ä¼šè¯æ”¯æŒæ¥è‡ªURIå‘½ä»¤çš„æ’­æ”¾ã€‚</td></tr><tr><td align="center"><code>long</code></td><td align="center"><code>ACTION_PLAY_PAUSE</code>è¡¨ç¤ºæ­¤ä¼šè¯æ”¯æŒæ’­æ”¾/æš‚åœåˆ‡æ¢å‘½ä»¤ã€‚</td></tr><tr><td align="center"><code>long</code></td><td align="center"><code>ACTION_PREPARE</code>è¡¨ç¤ºæ­¤ä¼šè¯æ”¯æŒprepareå‘½ä»¤ã€‚</td></tr><tr><td align="center"><code>long</code></td><td align="center"><code>ACTION_PREPARE_FROM_MEDIA_ID</code>æŒ‡ç¤ºæ­¤ä¼šè¯æ”¯æŒä»åª’ä½“idå‘½ä»¤å‡†å¤‡ã€‚</td></tr><tr><td align="center"><code>long</code></td><td align="center"><code>ACTION_PREPARE_FROM_SEARCH</code>è¡¨ç¤ºæ­¤ä¼šè¯æ”¯æŒä»æœç´¢å‘½ä»¤å‡†å¤‡ã€‚</td></tr><tr><td align="center"><code>long</code></td><td align="center"><code>ACTION_PREPARE_FROM_URI</code>è¡¨ç¤ºæ­¤ä¼šè¯æ”¯æŒä»URIå‡†å¤‡å‘½ä»¤ã€‚</td></tr><tr><td align="center"><code>long</code></td><td align="center"><code>ACTION_REWIND</code>è¡¨ç¤ºæ­¤ä¼šè¯æ”¯æŒå€’å¸¦å‘½ä»¤ã€‚</td></tr><tr><td align="center"><code>long</code></td><td align="center"><code>ACTION_SEEK_TO</code>è¡¨ç¤ºæ­¤ä¼šè¯æ”¯æŒå¯»æ±‚å‘½ä»¤ã€‚</td></tr><tr><td align="center"><code>long</code></td><td align="center"><code>ACTION_SET_RATING</code>è¡¨ç¤ºæ­¤ä¼šè¯æ”¯æŒset ratingå‘½ä»¤ã€‚</td></tr><tr><td align="center"><code>long</code></td><td align="center"><code>ACTION_SKIP_TO_NEXT</code>è¡¨ç¤ºæ­¤ä¼šè¯æ”¯æŒä¸‹ä¸€ä¸ªå‘½ä»¤ã€‚</td></tr><tr><td align="center"><code>long</code></td><td align="center"><code>ACTION_SKIP_TO_PREVIOUS</code>æŒ‡ç¤ºæ­¤ä¼šè¯æ”¯æŒä¸Šä¸€ä¸ªå‘½ä»¤ã€‚</td></tr><tr><td align="center"><code>long</code></td><td align="center"><code>ACTION_SKIP_TO_QUEUE_ITEM</code>è¡¨ç¤ºæ­¤ä¼šè¯æ”¯æŒè·³è½¬åˆ°é˜Ÿåˆ—é¡¹ç›®å‘½ä»¤ã€‚</td></tr><tr><td align="center"><code>long</code></td><td align="center"><code>ACTION_STOP</code>è¡¨ç¤ºæ­¤ä¼šè¯æ”¯æŒåœæ­¢å‘½ä»¤ã€‚</td></tr><tr><td align="center"><code>long</code></td><td align="center"><code>PLAYBACK_POSITION_UNKNOWN</code>ä½¿ç”¨æ­¤å€¼è¡¨ç¤ºä½ç½®æœªçŸ¥ã€‚</td></tr><tr><td align="center"><code>int</code></td><td align="center"><code>STATE_BUFFERING</code>æŒ‡ç¤ºæ­¤é¡¹ç›®çš„çŠ¶æ€å½“å‰æ­£åœ¨ç¼“å†²ï¼Œå¹¶ä¸”å°†åœ¨è¶³å¤Ÿçš„æ•°æ®å·²ç»ç¼“å†²æ—¶å¼€å§‹æ’­æ”¾ã€‚</td></tr><tr><td align="center"><code>int</code></td><td align="center"><code>STATE_CONNECTING</code>æŒ‡ç¤ºæ­£åœ¨è¿›è¡Œå›æ”¾çš„ç­çº§çš„çŠ¶æ€å½“å‰æ­£åœ¨è¿æ¥åˆ°è·¯çº¿ã€‚</td></tr><tr><td align="center"><code>int</code></td><td align="center"><code>STATE_ERROR</code>æŒ‡ç¤ºæ­¤é¡¹ç›®çš„çŠ¶æ€å½“å‰å¤„äºé”™è¯¯çŠ¶æ€ã€‚</td></tr><tr><td align="center"><code>int</code></td><td align="center"><code>STATE_FAST_FORWARDING</code>æŒ‡ç¤ºæ­¤é¡¹ç›®çš„çŠ¶æ€å½“å‰æ­£åœ¨å¿«è¿›ã€‚</td></tr><tr><td align="center"><code>int</code></td><td align="center"><code>STATE_NONE</code>è¿™æ˜¯é»˜è®¤çš„æ’­æ”¾çŠ¶æ€ï¼Œè¡¨ç¤ºå°šæœªæ·»åŠ åª’ä½“ï¼Œæˆ–è€…è¡¨æ¼”è€…å·²é‡ç½®ä¸”æ²¡æœ‰è¦æ’­æ”¾çš„å†…å®¹ã€‚</td></tr><tr><td align="center"><code>int</code></td><td align="center"><code>STATE_PAUSED</code>æŒ‡ç¤ºæ­¤é¡¹ç›®çš„çŠ¶æ€å½“å‰å·²æš‚åœã€‚</td></tr><tr><td align="center"><code>int</code></td><td align="center"><code>STATE_PLAYING</code>æŒ‡ç¤ºæ­¤é¡¹ç›®æ­£åœ¨æ’­æ”¾çš„çŠ¶æ€ã€‚</td></tr><tr><td align="center"><code>int</code></td><td align="center"><code>STATE_REWINDING</code>æŒ‡ç¤ºæ­¤é¡¹ç›®çš„çŠ¶æ€å½“å‰æ­£åœ¨å€’å¸¦ã€‚</td></tr><tr><td align="center"><code>int</code></td><td align="center"><code>STATE_SKIPPING_TO_NEXT</code>è¡¨ç¤ºç©å®¶æ­£åœ¨è·³åˆ°ä¸‹ä¸€ä¸ªé¡¹ç›®çš„çŠ¶æ€ã€‚</td></tr><tr><td align="center"><code>int</code></td><td align="center"><code>STATE_SKIPPING_TO_PREVIOUS</code>æ˜¾ç¤ºç©å®¶å½“å‰æ­£åœ¨è·³åˆ°å‰ä¸€ä¸ªé¡¹ç›®çš„çŠ¶æ€ã€‚</td></tr><tr><td align="center"><code>int</code></td><td align="center"><code>STATE_SKIPPING_TO_QUEUE_ITEM</code>æŒ‡ç¤ºç©å®¶å½“å‰æ­£åœ¨è·³åˆ°é˜Ÿåˆ—ä¸­ç‰¹å®šé¡¹ç›®çš„çŠ¶æ€ã€‚</td></tr><tr><td align="center"><code>int</code></td><td align="center"><code>STATE_STOPPED</code>æŒ‡ç¤ºæ­¤é¡¹ç›®çš„çŠ¶æ€å½“å‰å·²åœæ­¢ã€‚</td></tr></tbody></table><h1 id="ServiceCompat"><a href="#ServiceCompat" class="headerlink" title="ServiceCompat"></a>ServiceCompat</h1><p>Helperç”¨äºè®¿é—®åœ¨å‘åå…¼å®¹çš„APIçº§åˆ«4ä¹‹åå¼•å…¥çš„ <code>Service</code>åŠŸèƒ½ã€‚</p><h1 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h1><p><a href="">å…³äºåª’ä½“æµè§ˆå™¨æœåŠ¡(MediaBrowserService)</a></p><p><a href="https://www.apiref.com/android-zh/index.html" target="_blank" rel="noopener">Androidå¼€å‘æ‰‹å†Œ</a></p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> ExoPlayer </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android å›¾ç‰‡é€‚é…</title>
      <link href="/2020/12/01/Android-%E5%9B%BE%E7%89%87%E9%80%82%E9%85%8D/"/>
      <url>/2020/12/01/Android-%E5%9B%BE%E7%89%87%E9%80%82%E9%85%8D/</url>
      
        <content type="html"><![CDATA[<p>Androidå›¾ç‰‡é€‚é…</p><p>androidçš„drawableæ–‡ä»¶å…±æœ‰ï¼š</p><table><thead><tr><th>ä¸­æ–‡</th><th>æ–‡ä»¶å¤¹åç§°</th></tr></thead><tbody><tr><td>ä½å¯†åº¦</td><td>drawable-ldpi</td></tr><tr><td>ä¸­ç­‰å¯†åº¦</td><td>drawable-mdpi</td></tr><tr><td>é«˜å¯†åº¦</td><td>drawable-hdpi</td></tr><tr><td>è¶…é«˜å¯†åº¦</td><td>drawable-xhdpi</td></tr><tr><td>è¶…è¶…é«˜å¯†åº¦</td><td>drawable-xxhdpi</td></tr><tr><td>è¶…è¶…è¶…é«˜å¯†åº¦</td><td>drawable-xxxhdpi</td></tr><tr><td>æ— ç¼©æ”¾</td><td>drawable-nohdpi</td></tr><tr><td>é»˜è®¤</td><td>drawable</td></tr></tbody></table><p>Android ç³»ç»Ÿä¼šæŒ‰ç…§è®¾å¤‡dpi èŒƒå›´ä»åˆé€‚å¯†åº¦å¾€ä¸Šé€‚é…ã€‚</p><p>å¦‚æœåœ¨ä¸­ç­‰åˆ†è¾¨ç‡çš„æ‰‹æœºä¸Šï¼ŒAndroid å°±ä¼šç°åœ¨ drawable-mdpi æ–‡ä»¶å¤¹ä¸‹çš„å›¾ç‰‡ã€‚å¦‚æœè¿™é‡Œæ²¡æœ‰é‚£ä¹ˆ drawable-hdpi ä¸ŠæŸ¥æ‰¾ä»¥æ­¤ç±»æ¨æœ€ç»ˆä¼šä»é»˜è®¤çš„ drawable æ–‡ä»¶å¤¹ä¸‹æŸ¥æ‰¾ã€‚</p><p>drawable-nodpi æ–‡ä»¶å¤¹ï¼Œåœ¨è¿™é‡Œå­˜æ”¾çš„å›¾ç‰‡ç³»ç»Ÿä¸ä¼šå¯¹å®ƒè¿›è¡Œç¼©æ”¾æ“ä½œï¼ŒåŸå›¾ç‰‡æœ‰å¤šå¤§å°±ä¼šå±•ç¤ºå¤šå¤§ï¼ŒåŒ¹é…åŸåˆ™å½“åŒ¹é…æ›´é«˜å¯†åº¦çš„å›¾ç‰‡æ—¶æ— æ³•æ‰¾åˆ°çš„è¯å°±ä¼šåŒ¹é…è¿™ä¸ªæ–‡ä»¶å¤¹çš„å›¾ç‰‡ã€‚</p><p>ä¼˜ç¼ºç‚¹ï¼šæ”¾å¤§å›¾ç‰‡ä¼šå ç”¨æ›´å¤šå†…å­˜ï¼Œç¼©å°æ—¶å†…å­˜å‡å°‘ä½†æ˜¯å½±å“æ‰“åŒ…æ•ˆæœã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Androidæ§ä»¶</title>
      <link href="/2020/11/29/Android%E6%8E%A7%E4%BB%B6/"/>
      <url>/2020/11/29/Android%E6%8E%A7%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<h1 id="SeekBar-æ‹–åŠ¨æ¡"><a href="#SeekBar-æ‹–åŠ¨æ¡" class="headerlink" title="SeekBar(æ‹–åŠ¨æ¡)"></a>SeekBar(æ‹–åŠ¨æ¡)</h1><p>å®ƒæ˜¯ ProgressBarçš„å­ç±»ï¼Œè¿™æ ·ProgressBarçš„å±æ€§å®ƒéƒ½å¯ä»¥ç”¨ï¼åŒæ—¶å®ƒè¿˜æœ‰è‡ªå·±çš„å±æ€§ android:thumb,å…è®¸æˆ‘ä»¬è‡ªå®šä¹‰æ»‘å—ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android Jetpackæ¶æ„ç»„ä»¶ Navigation å¯¼èˆªåº“</title>
      <link href="/2020/11/20/Navigation-%E5%AF%BC%E8%88%AA%E5%BA%93/"/>
      <url>/2020/11/20/Navigation-%E5%AF%BC%E8%88%AA%E5%BA%93/</url>
      
        <content type="html"><![CDATA[<h1 id="åšä»€ä¹ˆçš„ï¼Ÿ"><a href="#åšä»€ä¹ˆçš„ï¼Ÿ" class="headerlink" title="åšä»€ä¹ˆçš„ï¼Ÿ"></a>åšä»€ä¹ˆçš„ï¼Ÿ</h1><p>ç”¨äºç”¨æˆ·å¯¼èˆªã€è¿›å…¥æˆ–è€…é€€å‡ºåº”ç”¨ä¸­ä¸åŒå†…å®¹ç‰‡æ®µçš„äº¤äº’ã€‚é€šè¿‡ Jetpackå¯¼èˆªç»„ä»¶å¯å¸®åŠ©ä½ å®ç°å¯¼èˆªï¼Œæ— è®ºæ˜¯ç®€å•çš„æŒ‰é’®ç‚¹å‡»ï¼Œè¿˜æ˜¯åº”ç”¨æ æˆ–æŠ½å±‰å¼å¯¼èˆªæ ç­‰å¤æ‚çš„æ¨¡å¼ï¼Œè¿™ä¸ªç»„ä»¶éƒ½å¯ä»¥åº”å¯¹ã€‚ï¼ˆç®€åŒ–äº†å¯¼èˆªçš„å®ç°ï¼‰</p><p>å°†ä¸šåŠ¡å’Œè§†å›¾åˆ†ç¦»ã€‚</p><h2 id="ä¼˜åŠ¿"><a href="#ä¼˜åŠ¿" class="headerlink" title="ä¼˜åŠ¿"></a>ä¼˜åŠ¿</h2><ul><li>æ–¹ä¾¿ç®¡ç†Fragmenté¡µé¢ã€‚</li><li>å¯è§†åŒ–é¡µé¢å¯¼èˆªï¼Œç±»ä¼¼äºxcodeä¸­çš„StoryBoardï¼Œä¾¿äºçœ‹æ¸…é¡µé¢ä¹‹é—´çš„å…³ç³»</li><li>é€šè¿‡destinationå’Œactionæ¥å®Œæˆé¡µé¢é—´çš„å¯¼èˆª</li><li>æ–¹ä¾¿é¡µé¢åˆ‡æ¢åŠ¨ç”»</li><li>é¡µé¢é—´å†…é¥°å†…é¥°çš„å‚æ•°ä¼ é€’</li><li>é€šè¿‡NavigationUIç±»ï¼Œå¯¹èœå•ï¼Œåº•éƒ¨å¯¼èˆªï¼ŒæŠ½å±‰èœå•å¯¼èˆªè¿›è¡Œæ–¹ä¾¿ç»Ÿä¸€çš„ç®¡ç†</li><li>æ·±å±‚è¿æ¥</li></ul><blockquote><p>æœ¬æ–‡ä¸­çš„â€<strong>é¡µé¢</strong>â€œæŒ‡çš„æ˜¯Fragmentå’ŒActivity,ä½†ä¸»è¦æ˜¯Fragmentï¼Œå› ä¸ºNavigationç»„ä»¶çš„ä¸»è¦ç›®çš„å°±æ˜¯æ–¹ä¾¿æˆ‘ä»¬åœ¨ä¸€ä¸ªActivityä¸­å¯¹å¤šä¸ªFragmentè¿›è¡Œç®¡ç†ã€‚</p></blockquote><h1 id="åŸºæœ¬ä½¿ç”¨"><a href="#åŸºæœ¬ä½¿ç”¨" class="headerlink" title="åŸºæœ¬ä½¿ç”¨"></a>åŸºæœ¬ä½¿ç”¨</h1><h5 id="ä¾èµ–"><a href="#ä¾èµ–" class="headerlink" title="ä¾èµ–"></a>ä¾èµ–</h5><pre><code>dependencies {    implementation &quot;androidx.navigation:navigation-fragment-ktx:2.3.0&quot;    implementation &quot;androidx.navigation:navigation-ui-ktx:2.3.0&quot;}</code></pre><p><a href="https://developer.android.com/jetpack/androidx/releases/navigation?hl=zh-cn" target="_blank" rel="noopener">æ›´å¤šç‰ˆæœ¬</a></p><h5 id="åˆ›å»º-Navigation-Graph"><a href="#åˆ›å»º-Navigation-Graph" class="headerlink" title="åˆ›å»º Navigation Graph"></a>åˆ›å»º Navigation Graph</h5><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201123204418.png" alt=""></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201123204512.png" alt="ok åˆ›å»ºå®Œæˆ"></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201123204726.png" alt="åˆ›å»ºnav_graphæ–‡ä»¶"></p><h5 id="æ·»åŠ -NavHostFragment"><a href="#æ·»åŠ -NavHostFragment" class="headerlink" title="æ·»åŠ  NavHostFragment"></a>æ·»åŠ  <strong>NavHostFragment</strong></h5><p>æ·»åŠ åˆ°Activityå¸ƒå±€æ–‡ä»¶ä¸­ï¼Œä½œä¸ºå…¶ä»–Fragmentçš„å®¹å™¨</p><pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;    xmlns:tools=&quot;http://schemas.android.com/tools&quot;    android:layout_width=&quot;match_parent&quot;    android:layout_height=&quot;match_parent&quot;    tools:context=&quot;.MainActivity&quot;&gt;    &lt;androidx.appcompat.widget.Toolbar        android:id=&quot;@+id/toolbar&quot;        android:layout_width=&quot;411dp&quot;        android:layout_height=&quot;wrap_content&quot;        android:background=&quot;?attr/colorPrimary&quot;        android:minHeight=&quot;?attr/actionBarSize&quot;        android:theme=&quot;?attr/actionBarTheme&quot;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;        app:layout_constraintStart_toStartOf=&quot;parent&quot;        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;    &lt;fragment        android:id=&quot;@+id/frameLayout&quot;        android:name=&quot;androidx.navigation.fragment.NavHostFragment&quot;        android:layout_width=&quot;0dp&quot;        android:layout_height=&quot;0dp&quot;        app:defaultNavHost=&quot;true&quot;        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;        app:layout_constraintEnd_toEndOf=&quot;parent&quot;        app:layout_constraintStart_toStartOf=&quot;parent&quot;        app:layout_constraintTop_toBottomOf=&quot;@+id/toolbar&quot;        app:navGraph=&quot;@navigation/nav_graph&quot;&gt;    &lt;/fragment&gt;&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;</code></pre><pre><code class="xml">android:name=&quot;androidx.navigation.fragment.NavHostFragment&quot;</code></pre><blockquote><p>å‘Šè¯‰ç³»ç»Ÿè¿™æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„Fragment</p></blockquote><pre><code class="xml">app:defaultNavHost=&quot;true&quot;</code></pre><blockquote><p>ç‚¹å‡»è¿”å›æŒ‰é’®æ˜¯ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å°†Fragmenté€€å‡ºã€‚</p></blockquote><pre><code class="xml"> app:navGraph=&quot;@navigation/nav_graph&quot;</code></pre><blockquote><p>å¯¹åº”çš„Fargmentå¯¼èˆªå›¾</p></blockquote><h5 id="è®¾ç½®å¯¼èˆª-Navigation"><a href="#è®¾ç½®å¯¼èˆª-Navigation" class="headerlink" title="è®¾ç½®å¯¼èˆª(Navigation)"></a>è®¾ç½®å¯¼èˆª(Navigation)</h5><p>åˆ›å»ºMainFragmentå’ŒSecondeFragment</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201123214054.png" alt=""></p><blockquote><p>destination è¡¨ç¤ºç›®çš„åœ°ï¼Œæ—¢ä½ æƒ³è¦å»çš„åœ°æ–¹ã€‚Navigation ç»„ä»¶çš„ç›®çš„å°±æ˜¯æ–¹ä¾¿å¼€å‘è€…åœ¨ä¸€ä¸ªActivityä¸­ç®¡ç†å¤šä¸ªFragmentã€‚æ‰€ä»¥åœ¨è¿™é‡Œåˆ›å»ºä¸€ä¸ªMainFragmentã€‚</p></blockquote><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201123214146.png" alt="é€‰æ‹© Fragment"></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201123214359.png" alt=""></p><blockquote><p>è¡¨ç¤ºé¦–ä¸ªåŠ è½½çš„Fragment</p></blockquote><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201123214733.png" alt="é€‰æ‹© code"></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201123214811.png" alt=""></p><blockquote><p>app:startDestination = â€œ@id/mainFragmentâ€</p><p>è¡¨ç¤ºé¦–ä¸ªåŠ è½½çš„Fragment</p></blockquote><p>è®¾ç½®MainFragmentç•Œé¢</p><pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;             xmlns:tools=&quot;http://schemas.android.com/tools&quot;             android:layout_width=&quot;match_parent&quot;             android:layout_height=&quot;match_parent&quot;             tools:context=&quot;.MainFragment&quot;&gt;    &lt;TextView        android:id=&quot;@+id/tvTitle&quot;        android:layout_width=&quot;wrap_content&quot;        android:layout_height=&quot;wrap_content&quot;        android:layout_centerInParent=&quot;true&quot;        android:textSize=&quot;18sp&quot;        android:text=&quot;MainFragment&quot;/&gt;    &lt;Button        android:id=&quot;@+id/btnToSecondFragment&quot;        android:layout_width=&quot;match_parent&quot;        android:layout_height=&quot;wrap_content&quot;        android:layout_below=&quot;@+id/tvTitle&quot;        android:textAllCaps=&quot;false&quot;        android:text=&quot;to SecondFragment&quot;/&gt;&lt;/RelativeLayout&gt;</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201123215621.png" alt=""></p><h5 id="è®¾ç½®è·³è½¬é¡ºåº"><a href="#è®¾ç½®è·³è½¬é¡ºåº" class="headerlink" title="è®¾ç½®è·³è½¬é¡ºåº"></a>è®¾ç½®è·³è½¬é¡ºåº</h5><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201123215652.png" alt="ps:sscondFragmentä¸ºsecondFragment"></p><blockquote><p>é€‰ä¸­mainFragmentåç‚¹å‡»æ–¹å—è¿çº¿åˆ°secondFragment</p></blockquote><p>å¯ä»¥çœ‹åˆ° <action/>æ ‡ç­¾ä¸­ï¼Œapp:destination å±æ€§è¡¨ç¤ºç›®çš„åœ°ï¼Œè¿™é‡Œè¡¨ç¤ºçš„æ˜¯secondFragment</p><pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;navigation xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;    xmlns:tools=&quot;http://schemas.android.com/tools&quot;    android:id=&quot;@+id/nav_graph&quot;    app:startDestination=&quot;@id/mainFragment&quot;&gt;    &lt;fragment        android:id=&quot;@+id/mainFragment&quot;        android:name=&quot;com.thecara.navigation.MainFragment&quot;        android:label=&quot;fragment_main&quot;        tools:layout=&quot;@layout/fragment_main&quot;&gt;        &lt;action            android:id=&quot;@+id/action_mainFragment_to_sscondFragment&quot;            app:destination=&quot;@id/secondFragment&quot; /&gt;    &lt;/fragment&gt;    &lt;fragment        android:id=&quot;@+id/secondFragment&quot;        android:name=&quot;com.thecara.navigation.SscondFragment&quot;        android:label=&quot;fragment_sscond&quot;        tools:layout=&quot;@layout/fragment_sscond&quot; /&gt;&lt;/navigation&gt;</code></pre><h5 id="è®¾ç½®è·³è½¬"><a href="#è®¾ç½®è·³è½¬" class="headerlink" title="è®¾ç½®è·³è½¬"></a>è®¾ç½®è·³è½¬</h5><p>ä½¿ç”¨è¿™ä¸ªæ¥è·³è½¬</p><pre><code class="kotlin">        view.findViewById&lt;Button&gt;(R.id.btnToSecondFragment).setOnClickListener {            Navigation.findNavController(view).navigate(R.id.action_mainFragment_to_sscondFragment)        }</code></pre><blockquote><p>  Navigation.findNavController(params).navigate(id)</p><p>è¡¨ç¤ºé€šè¿‡æŒ‡å®šidè·³è½¬çš„å“ªé‡Œï¼Œè¿™é‡ŒæŒ‡è·³è½¬åˆ° secondeFragmentã€‚</p><p>å…¶ä¸­è¿˜æœ‰</p><p>Navigation.findNavController(params).navigateUp()</p><p>è´Ÿè´£å‘ä¸Šè·³è½¬</p></blockquote><h4 id="æ¼”ç¤º"><a href="#æ¼”ç¤º" class="headerlink" title="æ¼”ç¤º"></a>æ¼”ç¤º</h4><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/2020-11-23-0.gif" alt=""></p><h1 id="å…³ç³»"><a href="#å…³ç³»" class="headerlink" title="å…³ç³»"></a>å…³ç³»</h1><ul><li>Navigation Graph </li></ul><p>è¿™æ˜¯ä¸€ç§æ–°å‹çš„ XML èµ„æºæ–‡ä»¶ï¼Œé‡Œé¢åŒ…å«äº†åº”ç”¨ç¨‹åºæ‰€æœ‰çš„é¡µé¢åŠé¡µé¢ä¹‹é—´çš„å…³ç³»</p><ul><li>NavHostFragment</li></ul><p>è¿™æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å¸ƒå±€æ–‡ä»¶ï¼ŒNavigationGraphä¸­çš„é¡µé¢é€šè¿‡è¯¥Fragmentå±•ç¤º</p><ul><li>NavController</li></ul><p>ç”¨äºåœ¨ä»£ç ä¸­å®ŒæˆNavigationGraphä¸­çš„å…·ä½“é¡µé¢åˆ‡æ¢</p><p><strong>æ‰€ä»¥ï¼Œå½“ä½ ä½¿ç”¨NavControllerå¯¹è±¡ï¼Œå‘Šè¯‰å®ƒä½ æƒ³è¦å»NavigationGraphä¸­çš„é‚£ä¸ªé¡µé¢ï¼ŒNavControllerå°†ä¼šå°†ç›¸å…³çš„é¡µé¢å±•ç¤ºåœ¨NavHostFragmentä¸­ã€‚</strong></p><h5 id="å¼•ç”¨ï¼š"><a href="#å¼•ç”¨ï¼š" class="headerlink" title="å¼•ç”¨ï¼š"></a>å¼•ç”¨ï¼š</h5><p><a href="https://developer.android.com/guide/navigation?hl=zh-cn" target="_blank" rel="noopener">å¯¼èˆª</a></p><p><a href="https://zhuanlan.zhihu.com/p/69562454" target="_blank" rel="noopener">Navigation(ä¸€)åŸºç¡€å…¥é—¨</a></p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> Jetpackæ¶æ„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ExoPlayer2 Googleä¾èµ–åº“</title>
      <link href="/2020/11/13/ExoPlayer2-Google%E4%BE%9D%E8%B5%96%E5%BA%93/"/>
      <url>/2020/11/13/ExoPlayer2-Google%E4%BE%9D%E8%B5%96%E5%BA%93/</url>
      
        <content type="html"><![CDATA[<h1 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h1><p>ExoPlayeræ„å»ºåœ¨Androidä½æ°´å¹³åª’ä½“APIä¹‹ä¸Šçš„ä¸€ä¸ªåº”ç”¨å±‚åª’ä½“æ’­æ”¾å™¨ã€‚æ”¯æŒå†…ç½®æ’­æ”¾å™¨çš„æ‰€æœ‰æ ¼å¼å¤–åŠ è‡ªé€‚åº”æ ¼å¼DASHå’ŒSmoothStreamingã€‚æ‰€æœ‰å®ƒå¯ä»¥é«˜åº¦å®šåˆ¶å’Œæ‰©å±•ã€‚</p><h1 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h1><p><strong>1.æ·»åŠ ä¾èµ–</strong></p><p>åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ æ‰“å¼€ build.gradle ä¸­æ·»åŠ Googleå’ŒJCenteråº“ã€‚</p><blockquote><p>åˆ›å»ºandroid é¡¹ç›®æ—¶ AndroidStudio ä¼šè‡ªåŠ¨æ·»åŠ ï¼Œåœ¨è¿™é‡Œæä¸€ä¸‹ã€‚</p></blockquote><pre><code class="groovy">repositories {    google()    jcenter()}</code></pre><ol start="2"><li>åœ¨ app module <strong>ä¸­æ·»åŠ ä¾èµ–é¡¹</strong>ã€‚</li></ol><pre><code class="groovy">implementation &#39;com.google.android.exoplayer:exoplayer:2.X.X&#39;</code></pre><p><strong>2.x.x</strong>æ›¿æ¢ä¸ºé¦–é€‰çš„æœ€æ–°ç‰ˆæœ¬(<a href="https://github.com/google/ExoPlayer/blob/release-v2/RELEASENOTES.md" target="_blank" rel="noopener">ExoPlayer</a>)</p><p>ä½œä¸ºå®Œæ•´åº“çš„ä»£æ›¿æ–¹æ¡ˆï¼Œå¯ä»¥æ ¹æ®å®é™…éœ€è¦çš„åº“æ¨¡å—ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹å†…å®¹å¯¹Core,DASHå’ŒUIåº“æ¨¡å—çš„ä¾èµ–å…³ç³»ï¼Œè¿™å¯èƒ½æ—¶æ’­æ”¾DASHå†…å®¹çš„åº”ç”¨ç¨‹åºæ‰€éœ€è¦çš„ã€‚</p><pre><code class="groovy">implementation &#39;com.google.android.exoplayer:exoplayer-core:2.X.X&#39;implementation &#39;com.google.android.exoplayer:exoplayer-dash:2.X.X&#39;implementation &#39;com.google.android.exoplayer:exoplayer-ui:2.X.X&#39;</code></pre><p>å¯ç”¨çš„åº“æ¨¡å—åœ¨ä¸‹åˆ—å‡ºã€‚</p><ul><li><strong>exoplayer-core</strong>ï¼šæ ¸å¿ƒåŠŸèƒ½ï¼ˆå¿…é¡»ï¼‰ã€‚</li><li><strong>exoplayer-dash</strong>ï¼šæ”¯æŒDASHå†…å®¹ã€‚</li><li><strong>exoplayer-hls</strong>ï¼šæ”¯æŒHLSå†…å®¹ã€‚</li><li><strong>exoplayer-smoothstraming</strong>ï¼šæ”¯æŒSmoothStreamingå†…å®¹ã€‚</li><li><strong>exoplayer-ui</strong>ï¼šä¸ExoPlayerä¸€èµ·ä½¿ç”¨çš„UIç»„ä»¶å’Œèµ„æºã€‚</li></ul><p><a href="https://github.com/google/ExoPlayer/tree/release-v2/extensions/" target="_blank" rel="noopener">æ›´å¤šçš„æ‰©å±•æ¨¡å—</a>ã€‚</p><p><strong>3.Java8</strong></p><p>åœ¨ app ç›®å½•ä¸‹æ·»åŠ  ä¸€ä¸‹å†…å®¹ä¾›æ‰€æœ‰æ–‡ä»¶æ”¯æŒJava8</p><pre><code class="groovy">compileOptions {  targetCompatibility JavaVersion.VERSION_1_8}</code></pre><h2 id="æ§ä»¶"><a href="#æ§ä»¶" class="headerlink" title="æ§ä»¶"></a>æ§ä»¶</h2><pre><code class="xml">    &lt;com.google.android.exoplayer2.ui.PlayerView        android:id=&quot;@+id/playerView&quot;        android:layout_width=&quot;match_parent&quot;        android:layout_height=&quot;match_parent&quot; /&gt;</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20210621172138.png" alt=""></p><h1 id="DOC"><a href="#DOC" class="headerlink" title="DOC"></a>DOC</h1><h1 id="AudioAttributes-Builder-ç±»"><a href="#AudioAttributes-Builder-ç±»" class="headerlink" title="AudioAttributes.Builder() ç±»"></a><strong>AudioAttributes.Builder() ç±»</strong></h1><blockquote><p>ç”¨äºéŸ³é¢‘å›æ”¾çš„å±æ€§ï¼Œç”¨äºé…ç½®å¹³å°ä¸‹çš„AudioTrackã€‚</p><p>å¦‚æœä½ è¦è®¾ç½®éŸ³é¢‘å±æ€§ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ª AudioAttributeså®ä¾‹ã€‚</p></blockquote><ul><li><strong>setContentText(int contentType)</strong></li></ul><blockquote><p>è®¾ç½®æè¿°éŸ³é¢‘ä¿¡å·å†…å®¹ç±»å‹çš„å±æ€§ã€‚å¦‚è¯­è¨€æˆ–éŸ³ä¹ã€‚</p></blockquote><ul><li><strong>setUsage(int contentType)</strong></li></ul><blockquote><p>è®¾ç½®æè¿°éŸ³é¢‘ä¿¡å·ç”¨é€”çš„å±æ€§ï¼Œä¾‹å¦‚æŠ¥è­¦æˆ–è€…é“ƒå£°ã€‚</p></blockquote><ul><li><strong>build()æ–¹æ³•</strong></li></ul><blockquote><p>æ„å»ºå™¨åˆ›å»ºä¸€ä¸ª AudioAttributes å®ä¾‹ã€‚</p></blockquote><h1 id="C-ç±»"><a href="#C-ç±»" class="headerlink" title="C ç±»"></a>C ç±»</h1><blockquote><p>å®šä¹‰æ ‡å‡†åº“çš„å¸¸é‡</p></blockquote><ul><li><strong>C.CONTENT_TYPE_MUSIC</strong></li></ul><blockquote><p>C ç±»çš„å¸¸é‡ç”¨äº</p><p>åœ¨ä½ ä½¿ç”¨å†…å®¹ç±»å‹ä¸ºéŸ³ä¹æ—¶ä½¿ç”¨çš„å†…å®¹ç±»å‹å€¼ã€‚</p></blockquote><ul><li><strong>C.USAGE_MEDIA</strong></li></ul><blockquote><p>å½“ä½¿ç”¨åª’ä½“æ˜¯ä½¿ç”¨è¿™ä¸ªå€¼(å¦‚éŸ³ä¹æˆ–è€…ç”µå½±åŸå£°å¸¦)</p></blockquote><h1 id="SimpleExoPlayer-ç±»"><a href="#SimpleExoPlayer-ç±»" class="headerlink" title="SimpleExoPlayer ç±»"></a>SimpleExoPlayer ç±»</h1><blockquote><p>å®ç°ç»„ä»¶çš„å¤–éƒ¨æ’­æ”¾ã€‚</p><p>ç”¨SimpleExoPlayer.Build(context:Context)æ¥å®ç°</p></blockquote><ul><li><strong>build()æ–¹æ³•</strong></li></ul><blockquote><p>æ„å»ºå™¨åˆ›å»ºä¸€ä¸ª SimpleExoPlayerå®ä¾‹ã€‚</p></blockquote><ul><li><strong>setAudioAttributes()</strong></li></ul><blockquote><p>è®¾ç½®éŸ³è½¨ä½¿ç”¨çš„éŸ³é¢‘å›æ”¾å±æ€§ã€‚å¦‚æœæ²¡æœ‰è®¾ç½®ï¼Œå°†ä½¿ç”¨é»˜è®¤çš„å±æ€§ã€‚å®ƒä»¬ä¸€èˆ¬è®¾ç½®ä¸ºåª’ä½“æ’­æ”¾ã€‚è®¾ç½®å›æ”¾éŸ³é¢‘å±æ€§æœŸé—´å¯èƒ½å›åœ¨è¾“å‡ºä¸­å¼•å…¥ä¸€ä¸ªçŸ­é—´éš™ï¼Œå› ä¸ºéŸ³é¢‘è½¨é“è¢«é‡æ–°åˆ›å»ºã€‚è¿˜ç”Ÿæˆä¸€ä¸ªæ–°çš„éŸ³é¢‘ä¼šè¯idã€‚å¦‚æœéŸ³è½¨æ˜¯ç”±éŸ³è½¨é€‰æ‹©å™¨å¯ç”¨çš„ï¼ŒæŒ‡å®šçš„éŸ³é¢‘å±æ€§å°†è¢«å¿½è§†ï¼Œä½†æ˜¯å½“å®ƒæ’­æ”¾æ—¶æ²¡æœ‰éŸ³è½¨é‚£ä¹ˆæŒ‡å®šå±æ€§å°†ä¼šè¢«ä½¿ç”¨ã€‚</p><p>If the device is running a build before platform API version 21, audio attributes cannot be set directly on the underlying audio track. In this case, the usage will be mapped onto an equivalent stream type using Util.getStreamTypeForAudioUsage(int).</p><p>If audio focus should be handled, the AudioAttributes.usage must be C.USAGE_MEDIA or C.USAGE_GAME. Other usages will throw an IllegalArgumentException.</p><p><strong>Parameters:</strong></p><p><code>audioAttributes</code> - The attributes to use for audio playback. ç”¨äºéŸ³é¢‘å›æ”¾çš„å±æ€§</p><p><code>handleAudioFocus</code> - True if the player should handle audio focus, false other wise.    ç”¨æˆ·å¤„ç†éŸ³è½¨ç„¦ç‚¹æ—¶é€‰æ‹© trueã€‚</p></blockquote><ul><li><strong>setHandleAudioBecomingNoisy(boolean handleAudioBecomingNoisy)</strong></li></ul><blockquote><p>è®¾ç½®å½“å‰çš„éŸ³é¢‘ä»è€³æœºé‡æ–°å®šå‘åˆ°æ‰¬å£°å™¨äº‹ï¼Œæ’­æ”¾å™¨æ˜¯å¦åº”è¯¥æš‚åœã€‚</p><p>é»˜è®¤ä¸å¯ç”¨ã€‚false</p><p>Sets whether the player should pause automatically when audio is rerouted from a headset to device speakers.</p><p><strong>Parameters:</strong></p><p><code>handleAudioBecomingNoisy</code> - Whether the player should pause automatically when audio is rerouted from a headset to device speakers.</p></blockquote><p><strong>æ–¹æ³•</strong></p><table><thead><tr><th align="center">è¿”å›å€¼ç±»å‹</th><th align="center">æ–¹æ³•å</th><th align="center">æè¿°</th></tr></thead><tbody><tr><td align="center">void</td><td align="center">setPlayWhenReady(boolean playWhenReady)</td><td align="center">playWhenReady:å‡†å¤‡å¥½åæ—¶å€™æ’­æ”¾ã€‚å¦‚æœæ’­æ”¾å™¨å·²å¤„äºå°±ç»ªçŠ¶æ€ï¼Œåˆ™å°†æš‚åœæ”¹ä¸ºæ’­æ”¾ã€‚</td></tr><tr><td align="center"></td><td align="center"></td><td align="center"></td></tr><tr><td align="center"></td><td align="center"></td><td align="center"></td></tr></tbody></table><h1 id="DefaultDataSourceFactory-ç±»"><a href="#DefaultDataSourceFactory-ç±»" class="headerlink" title="DefaultDataSourceFactory  ç±»"></a>DefaultDataSourceFactory  ç±»</h1><blockquote><p>åˆ›å»ºå·¥å‚ï¼Œå°†éæ–‡ä»¶çš„æ•°æ®å§”æ‰˜åˆ° DetaultHttpDataSourcesã€‚</p><p>Factory that produces DefaultDataSource instances that delegate to DefaultHttpDataSources for non-file/asset/content URIs.</p></blockquote><ul><li><strong>DefaultDataSourceFactory(Context context,String userAgent)</strong></li></ul><blockquote><p>åˆ›å»º DetaultDataSourceFactory ç±»å®ä¾‹</p><p><strong>Parameters:</strong></p><p><code>context</code> - A context.</p><p><code>userAgent</code> - The User-Agent string that should be used. ä½¿ç”¨ç”¨æˆ·ä»£ç†</p></blockquote><ul><li><strong>Util.getUserAgent(Context context,String applicationName)</strong></li></ul><blockquote><p>æ ¹æ®ç»™å®šçš„åº”ç”¨ç¨‹åºåè¯å’Œåº“ç‰ˆæœ¬è¿”å›ç”¨æˆ·ä»£ç†çš„å­—ç¬¦ä¸²ã€‚</p><p>Returns a user agent string based on the given application name and the library version.</p><ul><li><p><strong>Parameters:</strong></p><p><code>context</code> - A valid context of the calling application. å½“å‰ app ä¸Šä¸‹æ–‡</p><p><code>applicationName</code> - String that will be prefixâ€™ed to the generated user agent.</p></li></ul></blockquote><h1 id="MediaSessionConnector-ç±»"><a href="#MediaSessionConnector-ç±»" class="headerlink" title="MediaSessionConnector ç±»"></a>MediaSessionConnector ç±»</h1><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201204220725.png" alt="ç»§æ‰¿å…³ç³»"></p><blockquote><p>ä»‹ç»</p><p>Connects a MediaSessionCompat to a <a href="https://exoplayer.dev/doc/reference/com/google/android/exoplayer2/Player.html" target="_blank" rel="noopener"><code>Player</code></a>.</p><p>è´Ÿè´£è¿æ¥åˆ° MediaSessionCompat ç±»</p></blockquote><pre><code class="java">public MediaSessionConnector(android.support.v4.media.session.MediaSessionCompat mediaSession)</code></pre><blockquote><p><code>mediaSession</code> - The <a href="https://developer.android.com/reference/android/support.v4.media.session.MediaSessionCompat.html" target="_blank" rel="noopener"><code>MediaSessionCompat</code></a> to connect to.</p><p>ç”¨æ¥è¿æ¥åˆ° MediaSessionCompat</p></blockquote><p><strong>setPlayer</strong></p><pre><code class="java"> public void setPlayer(@Nullable Player player)</code></pre><blockquote><p>Sets the player to be connected to the media session. Must be called on the same thread that is used to access the player.</p><p>å°†æ’­æ”¾å™¨è¿æ¥åˆ°åª’ä½“ã€‚ä¸»è¦åªèƒ½åœ¨ä¸€æ¡çº¿ç¨‹ä¸Šã€‚</p></blockquote><table><thead><tr><th align="center">ä¿®é¥°ç¬¦</th><th align="center">æ–¹æ³•</th><th align="center">æè¿°</th></tr></thead><tbody><tr><td align="center">void</td><td align="center">setQueueNavigator(MediaSessionConnector.QueueNavigator queueNavigator)</td><td align="center">è®¾ç½®å¤„ç†é˜Ÿåˆ—å¯¼èˆªçš„æ“ä½œã€‚queueNavigatorï¼šé˜Ÿåˆ—ç¼–è¾‘å™¨ã€‚</td></tr><tr><td align="center"></td><td align="center"></td><td align="center"></td></tr><tr><td align="center"></td><td align="center"></td><td align="center"></td></tr></tbody></table><h1 id="MediaSessionConnector-PlaybackPreparer-æ¥å£"><a href="#MediaSessionConnector-PlaybackPreparer-æ¥å£" class="headerlink" title="MediaSessionConnector.PlaybackPreparer æ¥å£"></a>MediaSessionConnector.PlaybackPreparer æ¥å£</h1><blockquote><p>å‡†å¤‡æ’­æ”¾æ“ä½œçš„æ¥å£</p></blockquote><p><strong>æŠ½è±¡æ–¹æ³•</strong></p><table><thead><tr><th align="center">è¿”å›ç±»å‹</th><th align="center">æ–¹æ³•åå­—</th><th align="center">å‚æ•°</th><th align="center">æè¿°</th><th align="center">è¿”å›</th></tr></thead><tbody><tr><td align="center">long</td><td align="center">getSupportedPrepareActions()</td><td align="center">ç©º</td><td align="center">è¿”å›æ”¯æŒçš„åª’ä½“æ“ä½œå¸¸é‡</td><td align="center">åª’ä½“å¸¸é‡</td></tr><tr><td align="center">void</td><td align="center">onPrepare(boolean playWhenReady)</td><td align="center">å‡†å¤‡å¥½åæ˜¯å¦æ’­æ”¾</td><td align="center">å‡†å¤‡å®Œæˆæ—¶è°ƒç”¨</td><td align="center">ç©º</td></tr><tr><td align="center">void</td><td align="center">onPrepareFromMediaId ( String  mediaId, boolean playWhenReady, @Nullable Bundle  extras)</td><td align="center">mediaIdï¼šåª’ä½“é¡¹çš„Idï¼ŒplayWhenReadyï¼šå‡†å¤‡å¥½åæ˜¯å¦æ’­æ”¾ï¼Œextrasï¼šåª’ä½“çš„æ§åˆ¶å™¨å¯ä¸ºnull</td><td align="center">ç”¨ä»¥æ’­æ”¾ç‰¹å®šçš„åª’ä½“</td><td align="center">ç©º</td></tr><tr><td align="center">void</td><td align="center">onPrepareFromSearch(String query, boolean playWhenReady, @Nullable Bundle extras)</td><td align="center">queryï¼šæœç´¢ï¼ŒplayWhenReadyï¼šå‡†å¤‡å¥½åæ˜¯å¦æ’­æ”¾ï¼Œextrasï¼šåª’ä½“æ§åˆ¶å™¨å¯ä¸ºnull</td><td align="center">æœç´¢ç‰¹å®šéŸ³ä¹</td><td align="center">void</td></tr><tr><td align="center">void</td><td align="center">onPrepareFromUri( Uri  uri, boolean playWhenReady, @Nullable Bundle  extras)</td><td align="center">uriï¼šè¦æ’­æ”¾çš„åª’ä½“é¡¹ç›®ï¼ŒplayWhenReadyï¼šå‡†å¤‡å®Œæˆåæ˜¯å¦æ’­æ”¾ï¼Œextrasï¼šåª’ä½“æ§åˆ¶å™¨å¯ä¸ºnull</td><td align="center">é€šè¿‡Uriå¤„ç†ç‰¹å®šåª’ä½“é¡¹ç›®</td><td align="center">void</td></tr><tr><td align="center">void</td><td align="center">onCommand(String command,Bundle extras,ResultReceiver cb)</td><td align="center">commandï¼šå‘½ä»¤åç§°ï¼Œextrasï¼šå‘½ä»¤çš„å¯é€‰å‚æ•°ï¼Œcbï¼Œæ¥æ”¶å™¨å‘½ä»¤å‘é€åˆ°æ¥æ”¶å™¨ï¼Œå¯ä¸ºç©º</td><td align="center">æ¥å£ç»§æ‰¿äº† MediaSessionConnector.CommandReceiver ç±»ä¸­çš„æ–¹æ³•ã€‚æ§åˆ¶å™¨å‘é€è‡ªå®šä¹‰å‘½ä»¤æ—¶è°ƒç”¨</td><td align="center">void</td></tr></tbody></table><h1 id="MediaDescriptionCompat-ç±»"><a href="#MediaDescriptionCompat-ç±»" class="headerlink" title="MediaDescriptionCompat ç±»"></a>MediaDescriptionCompat ç±»</h1><p>é€‚åˆæ˜¾ç¤ºçš„åª’ä½“é¡¹ç›®çš„ä¸€ç»„ç®€å•å…ƒæ•°æ®ã€‚ è¿™å¯ä»¥ä½¿ç”¨Builderåˆ›å»ºï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨<code>getDescription()</code>ä»ç°æœ‰å…ƒæ•°æ®ä¸­<code>getDescription()</code> ã€‚</p><h1 id="MediaDescriptionCompat-Builder"><a href="#MediaDescriptionCompat-Builder" class="headerlink" title="MediaDescriptionCompat.Builder"></a>MediaDescriptionCompat.Builder</h1><h1 id="ConcatenatingMediaSource-ç±»"><a href="#ConcatenatingMediaSource-ç±»" class="headerlink" title="ConcatenatingMediaSource ç±»"></a>ConcatenatingMediaSource ç±»</h1><blockquote><p><code>ConcatenatingMediaSource</code>å…è®¸æ’­æ”¾æœŸé—´åŠ¨æ€çš„æ·»åŠ å’Œåˆ é™¤<code>MediaSource</code></p></blockquote><h1 id="PlayerNotificationManager-ç±»"><a href="#PlayerNotificationManager-ç±»" class="headerlink" title="PlayerNotificationManager ç±»"></a>PlayerNotificationManager ç±»</h1><blockquote><p>ç”¨æ¥å¯åŠ¨ã€æ›´æ–°å’Œå–æ¶ˆæ’­æ”¾å™¨çŠ¶æ€çš„åª’ä½“æ ·å¼é€šçŸ¥çš„ã€‚</p></blockquote><p><strong>å†…éƒ¨æ–¹æ³•</strong></p><table><thead><tr><th align="center">è¿”å›å€¼ç±»å‹</th><th align="center">æ–¹æ³•</th><th align="center">æè¿°</th></tr></thead><tbody><tr><td align="center">void</td><td align="center">setPlaybackPreparer(PlaybackPreparer playbackPreparer)</td><td align="center">å‡†å¤‡æ’­æ”¾å™¨</td></tr><tr><td align="center"></td><td align="center"></td><td align="center"></td></tr><tr><td align="center"></td><td align="center"></td><td align="center"></td></tr></tbody></table><p><strong>åµŒå¥—ç±»æˆ–æ–¹æ³•</strong></p><h4 id="public-static-interface-PlayerNotificationManager-NotificationListener"><a href="#public-static-interface-PlayerNotificationManager-NotificationListener" class="headerlink" title="public static interface PlayerNotificationManager.NotificationListener"></a>public static interface PlayerNotificationManager.NotificationListener</h4><blockquote><p>ç›‘å¬çŠ¶æ€çš„ç›‘å¬å™¨ã€‚</p></blockquote><table><thead><tr><th align="center">è¿”å›å€¼ç±»å‹</th><th align="center">æ–¹æ³•</th><th align="center">æè¿°</th></tr></thead><tbody><tr><td align="center">void</td><td align="center">onNotificationCancelled(int notificationId,boolean dismissedByUser)</td><td align="center">é€šçŸ¥è¢«å–æ¶ˆæ—¶è°ƒç”¨</td></tr><tr><td align="center">void</td><td align="center">onNotificationPosted(int notificationId, Notification notification,boolean ongoing)</td><td align="center">å‘å¸ƒé€šçŸ¥åè°ƒç”¨</td></tr></tbody></table><h4 id="public-static-PlayerNotificationManager-createWithNotificationChannel"><a href="#public-static-PlayerNotificationManager-createWithNotificationChannel" class="headerlink" title="public static PlayerNotificationManager createWithNotificationChannel"></a>public static PlayerNotificationManager createWithNotificationChannel</h4><blockquote><p>åˆ›å»ºé€šçŸ¥ç®¡ç†å™¨å¹¶æŒ‡å®šchannelIdå’Œä½ä¼˜å…ˆçº§çš„é€šçŸ¥é€šé“channelName.</p></blockquote><table><thead><tr><th align="center">å‚æ•°</th><th align="center">æè¿°</th></tr></thead><tbody><tr><td align="center">context-Context</td><td align="center">ä¸Šä¸‹æ–‡</td></tr><tr><td align="center">channelId</td><td align="center">é€šçŸ¥Id</td></tr><tr><td align="center">channelName</td><td align="center">å­—ç¬¦ä¸²èµ„æºæ ‡è¯†ç¬¦ï¼Œç”¨äºç”¨æˆ·å¯è§çš„é€šçŸ¥åç§°ã€‚æœ€å¤š40å­—ç¬¦è¿‡å¤šä¼šè¢«è£æ–­ã€‚</td></tr><tr><td align="center">channelDescription</td><td align="center">ç”¨æˆ·å¯¹å†…å®¹å¯è§éƒ¨åˆ†çš„æè¿°ã€‚æ²¡æœ‰ä¸º0ã€‚</td></tr><tr><td align="center">notificationId</td><td align="center">é€šçŸ¥çš„Id</td></tr><tr><td align="center">mediaDescriptionAdapter</td><td align="center">æä¾›å½“å‰æ’­æ”¾å†…å®¹çš„é€‚é…å™¨</td></tr><tr><td align="center">notificationListener</td><td align="center">å¼€å§‹å’Œå–æ¶ˆé€šçŸ¥çš„ç›‘å¬å™¨</td></tr></tbody></table><h4 id="public-static-interface-PlayerNotificationManager-MediaDescriptionAdapter"><a href="#public-static-interface-PlayerNotificationManager-MediaDescriptionAdapter" class="headerlink" title="public static interface PlayerNotificationManager.MediaDescriptionAdapter"></a>public static interface PlayerNotificationManager.MediaDescriptionAdapter</h4><blockquote><p>æä¾›å½“å‰æ’­æ”¾å†…å®¹çš„é€‚é…å™¨</p></blockquote><table><thead><tr><th align="center">æ–¹æ³•å</th><th align="center">å‚æ•°</th><th>è¿”å›å€¼</th><th align="center">æè¿°</th></tr></thead><tbody><tr><td align="center">getCurrentContentTitle()</td><td align="center">com.google.android.exoplayer2.Player player</td><td><strong>CharSequence</strong></td><td align="center">è·å¾—å½“å‰å†…å®¹æ ‡é¢˜</td></tr><tr><td align="center">createCurrentContentIntent()</td><td align="center">com.google.android.exoplayer2.Player player</td><td><strong>PendingIntent</strong></td><td align="center">åˆ›å»ºå½“å‰é€‰é¡¹çš„æ„å›¾</td></tr><tr><td align="center">getCurrentContentText()</td><td align="center">com.google.android.exoplayer2.Player player</td><td><strong>CharSequence</strong></td><td align="center">è·å–å½“å‰å†…å®¹æ–‡æœ¬</td></tr><tr><td align="center">getCurrentLargeIcon()</td><td align="center">com.google.android.exoplayer2.Player player, PlayerNotificationManager.BitmapCallback callback</td><td><strong>Bitmap</strong></td><td align="center">è·å–å½“å‰å¤§å›¾æ ‡ã€‚å½“å­˜åœ¨å¼‚æ­¥åŠ è½½æ—¶å¯ä»¥è¿”å›å ä½ç¬¦ï¼ˆæˆ–nullï¼‰ï¼Œå¹¶ä¸”åœ¨ PlayerNotificationManager.BitmapCallback åŠ è½½åä¼ é€’ç»™å®ƒã€‚ç”±äºåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é€‚é…å™¨ä¼šå¤šæ¬¡è¢«è°ƒç”¨ï¼Œå› æ­¤å›¾ç‰‡ç”±ç¨‹åºç¼“å­˜ï¼Œå¹¶å°½å¯èƒ½åœ¨åç»­ä½¿ç”¨ä¸­åŒæ­¥è¿”å›ã€‚</td></tr></tbody></table><h1 id="Player-æ¥å£"><a href="#Player-æ¥å£" class="headerlink" title="Player æ¥å£"></a>Player æ¥å£</h1><blockquote><p>å®šä¹‰åª’ä½“æ’­æ”¾å™¨ç•Œé¢çš„é«˜çº§åŠŸèƒ½å¸¸é‡ã€æ¥å£ç±»å‹ç­‰ï¼Œä¾‹å¦‚æ’­æ”¾ã€æš‚åœã€æœç´¢ç­‰å±æ€§èƒ½åŠ›ã€‚</p></blockquote><p><strong>å¸¸é‡</strong></p><table><thead><tr><th align="center">ä¿®é¥°ç±»å‹</th><th align="center">å¸¸é‡</th><th align="center">æè¿°</th></tr></thead><tbody><tr><td align="center">static int</td><td align="center">STATE_READY</td><td align="center">ç§»åŠ¨åˆ°æŒ‡å®šä½ç½®å‡†å¤‡æ’­æ”¾</td></tr><tr><td align="center"></td><td align="center"></td><td align="center"></td></tr><tr><td align="center"></td><td align="center"></td><td align="center"></td></tr></tbody></table><h1 id="Player-EventListener-æ¥å£"><a href="#Player-EventListener-æ¥å£" class="headerlink" title="Player.EventListener æ¥å£"></a>Player.EventListener æ¥å£</h1><blockquote><p>æ£€æµ‹æ’­æ”¾å™¨çš„çŠ¶æ€ã€‚</p></blockquote><p><strong>æŠ½è±¡æ–¹æ³•</strong></p><table><thead><tr><th align="center">è¿”å›ç±»å‹</th><th align="center">æ–¹æ³•å</th><th align="center">æè¿°</th><th align="center">å‚æ•°</th></tr></thead><tbody><tr><td align="center">void</td><td align="center">onPlayerError(ExoPlaybackException error)ã€‚</td><td align="center">å‘ç”Ÿé”™è¯¯æ—¶è°ƒç”¨</td><td align="center">error:é”™è¯¯å‚æ•°ã€‚</td></tr><tr><td align="center">void</td><td align="center">onPlayerStateChanged(boolean playWhenReady,int playbackState)</td><td align="center">æ£€æµ‹åª’ä½“çš„çŠ¶æ€</td><td align="center">playWhenReady:æ˜¯å¦å‡†å¤‡å¥½ã€‚playbackStateï¼šæ’­æ”¾çš„çŠ¶æ€ã€‚</td></tr><tr><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td></tr></tbody></table><h1 id="TimelineQueueNavigator-æŠ½è±¡ç±»"><a href="#TimelineQueueNavigator-æŠ½è±¡ç±»" class="headerlink" title="TimelineQueueNavigator æŠ½è±¡ç±»"></a>TimelineQueueNavigator æŠ½è±¡ç±»</h1><blockquote><p>æŠ½è±¡ç±»ç”¨æ¥å®ç° MediaSessionConnector.QueueNavigator çª—å£çš„æ˜ å°„Playerï¼ŒTimelineåª’ä½“ä¼šè¯çš„é˜Ÿåˆ—ã€‚</p></blockquote><table><thead><tr><th align="center">ä¿®é¥°ç¬¦</th><th align="center">(æ„é€ )æ–¹æ³•</th><th align="center">æè¿°</th></tr></thead><tbody><tr><td align="center"></td><td align="center">TimelineQueueNavigator(MediaSessionCompat mediaSession)</td><td align="center">åˆ›å»ºä¸€ä¸ªå®ä¾‹MediaSessionCompatã€‚</td></tr><tr><td align="center">MediaDescriptionCompat</td><td align="center">getMediaDescription(Player player,int windowIndex)</td><td align="center">è·å¾—MediaDescriptionCompatç»™å®šçª—å£çš„ç´¢å¼•ã€‚é€šå¸¸éœ€è¦å¼‚æ­¥åŠ è½½å›¾æ ‡ã€‚</td></tr><tr><td align="center"></td><td align="center"></td><td align="center"></td></tr></tbody></table><p>å¼•ç”¨ï¼š</p><p><a href="https://juejin.im/post/6854573203994443789" target="_blank" rel="noopener">æ·±å…¥è§£è¯»ExoPlayer ä¹‹ å¼€å‘è€…æŒ‡å—å…¨è¯‘-02 å¼€å§‹ä½¿ç”¨</a></p><p><a href="https://exoplayer.dev/doc/reference/overview-summary.html" target="_blank" rel="noopener">DOC</a></p><p><a href="https://www.apiref.com/android-zh/index.html" target="_blank" rel="noopener">Android API</a></p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> ExoPlayer </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Glide Androidå›¾ç‰‡åŠ è½½åº“</title>
      <link href="/2020/11/12/Glide-Android%E5%9B%BE%E7%89%87%E5%8A%A0%E8%BD%BD%E5%BA%93/"/>
      <url>/2020/11/12/Glide-Android%E5%9B%BE%E7%89%87%E5%8A%A0%E8%BD%BD%E5%BA%93/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸‹è½½-æ·»åŠ ä¾èµ–"><a href="#ä¸‹è½½-æ·»åŠ ä¾èµ–" class="headerlink" title="ä¸‹è½½ æ·»åŠ ä¾èµ–"></a>ä¸‹è½½ æ·»åŠ ä¾èµ–</h1><p><strong>æ·»åŠ ä¾èµ–</strong></p><blockquote><p>åœ¨ app ç›®å½•ä¸‹æ‰“å¼€ build.gradle</p></blockquote><pre><code class="kotlin">   // Glide    implementation &#39;com.github.bumptech.glide:glide:4.11.0&#39;    kapt &#39;com.github.bumptech.glide:compiler:4.11.0&#39;</code></pre><h1 id="åŸºæœ¬ç”¨æ³•"><a href="#åŸºæœ¬ç”¨æ³•" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h1><pre><code class="kotlin">Glide.with(context)    .load(url)    .into(imageView);</code></pre><blockquote><ul><li>with(context:Context) éœ€è¦ä¸Šä¸‹æ–‡ã€‚</li><li>load(url:String) å­—ç¬¦ä¸²æ€§è´¨çš„ç½‘ç»œå›¾ç‰‡Urlã€‚</li><li>into(imageView :ImageView) ä½ éœ€è¦æ˜¾ç¤ºçš„å›¾ç‰‡çš„æ§ä»¶</li></ul></blockquote><p><strong>å–æ¶ˆåŠ è½½</strong></p><pre><code class="kotlin">Glide.with(context).clear(imageView);</code></pre><blockquote><p>Glide.with()ä¸­ä¼ å…¥Activityæˆ–è€…Fragmentæ—¶ä¼šè·Ÿéšå®ƒä»¬åˆ›å»ºå’Œé”€æ¯ï¼Œæ‰€æœ‰æ‰‹åŠ¨å–æ¶ˆæ˜¯éå¿…è¦çš„ã€‚</p></blockquote><h1 id="è¡¥å……"><a href="#è¡¥å……" class="headerlink" title="è¡¥å……"></a>è¡¥å……</h1><blockquote><ul><li>setDefaultRequestOptions(RequestOptions requestOptions)</li></ul><p>ç”¨äºé…ç½®åŠ è½½å›¾ç‰‡æ—¶çš„é»˜è®¤é€‰é¡¹ï¼Œç¼–ç æ¨¡å¼åŒ…å«åœ¨å…¶ä¸­ï¼Œé»˜è®¤é…ç½®æ˜¯RGB_565</p><p>å‚æ•°ï¼š</p><ol><li>requestOptions:è®¾ç½® RequestOptions åˆ°åŠ è½½çš„åº”ç”¨ä¸­ã€‚</li></ol></blockquote><h1 id="RequestOptionsç±»"><a href="#RequestOptionsç±»" class="headerlink" title="RequestOptionsç±»"></a>RequestOptionsç±»</h1><blockquote><p>æä¾›é€‰é¡¹æ¥ç»™ Glide è‡ªå®šä¹‰åŠ è½½ã€‚</p></blockquote><ul><li><strong>placeholder(Drawable drawable)</strong></li></ul><blockquote><p>è®¾ç½®åŠ è½½æ—¶çš„é»˜è®¤å›¾ç‰‡ã€‚</p><p>å‚æ•°ï¼š</p><ol><li>drawableï¼Œæ˜¾ç¤ºå›¾ç‰‡çš„å ä½ç¬¦</li></ol></blockquote><ul><li><strong>onError(Drawable drawable)</strong></li></ul><blockquote><p>è®¾ç½®å›¾ç‰‡åŠ è½½é”™è¯¯æ—¶çš„å›¾ç‰‡ã€‚</p><p>å‚æ•°ï¼š</p><ol><li>drawableï¼Œæ˜¾ç¤ºå›¾ç‰‡çš„å ä½ç¬¦</li></ol></blockquote><ul><li><strong>diskCacheStrategy(DiskCacheStrategy diskCacheStrategy)</strong></li></ul><blockquote><p>å°† DiskCacheStrategy ç±»å‹åº”ç”¨åˆ°å•ç‹¬è¯·æ±‚ä¸­ã€‚å…è®¸ä½ åŠ è½½è¿‡ç¨‹ä¸­ä½¿ç”¨æˆ–è€…å†™å…¥ç£ç›˜ç¼“å­˜ï¼Œé€‰æ‹©æ€§çš„ä»…æ”¯æŒæ— ä¿®æ”¹çš„åŸå£°æ•°æ®ï¼Œæˆ–è€…å˜æ¢è¿‡çš„ç¼©ç•¥å›¾ï¼Œæˆ–è€…å…¼è€Œæœ‰ä¹‹ã€‚</p><p>å‚æ•°ï¼š</p><ol><li>diskCacheStrategyï¼šä½¿ç”¨DiskCacheStrategyç±»çš„å¸¸é‡ä½œä¸ºç¼“å­˜ç­–ç•¥ã€‚</li></ol></blockquote><h1 id="DiskCacheStrategy-ç±»"><a href="#DiskCacheStrategy-ç±»" class="headerlink" title="DiskCacheStrategy  ç±»"></a>DiskCacheStrategy  ç±»</h1><blockquote><p>ç¼“å­˜ç­–ç•¥ï¼ˆDisk ã€Cache ã€Strategyï¼‰</p><p>å…è®¸ä½ åŠ è½½è¿‡ç¨‹ä¸­ä½¿ç”¨æˆ–è€…å†™å…¥ç£ç›˜ç¼“å­˜ï¼Œé€‰æ‹©æ€§çš„ä»…æ”¯æŒæ— ä¿®æ”¹çš„åŸå£°æ•°æ®ï¼Œæˆ–è€…å˜æ¢è¿‡çš„ç¼©ç•¥å›¾ï¼Œæˆ–è€…å…¼è€Œæœ‰ä¹‹ã€‚</p><p>é»˜è®¤æ˜¯<strong>AUTOMATIC</strong>ï¼Œä¼šå°è¯•å¯¹æœ¬åœ°å’Œè¿œç¨‹å›¾ç‰‡ä½¿ç”¨æœ€ä½³ç­–ç•¥ã€‚å½“ä½ åŠ è½½è¿œç¨‹æ•°æ®æ—¶ï¼Œ<strong>AUTOMATIC</strong>ç­–ç•¥ä¼šå­˜å‚¨ç»´è¢«ä½ åŠ è½½è¿‡ç¨‹ä¿®æ”¹è¿‡çš„åŸå§‹æ•°æ®(ä¾‹å¦‚ï¼Œå˜æ¢ï¼Œè£å‰ª)ï¼Œå› ä¸ºä¸‹è½½è¿œç¨‹æ•°æ®ç›¸æ¯”è°ƒæ•´ç£ç›˜ä¸Šå·²ç»å­˜åœ¨çš„æ•°æ®è¦æ˜‚è´µçš„å¤šã€‚å¯¹äºæœ¬éƒ½æ•°æ®ï¼Œ<strong>AUTOMATIC</strong> ç­–ç•¥ä¼šå­˜å‚¨å˜æ¢è¿‡çš„ç¼©ç•¥å›¾ï¼Œå› ä¸ºå³ä½¿ä½ å†æ¬¡ç”Ÿæˆå¦ä¸€ä¸ªå°ºå¯¸æˆ–è€…ç±»å‹çš„å›¾ç‰‡ï¼Œå–å›åŸå§‹æ•°æ®ä¹Ÿæ˜¯å¾ˆå®¹æ˜“çš„ã€‚</p></blockquote><p><strong>ç±»å‹ä»‹ç»</strong></p><blockquote><p>DiskCacheStrategy.NONE: è¡¨ç¤ºä¸ç¼“å­˜ä»»ä½•å†…å®¹ã€‚</p><p>DiskCacheStrategy.DATA: åªç¼“å­˜åŸå§‹å›¾ç‰‡ã€‚</p><p>DiskCacheStrategy.RESOURCEï¼šè¡¨ç¤ºåªç¼“å­˜è½¬æ¢è¿‡åçš„å›¾ç‰‡ã€‚</p><p>DiskCacheStrategy.ALL:è¡¨ç¤ºæ—¢ç¼“å­˜åŸå§‹å›¾ç‰‡ï¼Œä¹Ÿç¼“å­˜è½¬æ¢è¿‡åçš„å›¾ç‰‡ã€‚</p><p>DiskCacheStrategy.AUTOMATIC: è¡¨ç¤ºè®©Gildeæ ¹æ®å›¾ç‰‡èµ„æºæ™ºèƒ½çš„é€‰æ‹©ä¸€ç§ç¼“å­˜ç­–ç•¥ï¼ˆé»˜è®¤ï¼‰ã€‚</p></blockquote><h2 id="CustomTarget-ç±»"><a href="#CustomTarget-ç±»" class="headerlink" title="CustomTarget ç±»"></a>CustomTarget<T> ç±»</h2><blockquote><p>ç”¨äºåŠ è½½å›¾ç‰‡èµ„æºã€‚</p></blockquote><table><thead><tr><th align="center">æ–¹æ³•å</th><th align="center">å‚æ•°</th><th align="center">æè¿°</th><th align="center">è¿”å›å€¼</th></tr></thead><tbody><tr><td align="center">onResourceReady</td><td align="center">@NonNull  R resource, @Nullable Transition&lt;? super R&gt; transition</td><td align="center">èµ„æºåŠ è½½å®Œæˆåè°ƒç”¨çš„æ–¹æ³•</td><td align="center">voidã€‚è¿”å›åŠ è½½çš„èµ„æº</td></tr><tr><td align="center">onLoadCleared</td><td align="center">@NonNull android.graphics.drawable.Drawable placeholderï¼ˆå¯ä»¥é€‰æ‹©çš„å ä½ç¬¦ï¼Œå¯ä¸ºnullï¼‰</td><td align="center">å–æ¶ˆåŠ è½½å¹¶é‡Šæ”¾èµ„æºçš„ç”Ÿå‘½å‘¨æœŸå›è°ƒã€‚ï¼ˆåœ¨é‡æ–°ç»˜åˆ¶å®¹å™¨æ—¶ï¼Œä½ å¿…é¡»ç¡®ä¿onResourceReady()æ–¹æ³•ä¸æ¥å—ä»»ä½•å½“å‰çš„Drawableï¼‰</td><td align="center">void</td></tr><tr><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td></tr></tbody></table><p><strong>å¼•ç”¨</strong></p><p><a href="https://muyangmin.github.io/glide-docs-cn/doc/getting-started.html" target="_blank" rel="noopener">Glide</a></p><p><a href="https://www.jianshu.com/p/4f457a124d67" target="_blank" rel="noopener">Androidå›¾ç‰‡åŠ è½½æ¡†æ¶â€”â€”Glideï¼ˆGlide v4ï¼‰</a></p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> Glide </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dagger-Hilt Androidçš„ä¾èµ–æ³¨å…¥æ¡†æ¶</title>
      <link href="/2020/11/11/Dagger-Hilt-Android%E7%9A%84%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5%E6%A1%86%E6%9E%B6/"/>
      <url>/2020/11/11/Dagger-Hilt-Android%E7%9A%84%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5%E6%A1%86%E6%9E%B6/</url>
      
        <content type="html"><![CDATA[<h1 id="Hilt-æ˜¯å¹²ä»€ä¹ˆçš„ï¼Ÿ"><a href="#Hilt-æ˜¯å¹²ä»€ä¹ˆçš„ï¼Ÿ" class="headerlink" title="Hilt æ˜¯å¹²ä»€ä¹ˆçš„ï¼Ÿ"></a>Hilt æ˜¯å¹²ä»€ä¹ˆçš„ï¼Ÿ</h1><p>å®ƒæ˜¯ Google ä¸ºAndroidå¼€å‘æä¾›çš„åœºæ™¯åŒ–ä¾èµ–åº“ï¼Œçš†åœ¨å‡å°‘é¡¹ç›®ä¸­è¿›è¡Œçš„æ‰‹åŠ¨ä¾èµ–æ³¨å…¥ã€‚</p><p>Hilt ä¸ºé¡¹ç›®ä¸­çš„æ¯ä¸ª Android ç±»æä¾›å®¹å™¨å¹¶è‡ªåŠ¨ç®¡ç†å®ƒä»¬çš„ç”Ÿå‘½å‘¨æœŸï¼Œä¸ºåº”ç”¨ç¨‹åºæä¾›äº† DIçš„æ ‡å‡†æ–¹æ³•ã€‚å®ƒæ˜¯ä» Dagger åº“çš„åŸºç¡€ä¸Šè¿›è¡Œæ„å»ºçš„ï¼Œå› ä¸º Daggeræä¾›çš„ç¼–è¯‘æ—¶æ­£ç¡®æ€§ã€è¿è¡Œæ—¶æ€§èƒ½ã€å¯ä¼¸ç¼©æ€§å¹¶ä¸”ä»AndroidStudioæ”¯æŒDaggerä¸­è·ç›Šã€‚</p><blockquote><p><strong>ç›¸æ¯”Daggerï¼ŒHiltæœ‰é‚£äº›ä¼˜åŒ–ï¼Ÿ</strong></p><p>Hiltçš„å®ç°è¦æ¯”Daggerç®€å•çš„å¤šï¼Œä½¿ç”¨Daggerå®ç°ä¾èµ–æ³¨å…¥ï¼Œéœ€è¦å»ç¼–å†™modulesã€componentsç­‰ç­‰ã€‚æ¯æ¬¡å»åˆ›å»ºä¸€ä¸ªæ–°çš„Androidç»„ä»¶ï¼Œæ¯”å¦‚ Activityã€Fragmentæ—¶ï¼Œæˆ‘ä»¬éƒ½éœ€è¦å°†å®ƒä»¬æ‰‹åŠ¨æ·»åŠ åˆ°modulesä¸­ã€‚</p></blockquote><h1 id="ä½¿ç”¨-Hilt-å‰çš„å‡†å¤‡å·¥ä½œ"><a href="#ä½¿ç”¨-Hilt-å‰çš„å‡†å¤‡å·¥ä½œ" class="headerlink" title="ä½¿ç”¨ Hilt å‰çš„å‡†å¤‡å·¥ä½œ"></a>ä½¿ç”¨ Hilt å‰çš„å‡†å¤‡å·¥ä½œ</h1><ul><li>æ·»åŠ ä¾èµ– åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ build.gradle æ–‡ä»¶</li></ul><pre><code>buildscript {    ...    dependencies {        ...        classpath &quot;com.google.dagger:hilt-android-gradle-plugin:2.28.3-alpha&quot;    }}</code></pre><ul><li>åœ¨é¡¹ç›®çš„åº”ç”¨çº§ç›®å½•ä¸‹ </li></ul><pre><code>...apply plugin: &#39;kotlin-kapt&#39;apply plugin: &#39;dagger.hilt.android.plugin&#39;android {    ...}dependencies {    implementation &quot;com.google.dagger:hilt-android:2.28-alpha&quot;    kapt &quot;com.google.dagger:hilt-android-compiler:2.28-alpha&quot;}</code></pre><p>Hilt ä½¿ç”¨Java8çš„åŠŸèƒ½ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­å¯ç”¨å®ƒï¼Œåº”ç”¨æ¨¡å—ä¸‹ build.gradle æ–‡ä»¶æ·»åŠ ä»£ç ã€‚</p><pre><code class="groovy">android {  ...    compileOptions {        sourceCompatibility JavaVersion.VERSION_1_8        targetCompatibility JavaVersion.VERSION_1_8    }    // For Kotlin projects    kotlinOptions {        jvmTarget = &quot;1.8&quot;    }}</code></pre><blockquote><p><strong>æ³¨æ„</strong></p><p>åœ¨ Kotlin é¡¹ç›®ä¸­ï¼Œéœ€è¦æ·»åŠ  kotlinOptionsï¼Œå¦åˆ™ViewModelä¼šç¼–è¯‘ä¸é€šè¿‡ã€‚</p><p>éœ€è¦æ³¨æ„ä½¿ç”¨hilt å’Œdata bindingï¼Œéœ€è¦AndroidStudioçš„ç‰ˆæœ¬å¿…é¡»&gt;=4.0ã€‚</p></blockquote><p>Application æ˜¯ App çš„å…¥å£ï¼Œæ‰€æœ‰ä½¿ç”¨Hiltçš„Appå¿…é¡»åŒ…å«ä¸€ä¸ªä½¿ç”¨@HiltAndroidAppæ³¨è§£çš„Application</p><pre><code class="kotlin">@HiltAndroidAppclass HiltApplication : Application() {    /**     * 1. æ‰€æœ‰ä½¿ç”¨ Hilt çš„ App å¿…é¡»åŒ…å«ä¸€ä¸ªä½¿ç”¨ @HiltAndroidApp æ³¨è§£çš„ Application     * 2. @HiltAndroidApp å°†ä¼šè§¦å‘ Hilt ä»£ç çš„ç”Ÿæˆï¼ŒåŒ…æ‹¬ç”¨ä½œåº”ç”¨ç¨‹åºä¾èµ–é¡¹å®¹å™¨çš„åŸºç±»     * 3. ç”Ÿæˆçš„ Hilt ç»„ä»¶ä¾é™„äº Application çš„ç”Ÿå‘½å‘¨æœŸï¼Œå®ƒä¹Ÿæ˜¯ App çš„çˆ¶ç»„ä»¶ï¼Œæä¾›å…¶ä»–ç»„ä»¶è®¿é—®çš„ä¾èµ–     * 4. åœ¨ Application ä¸­è®¾ç½®å¥½ @HiltAndroidApp ä¹‹åï¼Œå°±å¯ä»¥ä½¿ç”¨ Hilt æä¾›çš„ç»„ä»¶äº†ï¼Œ     *    Hilt æä¾›çš„ @AndroidEntryPoint æ³¨è§£ç”¨äºæä¾› Android ç±»çš„ä¾èµ–ï¼ˆActivityã€Fragmentã€Viewã€Serviceã€BroadcastReceiverï¼‰ç­‰ç­‰     *    Application ä½¿ç”¨ @HiltAndroidApp æ³¨è§£     */}</code></pre><ol><li>@HiltAndroidAppä¼šè§¦å‘Hiltä»£ç çš„ç”Ÿæˆï¼ŒåŒ…æ‹¬ç”¨ä½œåº”ç”¨ç¨‹åºä¾èµ–å®¹å™¨çš„åŸºç±»</li><li>ç”Ÿæˆçš„Hiltç»„ä»¶ä¾é™„äºApplicationçš„ç”Ÿå‘½å‘¨æœŸï¼Œå®ƒä¹Ÿæ˜¯Appçš„çˆ¶ç»„ä»¶ï¼Œæä¾›å…¶ä»–ç»„ä»¶è®¿é—®çš„ä¾èµ–ã€‚</li></ol><h1 id="ä½¿ç”¨-Hilt-è¿›è¡Œä¾èµ–æ³¨å…¥"><a href="#ä½¿ç”¨-Hilt-è¿›è¡Œä¾èµ–æ³¨å…¥" class="headerlink" title="ä½¿ç”¨ Hilt è¿›è¡Œä¾èµ–æ³¨å…¥"></a>ä½¿ç”¨ Hilt è¿›è¡Œä¾èµ–æ³¨å…¥</h1><p>æ³¨å…¥ HiltSimple å¹¶åœ¨ Application ä¸­è°ƒç”¨å®ƒçš„doSomethingæ–¹æ³•ã€‚</p><pre><code class="kotlin">class HiltSimple @Inject constructor() {    fun doSomething() {        Log.e(TAG, &quot;----doSomething----&quot;)    }}@HiltAndroidAppclass HiltApplication : Application() {    @Inject    lateinit var mHiltSimple: HiltSimple    override fun onCreate() {        super.onCreate()        mHiltSimple.doSomething()    }}</code></pre><p>Hilt éœ€è¦çŸ¥é“å¦‚ä½•ä»ç›¸å¯¹åº”çš„ç»„ä»¶ä¸­æä¾›å¿…è¦çš„ä¾èµ–å®ä¾‹ã€‚ä½¿ç”¨@Injectæ³¨è§£æ¥å‘Šè¯‰Hiltå¦‚ä½•æä¾›è¯¥ç±»çš„å®ä¾‹ï¼Œ@Inject å¸¸ç”¨äºæ„é€ å‡½æ•°ã€éç§æœ‰å­—æ®µã€æ–¹æ³•ã€‚</p><h1 id="Hilt-å¸¸ç”¨æ³¨è§£çš„å«ä¹‰"><a href="#Hilt-å¸¸ç”¨æ³¨è§£çš„å«ä¹‰" class="headerlink" title="Hilt å¸¸ç”¨æ³¨è§£çš„å«ä¹‰"></a>Hilt å¸¸ç”¨æ³¨è§£çš„å«ä¹‰</h1><h4 id="HiltAndroidApp"><a href="#HiltAndroidApp" class="headerlink" title="@HiltAndroidApp"></a>@HiltAndroidApp</h4><blockquote><p>1 æ‰€æœ‰ä½¿ç”¨HIltçš„Appå¿…é¡»åŒ…å«ä¸€ä¸ªä½¿ç”¨@HiltAndroidAppæ³¨è§£çš„Applicationã€‚</p><p>2 @HiltAndroidAppæ³¨è§£å°†ä¼šè§¦å‘Hiltä»£ç çš„ç”Ÿæˆï¼Œä½œä¸ºåº”ç”¨ç¨‹åºä¾èµ–é¡¹å®¹å™¨çš„åŸºç±»ã€‚</p><p>3 ç”Ÿæˆçš„Hiltç»„ä»¶ä¾é™„äºApplicationçš„ç”Ÿå‘½å‘¨æœŸï¼Œå®ƒä¹Ÿæ˜¯Appçš„çˆ¶ç»„ä»¶ï¼Œæä¾›å…¶ä»–ç»„ä»¶è®¿é—®çš„ä¾èµ–ã€‚</p><p>4 åœ¨Applicationä¸­è®¾ç½®å·@HiltAndroidAppä¹‹åï¼Œå°±å¯ä»¥ä½¿ç”¨Hiltæä¾›çš„ç»„ä»¶äº†ï¼Œç»„ä»¶åŒ…å«Applicaitonã€Activityã€Fragmentç­‰ã€‚</p></blockquote><h4 id="AndroidEntryPoint"><a href="#AndroidEntryPoint" class="headerlink" title="@AndroidEntryPoint"></a>@AndroidEntryPoint</h4><blockquote><p>Hilt æä¾›çš„@AndroidEntryPointæ³¨è§£ç”¨äºæä¾›Androidç±»çš„ä¾èµ–ï¼ˆActivityã€Fragmentã€Viewã€Serviceã€BroadcastReceiverï¼‰</p><p>ç‰¹æ®Šçš„Applicationä½¿ç”¨ @HiltAndroidAppæ³¨è§£ã€‚</p><ul><li><p>Activityï¼šæ”¯æŒComponentActivityçš„å­ç±»ä¾‹å¦‚FragmentActivityã€AppCompatActivityç­‰ã€‚</p></li><li><p>Fragmentï¼šæ”¯æŒ androidx.FragmentåŒ…ä¸‹çš„Fragmentã€‚</p></li><li><p>View</p></li><li><p>Service</p></li><li><p>BroadcastReceiver</p></li></ul></blockquote><h5 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h5><p>åœ¨ä½¿ç”¨@AndroidEntryPointåœ¨éComponentActivityå­ç±»ä¸Šæ³¨è§£ï¼Œä¾‹å¦‚Activityåˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p><pre><code class="groovy">Activities annotated with @AndroidEntryPoint must be a subclass of androidx.activity.ComponentActivity. (e.g. FragmentActivity, AppCompatActivity, etc.)</code></pre><p>ä½¿ç”¨@AndroidEntryPointæ³¨è§£æ—¶ï¼Œå¿…é¡»åœ¨å®ƒçš„ä¾èµ–çš„Androidç±»æ·»åŠ åŒæ ·çš„æ³¨è§£ï¼Œ<strong>ä¾‹å¦‚Fragmentä¸­æ·»åŠ @AndroidEntryPointæ³¨è§£ï¼Œå¿…é¡»åœ¨Fragmentä¾èµ–çš„Activityä¸Šä¹Ÿæ·»åŠ @AndroidEntryPointæ³¨è§£ï¼Œå¦åˆ™ä¼šæŠ›å‡ºä¸€æ ·ã€‚</strong></p><pre><code class="kotlin">java.lang.IllegalStateException: Hilt Fragments must be attached to an @AndroidEntryPoint Activity. Found: class com.hi.dhl.hilt.MainActivity</code></pre><h4 id="Module"><a href="#Module" class="headerlink" title="@Module"></a>@Module</h4><p>å¸¸ç”¨äºåˆ›å»ºä¾èµ–ç±»çš„å¯¹è±¡ï¼ˆä¾‹å¦‚ç¬¬ä¸‰æ–¹åº“ OkHttpã€Retrofitç­‰ç­‰ï¼‰ï¼Œä½¿ç”¨@Moduleæ³¨è§£çš„ç±»ï¼Œéœ€è¦ä½¿ç”¨@InstallInæ³¨è§£æŒ‡å®šèŒƒå›´moduleã€‚</p><pre><code class="kotlin">@Module@InstallIn(ApplicationComponent::class)// è¿™é‡Œä½¿ç”¨äº† ApplicationComponentï¼Œå› æ­¤ NetworkModule ç»‘å®šåˆ° Application çš„ç”Ÿå‘½å‘¨æœŸã€‚object NetworkModule {}</code></pre><h4 id="InstallIn"><a href="#InstallIn" class="headerlink" title="@InstallIn"></a>@InstallIn</h4><p>ä½¿ç”¨@Moduleæ³¨å…¥çš„ç±»ï¼Œä½¿ç”¨@InstallInæ³¨è§£æŒ‡å®šmoduleçš„èŒƒå›´ï¼Œä¾‹å¦‚ä½¿ç”¨@InstallIn(ActivityComponent::class)æ³¨è§£çš„moduleä¼šç»‘å®šåˆ°Activityçš„ç”Ÿå‘½å‘¨æœŸä¸Šã€‚</p><p>Hilt æä¾›äº†ä»¥ä¸‹ç»„ä»¶æ¥ç»‘å®šä¾èµ–ä¸å¯¹åº”çš„Androidç±»çš„æ´»åŠ¨èŒƒå›´ã€‚</p><table><thead><tr><th align="center">Hilt æä¾›ç»„ä»¶</th><th align="center">å¯¹åº”çš„Androidç±»æ´»åŠ¨èŒƒå›´</th><th align="center">ä½œç”¨åŸŸ</th></tr></thead><tbody><tr><td align="center">ApplicationComponent</td><td align="center">Application</td><td align="center">@Singleton</td></tr><tr><td align="center">ActivityRetainedComponent</td><td align="center">ViewModel</td><td align="center">@ActivityRetainedScope</td></tr><tr><td align="center">ActivityComponent</td><td align="center">Activity</td><td align="center">@ActivityScoped</td></tr><tr><td align="center">FragmentComponent</td><td align="center">Fragment</td><td align="center">@FragmentScoped</td></tr><tr><td align="center">ViewComponent</td><td align="center">View</td><td align="center">@ViewScoped</td></tr><tr><td align="center">ViewWithFragmentComponent</td><td align="center">View annotated with @WithFragmentBindings</td><td align="center">@ViewScoped</td></tr><tr><td align="center">ServiceComponent</td><td align="center">Service</td><td align="center">@ServiceScoped</td></tr></tbody></table><blockquote><p><strong>æ³¨æ„</strong></p><p>Hilt æ²¡æœ‰ä¸º broadcast receivers æä¾›ç»„ä»¶ï¼Œå› ä¸ºHiltç›´æ¥ä»ApplicationComponentæ³¨å…¥broadcast receiversã€‚</p></blockquote><p>Hilt ä¼šæ ¹æ®ç›¸åº”çš„ Android ç±»ç”Ÿå‘½å‘¨æœŸè‡ªåŠ¨åˆ›å»ºå’Œé”€æ¯ç”Ÿæˆçš„ç»„ä»¶ç±»çš„å®ä¾‹ã€‚å¦‚ä¸‹ã€‚</p><table><thead><tr><th align="center">Hilt æä¾›çš„ç»„ä»¶</th><th align="center">åˆ›å»ºå¯¹åº”çš„ç”Ÿå‘½å‘¨æœŸ</th><th>é”€æ¯å¯¹åº”çš„ç”Ÿå‘½å‘¨æœŸ</th></tr></thead><tbody><tr><td align="center">ApplicationComponent</td><td align="center">Application#onCreate()</td><td>Application#onDestory()</td></tr><tr><td align="center">ActivityRetainedComponent</td><td align="center">Activity#onCreate()</td><td>Activity#onDestroy()</td></tr><tr><td align="center">ActivityComponent</td><td align="center">Activity#onCreate()</td><td>Activity#OnDestroy()</td></tr><tr><td align="center">FragmentComponent</td><td align="center">Fragment#OnAttach()</td><td>Fragment#onDestroy()</td></tr><tr><td align="center">ViewComponent</td><td align="center">View#super()</td><td>View destroyed</td></tr><tr><td align="center">ViewWithFragmentComponent</td><td align="center">View#super()</td><td>View destroyed</td></tr><tr><td align="center">ServiceComponent</td><td align="center">Service#onCreate()</td><td>Service#onDestroy()</td></tr></tbody></table><h4 id="Provides"><a href="#Provides" class="headerlink" title="@Provides"></a>@Provides</h4><p>å¸¸ç”¨äºè¢« @Module æ³¨è§£æ ‡è®°ç±»çš„å†…éƒ¨æ–¹æ³•ï¼Œå¹¶æä¾›ä¾èµ–é¡¹å¯¹è±¡ã€‚</p><pre><code class="kotlin">@Module@InstallIn(ApplicationComponent::class)// è¿™é‡Œä½¿ç”¨äº† ApplicationComponentï¼Œå› æ­¤ NetworkModule ç»‘å®šåˆ° Application çš„ç”Ÿå‘½å‘¨æœŸã€‚object NetworkModule {    /**     * @Provides å¸¸ç”¨äºè¢« @Module æ³¨è§£æ ‡è®°ç±»çš„å†…éƒ¨çš„æ–¹æ³•ï¼Œå¹¶æä¾›ä¾èµ–é¡¹å¯¹è±¡ã€‚     * @Singleton æä¾›å•ä¾‹     */    @Provides    @Singleton    fun provideOkHttpClient(): OkHttpClient {        return OkHttpClient.Builder()            .build()    }}</code></pre><h1 id="Hilt-åŒ-ç¬¬ä¸‰æ–¹ç»„ä»¶ä¸€èµ·ä½¿ç”¨"><a href="#Hilt-åŒ-ç¬¬ä¸‰æ–¹ç»„ä»¶ä¸€èµ·ä½¿ç”¨" class="headerlink" title="Hilt åŒ ç¬¬ä¸‰æ–¹ç»„ä»¶ä¸€èµ·ä½¿ç”¨"></a>Hilt åŒ ç¬¬ä¸‰æ–¹ç»„ä»¶ä¸€èµ·ä½¿ç”¨</h1><p>å¦‚æœä½ è¦åœ¨é¡¹ç›®ä¸­æ·»åŠ ç¬¬ä¸‰æ–¹ä¾èµ–ï¼Œéœ€è¦ä½¿ç”¨@Moduleæ³¨è§£ï¼Œä½¿ç”¨@Moduleæ³¨è§£çš„æ™®é€šç±»ï¼Œåœ¨å…¶ä¸­åˆ›å»ºç¬¬ä¸‰æ–¹ä¾èµ–çš„å¯¹è±¡ã€‚</p><pre><code class="kotlin">@Module@InstallIn(ApplicationComponent::class)// è¿™é‡Œä½¿ç”¨äº† ApplicationComponentï¼Œå› æ­¤ NetworkModule ç»‘å®šåˆ° Application çš„ç”Ÿå‘½å‘¨æœŸã€‚object NetworkModule {    /**     * @Provides å¸¸ç”¨äºè¢« @Module æ³¨è§£æ ‡è®°ç±»çš„å†…éƒ¨çš„æ–¹æ³•ï¼Œå¹¶æä¾›ä¾èµ–é¡¹å¯¹è±¡ã€‚     * @Singleton æä¾›å•ä¾‹     */    @Provides    @Singleton    fun provideOkHttpClient(): OkHttpClient {        return OkHttpClient.Builder()            .build()    }    @Provides    @Singleton    fun provideRetrofit(okHttpClient: OkHttpClient): Retrofit {        return Retrofit.Builder()            .client(okHttpClient)            .baseUrl(&quot;https://api.github.com/&quot;)            .addConverterFactory(GsonConverterFactory.create())            .build()    }    @Provides    @Singleton    fun provideGitHubService(retrofit: Retrofit): GitHubService {        return retrofit.create(GitHubService::class.java)    }}</code></pre><ul><li>@Module å¸¸ç”¨äºåˆ›å»ºä¾èµ–ç±»å¯¹è±¡ï¼ˆå¦‚OkHttpã€Retrofitç­‰ç­‰ï¼‰ã€‚</li><li>ä½¿ç”¨ @Moduleæ³¨å…¥çš„ç±»ï¼Œéœ€è¦ä½¿ç”¨@InstallInæ³¨è§£æŒ‡å®šmoduleçš„èŒƒå›´ï¼Œä¼šç»‘å®šåˆ°Androidç±»å¯¹åº”çš„ç”Ÿå‘½å‘¨æœŸä¸Šã€‚</li><li>@Provides å¸¸ç”¨äºæ ‡è®°ç±»çš„å†…éƒ¨æ–¹æ³•ï¼Œå¹¶æä¾›ä¾èµ–é¡¹å¯¹è±¡ã€‚</li></ul><h1 id="å½“éœ€è¦ä¸Šä¸‹æ–‡æ˜¯ä½¿ç”¨çš„æ³¨è§£ï¼ˆé¢„å®šä¹‰é™å®šç¬¦ï¼‰"><a href="#å½“éœ€è¦ä¸Šä¸‹æ–‡æ˜¯ä½¿ç”¨çš„æ³¨è§£ï¼ˆé¢„å®šä¹‰é™å®šç¬¦ï¼‰" class="headerlink" title="å½“éœ€è¦ä¸Šä¸‹æ–‡æ˜¯ä½¿ç”¨çš„æ³¨è§£ï¼ˆé¢„å®šä¹‰é™å®šç¬¦ï¼‰"></a>å½“éœ€è¦ä¸Šä¸‹æ–‡æ˜¯ä½¿ç”¨çš„æ³¨è§£ï¼ˆé¢„å®šä¹‰é™å®šç¬¦ï¼‰</h1><p>â€‹    HIltæä¾›äº†é¢„å®šä¹‰é™å®šç¬¦ã€‚ä¾‹å¦‚ï¼Œå½“ä½ éœ€è¦ä½¿ç”¨åº”ç”¨æˆ–è€…Activityçš„Contextç±»æ—¶ï¼ŒHiltæä¾›äº†<strong>@ApplicationContext</strong>å’Œ<strong>@ActivityContext</strong>é™å®šç¬¦ã€‚</p><p>å‡å¦‚,å½“å‰è¿™ä¸ªç±»éœ€è¦Activityçš„ä¸Šä¸‹æ–‡ã€‚</p><pre><code class="kotlin">class Test @Inject constructor(    @ActivityContext private val context: Context,    private val service: AnalyticsService) { ... }</code></pre><h4 id="å¼•ç”¨ï¼š"><a href="#å¼•ç”¨ï¼š" class="headerlink" title="å¼•ç”¨ï¼š"></a><strong>å¼•ç”¨</strong>ï¼š</h4><p><a href="https://juejin.im/post/6844904198803292173?utm_source=gold_browser_extension#heading-13" target="_blank" rel="noopener">Jetpack æ–°æˆå‘˜ Hilt å®è·µï¼ˆä¸€ï¼‰å¯ç¨‹è¿‡å‘è®°</a></p><p><a href="https://juejin.im/post/6845166890562617352" target="_blank" rel="noopener">Jetpack æ–°æˆå‘˜ Hilt ä¸ Dagger å¤§ä¸åŒï¼ˆä¸‰ï¼‰è½åœ°ç¯‡</a></p><p><a href="https://developer.android.com/training/dependency-injection/hilt-android?hl=zh-cn" target="_blank" rel="noopener">Hilt ä¸­çš„é¢„å®šä¹‰é™å®šç¬¦</a></p><p><a href="https://muyangmin.github.io/glide-docs-cn/javadocs/400/index-all.html" target="_blank" rel="noopener">JavaDoc-Glide</a></p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> Dagger </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¦‚ä½•è®©Firebaseä½¿ç”¨Kotlinåç¨‹</title>
      <link href="/2020/11/08/%E5%A6%82%E4%BD%95%E8%AE%A9Firebase%E4%BD%BF%E7%94%A8Kotlin%E5%8D%8F%E7%A8%8B/"/>
      <url>/2020/11/08/%E5%A6%82%E4%BD%95%E8%AE%A9Firebase%E4%BD%BF%E7%94%A8Kotlin%E5%8D%8F%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<p><strong>å¼•ç”¨ï¼š</strong></p><p>â€‹    <a href="https://medium.com/better-programming/how-to-use-kotlin-coroutines-with-firebase-6f8577a3e00f" target="_blank" rel="noopener">How to Use Kotlin Coroutines With Firebase</a></p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> Kotlin </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Firebase è®²è§£</title>
      <link href="/2020/10/29/Firebase-%E8%AE%B2%E8%A7%A3/"/>
      <url>/2020/10/29/Firebase-%E8%AE%B2%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h1 id="AndroidStudio-æ·»åŠ -Firebase-é€‰é¡¹"><a href="#AndroidStudio-æ·»åŠ -Firebase-é€‰é¡¹" class="headerlink" title="AndroidStudio æ·»åŠ  Firebase é€‰é¡¹"></a>AndroidStudio æ·»åŠ  Firebase é€‰é¡¹</h1><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201029230255.png" alt="ä½¿ç”¨æ—¶å¯èƒ½ä¼šæ²¡æœ‰ firebase é€‰é¡¹"></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201029230927.png" alt="settings æ·»åŠ  plug-in"></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201029231529.png" alt="é€‰æ‹©æ·»åŠ  Firebase Services"></p><h1 id="åˆ›å»º-Firebase-é¡¹ç›®-æ·»åŠ åˆ°-Android-é¡¹ç›®ä¸­"><a href="#åˆ›å»º-Firebase-é¡¹ç›®-æ·»åŠ åˆ°-Android-é¡¹ç›®ä¸­" class="headerlink" title="åˆ›å»º Firebase é¡¹ç›® æ·»åŠ åˆ° Android é¡¹ç›®ä¸­"></a>åˆ›å»º Firebase é¡¹ç›® æ·»åŠ åˆ° Android é¡¹ç›®ä¸­</h1><blockquote><p>å‡†å¤‡å¥½ google è´¦å·</p></blockquote><p><strong>æ‰“å¼€ Firebase</strong></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/2020-11-2-0.gif" alt=""></p><p><strong>è¿›å…¥æ§åˆ¶å°</strong></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201102004348.png" alt=""></p><p><strong>é€‰æ‹©é¡¹ç›®åç§°</strong></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201102004431.png" alt="create a firebase"></p><p><strong>ç»§ç»­</strong></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201102004513.png" alt=""></p><p><strong>é€‰æ‹©é»˜è®¤è´¦æˆ·æˆ–è€…åˆ›å»º</strong></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201102004549.png" alt=""></p><p><strong>ç¨ç­‰ç‰‡åˆ»</strong></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201102004649.png" alt=""></p><p><strong>å®Œæˆ</strong></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201102004812.png" alt=""></p><p><strong>æ ¹æ®æç¤ºåœ¨Androidé¡¹ç›®ä¸­æ·»åŠ å„ä¸ªSDK</strong></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20210702135922.png" alt=""></p><p><strong>ä½¿ç”¨ Cloud Storageçš„è¯éœ€è¦æ·»åŠ SDKåˆ°åº”ç”¨</strong></p><pre><code class="groovy">dependencies {    // Import the BoM for the Firebase platform    implementation platform(&#39;com.google.firebase:firebase-bom:28.1.0&#39;)    // Declare the dependency for the Cloud Storage library    // When using the BoM, you don&#39;t specify versions in Firebase library dependencies    implementation &#39;com.google.firebase:firebase-storage-ktx&#39;}</code></pre><h1 id="åˆ é™¤-Firebase-é¡¹ç›®"><a href="#åˆ é™¤-Firebase-é¡¹ç›®" class="headerlink" title="åˆ é™¤ Firebase é¡¹ç›®"></a>åˆ é™¤ Firebase é¡¹ç›®</h1><p><strong>ç‚¹å‡»è®¾ç½®</strong></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201102004958.png" alt=""></p><p><strong>é€‰æ‹©é¡¹ç›®è®¾ç½®</strong></p><p><strong>ç¿»åˆ°æœ€åº•éƒ¨</strong></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201102005205.png" alt=""></p><p><strong>åˆ é™¤é¡¹ç›®ã€‚</strong></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201102005613.png" alt=""></p><h1 id="åœ¨-CloudFireStoreä¸­æ·»åŠ -å…ƒæ•°æ®"><a href="#åœ¨-CloudFireStoreä¸­æ·»åŠ -å…ƒæ•°æ®" class="headerlink" title="åœ¨ CloudFireStoreä¸­æ·»åŠ  å…ƒæ•°æ®"></a>åœ¨ CloudFireStoreä¸­æ·»åŠ  å…ƒæ•°æ®</h1><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201104131055.png" alt="é€‰æ‹©Cloud Firestore"></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201104131130.png" alt="ç‚¹å‡» â€œå¼€å§‹æ”¶é›†â€"></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201104131210.png" alt="æ·»åŠ  é›†åˆåå­—"></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201104131719.png" alt="æ·»åŠ  æ–‡æ¡£ç§°å‘¼"></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201104131546.png" alt="ç‚¹å‡»æ·»åŠ å­—æ®µ ç›´æ¥æ·»åŠ å­—æ®µå³å¯"></p><h1 id="å°†-Storageä¸­çš„æ•°æ®é“¾æ¥æ·»åŠ åˆ°å…ƒæ•°æ®ä¸­"><a href="#å°†-Storageä¸­çš„æ•°æ®é“¾æ¥æ·»åŠ åˆ°å…ƒæ•°æ®ä¸­" class="headerlink" title="å°† Storageä¸­çš„æ•°æ®é“¾æ¥æ·»åŠ åˆ°å…ƒæ•°æ®ä¸­"></a>å°† Storageä¸­çš„æ•°æ®é“¾æ¥æ·»åŠ åˆ°å…ƒæ•°æ®ä¸­</h1><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201104131958.png" alt="ç‚¹å‡»ä¸Šä¼ æ–‡ä»¶"></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/2020-11-4-2.gif" alt="é€‰æ‹©è¦æ·»åŠ çš„å…ƒæ•°æ®è¿æ¥"></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201104152013.png" alt="ç²˜è´´å³å¯"></p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>EC</title>
      <link href="/2020/10/29/EC/"/>
      <url>/2020/10/29/EC/</url>
      
        <content type="html"><![CDATA[<h3 id="åŸºæœ¬çš„è¯­æ³•æ¦‚å¿µï¼šè¯æ€§-ï¼Œä¸€ä¸ªå•æ¬¡çš„åˆ†ç±»"><a href="#åŸºæœ¬çš„è¯­æ³•æ¦‚å¿µï¼šè¯æ€§-ï¼Œä¸€ä¸ªå•æ¬¡çš„åˆ†ç±»" class="headerlink" title="åŸºæœ¬çš„è¯­æ³•æ¦‚å¿µï¼šè¯æ€§ ï¼Œä¸€ä¸ªå•æ¬¡çš„åˆ†ç±»"></a>åŸºæœ¬çš„è¯­æ³•æ¦‚å¿µï¼šè¯æ€§ ï¼Œä¸€ä¸ªå•æ¬¡çš„åˆ†ç±»</h3><p><strong>è‹±è¯­å•è¯å…±åˆ†ä¸¤ç±»:</strong>è™šè¯å’Œå®è¯</p><p>è™šè¯ï¼šæ²¡æœ‰å…·ä½“å«ä¹‰ã€‚</p><p>å®è¯ï¼šæœ‰å®é™…çš„æ„ä¹‰ã€‚</p><h4 id="è™šè¯"><a href="#è™šè¯" class="headerlink" title="è™šè¯"></a>è™šè¯</h4><p>è™šè¯å…±åˆ†ä¸¤ç±»ï¼š </p><blockquote><p>ä»‹è¯ï¼š in at on ï¼ˆå¯ç¿»è¯‘ä¸º åœ¨ï¼‰</p><p>è¿è¯ï¼šend but or ï¼ˆå’Œã€ä½†æ˜¯ã€æˆ–è€…ï¼‰</p></blockquote><h4 id="å®è¯"><a href="#å®è¯" class="headerlink" title="å®è¯"></a>å®è¯</h4><p>å®è¯å…±åˆ†å››å¤§ç±»ï¼š</p><blockquote><p>åè¯ï¼šç”¨æ¥è¡¨è¾¾ä¸€ä»¶ä¸œè¥¿çš„åç§°çš„è¯ã€‚ï¼ˆèŠ±ã€è‰ã€æ ‘æœ¨ç­‰éƒ½è¡¨ç¤ºåè¯ï¼‰</p><p>åŠ¨è¯ï¼šè¡¨ç¤ºè¿åŠ¨çš„è¯ã€‚ï¼ˆè·‘ã€è¹²ä¸‹ï¼‰</p><p>å½¢å®¹è¯ï¼šç”¨æ¥ä¿®é¥°åè¯çš„è¯ã€‚ï¼ˆç¾ä¸½çš„å¥³å­©ã€‚ç¾ä¸½å½¢å®¹è¯ï¼‰</p><p>å‰¯è¯ï¼šè¾…åŠ©ä½œç”¨çš„è¯ã€‚è¡¨è¡Œä¸ºæˆ–è€…çŠ¶æ€ã€‚ï¼ˆä¿®é¥°åè¯ä»¥å¤–æ‰€æœ‰çš„è¯ã€‚<strong>å¤§å£°</strong>çš„å”±æ­Œï¼‰</p></blockquote><h4 id="ä¸å®šæ—¶"><a href="#ä¸å®šæ—¶" class="headerlink" title="ä¸å®šæ—¶"></a>ä¸å®šæ—¶</h4><blockquote><p>to do</p></blockquote><h3 id="åŸºæœ¬çš„è¯­æ³•æ¦‚å¿µï¼šå¥å­æˆåˆ†"><a href="#åŸºæœ¬çš„è¯­æ³•æ¦‚å¿µï¼šå¥å­æˆåˆ†" class="headerlink" title="åŸºæœ¬çš„è¯­æ³•æ¦‚å¿µï¼šå¥å­æˆåˆ†"></a>åŸºæœ¬çš„è¯­æ³•æ¦‚å¿µï¼šå¥å­æˆåˆ†</h3><p><strong>æ³¨æ„ï¼š</strong>å¥å­æˆåˆ†å’Œè¯æ€§æ˜¯ä¸ä¸€æ ·çš„ã€‚</p><h1 id="è‹±è¯­çš„äº”å¤§å¥å‹"><a href="#è‹±è¯­çš„äº”å¤§å¥å‹" class="headerlink" title="è‹±è¯­çš„äº”å¤§å¥å‹"></a>è‹±è¯­çš„äº”å¤§å¥å‹</h1><h2 id="ç³»åŠ¨è¯-ä¸»è¯­-ç³»åŠ¨è¯-è¡¨è¯­"><a href="#ç³»åŠ¨è¯-ä¸»è¯­-ç³»åŠ¨è¯-è¡¨è¯­" class="headerlink" title="ç³»åŠ¨è¯ ä¸»è¯­+ç³»åŠ¨è¯+è¡¨è¯­"></a>ç³»åŠ¨è¯ ä¸»è¯­+ç³»åŠ¨è¯+è¡¨è¯­</h2><h3 id="ä»€ä¹ˆæ˜¯ä¸»ç³»è¡¨ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯ä¸»ç³»è¡¨ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ä¸»ç³»è¡¨ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯<strong>ä¸»ç³»è¡¨</strong>ï¼Ÿ</h3><ul><li>ä¸»ï¼šå¥å­çš„ä¸»ä½“ã€‚</li><li>ç³»ï¼šç³»åŠ¨è¯ï¼Œç‰¹æ®Šçš„åŠ¨è¯ï¼ˆç‰¹æ®Šçš„è°“è¯­å±äºåŠ¨è¯çš„ä¸€ç§ï¼‰ï¼Œ<strong>åœ¨å¥å­ä¸­åšè°“è¯­çš„åŠ¨è¯æ²¡æœ‰å®é™…æ„ä¹‰å°±å±äºç³»åŠ¨è¯ã€‚</strong></li></ul><blockquote><p>æ±‰è¯­ä¸­è¡¨ç¤º â€œæ˜¯â€ â€œä¸ºâ€ï¼Œè‹±è¯­ä¸­è¡¨ç¤º amï¼Œis ï¼Œareã€‚</p><p>åœ¨å¥å­ä¸­èµ·è”ç³»çš„ä½œç”¨å°±å«åšç³»åŠ¨è¯ã€‚</p><p>linking verb è”ç³»åŠ¨è¯</p></blockquote><ul><li>è¡¨ï¼š</li></ul><blockquote><p>è¡¨è¯­ã€‚<strong>è¡¥å……è¯´æ˜ä¸»è¯­çš„æ€§è´¨å«åšè¡¨è¯­</strong>ã€‚</p></blockquote><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201030150702.png" alt=""></p><p><strong>å¦‚ä½•åˆ¤æ–­å¥å­æ˜¯å¦æ˜¯ä¸»ç³»è¡¨ç»“æ„</strong></p><blockquote><p>ç”¨ä¸­æ–‡çš„æ–¹å¼åˆ¤æ–­å¥å­é‡Œçš„è°“è¯­ï¼Œå¯å¦ä½¿ç”¨â€œæ˜¯â€ï¼Œæˆ–è€…â€œä¸ºâ€æ¥ç¿»è¯‘ã€‚</p></blockquote><p>åˆ—å¦‚ï¼š</p><blockquote><p>I am a good persion</p><p>am å¯ä»¥ç†è§£ä¸º â€œæ˜¯â€ã€‚è¿™æ˜¯ä¸»ç³»è¡¨</p><p>I become a good persion</p><p>become ç†è§£ä¸º â€œæˆä¸ºâ€  â€œä¸ºâ€ã€‚ä¹Ÿæ˜¯ä¸»ç³»è¡¨ç»“æ„</p></blockquote><h3 id="ç³»åŠ¨è¯å…±åˆ†ç±»å››ç±»"><a href="#ç³»åŠ¨è¯å…±åˆ†ç±»å››ç±»" class="headerlink" title="ç³»åŠ¨è¯å…±åˆ†ç±»å››ç±»"></a>ç³»åŠ¨è¯å…±åˆ†ç±»å››ç±»</h3><h4 id="1-be-åŠ¨è¯-ï¼ˆamã€-isã€-areã€è¿‡å»-wasã€were-ã€å°†æ¥-willã€beï¼‰"><a href="#1-be-åŠ¨è¯-ï¼ˆamã€-isã€-areã€è¿‡å»-wasã€were-ã€å°†æ¥-willã€beï¼‰" class="headerlink" title="1.be åŠ¨è¯ ï¼ˆamã€ isã€ areã€è¿‡å» wasã€were ã€å°†æ¥ willã€beï¼‰"></a>1.be åŠ¨è¯ ï¼ˆamã€ isã€ areã€è¿‡å» wasã€were ã€å°†æ¥ willã€beï¼‰</h4><p>amã€ isã€ are</p><p>è¿‡å» wasã€were </p><p>å°†æ¥ willã€be</p><h5 id="BeåŠ¨è¯åè·Ÿä¸‰å¤§ç±»-è¡¨è¯­"><a href="#BeåŠ¨è¯åè·Ÿä¸‰å¤§ç±»-è¡¨è¯­" class="headerlink" title="BeåŠ¨è¯åè·Ÿä¸‰å¤§ç±» è¡¨è¯­"></a>BeåŠ¨è¯åè·Ÿä¸‰å¤§ç±» è¡¨è¯­</h5><ul><li><strong>åè¯</strong></li></ul><blockquote><p><strong>åè¯åšè¡¨è¯­</strong>ï¼Œå¯ä»¥åŒæ±‰è¯­å®Œå…¨å¯¹åº”ï¼Œ<strong>be åŠ¨è¯ç¿»è¯‘æˆæ±‰è¯­çš„æ˜¯</strong>ã€‚</p></blockquote><p>Tim is an engineer</p><p>è’‚å§†æ˜¯ä¸ªå·¥ç¨‹å¸ˆ</p><p>The price is a Â£ 2000</p><p>ä»·æ ¼æ˜¯ 2000 è‹±é•‘</p><ul><li><strong>å½¢å®¹è¯</strong></li></ul><blockquote><p>å’Œæ±‰è¯­ä¸åŒï¼Œ<strong>be åŠ¨è¯ä¸ä¼šè¢«ç¿»è¯‘å‡ºæ¥</strong>ï¼Œ<strong>ç›´æ¥è¢«çœç•¥ä»‹è¯çŸ­è¯­ä¹Ÿç›¸å½“äºå½¢å®¹è¯ã€‚</strong></p></blockquote><p>The play was very interesting.</p><p>æˆå¾ˆæœ‰æ„æ€</p><blockquote><p>The playï¼šæˆå‰§ã€æˆ</p><p>was very interestingï¼šå¾ˆæœ‰æ„æ€</p></blockquote><p>The milk is in the refrigerator.</p><p>ç‰›å¥¶åœ¨å†°ç®±é‡Œ</p><blockquote><p>in the refrigeratorï¼šåœ¨å†°ç®±é‡Œï¼Œç”¨æ¥å½¢å®¹ The milk ï¼ˆç‰›å¥¶ï¼‰ã€‚ä»‹è¯çŸ­è¯­å¯ä»¥ç”¨æ¥åšå½¢å®¹è¯</p><p>è¿™æ˜¯<strong>ä¸»ç³»è¡¨</strong>ç»“æ„</p></blockquote><ul><li><strong>åœ°ç‚¹å‰¯è¯</strong>    </li></ul><blockquote><p>åªèƒ½æ¥<strong>åœ°ç‚¹åŠ¨è¯</strong>ã€‚</p></blockquote><p>Your sister is here there daysã€‚</p><p>ä½ å§å§è¿™æ®µåœ¨è¿™å„¿ã€‚</p><h4 id="2-çŠ¶æ€ä¿æŒåŠ¨è¯-ï¼ˆkeepã€remainã€stayï¼‰"><a href="#2-çŠ¶æ€ä¿æŒåŠ¨è¯-ï¼ˆkeepã€remainã€stayï¼‰" class="headerlink" title="2.çŠ¶æ€ä¿æŒåŠ¨è¯ ï¼ˆkeepã€remainã€stayï¼‰"></a>2.çŠ¶æ€ä¿æŒåŠ¨è¯ ï¼ˆkeepã€remainã€stayï¼‰</h4><blockquote><p>è¿™ä¸‰ä¸ªè¯ååªèƒ½åŠ <strong>å½¢å®¹è¯ä½œè¡¨è¯­</strong>ï¼Œå¯ä»¥å’Œ be æ— é™åˆ‡æ¢ã€‚</p></blockquote><p>you should <strong>keep</strong> quietï¼ï¼ˆyou should <strong>be</strong> quietï¼ï¼‰</p><p>ä½ åº”è¯¥ä¿æŒå®‰é™ï¼</p><p>No one can <strong>remain</strong> youthful forever ï¼ˆNo one can <strong>be</strong> youthful foreverï¼‰</p><p>æ²¡æœ‰äººèƒ½æ°¸è‘†é’æ˜¥</p><p>The weather <strong>stayed</strong> fine for a week ï¼ˆThe weather <strong>was</strong> fine for a week ã€‚wasï¼šè¿‡å»å¼ï¼‰</p><p>è¿™ä¸ªæ˜ŸæœŸå¤©æ°”ä¸€ç›´å¾ˆå¥½ã€‚</p><h4 id="3-çŠ¶æ€è½¬å˜ç±»åŠ¨è¯ï¼ˆbecomeã€getã€goã€comeã€growã€turnï¼‰"><a href="#3-çŠ¶æ€è½¬å˜ç±»åŠ¨è¯ï¼ˆbecomeã€getã€goã€comeã€growã€turnï¼‰" class="headerlink" title="3.çŠ¶æ€è½¬å˜ç±»åŠ¨è¯ï¼ˆbecomeã€getã€goã€comeã€growã€turnï¼‰"></a>3.çŠ¶æ€è½¬å˜ç±»åŠ¨è¯ï¼ˆbecomeã€getã€goã€comeã€growã€turnï¼‰</h4><ul><li><strong>become</strong>æ˜¯ä¸€ä¸ªä¸‡èƒ½è¯ï¼Œæ—¢å¯ä»¥è¡¨ç¤ºâ€œå˜æˆâ€ï¼Œè¿™æ—¶å€™åé¢åªèƒ½æ¥åè¯ã€‚åŒæ—¶ä¹Ÿå¯ä»¥è¡¨ç¤ºâ€œ<strong>å˜å¾—</strong>â€ï¼Œåé¢æ¥å½¢å®¹è¯ã€‚</li></ul><p>He <strong>become</strong> a weather.</p><p>ä»–æˆä¸ºäº†ä¸€åæ•™å¸ˆã€‚</p><p>He <strong>become</strong> very nervous.</p><p>ä»–å˜å¾—å¾ˆç´§å¼ ã€‚</p><ul><li><strong>get</strong>è¡¨ç¤ºâ€œå˜å¾—æ€æ ·â€,åè¾¹è¿™èƒ½æ¥å½¢å®¹è¯ã€‚</li></ul><p>He got very angry.</p><p>ä»–å˜å¾—éå¸¸ç”Ÿæ°”</p><ul><li>come è¿™ä¸ªè¯çš„æœ¬æ„æ˜¯æ¥ï¼Œä»€ä¹ˆä¸œè¥¿ä¼šæ¥ï¼Œå½“ç„¶æ˜¯å¥½çš„ä¸œè¥¿ï¼Œæ‰€ä»¥ä¸€èˆ¬comeå«æœ‰â€œå˜å¥½â€çš„æ„æ€ã€‚</li></ul><p>Thing will <strong>come</strong> right.</p><p>äº‹æƒ…ä¼šå˜å¥½ã€‚</p><ul><li><strong>go</strong> è¡¨ç¤ºèµ°ï¼Œä½ å¸Œæœ›çš„ä¸œè¥¿ä½ ç¦»è€Œå»ï¼Ÿå½“ç„¶æ˜¯åçš„ä¸œè¥¿ç¦»ä½ è€Œå»ï¼Œæ‰€ä»¥è¡¨è¾¾â€œå˜åâ€ï¼Œå¯ä»¥ç”¨go</li></ul><p>The meat always <strong>goes</strong> bad in summer.</p><p>è‚‰åœ¨å¤å¤©å¸¸å¸¸ä¼šå˜å</p><ul><li>å¦‚æœä½ è¦è¡¨ç¤ºâ€œæ…¢æ…¢å˜â€ï¼Œä½¿ç”¨ <strong>grow</strong>ï¼Œæœ¬æ„è¡¨ç¤º grow æ˜¯ç”Ÿé•¿çš„æ„æ€ï¼Œæ…¢æ…¢é•¿å¤§ã€‚</li></ul><p>The weather <strong>grew</strong> cold in the night.</p><p>æ™šä¸Šå¤©æ°”æ…¢æ…¢å˜å†·ã€‚</p><ul><li>è¦è¡¨è¾¾<strong>â€œå¿«é€Ÿå˜â€</strong>ï¼Œåº”è¯¥ç”¨turnã€‚å› ä¸ºturnæœ¬æ„ä¸ºè½¬èº«ï¼Œä¸€ä¸‹å­è½¬è¿‡å»</li></ul><p>His face <strong>turned</strong> pale.</p><p>ä»–è„¸è‰²å˜å¾—è‹ç™½</p><h4 id="4-æ„Ÿå®˜åŠ¨è¯ï¼ˆlookã€soundã€smellã€tasteã€feelï¼‰"><a href="#4-æ„Ÿå®˜åŠ¨è¯ï¼ˆlookã€soundã€smellã€tasteã€feelï¼‰" class="headerlink" title="4.æ„Ÿå®˜åŠ¨è¯ï¼ˆlookã€soundã€smellã€tasteã€feelï¼‰"></a>4.æ„Ÿå®˜åŠ¨è¯ï¼ˆlookã€soundã€smellã€tasteã€feelï¼‰</h4><blockquote><p>äº”ä¸ªåŠ¨è¯ï¼Œä¸€å¾‹ç¿»è¯‘ä¸º â€œâ€¦èµ·æ¥â€ï¼Œâ€œçœ‹èµ·æ¥ï¼Œå¬èµ·æ¥ï¼Œé—»èµ·æ¥ï¼Œå°èµ·æ¥ï¼Œæ„Ÿè§‰èµ·æ¥ï¼ˆæ„Ÿåˆ°ï¼‰â€ï¼Œåé¢åªèƒ½æ¥å½¢å®¹è¯ï¼ˆç›¸å½“äºå½¢å®¹è¯çš„åˆ†è¯ï¼‰ä½œè¡¨è¯­ã€‚</p></blockquote><p>I <strong>felt</strong> very nervous when I went into this office.</p><p>æˆ‘èµ°åˆ°ä»–çš„åŠå…¬å®¤ï¼Œæ„Ÿåˆ°éå¸¸ç´§å¼ ã€‚</p><p>He <strong>looked</strong> very angry.</p><p>ä»–çœ‹ä¸Šå»éå¸¸æ°”æ„¤ã€‚</p><p>They were all hungry and the food <strong>smelled</strong> good.ï¼ˆwereï¼šbeåŠ¨è¯è¿‡å»å¼ï¼Œå¯ä»¥ä¸åšç¿»è¯‘ï¼‰</p><p>ä»–ä»¬å…¨éƒ½é¥¿äº†ï¼Œé¥­èœæ•£å‘å‡ºé˜µé˜µé¦™æ°”ã€‚</p><p>The sun <strong>looks like</strong> an orange globe.</p><p>å¤ªé˜³çœ‹ä¸Šå»åƒæ©™è‰²çš„çƒä½“ã€‚</p><blockquote><p>ğŸ‘† æ„Ÿå®˜åŠ¨è¯åï¼Œç»ä¸èƒ½ç›´æ¥åŠ åè¯åšè¡¨è¯­ï¼Œå¦‚æœè¦åŠ åè¯ï¼Œå¿…é¡»ç”¨ï¼š<strong>æ„Ÿå®˜åŠ¨è¯+ä»‹è¯like+åè¯</strong>ï¼Œæ­¤æ—¶ç¿»è¯‘ä¸ºâ€œåƒâ€¦â€ã€‚</p></blockquote><h3 id="ç»ƒä¹ é¢˜"><a href="#ç»ƒä¹ é¢˜" class="headerlink" title="ç»ƒä¹ é¢˜"></a>ç»ƒä¹ é¢˜</h3><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201030230419.png" alt="å¥å­"></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201030230512.png" alt="ç­”æ¡ˆ"></p><h2 id="ä¸åŠç‰©åŠ¨è¯-ä¸»è¯­-è°“è¯­"><a href="#ä¸åŠç‰©åŠ¨è¯-ä¸»è¯­-è°“è¯­" class="headerlink" title="ä¸åŠç‰©åŠ¨è¯ ä¸»è¯­+è°“è¯­"></a>ä¸åŠç‰©åŠ¨è¯ ä¸»è¯­+è°“è¯­</h2><h3 id="ä»€ä¹ˆæ˜¯ä¸»-è°“ç»“æ„ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯ä¸»-è°“ç»“æ„ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ä¸»+è°“ç»“æ„ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ä¸»+è°“ç»“æ„ï¼Ÿ</h3><blockquote><p>é€šå¸¸ä¸»è°“ååº”è¯¥åŠ å®¾è¯­ã€‚å½“ä¸»è°“åŠ åœ¨ä¸€èµ·ä¹Ÿå¯ä»¥ä½œä¸ºä¸€ä¸ªå¥å­ã€‚</p><p>ä¾‹å¦‚ï¼šæˆ‘ç¬‘äº† </p><p>â€œæˆ‘â€å’ŒåŠ¨è¯â€œç¬‘äº†â€ç»„æˆäº†å¥å­ï¼Œâ€œæˆ‘â€æ˜¯ä¸»è¯­ï¼Œâ€œç¬‘äº†â€æ˜¯è°“è¯­ï¼Œâ€œç¬‘äº†â€æ˜¯ä¸åŠç‰©åŠ¨è¯æ‰€ä»¥å°±ç»„æˆäº†å¥å­ã€‚</p><p>æ±‰è¯­ï¼šæˆ‘è·³èˆå¥¹ã€‚</p><p>è‹±è¯­ï¼šI dance her.</p><p>ä¸»è°“ç»“æ„åŒæ±‰è¯­ç›¸åŒã€‚åœ¨æ±‰è¯­ä¸­ æˆ‘è·³èˆå¥¹ æ˜¯ä¸åˆç†çš„åŒæ ·è‹±è¯­è¿™æ ·è¡¨è¾¾ä¹Ÿæ˜¯ä¸åˆç†çš„ã€‚</p><p>I dance.</p></blockquote><h3 id="è°“è¯­"><a href="#è°“è¯­" class="headerlink" title="è°“è¯­"></a>è°“è¯­</h3><p><em>åè¯</em></p><ol><li>è¯­æ³•å­¦ä¸­æŒ‡å¯¹ä¸»è¯­åŠ ä»¥é™ˆè¿°çš„æˆåˆ†ï¼Œè¡¨ç¤ºä¸»è¯­ã€Œæ€ä¹ˆæ ·ã€æˆ–ã€Œæ˜¯ä»€ä¹ˆã€ã€‚ä¸€èˆ¬çš„å¥å­éƒ½åŒ…æ‹¬ä¸»è¯­ã€è°“è¯­ï¼Œæ±‰è¯­ä¸­è°“è¯­ä¸€èˆ¬åœ¨ä¸»è¯­åé¢ã€‚å¦‚ã€Œæˆ‘æ˜¯å­¦ç”Ÿã€ä¸­ã€Œæ˜¯å­¦ç”Ÿã€æ˜¯è°“è¯­ã€‚</li></ol><h3 id="å‡ºç°ä¸»è°“ç»“æ„çš„åŸå› ï¼"><a href="#å‡ºç°ä¸»è°“ç»“æ„çš„åŸå› ï¼" class="headerlink" title="å‡ºç°ä¸»è°“ç»“æ„çš„åŸå› ï¼"></a>å‡ºç°ä¸»è°“ç»“æ„çš„åŸå› ï¼</h3><blockquote><p>å› ä¸ºæœ‰ä¸åŠç‰©åŠ¨è¯ã€‚</p><p>å…¶ä¸­<strong>ä¸åŠç‰©åŠ¨è¯ç»„æˆä¸»è°“ç»“æ„</strong>ã€‚</p></blockquote><h3 id="ä»€ä¹ˆæ˜¯ä¸åŠç‰©åŠ¨è¯ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯ä¸åŠç‰©åŠ¨è¯ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ä¸åŠç‰©åŠ¨è¯ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ä¸åŠç‰©åŠ¨è¯ï¼Ÿ</h3><blockquote><p>intransitive verbï¼Œç®€ç§°ï¼švi.</p><p>å®ƒæœ¬èº«æ„ä¹‰å°±æ˜¯å®Œå…¨çš„ï¼Œæ²¡æœ‰ä½œç”¨å¯¹è±¡ï¼Œ<strong>ä¸éœ€è¦åŠ å®¾è¯­å°±èƒ½æ„æˆå®Œæ•´å¥å­</strong>ï¼Œä¾‹å¦‚ï¼šæ¸¸æ³³ã€å‡ºç”Ÿã€ç¬‘ã€åšæ¢¦ã€‚</p></blockquote><h3 id="å¦‚ä½•åˆ¤æ–­ä¸åŠç‰©åŠ¨è¯ï¼Ÿ"><a href="#å¦‚ä½•åˆ¤æ–­ä¸åŠç‰©åŠ¨è¯ï¼Ÿ" class="headerlink" title="å¦‚ä½•åˆ¤æ–­ä¸åŠç‰©åŠ¨è¯ï¼Ÿ"></a>å¦‚ä½•åˆ¤æ–­ä¸åŠç‰©åŠ¨è¯ï¼Ÿ</h3><blockquote><p>å¦‚ä½•åˆ¤æ–­ï¼Œ<strong>æŠŠè¿™ä¸ªåŠ¨è¯å‰åŠ ä¸Šâ€œè¢«â€</strong>ï¼Œçœ‹å®ƒçš„å¯“æ„æ˜¯å¦åˆç†ã€‚</p><p>æ­£å¸¸åˆ™ä¸ºåŠç‰©åŠ¨è¯ï¼Œä¸æ­£å¸¸åˆ™ä¸ºä¸åŠç‰©åŠ¨è¯ã€‚</p><p>ä¾‹å¦‚ï¼šè¢«æ‰“ã€è¢«å–œæ¬¢ã€è¢«å¤„ç½šã€‚å¦‚æœè¯´ï¼šè¢«è·³èˆã€è¢«åšæ¢¦ã€è¢«ç¬‘ï¼Œåˆ™ä¸ºä¸åŠç‰©åŠ¨è¯ã€‚</p></blockquote><h4 id="çŠ¶è¯­"><a href="#çŠ¶è¯­" class="headerlink" title="çŠ¶è¯­"></a>çŠ¶è¯­</h4><blockquote><p>è¯´æ˜è¿™ä¸ªåŠ¨ä½œå‘ç”Ÿçš„æ—¶é—´ã€åœ°ç‚¹ã€ç›®çš„ã€ä»¥åŠçŠ¶æ€ç­‰ã€‚</p><p>è¡¨ç¤º æ—¶é—´ã€åœ°ç‚¹å’Œæ–¹å¼çš„å¥å­æˆåˆ†å°±å«åšçŠ¶è¯­ã€‚</p></blockquote><h3 id="æ³¨æ„ï¼š"><a href="#æ³¨æ„ï¼š" class="headerlink" title="æ³¨æ„ï¼š"></a>æ³¨æ„ï¼š</h3><ul><li><strong>è¿™ä¸ªå¥å¼å¤šå¸¦æœ‰çŠ¶è¯­ï¼Œæ¥è¿›ä¸€æ­¥è¯´æ˜è¿™ä¸ªåŠ¨ä½œå‘ç”Ÿçš„æ—¶é—´ï¼Œåœ°ç‚¹ï¼Œç›®çš„ã€‚</strong></li></ul><p>Detectives were waiting at the airport all morning .</p><p>They were talking loudly.</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201031170041.png" alt=""></p><ul><li><strong>å¾ˆå¤šåŠ¨è¯ï¼Œæœ¬èº«æ—¢å¯ä»¥ä½œä¸åŠç‰©åŠ¨è¯ï¼Œä¹Ÿå¯ä»¥åšåŠç‰©åŠ¨è¯ï¼Œé™¤å•¦ä¸Šè¿°æ–¹æ³•å¤–ï¼Œè¿˜è¦åœ¨è¯­å¢ƒä¸­åˆ¤æ–­</strong></li></ul><h3 id="ç»ƒä¹ é¢˜-1"><a href="#ç»ƒä¹ é¢˜-1" class="headerlink" title="ç»ƒä¹ é¢˜"></a>ç»ƒä¹ é¢˜</h3><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201031110943.png" alt="é¢˜ç›®"></p><p>The birds         sing         happily.</p><p>The rain     will stop     in the afternoon.</p><p>The children     are playing         in the park</p><p>My teacher         passed away     in the hospital         yesterday.</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201031162342.png" alt=""></p><h2 id="åŠç‰©åŠ¨è¯-ä¸»è¯­-è°“è¯­-å®¾è¯­"><a href="#åŠç‰©åŠ¨è¯-ä¸»è¯­-è°“è¯­-å®¾è¯­" class="headerlink" title="åŠç‰©åŠ¨è¯ ä¸»è¯­+è°“è¯­+å®¾è¯­"></a>åŠç‰©åŠ¨è¯ ä¸»è¯­+è°“è¯­+å®¾è¯­</h2><h3 id="ä»€ä¹ˆæ˜¯åŠç‰©åŠ¨è¯ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯åŠç‰©åŠ¨è¯ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯åŠç‰©åŠ¨è¯ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯åŠç‰©åŠ¨è¯ï¼Ÿ</h3><blockquote><p><strong>åŠç‰©åŠ¨è¯</strong>ï¼ˆtransitive verb ç®€ç§°ï¼švtï¼‰</p><p>æ„æ€ä¸ºï¼šåŠ å…¥å®¾è¯­ä¹‹åçš„å®Œæ•´åŠ¨è¯ï¼Œåˆ†ä¸ºä¸»åŠ¨å’Œè¢«åŠ¨è¯­æ€ã€‚</p><p>çŸ­è¯­ç›¸å½“äºåŠç‰©åŠ¨è¯æ—¶ä¸ºï¼š<strong>åŠç‰©åŠ¨è¯çŸ­è¯­</strong>ã€‚</p></blockquote><p>Yesterday ï¼Œ    a pigeon         carried     the first     message     from Pinhurst to Slibury.</p><p>æ˜¨å¤©ï¼Œä¸€åªé¸½å­æŠŠç¬¬ä¸€å°ä¿¡ä»å¹³èµ«ç‰¹å¸¦åˆ°é”¡å°”ä¼¯é‡Œ.</p><p>The bird     covered     the distance     in three minutes.</p><p>è¿™åªé¸Ÿåªç”¨äº†ä¸‰åˆ†é’Ÿå°±é£å®Œäº†å…¨ç¨‹ã€‚</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201031163058.png" alt=""></p><p>The bride and the groom cur the wedding cake together.</p><p>æ–°éƒå’Œæ–°å¨˜ä¸€èµ·åˆ‡ä¸‹ç»“å©šè›‹ç³•</p><p>I <strong>had</strong> an amusing experience last year.</p><p>å»å¹´æˆ‘æœ‰ä¸€æ¬¡æœ‰è¶£çš„ç»å†ã€‚</p><p>This wonderful plane can <strong>carry</strong> seven passengers.</p><p>è¿™æ¶å¥‡å¦™çš„é£æœºå¯ä»¥è½½ä¸ƒåä¹˜å®¢</p><h3 id="ç»ƒä¹ é¢˜-2"><a href="#ç»ƒä¹ é¢˜-2" class="headerlink" title="ç»ƒä¹ é¢˜"></a>ç»ƒä¹ é¢˜</h3><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201031171234.png" alt=""></p><p>The teacher put up some pictures on the wall in the classroom.</p><p>You should respect the old in public places.</p><p>He began his diet a week ago.</p><p>He set up a new world record in September 1935</p><p>Only very few people can realize their dreams.</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201031173411.png" alt=""></p><h2 id="ä¸å®Œå…¨åŠç‰©åŠ¨è¯-ä¸»è¯­-è°“è¯­-å®¾è¯­-å®¾è¯­è¡¥è¯­"><a href="#ä¸å®Œå…¨åŠç‰©åŠ¨è¯-ä¸»è¯­-è°“è¯­-å®¾è¯­-å®¾è¯­è¡¥è¯­" class="headerlink" title="ä¸å®Œå…¨åŠç‰©åŠ¨è¯ ä¸»è¯­+è°“è¯­+å®¾è¯­+å®¾è¯­è¡¥è¯­"></a>ä¸å®Œå…¨åŠç‰©åŠ¨è¯ ä¸»è¯­+è°“è¯­+å®¾è¯­+å®¾è¯­è¡¥è¯­</h2><h3 id="ä»€ä¹ˆæ˜¯ä¸å®Œå…¨åŠç‰©åŠ¨è¯ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯ä¸å®Œå…¨åŠç‰©åŠ¨è¯ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ä¸å®Œå…¨åŠç‰©åŠ¨è¯ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ä¸å®Œå…¨åŠç‰©åŠ¨è¯ï¼Ÿ</h3><blockquote><p>ä¸å®Œå…¨åŠç‰©åŠ¨è¯ incomplete transitive verbï¼Œç®€ç§°i.vt</p><p>è¿™ä¸ªåŠ¨è¯åŠ äº†å®¾è¯­ä¹‹åï¼Œ<strong>æ„æ€ä»ç„¶ä¸å®Œæ•´ï¼Œéœ€è¦åŠ ä¸Šè¡¥è¯­ï¼ˆcomplementï¼‰æ‰èƒ½ä½¿å¥å­å®Œæ•´ã€‚</strong></p><p>è¡¥è¯­æ˜¯ <strong>è¡¥å……è¯´æ˜å®¾è¯­çš„ç‰¹å¾ï¼Œæˆ–è€…è¡¥è¯­çš„åŠ¨ä½œ</strong></p></blockquote><ul><li><p>â€œå¥¹ ä½¿ æˆ‘ çˆ±ä¸Šç”Ÿæ´»ã€‚â€ è¿™ä¸ª â€œä½¿â€ å°±æ˜¯ä¸å®Œå…¨åŠç‰©åŠ¨è¯ å¦‚æœåªè¯´ â€œå¥¹ä½¿æˆ‘â€ æ„æ€æ˜¯ä¸å®Œæ•´çš„ï¼Œè¦åŠ ä¸Šè¡¥è¯­ â€œçˆ±ä¸Šç”Ÿæ´»â€ï¼Œæ‰æ˜¯å®Œæ•´çš„å¥å­ã€‚</p></li><li><p>â€œä»–çš„è¡¨æ¼”è®©æˆ‘ å¤±æœ›ã€‚â€è¿™ä¸ªâ€œè®©â€ï¼Œå¦‚æœè¯´â€œä»–çš„è¡¨æ¼”è®©æˆ‘â€ï¼Œå½“ç„¶ä¹Ÿä¸å®Œå…¨è¦åŠ ä¸Šè¡¥è¯­â€œå¤±æœ›â€</p></li></ul><h3 id="å¦‚ä½•åˆ†åˆ«å®Œå…¨åŠç‰©åŠ¨è¯å’Œä¸å®Œå…¨åŠç‰©åŠ¨è¯ï¼Ÿ"><a href="#å¦‚ä½•åˆ†åˆ«å®Œå…¨åŠç‰©åŠ¨è¯å’Œä¸å®Œå…¨åŠç‰©åŠ¨è¯ï¼Ÿ" class="headerlink" title="å¦‚ä½•åˆ†åˆ«å®Œå…¨åŠç‰©åŠ¨è¯å’Œä¸å®Œå…¨åŠç‰©åŠ¨è¯ï¼Ÿ"></a>å¦‚ä½•åˆ†åˆ«å®Œå…¨åŠç‰©åŠ¨è¯å’Œä¸å®Œå…¨åŠç‰©åŠ¨è¯ï¼Ÿ</h3><p>æœ€å¸¸ç”¨çš„ä¸å®Œå…¨åŠç‰©åŠ¨è¯ï¼š <strong>ä½¿å½¹åŠ¨è¯</strong></p><blockquote><p>åœ¨è¦ä½¿ä»€ä¹ˆï¼Œåšä»€ä¹ˆæ—¶ä½¿ç”¨ä½¿å½¹åŠ¨è¯</p></blockquote><ul><li>ä½¿â€¦åšâ€¦ï¼ˆmakeï¼Œhaveï¼Œletï¼Œgetï¼‰</li></ul><p>make/have/let+å®¾è¯­+åŠ¨è¯åŸå½¢ï¼ˆè¡¥è¯­ï¼‰</p><p>get+å®¾è¯­+åŠ¨è¯ä¸å®šå¼ï¼ˆè¡¥è¯­ï¼‰</p><blockquote><p>hasï¼šhave çš„ç¬¬ä¸‰äººç§°æ—¶æ€</p></blockquote><ul><li>I made him wash the car.</li></ul><p>æˆ‘å«ä»–æ´—è½¦ã€‚</p><ul><li>I got him to wash the car.</li></ul><p>æˆ‘å«ä»–æ´—è½¦ã€‚</p><p>ç»¼ä¸Šæ‰€è¿°ï¼Œåªè¦å®¾è¯­å‘å‡ºåŠ¨ä½œï¼Œæˆ–å®¾è¯­çš„çŠ¶æ€ï¼Œå‡å¯æ„æˆæ­¤ç±»å¥å‹ã€‚</p><h3 id="ç»ƒä¹ é¢˜-3"><a href="#ç»ƒä¹ é¢˜-3" class="headerlink" title="ç»ƒä¹ é¢˜"></a>ç»ƒä¹ é¢˜</h3><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201031194550.png" alt=""></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201031194437.png" alt=""></p><h2 id="æˆäºˆåŠ¨è¯-ä¸»è¯­-è°“è¯­-é—´æ¥å®¾è¯­-ç›´æ¥å®¾è¯­"><a href="#æˆäºˆåŠ¨è¯-ä¸»è¯­-è°“è¯­-é—´æ¥å®¾è¯­-ç›´æ¥å®¾è¯­" class="headerlink" title="æˆäºˆåŠ¨è¯ ä¸»è¯­+è°“è¯­+é—´æ¥å®¾è¯­+ç›´æ¥å®¾è¯­"></a>æˆäºˆåŠ¨è¯ ä¸»è¯­+è°“è¯­+é—´æ¥å®¾è¯­+ç›´æ¥å®¾è¯­</h2><h3 id="ä»€ä¹ˆæ˜¯æˆäºˆåŠ¨è¯ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯æˆäºˆåŠ¨è¯ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯æˆäºˆåŠ¨è¯ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯æˆäºˆåŠ¨è¯ï¼Ÿ</h3><p>dative verbï¼Œç®€ç§°d.v</p><ul><li><strong>æ˜¯åŠç‰©åŠ¨è¯çš„ä¸€ç§</strong>ï¼Œå½“éœ€è¦æ¥ä¸¤ä¸ªå®¾è¯­ï¼Œ<strong>ç¬¬ä¸€ä¸ªé—´æ¥å®¾è¯­è¡¨ç¤ºæˆäºˆå¯¹è±¡</strong>ï¼Œ<strong>ç¬¬äºŒä¸ªå®¾è¯­ä¸ºç›´æ¥å®¾è¯­</strong>ï¼Œ<strong>è¡¨ç¤ºæˆäºˆçš„ä¸œè¥¿</strong></li><li>è¦æ³¨æ„çš„æ˜¯ï¼Œ<strong>ç›´æ¥å®¾è¯­å’Œé—´æ¥å®¾è¯­ï¼Œéƒ½æ˜¯è°“è¯­åŠ¨ä½œçš„ä½œç”¨å¯¹è±¡</strong>ï¼Œè¿™æ˜¯ä¸ç¬¬å››å¤§å¥å‹çš„åŒºåˆ«ã€‚åœ¨ç¬¬å››å¤§å¥å‹ä¸­ï¼Œè¡¥è¯­è¯´æ˜å®¾è¯­çš„æ€§è´¨ï¼Œæˆ–è€…æ˜¯å®¾è¯­å‘å‡ºçš„åŠ¨ä½œã€‚</li><li>é‚£ä¹ˆåœ¨æ‰¾é—´å®¾å’Œç›´å®¾ä½¿ç›´æ¥æ‰¾<strong>æˆäºˆå¯¹è±¡</strong>å†æ‰¾<strong>æˆäºˆçš„ä¸œè¥¿</strong>ã€‚</li></ul><h3 id="å¸¸è§çš„æˆäºˆåŠ¨è¯"><a href="#å¸¸è§çš„æˆäºˆåŠ¨è¯" class="headerlink" title="å¸¸è§çš„æˆäºˆåŠ¨è¯"></a>å¸¸è§çš„æˆäºˆåŠ¨è¯</h3><blockquote><p><strong>give (æˆäºˆåŠ¨è¯)ã€sendã€tallã€teachã€payã€showã€offer</strong></p></blockquote><h3 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h3><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201031215252.png" alt=""></p><ul><li>Richard Mattes <strong>gave</strong> the testers six different kinds of things.</li></ul><p>Richard Matter ç»™ä½ è¿™äº›æµ‹è¯•è€…å…­ç§ä¸åŒç±»å‹çš„ä¸œè¥¿ã€‚</p><blockquote><p>ç›´æ¥å®¾è¯­ <strong>æˆäºˆçš„ä¸œè¥¿</strong></p></blockquote><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201031220027.png" alt=""></p><ul><li>I <strong>send</strong>     <u>him</u> a     <u>book</u> in reward for his help.</li></ul><p>æˆ‘é€ç»™ä»–ä¸€æœ¬ä¹¦ç­”è°¢ä»–çš„å¸®åŠ©ã€‚</p><blockquote><p>é—´æ¥å®¾è¯­<strong>æˆäºˆçš„å¯¹è±¡</strong></p></blockquote><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201031221559.png" alt=""></p><ul><li>The scientist <strong>told</strong> <u>us</u> many <u>stories</u> about birds.</li></ul><p>åšç‰©å­¦å®¶ç»™æˆ‘ä»¬è®²è¿°äº†è®¸å¤šæœ‰å…³é¸Ÿå„¿çš„æ•…äº‹ã€‚</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201031221956.png" alt=""></p><ul><li>A friendly waiter <strong>taught</strong> <u>me</u> a few <u>words</u> of Italian.Then he <strong>lent</strong> <u>me</u> a <u>book</u></li></ul><p>ä¸€ä¸ªå¥½å®¢çš„æœåŠ¡å‘˜æ•™æˆ‘å‡ å¥æ„å¤§åˆ©è¯­ï¼Œä¹‹åè¿˜å€Ÿç»™æˆ‘ä¸€æœ¬ä¹¦ã€‚</p><ul><li>Yesterday I <strong>paid</strong> <u>him</u> a <u>visit</u>.</li></ul><p>æ˜¨å¤©æˆ‘å»çœ‹æœ›äº†ä»–ã€‚</p><ul><li>Then he <strong>showed</strong> <u>me</u> the <u>contents</u> of the parcel .</li></ul><p>æ¥ç€ä»–ç»™æˆ‘çœ‹äº†åŒ…é‡Œçš„ä¸œè¥¿ã€‚</p><ul><li>He <strong>offered</strong> <u>me</u> a lot of <u>money</u>.</li></ul><p>ä»–ç»™äº†æˆ‘å¾ˆå¤šé’±ã€‚</p><h2 id="ä¸»è°“å®¾è¡¥ä¸ä¸»è°“é—´å®¾ç›´å®¾åŒºåˆ†ï¼ˆä¸å®Œå…¨åŠç‰©åŠ¨è¯å’ŒæˆäºˆåŠ¨è¯åŒºåˆ†ï¼‰"><a href="#ä¸»è°“å®¾è¡¥ä¸ä¸»è°“é—´å®¾ç›´å®¾åŒºåˆ†ï¼ˆä¸å®Œå…¨åŠç‰©åŠ¨è¯å’ŒæˆäºˆåŠ¨è¯åŒºåˆ†ï¼‰" class="headerlink" title="ä¸»è°“å®¾è¡¥ä¸ä¸»è°“é—´å®¾ç›´å®¾åŒºåˆ†ï¼ˆä¸å®Œå…¨åŠç‰©åŠ¨è¯å’ŒæˆäºˆåŠ¨è¯åŒºåˆ†ï¼‰"></a>ä¸»è°“å®¾è¡¥ä¸ä¸»è°“é—´å®¾ç›´å®¾åŒºåˆ†ï¼ˆä¸å®Œå…¨åŠç‰©åŠ¨è¯å’ŒæˆäºˆåŠ¨è¯åŒºåˆ†ï¼‰</h2><blockquote><p>åªè¦æ˜¯ <strong>è°“è¯­çš„åŠ¨ä½œ</strong>ï¼Œ<strong>ä½œç”¨äºä¸¤ä¸ªä¸åŒçš„åè¯ï¼Œä¹Ÿå°±æ˜¯ä¸¤ä¸ªå®¾è¯­</strong>ï¼Œå°±æ˜¯ç¬¬äº”å¤§å¥å‹</p><p>è€Œåœ¨ç¬¬å››å¤§ç±»å¥å‹ä¸­ï¼Œè¡¥è¯­æ˜¯å®¾è¯­çš„åŠ¨ä½œæˆ–çŠ¶æ€ã€‚</p></blockquote><p>ä¾‹å­ï¼š</p><ol><li><p>ä»– è®© <strong>æˆ‘ å­¦ä¹ </strong>ã€‚â€˜â€œå­¦ä¹ â€ æ˜¯ â€œæˆ‘â€ å‘å‡ºçš„åŠ¨ä½œ ï¼ˆå­¦ä¹ æ˜¯åœ¨â€œæˆ‘â€è¿™ä¸ªå®¾è¯­ååšè¡¥å……çš„ï¼‰</p></li><li><p>ä»– ç»™äº† <strong>æˆ‘ä¸€æœ¬ä¹¦</strong>ã€‚ â€œä¹¦â€ å’Œ â€œæˆ‘â€ éƒ½æ˜¯è°“è¯­â€œç»™â€çš„ä½œç”¨å¯¹è±¡æ‰€ä»¥ï¼Œ</p><p>ç¬¬1å¥æ˜¯ç¬¬å››å¤§å¥å¼ï¼ˆä¸»è°“å®¾è¡¥ï¼‰ï¼Œç¬¬2å¥å¼ç¬¬äº”å¤§å¥å‹ï¼ˆä¸»è°“é—´å®¾ç›´å®¾ï¼‰</p></li></ol><h3 id="ç»ƒä¹ é¢˜-4"><a href="#ç»ƒä¹ é¢˜-4" class="headerlink" title="ç»ƒä¹ é¢˜"></a>ç»ƒä¹ é¢˜</h3><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201031223426.png" alt=""></p><ol><li>é¢˜çš„ä¸»è°“åŒå®¾ç»“æ„</li></ol><p>He gave his girlfriend a bunch of flowers on Valentineâ€™s Day.</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201031225959.png" alt=""></p><h1 id="è¡¥å……"><a href="#è¡¥å……" class="headerlink" title="è¡¥å……"></a>è¡¥å……</h1><h2 id="è°“è¯­-1"><a href="#è°“è¯­-1" class="headerlink" title="è°“è¯­"></a>è°“è¯­</h2><p>åè¯</p><ol><li>è¯­æ³•å­¦ä¸­æŒ‡å¯¹ä¸»è¯­åŠ ä»¥é™ˆè¿°çš„æˆåˆ†ï¼Œè¡¨ç¤ºä¸»è¯­ã€Œæ€ä¹ˆæ ·ã€æˆ–ã€Œæ˜¯ä»€ä¹ˆã€ã€‚ä¸€èˆ¬çš„å¥å­éƒ½åŒ…æ‹¬ä¸»è¯­ã€è°“è¯­ï¼Œæ±‰è¯­ä¸­è°“è¯­ä¸€èˆ¬åœ¨ä¸»è¯­åé¢ã€‚å¦‚ã€Œæˆ‘æ˜¯å­¦ç”Ÿã€ä¸­ã€Œæ˜¯å­¦ç”Ÿã€æ˜¯è°“è¯­ã€‚</li></ol><h2 id="å®¾è¯­"><a href="#å®¾è¯­" class="headerlink" title="å®¾è¯­"></a>å®¾è¯­</h2><p>åè¯</p><ol><li>è¯­æ³•ä¸ŠæŒ‡å—åŠ¨è¯æ”¯é…ã€å…³æ¶‰æˆ–å—ä»‹è¯å¼•å¯¼çš„æˆåˆ†ã€‚åœ¨ç°ä»£æ±‰è¯­ä¸­ï¼Œå®¾è¯­ä¸€èˆ¬åœ¨åŠ¨è¯æˆ–ä»‹è¯åé¢ã€‚å¦‚ã€Œå°Šæ•¬å¸ˆé•¿ã€ä¸­çš„ã€Œå¸ˆé•¿ã€ï¼Œã€Œä»–å†™ä¿¡ã€ä¸­çš„ã€Œä¿¡ã€ï¼Œã€Œå¯¹ä»–å¾ˆå¥½ã€ä¸­çš„ã€Œä»–ã€ã€‚</li></ol><h2 id="è¡¨è¯­"><a href="#è¡¨è¯­" class="headerlink" title="è¡¨è¯­"></a>è¡¨è¯­</h2><p>â€‹        å±äºä¸»è¯­è¡¥è¶³è¯­ï¼Œè¯­æ³•åè¯ï¼Œæ˜¯æŒ‡è¯´æ˜ä¸»è¯­çš„èº«ä»½ã€æ€§è´¨ã€å“æ€§ã€ç‰¹å¾å’ŒçŠ¶æ€çš„è¯æˆ–ä»å¥ï¼Œè¡¨è¯­å¸¸ç”±åè¯ã€å½¢å®¹è¯ã€ä»‹è¯çŸ­è¯­ã€åŠ¨åè¯ã€ä¸å®šå¼ã€å‰¯è¯æ¥å……å½“ï¼Œ<strong>å®ƒå¸¸ä½äºç³»åŠ¨è¯ï¼ˆbeï¼‰ä¹‹åã€‚</strong></p><p><a href="https://www.bilibili.com/video/BV1sJ411M7Gb?p=3" target="_blank" rel="noopener">è‹±è¯­ç®€å•å¥çš„é€ è¯æ³•åˆ™å’ŒåŸºæœ¬è¯­æ³•æ¦‚å¿µ</a></p><h2 id="ä»‹è¯"><a href="#ä»‹è¯" class="headerlink" title="ä»‹è¯"></a>ä»‹è¯</h2><p><em>åè¯</em></p><ol><li>è™šè¯çš„ä¸€ç±»ã€‚ç”¨åœ¨åè¯ã€ä»£è¯æˆ–åè¯æ€§çŸ­è¯­å‰è¾¹ï¼Œå¼•è¿›åŠ¨ä½œè¡Œä¸ºçš„æ—¶é—´ã€å¤„æ‰€ã€æ–¹å¼ã€ç›®çš„ã€æ¶‰åŠæˆ–æ¯”è¾ƒçš„å¯¹è±¡ä»¥åŠåŠ¨ä½œçš„æ–½äº‹è€…ç­‰ã€‚å¦‚ã€Œåœ¨ã€ã€Œä»ã€ã€Œä»¥ã€ã€Œä¸ºäº†ã€ã€ŒæŠŠã€ã€Œæ¯”ã€ã€Œè¢«ã€ç­‰ã€‚</li></ol><h2 id="å‰¯è¯"><a href="#å‰¯è¯" class="headerlink" title="å‰¯è¯"></a>å‰¯è¯</h2><p><em>åè¯</em></p><ol><li>ä¿®é¥°æˆ–é™åˆ¶åŠ¨è¯ã€å½¢å®¹è¯ï¼Œè¡¨ç¤ºèŒƒå›´ã€ç¨‹åº¦ã€æƒ…æ€ã€è¯­æ°”ç­‰çš„è¯ï¼Œä¸€èˆ¬ä¸èƒ½ä¿®é¥°æˆ–é™åˆ¶åè¯ã€‚å¦‚ã€Œéƒ½ã€ã€Œå¾ˆã€ã€Œç«Ÿç„¶ã€ã€Œå†ä¸‰ã€ç­‰ã€‚</li></ol><h1 id="ä¸ƒå¤§è‹±è¯­å¥å­æˆåˆ†çš„æ¦‚è¿°"><a href="#ä¸ƒå¤§è‹±è¯­å¥å­æˆåˆ†çš„æ¦‚è¿°" class="headerlink" title="ä¸ƒå¤§è‹±è¯­å¥å­æˆåˆ†çš„æ¦‚è¿°"></a>ä¸ƒå¤§è‹±è¯­å¥å­æˆåˆ†çš„æ¦‚è¿°</h1><h2 id="å®šè¯­"><a href="#å®šè¯­" class="headerlink" title="å®šè¯­"></a>å®šè¯­</h2><p>ä¸€ä¸ªå¥å­ç”¨æ¥ç•Œå®šï¼Œé™å®šåè¯çš„éƒ¨åˆ†ã€‚</p><blockquote><p>ä¸€ä¸ª <strong>é«˜ä¸ªå­çš„</strong>ï¼Œ<strong>ç•™ç€é•¿å¤´å‘çš„</strong>ï¼Œ<strong>ç©¿ç€çº¢è‰²è¡£æœçš„ï¼Œå–œæ¬¢å­¦ä¹ è‹±è¯­çš„</strong>å­¦ç”Ÿã€‚</p><p>åŠ é»‘éƒ¨åˆ†ä¸º å®šè¯­ã€‚</p></blockquote><h4 id="ä»€ä¹ˆè¯­æ³•æˆåˆ†èƒ½å¤Ÿä½œä¸ºå®šè¯­å‘¢ï¼Ÿ"><a href="#ä»€ä¹ˆè¯­æ³•æˆåˆ†èƒ½å¤Ÿä½œä¸ºå®šè¯­å‘¢ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆè¯­æ³•æˆåˆ†èƒ½å¤Ÿä½œä¸ºå®šè¯­å‘¢ï¼Ÿ"></a>ä»€ä¹ˆè¯­æ³•æˆåˆ†èƒ½å¤Ÿä½œä¸ºå®šè¯­å‘¢ï¼Ÿ</h4><p><strong>å½¢å®¹è¯ä»¥åŠç›¸å½“äºå½¢å®¹è¯æ€§è´¨çš„è¯­æ³•æˆåˆ†ã€‚</strong></p><blockquote><p>ä¸€èˆ¬æ¥è¯´ï¼Œä¸€ä¸ªå¥å­ï¼Œå¦‚æœæ˜¯â€œâ€¦çš„â€ï¼Œå®ƒå°±æ˜¯å½¢å®¹è¯æ€§è´¨çš„ï¼Œæ¯”å¦‚è¯´ç©¿ç€çº¢è‰²è¡£æœçš„ï¼Œå–œæ¬¢å­¦ä¹ è‹±è¯­çš„ï¼Œéƒ½å±äºå½¢å®¹è¯çŸ­è¯­æˆ–è€…å½¢å®¹è¯ä»å¥ã€‚</p></blockquote><p><strong>è‹±è¯­ç™¾åˆ†ä¹‹ä¹åäº”çš„å®šè¯­éµå¾ªâ€œå‰å°åå¤§â€çš„è§„åˆ™</strong></p><blockquote><p>ä¸€ä¸ªå•è¯ç»„æˆçš„å®šè¯­ï¼ˆé™å®šè¯ï¼Œå½¢å®¹è¯ï¼Œåè¯ä»¥åŠåè¯æ‰€æœ‰æ ¼ï¼‰ï¼Œæ”¾åœ¨æ‰€ä¿®é¥°åè¯çš„å‰é¢ã€‚</p></blockquote><blockquote><p>ä¸¤ä¸ªä»¥ä¸Šå•è¯ç»„æˆçš„å®šè¯­ï¼ˆofå±æ ¼ï¼Œå½¢å®¹è¯çŸ­è¯­ï¼Œä»‹è¯çŸ­è¯­ï¼Œåˆ†è¯çŸ­è¯­ï¼Œä¸å®šæ—¶çŸ­è¯­ç­‰ï¼‰ï¼Œæ”¾åœ¨æ‰€ä¿®é¥°è¯åé¢ã€‚</p></blockquote><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201105155015.png" alt="å„ç§è¯­æ³•æˆåˆ†ä½œå®šè¯­çš„ä¾‹å­ã€‚é»‘ä½“éƒ¨åˆ†ä¸ºå®šè¯­ä¿®é¥°çš„åè¯"></p><blockquote><p>They were expecting a valuable parcel of diamonds from South Africa</p><p>ä»–ä»¬æ­£æœŸå¾…ä»å—éæ¥çš„ä¸€ä¸ªè£…æœ‰é’»çŸ³çš„è´µé‡åŒ…è£¹ã€‚</p><p>å®šè¯­å…±æ˜¯ä¸ªåˆ†åˆ«ä¸ºï¼š</p><p>é™å®šè¯ aï¼Œä½œé¡¶è¯ä¿®é¥° parcel ï¼Œa parcel çš„åŒ…è£¹ã€‚</p><p>å½¢å®¹è¯ valuableï¼Œä½œå®šè¯­ï¼Œè´µé‡ã€‚of diamonds ä½œå®šè¯­é™å®šä¸ºé’»çŸ³ã€‚from South Africa ä½œå®šè¯­é™åˆ¶ä¸ºæ¥è‡ªå—éã€‚</p></blockquote><blockquote><p>Mrs.Rumbold was a large,unsmiling lady in a tight black dress.</p><p>å…°åšå°”å¾·å¤«äººæ˜¯ä¸€ä½èº«æé«˜å¤§ã€è¡¨æƒ…ä¸¥è‚ƒçš„å¥³äººï¼Œç©¿ä¸€ä»¶ç´§èº«çš„é»‘è¡£æœã€‚</p><p>a largeï¼Œå®šè¯­ä½œå½¢å®¹è¯ï¼Œå½¢å®¹é«˜å¤§çš„ã€‚unsmilingï¼Œå®šè¯­ä½œå½¢å®¹è¯ä¸¥è‚ƒçš„ã€‚in a tight black dressï¼Œå®šè¯­ä½œä»‹è¯çŸ­è¯­ï¼ˆå½¢å®¹è¯æ€§è´¨ï¼‰ï¼Œå½¢å®¹ç©¿ç´§èº«é»‘è¡£æœã€‚</p></blockquote><blockquote><p>First of all ,he wrote out a long list of all the foods.</p><p>é¦–å…ˆï¼Œä»–å¼€åˆ—äº†ä¸€å¼ é•¿é•¿åˆ—äº†æ‰€æœ‰çš„é£Ÿç‰©çš„ç›®å½•ã€‚</p><p>aï¼Œé™å®šè¯å®šè¯­ï¼Œé™å®š list ä¸ºä¸€ä¸ªã€‚</p><p>longï¼Œå½¢å®¹è¯å®šè¯­ï¼Œé™å®šä¸ºé•¿çš„listã€‚</p><p>of all the foods ï¼Œofå±æ ¼ï¼Œé™å®šä¸ºé£Ÿç‰©</p></blockquote><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201105170800.png" alt="ç»ƒä¹ é¢˜"></p><blockquote><p>æˆ‘å–œæ¬¢è¯¾æ¡Œä¸Šé‚£æœ¬è‹±è¯­ä¹¦</p><p>ä¸»è¯­ï¼šæˆ‘ã€‚è°“è¯­ï¼šå–œæ¬¢ã€‚å®¾è¯­ï¼šè‹±è¯­ä¹¦</p><p>theï¼šå®šè¯­å½¢å®¹é‚£æœ¬ä¹¦ã€‚Englishï¼šå®šè¯­å½¢å®¹è¯ï¼Œå½¢å®¹bookä¸ºè‹±è¯­ä¹¦ã€‚on the table:å®šè¯­ä»‹è¯çŸ­è¯­ï¼ŒæŒ‡æ¡Œå­ä¸Šçš„ä¹¦ã€‚</p></blockquote><blockquote><p>ä»–ä»¬æ­£åœ¨ç ”ç©¶ä¸€ä¸ªå…³äºè´¸æ˜“æ ‡å‡†çš„å¤æ‚é—®é¢˜ã€‚</p><p>ä¸»è¯­ï¼šä»–ä»¬ã€‚è°“è¯­ï¼šç ”ç©¶ã€‚å®¾è¯­ï¼šé—®é¢˜ã€</p><p>aï¼šå®šè¯­é™å®šä¸ºä¸€ä¸ªã€‚complicatedï¼šå®šè¯­å½¢å®¹è¯ï¼Œå¤æ‚çš„ã€‚about trading standardï¼šä½œå®šè¯­ ä»‹è¯çŸ­è¯­ å…³äºè´¸æ˜“æ ‡å‡†çš„ã€‚</p></blockquote><blockquote><p>æˆ‘å°†å‘Šè¯‰ä½ ä»¬æ˜¨å¤©è€å¸ˆç»™æˆ‘è®²çš„é‚£ä¸ªéå¸¸æœ‰è¶£çš„å…³äºæœˆäº®çš„ä¸­å›½å¤ä»£æ•…äº‹ã€‚</p><p>ä¸»è°“å®¾è¡¥ å¥å¼</p><p>ä¸»è¯­ï¼šæˆ‘ã€‚è°“è¯­ï¼šå°†å‘Šè¯‰ã€‚å®¾è¯­ï¼šä½ ä»¬ã€‚è¡¥è¯­ï¼šæ•…äº‹ã€‚</p><p>ä¸åŠ å®šè¯­ï¼šI will tall you story.</p><p>aï¼šå®šè¯­é™å®šä¸ºä¸€ä¸ªã€‚very :å®šè¯­ éå¸¸ã€‚interestingï¼šå®šè¯­æœ‰è¶£ã€‚old Chineseï¼šå®šè¯­ä½œå½¢å®¹è¯ï¼Œä¸­å›½å¤è€ã€‚</p><p>about the moonï¼šä»‹è¯çŸ­è¯­ä½œå®šè¯­ï¼Œå…³äºæœˆäº®ã€‚my teacher told me yesterdayï¼šä»‹è¯çŸ­è¯­ä½œå®šè¯­ï¼Œè€å¸ˆæ˜¨å¤©å‘Šè¯‰æˆ‘ã€‚</p><p>thatï¼šå®šè¯­ä»å¥ã€‚</p></blockquote><h2 id="çŠ¶è¯­-1"><a href="#çŠ¶è¯­-1" class="headerlink" title="çŠ¶è¯­"></a>çŠ¶è¯­</h2><h4 id="ä»€ä¹ˆæ˜¯çŠ¶è¯­ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯çŠ¶è¯­ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯çŠ¶è¯­ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯çŠ¶è¯­ï¼Ÿ</h4><blockquote><p>çŠ¶è¯­ï¼šç”¨æ¥æè¿°å®šåˆ¶çš„ç»†èŠ‚ç‰¹å¾çš„æˆåˆ†ï¼Œæ±‰è¯­é‡Œå¸¸è§çš„å¯¹åº”æˆï¼Œå°±æ˜¯â€œâ€¦åœ°â€ã€‚</p><p>å”±æ­Œï¼š</p><p>å¯ä»¥è¯´ï¼šå¤§å£°åœ°å”±æ­Œï¼Œæ¬¢ä¹åœ°å”±æ­Œï¼ŒæŠ•å…¥åœ°å”±æ­Œï¼Œç­‰ç­‰ã€‚è¡¨è¾¾æ—¶é—´ã€åœ°ç‚¹ã€æ–¹å¼çš„çŠ¶è¯­ï¼Œä¹Ÿå¯ä»¥ä¸å¸¦â€œåœ°â€å­—ã€‚</p><p>æ¯”å¦‚ï¼šåœ¨æ•™å®¤é‡Œå”±æ­Œï¼Œåœ¨ä¸‰ä¸ªæ˜ŸæœŸçš„æ™šä¼šä¸Šå”±æ­Œï¼Œç”¨å¤å…¸çš„æ–¹å¼å”±æ­Œã€‚</p></blockquote><p>çŠ¶è¯­å¯ä»¥ä¿®é¥°é™¤å•¦åè¯ä»¥å¤–çš„ä»»ä½•è¯ã€‚</p><h4 id="ä»€ä¹ˆè¯­æ³•æˆåˆ†èƒ½åšçŠ¶è¯­ï¼Ÿ"><a href="#ä»€ä¹ˆè¯­æ³•æˆåˆ†èƒ½åšçŠ¶è¯­ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆè¯­æ³•æˆåˆ†èƒ½åšçŠ¶è¯­ï¼Ÿ"></a>ä»€ä¹ˆè¯­æ³•æˆåˆ†èƒ½åšçŠ¶è¯­ï¼Ÿ</h4><p><strong>å‰¯è¯ä»¥åŠç›¸å½“äºå‰¯è¯çš„è¯­æ³•æˆåˆ†</strong></p><p>å‰¯è¯åœ¨å¥å­ä¸­å¤„äºå‰¯æ‰‹çš„ä½ç½®ï¼Œå°±æ˜¯è¾…åŠ©åœ°ä½</p><blockquote><p>where,when,howâ€“æ—¶é—´ï¼Œåœ°ç‚¹ï¼Œæ–¹å¼ï¼Œæˆéƒ½</p><p>è¡¨ç¤ºæ—¶é—´çš„ï¼Œnow ï¼Œjust nowï¼Œ</p><p>è¡¨ç¤ºåœ°ç‚¹çš„ä»‹è¯çŸ­è¯­ï¼Œæ¯”å¦‚ in the house</p></blockquote><h5 id="å°çŠ¶è¯­ï¼ˆå•ç‹¬çš„å‰¯è¯ï¼‰"><a href="#å°çŠ¶è¯­ï¼ˆå•ç‹¬çš„å‰¯è¯ï¼‰" class="headerlink" title="å°çŠ¶è¯­ï¼ˆå•ç‹¬çš„å‰¯è¯ï¼‰"></a>å°çŠ¶è¯­ï¼ˆå•ç‹¬çš„å‰¯è¯ï¼‰</h5><blockquote><p>â€‹    æ”¾åœ¨å…¶æ‰€ä¿®é¥°çš„è¯è¯­ä¹‹å‰ï¼šä¿®é¥°åŠ¨è¯æ—¶ï¼Œæ”¾åœ¨åŠ¨è¯ä¹‹å‰ã€‚ä¿®é¥°å…¶ä»–æˆåˆ†æ—¶ï¼Œæ”¾åœ¨å…¶ä»–æˆåˆ†ä¹‹æ°”é‚£ã€‚</p><p>å¦‚æœéœ€è¦å°çŠ¶è¯­å¯ä»¥æ”¾åœ¨å¥å­ä¸­çš„ä»»ä½•ä½ç½®ã€‚</p></blockquote><p>we are <strong>now</strong> living in a beautiful new house in the country.</p><blockquote><p>nowï¼šå‰¯è¯ï¼ˆå°çŠ¶è¯­ï¼‰ ä¿®é¥°living è¡¨ç¤ºç°åœ¨ç”Ÿæ´»åœ¨ã€‚</p><p>æˆ‘ä»¬<strong>ç°åœ¨</strong>ä½åœ¨å…ˆå°†çš„ä¸€æ ‹æ¼‚äº®çš„æ–°ä½å®…é‡Œã€‚</p></blockquote><p>Letters will cost a little more, but they will <strong>certainly</strong> travel faster.</p><blockquote><p>certainlyï¼šå°çŠ¶è¯­ ï¼Œè¡¨ç¤ºå½“ç„¶ã€‚</p><p>è¿™æ ·ä¼šç¨å¾®èŠ±ç‚¹é’±ï¼Œä½†æ˜¯è‚¯å®šæ˜¯å¿«å¾—å¤šäº†ã€‚</p></blockquote><h5 id="å¤§çŠ¶è¯­"><a href="#å¤§çŠ¶è¯­" class="headerlink" title="å¤§çŠ¶è¯­"></a>å¤§çŠ¶è¯­</h5><blockquote><p>æŒ‡ ï¼ˆä¸¤ä¸ªåŠä»¥ä¸Šå•è¯æ„æˆçš„çŠ¶è¯­ï¼Œå¦‚ä»‹è¯çŸ­è¯­ï¼Œä¸å®šå¼çŸ­è¯­ï¼ŒçŠ¶è¯­ä»å¥ï¼‰ï¼Œæ”¾åœ¨æ•´ä¸ªå¥å­çš„ä¸¤å¤´ã€‚æ”¾åœ¨å¼€å¤´æ—¶ï¼Œä¸€åŠè¦åŠ ä¸Šé€—å·ã€‚</p></blockquote><p>On Wednesday evening, We went to the Town Hall.</p><blockquote><p>æ˜ŸæœŸä¸‰çš„æ™šä¸Šï¼Œæˆ‘ä»¬å»äº†å¸‚æ”¿å…ã€‚</p><p>å…¶ä¸­ On Wednesday evening, å¯ä»¥æ”¾åœ¨å¼€å¤´å’Œç»“å°¾ã€‚</p><p>to the Town Hallï¼šä¸å®šå¼çŸ­è¯­</p></blockquote><p>I was having dinner at a restaurant when Tony Steele came in.</p><blockquote><p>æˆ‘æ­£åœ¨ä¸€å®¶é¤é¦†åƒé¥­ï¼Œæ‰˜å°¼.æ–¯è’‚å°”èµ°äº†è¿›æ¥ã€‚</p><p>at a restaurant ï¼šçŠ¶è¯­</p></blockquote><h3 id="è¡¥å……-1"><a href="#è¡¥å……-1" class="headerlink" title="è¡¥å……"></a>è¡¥å……</h3><p>â‘ å¥ä¸­åŒæ—¶å‡ºç°å‡ ä¸ªæ—¶é—´æˆ–è€…åœ°ç‚¹çŠ¶è¯­æ—¶ï¼Œä»å°æ‰“åˆ°ã€‚</p><blockquote><p>We landed in American at 8 oâ€™ clock on June 15thï¼Œ2012.</p><p>æˆ‘ä»¬2012å¹´6æœˆ15æ—¥å…«ç‚¹åœ¨ç¾å›½ç€é™†ã€‚</p><p>We live at number 35.South Renmin Roadï¼ŒChengdu.</p><p>æˆ‘ä»¬ä½åœ¨æˆéƒ½å¸‚äººæ°‘å—è·¯35å·ã€‚</p></blockquote><p>â‘¡å¥å­åé¢å‡ºç°å¤šç§çŠ¶è¯­æ—¶ï¼Œé¡ºåºæ˜¯æ–¹å¼â€“åœ°ç‚¹â€“æ—¶é—´ã€‚</p><blockquote><p>He put his milk bottles carefully on the doorstep every morning.</p><p>ä»–æ¯å¤©æ—©ä¸Šå°å¿ƒåœ°æŠŠç‰›å¥¶æ‹¼æ”¾åœ¨é—¨å£çš„å°é˜¶ä¸Šã€‚</p></blockquote><h2 id="åŒä½è¯­"><a href="#åŒä½è¯­" class="headerlink" title="åŒä½è¯­"></a>åŒä½è¯­</h2><blockquote><p>åŒä½è¯­ï¼šå¥å­ä¸­æŒ‡ä»£åŒä¸€äº‹åŠ¡çš„ä¸¤ä¸ªè¯ã€çŸ­è¯­æˆ–ä»å¥ï¼Œç§°åŒä¸ºå…³ç³»ã€‚</p></blockquote><p>My sisterï¼ŒHelen Wilsonï¼Œwill travel with me.</p><blockquote><p>å¥ä¸­ My sister å’Œ Helen WilsonæŒ‡çš„æ˜¯åŒä¸€ä¸ªäººï¼Œå®ƒä»¬æ˜¯åŒä¸ºæˆåˆ†ï¼Œåä¸€æˆåˆ†é€šå¸¸å«å‰ä¸€æˆåˆ†çš„åŒä¸ºè¯­ã€‚</p></blockquote><p>è‹±è¯­é‡Œçš„åŒä½è¯­ï¼Œä¸å±äºå•ç‹¬çš„ä¸ƒå¤§å¥å­æˆåˆ†ï¼Œè€Œæ˜¯å’Œè‹±è¯­é‡Œè¾¹çš„åè¯æˆåˆ†ï¼ˆä¸»è¯­ï¼Œå®¾è¯­ï¼Œè¡¨è¯­ï¼‰æˆå†°å¹¶åˆ—å…³ç³»ï¼Œç›¸å½“äºå¯¹è¯¥åè¯è¿›ä¸€æ­¥çš„è§£é‡Šè¯´æ˜ã€‚åè¯æˆ–ä»»ä½•ç›¸å½“åè¯çš„æˆåˆ†ï¼Œå‡å¯ä½œåŒä½è¯­ã€‚</p><h5 id="ç»ƒä¹ é¢˜-5"><a href="#ç»ƒä¹ é¢˜-5" class="headerlink" title="ç»ƒä¹ é¢˜"></a>ç»ƒä¹ é¢˜</h5><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201105220614.png" alt=""></p><p>My English teacher ï¼ŒMr. Brent Peter, is a Canadian.</p><blockquote><p>My English teacher åŒ Mr.Brent Peter ä¸ºåŒä½è¯­çŠ¶æ€</p></blockquote><p>Yesterday I met Tom,a friend of my brotherâ€™s</p><blockquote><p>Tom ä¸ friend of my brotherâ€™s åŒä½è¯­çŠ¶æ€</p></blockquote><p>We Chinese people are brave and hardworking.</p><blockquote><p>We åŒ Chinese people æ˜¯åŒä½è¯­çŠ¶æ€ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> EC </category>
          
      </categories>
      
      
        <tags>
            
            <tag> EC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MVCã€MVPã€MVVM</title>
      <link href="/2020/10/28/MVC%E3%80%81MVP%E3%80%81MVVM/"/>
      <url>/2020/10/28/MVC%E3%80%81MVP%E3%80%81MVVM/</url>
      
        <content type="html"><![CDATA[<h1 id="MVC-MVP-MVVM-å›¾ç¤º"><a href="#MVC-MVP-MVVM-å›¾ç¤º" class="headerlink" title="MVC MVP MVVM å›¾ç¤º"></a>MVC MVP MVVM å›¾ç¤º</h1><h2 id="MVCï¼ˆModelã€Viewã€Controllerï¼‰"><a href="#MVCï¼ˆModelã€Viewã€Controllerï¼‰" class="headerlink" title="MVCï¼ˆModelã€Viewã€Controllerï¼‰"></a>MVCï¼ˆModelã€Viewã€Controllerï¼‰</h2><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201028113524.png" alt=""></p><blockquote><ul><li>è§†å›¾ï¼ˆViewï¼‰ï¼šç”¨æˆ·ç•Œé¢</li><li>æ§åˆ¶å™¨ï¼ˆControllerï¼‰ï¼šä¸šåŠ¡é€»è¾‘</li><li>æ¨¡å‹ï¼ˆModelï¼‰ï¼šæ•°æ®ä¿å­˜</li></ul></blockquote><h5 id="é€šä¿¡æ–¹å¼"><a href="#é€šä¿¡æ–¹å¼" class="headerlink" title="é€šä¿¡æ–¹å¼"></a>é€šä¿¡æ–¹å¼</h5><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201028113611.png" alt=""></p><blockquote><ol><li>View ä¼ é€æŒ‡ä»¤åˆ° Controller</li><li>Controller å®Œæˆä¸šåŠ¡é€»è¾‘åï¼Œè¦æ±‚ Model æ”¹å˜çŠ¶æ€</li><li>Model å°†æ–°çš„æ•°æ®å‘é€åˆ° Viewï¼Œç”¨æˆ·å¾—åˆ°åé¦ˆ</li></ol></blockquote><p><strong>é€šä¿¡éƒ½æ˜¯å•å‘çš„</strong></p><h2 id="äº’åŠ¨æ¨¡å¼"><a href="#äº’åŠ¨æ¨¡å¼" class="headerlink" title="äº’åŠ¨æ¨¡å¼"></a>äº’åŠ¨æ¨¡å¼</h2><blockquote><p><strong>äº’åŠ¨æ¨¡å¼</strong>ï¼ˆmodels of interactionï¼‰ï¼ŒæŒ‡ä½¿ç”¨<a href="https://zh.wikipedia.org/wiki/é›»è…¦" target="_blank" rel="noopener">ç”µè„‘</a>æ—¶<a href="https://zh.wikipedia.org/wiki/äººæ©Ÿäº’å‹•" target="_blank" rel="noopener">äººæœºäº’åŠ¨</a>çš„ç•Œé¢ã€‚å¥½çš„ç•Œé¢åº”è¯¥æ˜¯èƒ½å¤Ÿæœ‰æ•ˆåœ°è®©äº’åŠ¨é¡ºåˆ©è¿›è¡Œã€‚äº’åŠ¨ç³»ç»Ÿæ˜¯è¦è®©ä½¿ç”¨è€…å¯ä»¥åœ¨å·²å­˜åœ¨çš„åº”ç”¨èŒƒå›´ä¸­å®Œæˆä»–ä»¬çš„ç›®çš„ã€‚ç³»ç»Ÿä½¿ç”¨çš„è¯­è¨€æ˜¯æ ¸è¯­è¨€ï¼ˆcore languageï¼‰ï¼Œä½¿ç”¨è€…ä½¿ç”¨çš„è¯­è¨€æ˜¯ä»»åŠ¡è¯­è¨€ï¼ˆtask languageï¼‰ã€‚</p><p>æ‘˜è‡ª<a href="https://zh.wikipedia.org/wiki/%E4%BA%92%E5%8B%95%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener">ç»´åŸºç™¾ç§‘</a></p></blockquote><p>æ¥å—ç”¨æˆ·æŒ‡ä»¤æ—¶ï¼ŒMVCå¯åˆ†ä¸ºä¸¤ç§æ¨¡å¼ã€‚<strong>ä¸€ç§æ˜¯é€šè¿‡Viewæ¥å—æŒ‡ä»¤</strong>ï¼Œ<strong>ä¼ é€’ç»™Controllerã€‚</strong></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201028114024.png" alt=""></p><p><strong>å¦ä¸€ç§æ˜¯ç›´æ¥é€šè¿‡controlleræ¥å—æŒ‡ä»¤ã€‚</strong></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201028114109.png" alt=""></p><h2 id="MVPï¼ˆModelã€Viewã€Presenterï¼‰"><a href="#MVPï¼ˆModelã€Viewã€Presenterï¼‰" class="headerlink" title="MVPï¼ˆModelã€Viewã€Presenterï¼‰"></a>MVPï¼ˆModelã€Viewã€Presenterï¼‰</h2><p>MVP æ¨¡å¼å°† Controller æ”¹åä¸º <strong>Presenter</strong>ï¼Œ<strong>åŒæ—¶æ”¹å˜äº†é€šä¿¡æ–¹å‘</strong>ã€‚</p><p><img src="https://www.ruanyifeng.com/blogimg/asset/2015/bg2015020109.png" alt=""></p><blockquote><ol><li><p>å„éƒ¨åˆ†ä¹‹é—´çš„é€šä¿¡ï¼Œæ˜¯åŒå‘çš„ã€‚</p></li><li><p>View ä¸ Model ä¸å‘ç”Ÿè”ç³»ï¼Œéƒ½é€šè¿‡ Presenter ä¼ é€’ã€‚</p></li><li><p>View éå¸¸è–„ï¼Œä¸éƒ¨ç½²ä»»ä½•ä¸šåŠ¡é€»è¾‘ï¼Œç§°ä¸ºâ€è¢«åŠ¨è§†å›¾â€ï¼ˆPassive Viewï¼‰ï¼Œå³æ²¡æœ‰ä»»ä½•ä¸»åŠ¨æ€§ï¼Œè€Œ Presenteréå¸¸åšï¼Œæ‰€æœ‰é€»è¾‘éƒ½éƒ¨ç½²åœ¨é‚£é‡Œã€‚</p></li></ol></blockquote><h2 id="MVVMï¼ˆModelã€Viewã€ViewModelï¼‰"><a href="#MVVMï¼ˆModelã€Viewã€ViewModelï¼‰" class="headerlink" title="MVVMï¼ˆModelã€Viewã€ViewModelï¼‰"></a>MVVMï¼ˆModelã€Viewã€ViewModelï¼‰</h2><p>MVVM æ¨¡å¼å°† <strong>Presenter</strong> æ”¹åä¸º <strong>ViewModel</strong>ã€‚</p><p>å”¯ä¸€çš„åŒºåˆ«æ˜¯ï¼Œå®ƒé‡‡ç”¨åŒå‘ç»‘å®šï¼ˆdata-bindingï¼‰ï¼šViewçš„å˜åŠ¨ï¼Œè‡ªåŠ¨åæ˜ åœ¨ ViewModelï¼Œåä¹‹äº¦ç„¶ã€‚</p><p><strong>å¼•ç”¨ï¼š</strong></p><p><a href="https://www.ruanyifeng.com/blog/2015/02/mvcmvp_mvvm.html" target="_blank" rel="noopener">MVCï¼ŒMVP å’Œ MVVM çš„å›¾ç¤º</a></p>]]></content>
      
      
      <categories>
          
          <category> è½¯ä»¶å·¥ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> è½¯ä»¶å·¥ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Kotlin åç¨‹</title>
      <link href="/2020/10/14/Kotlin-%E5%8D%8F%E7%A8%8B/"/>
      <url>/2020/10/14/Kotlin-%E5%8D%8F%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»€ä¹ˆæ˜¯åç¨‹"><a href="#ä»€ä¹ˆæ˜¯åç¨‹" class="headerlink" title="ä»€ä¹ˆæ˜¯åç¨‹"></a>ä»€ä¹ˆæ˜¯åç¨‹</h1><blockquote><p><strong>ç”¨åŒæ­¥çš„æ–¹å¼å†™å¼‚æ­¥çš„ä»£ç </strong></p></blockquote><p>ã€åç¨‹ Coroutinesã€‘ æºäºSimula å’Œ Modula-2è¯­è¨€ï¼Œæœ¯è¯­æ¥è‡ªäº 1958 å¹´çš„ <strong>Melvin Edward Conway</strong> å‘æ˜å¹¶ä¸”æ‹¥æœ‰æ„å»ºæ±‡ç¼–ç¨‹åºï¼Œè¯´æ˜ <strong>åç¨‹æ˜¯ä¸€ç§ç¼–ç¨‹æ€æƒ³</strong>ï¼Œ å¹¶ä¸å±€é™äºç‰¹å®šçš„è¯­è¨€ã€‚</p><h5 id="çº¿ç¨‹å’Œåç¨‹çš„å…³ç³»"><a href="#çº¿ç¨‹å’Œåç¨‹çš„å…³ç³»" class="headerlink" title="çº¿ç¨‹å’Œåç¨‹çš„å…³ç³»"></a>çº¿ç¨‹å’Œåç¨‹çš„å…³ç³»</h5><p>ä» Android å¼€å‘è€…çš„è§’åº¦å»ç†è§£å®ƒä»¬çš„å…³ç³»ï¼š</p><ul><li>Androidä¸­æˆ‘ä»¬æ‰€æœ‰çš„ä»£ç éƒ½è·‘åœ¨çº¿ç¨‹ä¸­çš„ï¼Œ<strong>è€Œçº¿ç¨‹æ˜¯è·‘åœ¨è¿›ç¨‹ä¸­çš„</strong>ã€‚</li><li><strong>åç¨‹æ²¡æœ‰ç›´æ¥å’Œæ“ä½œç³»ç»Ÿå…³è”</strong>ï¼Œå®ƒä¹Ÿæ˜¯<strong>è·‘åœ¨çº¿ç¨‹ä¸­çš„</strong>ï¼Œå¯ä»¥æ˜¯å•çº¿ç¨‹ï¼Œä¹Ÿå¯ä»¥æ˜¯å¤šçº¿ç¨‹ã€‚</li><li>å•çº¿ç¨‹ä¸­çš„åç¨‹æ€»çš„<strong>æ‰§è¡Œæ—¶é—´</strong>å¹¶ä¸ä¼šæ¯”ä¸ç”¨åç¨‹å°‘ã€‚</li><li>Androidä¸­ï¼Œå¦‚æœåœ¨ä¸»çº¿ç¨‹ä¸­è¿›è¡Œç½‘ç»œè®¿é—®ï¼Œä¼šæŠ›å‡º <strong>NetworkOnMainThreadException</strong>ï¼Œå¯¹äºåœ¨ä¸»çº¿ç¨‹ä¸Šçš„åç¨‹ä¹Ÿä¸ä¾‹å¤–ï¼Œæ‰€ä»¥åœ¨è¿™ç§ä½¿ç”¨åœºæ™¯ä¸­ä¹Ÿæ˜¯è¦åˆ‡æ¢çº¿ç¨‹çš„ã€‚</li></ul><h4 id="åç¨‹çš„åº”ç”¨åœºæ™¯ä¹‹ä¸€-çº¿ç¨‹æ§åˆ¶"><a href="#åç¨‹çš„åº”ç”¨åœºæ™¯ä¹‹ä¸€-çº¿ç¨‹æ§åˆ¶" class="headerlink" title="åç¨‹çš„åº”ç”¨åœºæ™¯ä¹‹ä¸€ çº¿ç¨‹æ§åˆ¶"></a>åç¨‹çš„åº”ç”¨åœºæ™¯ä¹‹ä¸€ çº¿ç¨‹æ§åˆ¶</h4><blockquote><p>åç¨‹å¯ä»¥è®©æˆ‘ä»¬åœ¨å†™<strong>ä»£ç æ—¶ä¸ç”¨æ›´å¤šçš„å…³æ³¨å¤šçº¿ç¨‹åŒæ—¶æ›´æ–¹ä¾¿çš„å†™å‡ºå¹¶å‘æ“ä½œ</strong>ã€‚</p></blockquote><p><strong>åœºæ™¯</strong></p><p>åœ¨Javaä¸­å®ç°å¹¶å‘æ“ä½œé€šå¸¸éœ€è¦å¼€å¯ Threadï¼š</p><pre><code class="java">new Thread(new Runnable() {    @Override    public void run() {        ...    }}).start();</code></pre><p>Kotlinä¸­</p><pre><code class="kotlin">Thread({    ...}).start()</code></pre><p><strong>Kotlinå’ŒJavaä½¿ç”¨çº¿ç¨‹åŒæ ·å­˜åœ¨çš„é—®é¢˜ï¼š</strong></p><ul><li>çº¿ç¨‹ä»€ä¹ˆæ—¶å€™æ‰§è¡Œç»“æŸ</li><li>çº¿ç¨‹é—´å¦‚ä½•ç›¸äº’é€šä¿¡</li><li>å¤šçº¿ç¨‹çš„ç®¡ç†</li></ul><p>å¯ä»¥ç”¨Javaæ§åˆ¶çº¿ç¨‹ Executorçº¿ç¨‹æ± æ¥è¿›è¡Œ<strong>çº¿ç¨‹ç®¡ç†</strong>ï¼š</p><pre><code class="kotlin">val executor = Executors.newCachedThreadPool()executor.execute({    ...})</code></pre><p>ç”¨Androidçš„<strong>AsyncTask</strong>æ¥<strong>è§£å†³çº¿ç¨‹ä¹‹é—´çš„é€šè®¯</strong></p><pre><code class="kotlin">object : AsyncTask&lt;T0, T1, T2&gt; {     override fun doInBackground(vararg args: T0): String { ... }    override fun onProgressUpdate(vararg args: T1) { ... }    override fun onPostExecute(t3: T3) { ... }}</code></pre><p>ä½¿ç”¨<strong>AsyncTask</strong>è¿›è¡Œ<strong>çº¿ç¨‹ä¹‹é—´</strong>çš„<strong>é€šè®¯</strong>å¸¦æ¥çš„<strong>ç¼ºç‚¹</strong>ï¼ˆ<strong>AsyncTask</strong>æ˜¯<strong>Android</strong>å¯¹<strong>çº¿ç¨‹æ± </strong>Executorçš„<strong>å°è£…</strong>ï¼‰ï¼š</p><ul><li>éœ€è¦å¤„ç†å¤šä¸ªå›è°ƒï¼Œå®¹æ˜“é™·å…¥ã€å›è°ƒåœ°ç‹±ã€‘ã€‚</li><li>å°†ä¸šåŠ¡å¼ºè¡Œæ‹†åˆ†åˆ°å‰å°ã€ä¸­é—´æ›´æ–°ã€åå°ä¸‰ä¸ªå‡½æ•°ã€‚</li></ul><p>ä½¿ç”¨ RxJavaå’Œåç¨‹éƒ½å¯ä»¥å¾ˆå¥½çš„è§£å†³ä¸Šè¿°çš„é—®é¢˜ã€‚</p><h5 id="ä¾‹å­-ä½¿ç”¨åç¨‹è¿›è¡Œç½‘ç»œè®¿é—®å°†è¯·æ±‚åˆ°çš„æ•°æ®æ˜¾ç¤ºåˆ°å¯¹åº”çš„æ§ä»¶ä¸Šï¼š"><a href="#ä¾‹å­-ä½¿ç”¨åç¨‹è¿›è¡Œç½‘ç»œè®¿é—®å°†è¯·æ±‚åˆ°çš„æ•°æ®æ˜¾ç¤ºåˆ°å¯¹åº”çš„æ§ä»¶ä¸Šï¼š" class="headerlink" title="ä¾‹å­ ä½¿ç”¨åç¨‹è¿›è¡Œç½‘ç»œè®¿é—®å°†è¯·æ±‚åˆ°çš„æ•°æ®æ˜¾ç¤ºåˆ°å¯¹åº”çš„æ§ä»¶ä¸Šï¼š"></a>ä¾‹å­ ä½¿ç”¨åç¨‹è¿›è¡Œç½‘ç»œè®¿é—®å°†è¯·æ±‚åˆ°çš„æ•°æ®æ˜¾ç¤ºåˆ°å¯¹åº”çš„æ§ä»¶ä¸Šï¼š</h5><pre><code class="kotlin">launch({    val user = api.getUser() // ğŸ‘ˆ ç½‘ç»œè¯·æ±‚ï¼ˆIO çº¿ç¨‹ï¼‰    nameTv.text = user.name  // ğŸ‘ˆ æ›´æ–° UIï¼ˆä¸»çº¿ç¨‹ï¼‰})</code></pre><p>æ— éœ€å…³å¿ƒ <strong>launch</strong> å®ƒ<strong>ä¸æ˜¯</strong>ä¸€ä¸ª<strong>é¡¶å±‚å‡½æ•°</strong>ï¼Œåªéœ€è¦å…³ç³»å®ƒçš„ä¸šåŠ¡é€»è¾‘ï¼š</p><p>launch <strong>å‡½æ•°</strong>åŠ ä¸Šå®ç°åœ¨ {} ä¸­çš„<strong>å…·ä½“é€»è¾‘æ„æˆ</strong>äº†<strong>åç¨‹</strong>ã€‚</p><p>é€šå¸¸æˆ‘ä»¬è¿›è¡Œç½‘ç»œè¯·æ±‚ï¼Œä¼šä¼ ä¸€ä¸ªcallbackï¼Œæˆ–è€…åœ¨IOçº¿ç¨‹é‡Œè¿›è¡Œé˜»å¡å¼çš„åŒæ­¥è°ƒç”¨ï¼Œè€Œåœ¨è¿™æ®µä»£ç ä¸­ï¼Œä¸Šä¸‹ä¸¤ä¸ªè¯­å¥åˆ†åˆ«å·¥ä½œåœ¨ä¸¤ä¸ªçº¿ç¨‹é‡Œï¼Œå¹¶ä¸”å†™æ³•ä¸Šå’Œæ™®é€šå•çº¿ç¨‹ä»£ç æ˜¯ä¸€æ ·çš„ã€‚</p><p>è¿™é‡Œçš„ api.getUseræ˜¯ä¸€ä¸ªæŒ‚èµ·å‡½æ•°ï¼Œæ‰€ä»¥èƒ½å¤Ÿä¿è¯nameTv.textçš„æ­£ç¡®èµ‹å€¼ï¼Œè¿™å°±æ¶‰åŠåˆ°äº†åç¨‹ä¸­æœ€è‘—åçš„ã€éé˜»å¡å¼æŒ‚èµ·ã€‘äº†ã€‚</p><h1 id="åç¨‹å¥½åœ¨å“ªé‡Œ"><a href="#åç¨‹å¥½åœ¨å“ªé‡Œ" class="headerlink" title="åç¨‹å¥½åœ¨å“ªé‡Œ"></a>åç¨‹å¥½åœ¨å“ªé‡Œ</h1><h2 id="ä»€ä¹ˆæ˜¯é—­åŒ…"><a href="#ä»€ä¹ˆæ˜¯é—­åŒ…" class="headerlink" title="ä»€ä¹ˆæ˜¯é—­åŒ…"></a>ä»€ä¹ˆæ˜¯é—­åŒ…</h2><h4 id="èµ·æº"><a href="#èµ·æº" class="headerlink" title="èµ·æº"></a>èµ·æº</h4><p><strong>é—­åŒ…</strong>å¹¶<strong>ä¸</strong>æ˜¯<strong>kotlin</strong>ä¸­æå‡ºçš„æ–°æ¦‚å¿µï¼Œåœ¨Java8ä¸­å°±å·²ç»æ”¯æŒã€‚</p><p>ä»¥Threadä¸ºä¾‹ï¼Œçœ‹çœ‹ä»€ä¹ˆæ˜¯é—­åŒ…ï¼š</p><pre><code class="kotlin">// åˆ›å»ºä¸€ä¸ª Thread çš„å®Œæ•´å†™æ³•Thread(object : Runnable {    override fun run() {        ...    }})// æ»¡è¶³ SAMï¼Œå…ˆç®€åŒ–ä¸ºThread({    ...})// ä½¿ç”¨é—­åŒ…ï¼Œå†ç®€åŒ–ä¸ºThread {    ...}</code></pre><p>è¯­æ³•ç³–ï¼šå½“å‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°æ˜¯lambdaè¡¨è¾¾å¼æ—¶ï¼Œå¯ä»¥å°†<strong>lambda</strong>å†™åœ¨<strong>æ‹¬å·å¤–</strong>ã€‚è¿™å°±æ˜¯å®ƒçš„<strong>é—­åŒ…åŸåˆ™</strong>ã€‚</p><h5 id="æ³¨é‡Š"><a href="#æ³¨é‡Š" class="headerlink" title="æ³¨é‡Š"></a>æ³¨é‡Š</h5><p>éœ€è¦ä¸€ä¸ªç±»å‹ä¸º Runnable çš„å‚æ•°ï¼Œè€Œ Runnable æ˜¯ä¸€ä¸ªæ¥å£ï¼Œä¸”åªå®šä¹‰äº†ä¸€ä¸ªå‡½æ•° runï¼Œè¿™ç§æƒ…å†µæ»¡è¶³äº† Kotlin çš„SAMï¼Œå¯ä»¥è½¬æ¢æˆä¸€ä¸ªä¼ é€’çš„ lambdaè¡¨è¾¾å¼ï¼ˆç¬¬äºŒæ®µï¼‰ï¼Œä»¥ä¸ºé—­åŒ…åŸåˆ™ç›´æ¥å†™æˆ Thread{â€¦}ï¼ˆç¬¬ä¸‰æ®µï¼‰ã€‚</p><p>é€šè¿‡<strong>é—­åŒ…ç®€åŒ– launch å‡½æ•°</strong></p><pre><code class="kotlin">launch {    ...}</code></pre><h2 id="åŸºæœ¬ä½¿ç”¨åç¨‹"><a href="#åŸºæœ¬ä½¿ç”¨åç¨‹" class="headerlink" title="åŸºæœ¬ä½¿ç”¨åç¨‹"></a>åŸºæœ¬ä½¿ç”¨åç¨‹</h2><p>è¯´è¿‡<strong>launchå‡½æ•°ä¸æ˜¯é¡¶å±‚å‡½æ•°</strong> å¹¶ä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œæˆ‘ä»¬é€šè¿‡ä¸‹åˆ—æ–¹æ³•æ¥åˆ›å»ºåç¨‹ï¼š</p><pre><code class="kotlin">// æ–¹æ³•ä¸€ï¼Œä½¿ç”¨ runBlocking é¡¶å±‚å‡½æ•°runBlocking {    getImage(imageId)}// æ–¹æ³•äºŒï¼Œä½¿ç”¨ GlobalScope å•ä¾‹å¯¹è±¡//            ğŸ‘‡ å¯ä»¥ç›´æ¥è°ƒç”¨ launch å¼€å¯åç¨‹GlobalScope.launch {    getImage(imageId)}// æ–¹æ³•ä¸‰ï¼Œè‡ªè¡Œé€šè¿‡ CoroutineContext åˆ›å»ºä¸€ä¸ª CoroutineScope å¯¹è±¡//                                    ğŸ‘‡ éœ€è¦ä¸€ä¸ªç±»å‹ä¸º CoroutineContext çš„å‚æ•°val coroutineScope = CoroutineScope(context)coroutineScope.launch {    getImage(imageId)}</code></pre><p>æ–¹æ³•â‘ ï¼Œå¤šç”¨äºå•å…ƒæµ‹è¯•ï¼Œä¸šåŠ¡å¼€å‘ä¸ä¼šç”¨åˆ°å®ƒï¼Œå› ä¸ºå®ƒæ˜¯çº¿ç¨‹é˜»å¡çš„ã€‚</p><p>æ–¹æ³•â‘¡ï¼Œåœ¨Androidä¸­ä¸æ¨èè¿™ç§ç”¨æ³•ï¼Œå› ä¸ºå®ƒçš„ç”Ÿå‘½å‘¨æœŸä¼šå’Œappä¸€ç›´ï¼Œä¸”ä¸èƒ½å¤Ÿå–æ¶ˆã€‚å’Œä½¿ç”¨runBlockingä¸åŒå®ƒä¸ä¼šé˜»å¡çº¿ç¨‹ã€‚</p><p>æ–¹æ³•ä¸‰ï¼Œ<strong>æ¨èç”¨æ³•</strong>ï¼Œé€šè¿‡contextå‚æ•°å»ç®¡ç†å’Œæ§åˆ¶åç¨‹çš„ç”Ÿå‘½å‘¨æœŸï¼ˆè¿™é‡Œçš„contextå’ŒAndroidé‡Œçš„ä¸æ˜¯åŒä¸€ç§ä¸œè¥¿ï¼Œæ›´åƒæ˜¯ä¸€ç§æ¦‚å¿µï¼Œä¼šæœ‰Androidå¹³å°çš„å°è£…é…åˆä½¿ç”¨ï¼‰</p><p>å…¶ä¸­ <strong>GlobaScope</strong>ä¸<strong>CoroutineScope</strong> çš„æ›´å¤šå†…å®¹åé¢çš„æ–‡ç« å†è¯´ã€‚</p><p>åç¨‹<strong>æœ€å¸¸ç”¨</strong>çš„<strong>åŠŸèƒ½</strong>æ˜¯<strong>å¹¶å‘</strong>ï¼Œè€Œå¹¶å‘æœ€å¸¸ç”¨çš„åœºæ™¯æ˜¯å¤šçº¿ç¨‹ã€‚å¯ä»¥ä½¿ç”¨<strong>Dispatchers</strong>.<strong>IO</strong>å‚æ•°æŠŠ<strong>ä»»åŠ¡åˆ‡æ¢åˆ°IOçº¿ç¨‹æ‰§è¡Œ</strong>ï¼š</p><pre><code class="kotlin">coroutineScope.launch(Dispatchers.IO) {    ...}</code></pre><p>ä½¿ç”¨ <strong>Dispatchers.Main</strong> å‚æ•°åˆ‡æ¢åˆ°ä¸»çº¿ç¨‹ï¼š</p><pre><code class="kotlin">coroutineScope.launch(Dispatchers.Main) {    ...}</code></pre><p>æ‰€ä»¥ã€ä»€ä¹ˆæ˜¯åç¨‹ã€‘ä¸­è¯´åˆ°çš„å¼‚æ­¥è¯·æ±‚çš„å®Œæ•´ä¾‹å­æ˜¯è¿™æ ·çš„ï¼š</p><pre><code class="kotlin">coroutineScope.launch(Dispatchers.Main) {   // åœ¨ä¸»çº¿ç¨‹å¼€å¯åç¨‹    val user = api.getUser() // IO çº¿ç¨‹æ‰§è¡Œç½‘ç»œè¯·æ±‚    nameTv.text = user.name  // ä¸»çº¿ç¨‹æ›´æ–° UI}</code></pre><p>åœ¨Javaä¸­å›è°ƒå¼çš„å†™æ³•æ˜¯è¿™æ ·çš„ï¼š</p><pre><code class="kotlin">api.getUser(new Callback&lt;User&gt;() {    @Override    public void success(User user) {        runOnUiThread(new Runnable() {            @Override            public void run() {                nameTv.setText(user.name);            }        })    }    @Override    public void failure(Exception e) {        ...    }});</code></pre><h2 id="æ›´ä¸ºéº»çƒ¦çš„å¹¶å‘åœºæ™¯"><a href="#æ›´ä¸ºéº»çƒ¦çš„å¹¶å‘åœºæ™¯" class="headerlink" title="æ›´ä¸ºéº»çƒ¦çš„å¹¶å‘åœºæ™¯"></a>æ›´ä¸ºéº»çƒ¦çš„å¹¶å‘åœºæ™¯</h2><p>å¯¹äºå›è°ƒå¼çš„å†™æ³•ï¼Œå¦‚æœå¹¶å‘åœºæ™¯å†å¤æ‚ä¸€ç‚¹ï¼ŒåµŒå¥—çš„å¯èƒ½å¤Ÿå¤šã€‚å¦‚æœä½¿ç”¨åç¨‹ï¼Œå¤šå±‚ç½‘ç»œè¯·æ±‚ã€‚</p><pre><code class="kotlin">coroutineScope.launch(Dispatchers.Main) {       // å¼€å§‹åç¨‹ï¼šä¸»çº¿ç¨‹    val token = api.getToken()                  // ç½‘ç»œè¯·æ±‚ï¼šIO çº¿ç¨‹    val user = api.getUser(token)               // ç½‘ç»œè¯·æ±‚ï¼šIO çº¿ç¨‹    nameTv.text = user.name                     // æ›´æ–° UIï¼šä¸»çº¿ç¨‹}</code></pre><p>å¦‚æœè¿›è¡Œå¤šä¸ª<strong>ç½‘ç»œè¯·æ±‚</strong>ç­‰å¾…å®Œæˆå<strong>å†åˆ·æ–°UI</strong>ã€‚</p><pre><code class="kotlin">api.getAvatar(user, callback)api.getCompanyLogo(user, callback)</code></pre><p>å¦‚æœä½¿ç”¨å›è°ƒå¼å†™æ³•ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šé€‰æ‹©å¦¥åï¼Œåˆ™ä½¿ç”¨å…ˆåè¯·æ±‚ä»£æ›¿åŒæ—¶è¯·æ±‚ã€‚</p><pre><code class="kotlin">api.getAvatar(user) { avatar -&gt;    api.getCompanyLogo(user) { logo -&gt;        show(merge(avatar, logo))    }}</code></pre><p>ä½¿ç”¨çª—å¸˜æ–¹å¼å»å®ç°å¯èƒ½ä¼šå¯¼è‡´ç­‰å¾…æ—¶é•¿äº†ä¸€å€ï¼Œä¹Ÿç›¸å·®äº†ä¸€å€çš„æ€§èƒ½ã€‚</p><h5 id="åç¨‹å¹¶è¡Œè¯·æ±‚ç½‘ç»œ"><a href="#åç¨‹å¹¶è¡Œè¯·æ±‚ç½‘ç»œ" class="headerlink" title="åç¨‹å¹¶è¡Œè¯·æ±‚ç½‘ç»œ"></a>åç¨‹å¹¶è¡Œè¯·æ±‚ç½‘ç»œ</h5><p>ä½¿ç”¨åç¨‹å¯ä»¥ç›´æ¥å¹¶è¡Œè¯·æ±‚ä¸Šä¸‹ä¸¤è¡Œï¼Œæœ€åæŠŠç»“æœåˆå¹¶å³å¯ï¼š</p><pre><code class="kotlin">coroutineScope.launch(Dispatchers.Main) {    //            ğŸ‘‡  async å‡½æ•°ä¹‹åå†è®²    val avatar = async { api.getAvatar(user) }    // è·å–ç”¨æˆ·å¤´åƒ    val logo = async { api.getCompanyLogo(user) } // è·å–ç”¨æˆ·æ‰€åœ¨å…¬å¸çš„ logo    val merged = suspendingMerge(avatar, logo)    // åˆå¹¶ç»“æœ    //                  ğŸ‘†    show(merged) // æ›´æ–° UI}</code></pre><p>å³ä¾¿æ˜¯æ¯”è¾ƒå¤æ‚çš„å¹¶è¡Œç½‘ç»œè¯·æ±‚ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¹¶è¡Œå†™å‡ºç»“æ„æ¸…æ™°çš„ä»£ç ã€‚<strong>suspendingMerge</strong> å¹¶ä¸æ˜¯åç¨‹APIæä¾›çš„æ–¹æ³•ï¼Œè€Œæ˜¯è‡ªå®šä¹‰æŒ‚èµ·çš„ç»“æœåˆå¹¶æ–¹æ³•ã€‚</p><h5 id="åç¨‹çš„ä¼˜åŠ¿"><a href="#åç¨‹çš„ä¼˜åŠ¿" class="headerlink" title="åç¨‹çš„ä¼˜åŠ¿"></a>åç¨‹çš„ä¼˜åŠ¿</h5><p>è®©å¤æ‚çš„å¹¶å‘ä»£ç ï¼Œå˜å¾—ç®€å•ä¸”æ¸…æ™°æ˜¯åç¨‹çš„ä¼˜åŠ¿ã€‚</p><h1 id="åç¨‹å¦‚ä½•åœ¨é¡¹ç›®ä¸­ä½¿ç”¨"><a href="#åç¨‹å¦‚ä½•åœ¨é¡¹ç›®ä¸­ä½¿ç”¨" class="headerlink" title="åç¨‹å¦‚ä½•åœ¨é¡¹ç›®ä¸­ä½¿ç”¨"></a>åç¨‹å¦‚ä½•åœ¨é¡¹ç›®ä¸­ä½¿ç”¨</h1><h2 id="åœ¨é¡¹ç›®ä¸­é…ç½®å¯¹Kotlinåç¨‹çš„æ”¯æŒ"><a href="#åœ¨é¡¹ç›®ä¸­é…ç½®å¯¹Kotlinåç¨‹çš„æ”¯æŒ" class="headerlink" title="åœ¨é¡¹ç›®ä¸­é…ç½®å¯¹Kotlinåç¨‹çš„æ”¯æŒ"></a>åœ¨é¡¹ç›®ä¸­é…ç½®å¯¹Kotlinåç¨‹çš„æ”¯æŒ</h2><p>ä½¿ç”¨åç¨‹å‰ï¼Œéœ€è¦åœ¨ build.gradle æ–‡ä»¶ä¸­å¢åŠ  Kotlin åç¨‹çš„ä¾èµ–ï¼š</p><ul><li>é¡¹ç›®ç›®å½•ä¸‹</li></ul><pre><code class="kotlin">buildscript {    ...    // ğŸ‘‡    ext.kotlin_coroutines = &#39;1.3.1&#39;    ...}</code></pre><ul><li>Module ç›®å½•ä¸‹ï¼š</li></ul><pre><code class="kotlin">dependencies {    ...    //                                       ğŸ‘‡ ä¾èµ–åç¨‹æ ¸å¿ƒåº“    implementation &quot;org.jetbrains.kotlinx:kotlinx-coroutines-core:$kotlin_coroutines&quot;    //                                       ğŸ‘‡ ä¾èµ–å½“å‰å¹³å°æ‰€å¯¹åº”çš„å¹³å°åº“    implementation &quot;org.jetbrains.kotlinx:kotlinx-coroutines-android:$kotlin_coroutines&quot;    ...}</code></pre><p>Kotlin åç¨‹ä»¥å®˜æ–¹æ‰©å±•åº“çš„å½¢å¼è¿›è¡Œæ”¯æŒã€‚å…¶ä¸­ã€æ ¸å¿ƒåº“ã€‘å’Œã€å¹³å°åº“ã€‘çš„ç‰ˆæœ¬åº”è¯¥ä¿æŒä¸€è‡´ã€‚</p><ul><li><strong>æ ¸å¿ƒåº“</strong>ä¸ºåç¨‹çš„å…¬å…±APIéƒ¨åˆ†ã€‚ä¸ºæ‹‰åœ¨å„ä¸ªå¹³å°ç»Ÿä¸€æ¥å£ã€‚</li><li><strong>å¹³å°åº“</strong>ä¸»è¦ä¸ºåç¨‹åœ¨å…·ä½“å¹³å°çš„å…·ä½“å®ç°æ–¹å¼ã€‚åŸå› ï¼šå¤šçº¿ç¨‹åœ¨å„ä¸ªå¹³å°çš„å®ç°æ–¹å¼ä¸åŒã€‚</li></ul><h2 id="å¼€å§‹ä½¿ç”¨åç¨‹"><a href="#å¼€å§‹ä½¿ç”¨åç¨‹" class="headerlink" title="å¼€å§‹ä½¿ç”¨åç¨‹"></a>å¼€å§‹ä½¿ç”¨åç¨‹</h2><p><strong>åç¨‹æœ€ç®€å•çš„ä½¿ç”¨</strong>ã€‚é€šè¿‡<strong>launch</strong>å‡½æ•°å®ç°çº¿ç¨‹åˆ‡æ¢çš„åŠŸèƒ½ï¼š</p><pre><code class="kotlin">//               ğŸ‘‡coroutineScope.launch(Dispatchers.IO) {    ...}</code></pre><h5 id="ä»£ç ä¸­åç¨‹çš„è¡¨ç°ã€‚"><a href="#ä»£ç ä¸­åç¨‹çš„è¡¨ç°ã€‚" class="headerlink" title="ä»£ç ä¸­åç¨‹çš„è¡¨ç°ã€‚"></a><strong>ä»£ç ä¸­åç¨‹çš„è¡¨ç°ã€‚</strong></h5><p><strong>launch</strong> å‡½æ•°ï¼šæˆ‘è¦åˆ›å»ºåç¨‹ï¼Œå¹¶åœ¨æŒ‡å®šçš„çº¿ç¨‹ä¸­è¿è¡Œå®ƒã€‚è¢«åˆ›å»ºçš„ã€åç¨‹ã€‘æ˜¯è°ï¼Ÿ å°±æ˜¯ä½ ä¼ ç»™ launchçš„ä»£ç ï¼Œè¿™æ®µä»£ç å«ã€åç¨‹ã€‘ã€‚</p><p>å½“ä½ è¦åˆ‡æ¢çº¿ç¨‹æˆ–æŒ‡å®šçº¿ç¨‹æ—¶ã€‚<strong>è¦åœ¨åå°æ‰§è¡Œä»»åŠ¡ï¼Ÿ</strong></p><pre><code class="kotlin">launch(Dispatchers.IO) {    val image = getImage(imageId)}</code></pre><p><strong>åˆ‡æ¢åˆ°å‰å°åˆ·æ–°ç•Œé¢ï¼Ÿ</strong></p><pre><code class="kotlin">coroutineScope.launch(Dispatchers.IO) {    val image = getImage(imageId)    launch(Dispatchers.Main) {        avatarIv.setImageBitmap(image)    }}</code></pre><p>å‘ç”Ÿäº†åµŒå¥—çš„ä»£ç ã€‚</p><h5 id="é¿å…åµŒå¥—çš„æ ·å­ä½¿ç”¨åç¨‹"><a href="#é¿å…åµŒå¥—çš„æ ·å­ä½¿ç”¨åç¨‹" class="headerlink" title="é¿å…åµŒå¥—çš„æ ·å­ä½¿ç”¨åç¨‹"></a>é¿å…åµŒå¥—çš„æ ·å­ä½¿ç”¨åç¨‹</h5><p>å•å•ä½¿ç”¨åç¨‹å¹¶ä¸ä¼šæ¯”çº¿ç¨‹åšæ›´å¤šçš„äº‹æƒ…ã€‚ä½¿ç”¨æ›´å®ç”¨çš„å‡½æ•°ï¼š<strong>withContext</strong>ã€‚æŒ‡å®šåˆ‡æ¢çº¿ç¨‹ï¼Œå¹¶ä¸”åœ¨æ‰§è¡Œå®Œå†…éƒ¨é€»è¾‘åï¼Œè‡ªåŠ¨çº¿ç¨‹åˆ‡å›æ‰§è¡Œã€‚ä¸Šè¿°ä»£ç ä½¿ç”¨ withContextï¼š</p><pre><code class="kotlin">coroutineScope.launch(Dispatchers.Main) {      // ğŸ‘ˆ åœ¨ UI çº¿ç¨‹å¼€å§‹    val image = withContext(Dispatchers.IO) {  // ğŸ‘ˆ åˆ‡æ¢åˆ° IO çº¿ç¨‹ï¼Œå¹¶åœ¨æ‰§è¡Œå®Œæˆååˆ‡å› UI çº¿ç¨‹        getImage(imageId)                      // ğŸ‘ˆ å°†ä¼šè¿è¡Œåœ¨ IO çº¿ç¨‹    }    avatarIv.setImageBitmap(image)             // ğŸ‘ˆ å›åˆ° UI çº¿ç¨‹æ›´æ–° UI} </code></pre><h5 id="æ¯”è¾ƒä¸¤ç§å†™æ³•æ¥ä½“ç°-withContextçš„ä¼˜åŠ¿"><a href="#æ¯”è¾ƒä¸¤ç§å†™æ³•æ¥ä½“ç°-withContextçš„ä¼˜åŠ¿" class="headerlink" title="æ¯”è¾ƒä¸¤ç§å†™æ³•æ¥ä½“ç° withContextçš„ä¼˜åŠ¿"></a>æ¯”è¾ƒä¸¤ç§å†™æ³•æ¥ä½“ç° withContextçš„ä¼˜åŠ¿</h5><p>å½“è¦é¢‘ç¹åˆ‡æ¢çº¿ç¨‹æ—¶ã€‚é€šè¿‡ä¸‹å±ä»£ç å¯¹æ¯”ï¼š</p><pre><code class="kotlin">// ç¬¬ä¸€ç§å†™æ³•coroutineScope.launch(Dispatchers.IO) {    ...    launch(Dispatchers.Main){        ...        launch(Dispatchers.IO) {            ...            launch(Dispatchers.Main) {                ...            }        }    }}// é€šè¿‡ç¬¬äºŒç§å†™æ³•æ¥å®ç°ç›¸åŒçš„é€»è¾‘coroutineScope.launch(Dispatchers.Main) {    ...    withContext(Dispatchers.IO) {        ...    }    ...    withContext(Dispatchers.IO) {        ...    }    ...}</code></pre><p><strong>ä¼˜åŠ¿ï¼š</strong></p><p>ç”±äºå®ƒå¯ä»¥â€œæ¥å›åˆ‡å›æ¥â€æ¶ˆé™¤äº†å¹¶å‘ä»£ç åœ¨åä½œæ—¶çš„åµŒå¥—ã€‚æ¶ˆé™¤äº†åµŒå¥—å…³ç³»ï¼Œè¿˜å¯ä»¥å°† <strong>withContext</strong> æ”¾åœ¨å•ç‹¬çš„å‡½æ•°é‡Œï¼š</p><pre><code class="kotlin">launch(Dispatchers.Main) {              // ğŸ‘ˆ åœ¨ UI çº¿ç¨‹å¼€å§‹    val image = getImage(imageId)    avatarIv.setImageBitmap(image)     // ğŸ‘ˆ æ‰§è¡Œç»“æŸåï¼Œè‡ªåŠ¨åˆ‡æ¢å› UI çº¿ç¨‹}//                               ğŸ‘‡fun getImage(imageId: Int) = withContext(Dispatchers.IO) {    ...}</code></pre><p>å®ç°äº†ã€åŒæ­¥çš„æ–¹å¼å†™å¼‚æ­¥çš„ä»£ç ã€‘ã€‚</p><pre><code class="kotlin">launch(Dispatchers.Main) {              // ğŸ‘ˆ åœ¨ UI çº¿ç¨‹å¼€å§‹    val image = getImage(imageId)    avatarIv.setImageBitmap(image)     // ğŸ‘ˆ æ‰§è¡Œç»“æŸåï¼Œè‡ªåŠ¨åˆ‡æ¢å› UI çº¿ç¨‹}//                               ğŸ‘‡fun getImage(imageId: Int) = withContext(Dispatchers.IO) {    ...}</code></pre><p><strong>withContext å•ç‹¬æ”¾åœ¨å‡½æ•°ä¸­è¦æ³¨æ„é‚£äº›</strong></p><pre><code class="kotlin">fun getImage(imageId: Int) = withContext(Dispatchers.IO) {    // IDE æŠ¥é”™ Suspend function&#39;withContext&#39; should be called only from a coroutine or another suspend funcion}</code></pre><p><strong>éœ€è¦åœ¨ suspendå‡½æ•°ä¸­è°ƒç”¨</strong>ã€‚ï¼ˆ<strong>withContext</strong> æ˜¯<strong>ä¸€ä¸ª suspend</strong> å‡½æ•°ï¼Œæ‰€ä»¥éœ€è¦åœ¨<strong>åç¨‹</strong>æˆ–è€…<strong>suspendå‡½æ•°</strong>ä¸­è°ƒç”¨ã€‚ï¼‰</p><h2 id="ä»€ä¹ˆæ˜¯-suspend-å‡½æ•°"><a href="#ä»€ä¹ˆæ˜¯-suspend-å‡½æ•°" class="headerlink" title="ä»€ä¹ˆæ˜¯ suspend å‡½æ•°"></a>ä»€ä¹ˆæ˜¯ suspend å‡½æ•°</h2><p><strong>suspend</strong> å‡½æ•°æ˜¯<strong>kotlinåç¨‹</strong>æœ€æ ¸å¿ƒçš„å…³é”®å­—ã€‚ä¸­æ–‡æ„æ€ä¸ºã€æš‚åœã€‘ã€ã€å¯æŒ‚èµ·ã€‘ã€‚</p><p>è§£é‡Šï¼š</p><blockquote><p>ä»£ç æ‰§è¡Œåˆ° <strong>suspend å‡½æ•°</strong>çš„æ—¶å€™ä¼šã€<strong>æŒ‚èµ·</strong>ã€‘ï¼Œå¹¶ä¸”è¿™ä¸ª<strong>ã€æŒ‚èµ·ã€‘</strong>æ˜¯<strong>éé˜»å¡å¼</strong>çš„ï¼Œä¸ä¼šé˜»å¡å½“å‰çº¿ç¨‹ã€‚</p></blockquote><p>ä¿®æ”¹ä¸Šè¿°ä»£ç è®©å®ƒå¯ä»¥æ‰§è¡Œï¼š</p><pre><code class="kotlin">//ğŸ‘‡suspend fun getImage(imageId: Int) = withContext(Dispatchers.IO) {    ...}</code></pre><p>åˆ°åº•ä»€ä¹ˆæ˜¯ suspend ï¼Œä»€ä¹ˆæ˜¯ ã€éé˜»å¡ã€‘ï¼Œå¦‚ä½•ã€æŒ‚èµ·ã€‘ã€‚ä¸‹ç¯‡ã€‚</p><h1 id="ã€æŒ‚èµ·çš„æœ¬è´¨ã€‘"><a href="#ã€æŒ‚èµ·çš„æœ¬è´¨ã€‘" class="headerlink" title="ã€æŒ‚èµ·çš„æœ¬è´¨ã€‘"></a>ã€æŒ‚èµ·çš„æœ¬è´¨ã€‘</h1><p>åç¨‹ä¸­æŒ‚èµ·çš„å¯¹è±¡æ˜¯ä»€ä¹ˆï¼Ÿ     <strong>æŒ‚èµ·çš„å¯¹è±¡æ˜¯åç¨‹ã€‚</strong></p><p>åç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ</p><blockquote><p>å¯åŠ¨ä¸€ä¸ªåç¨‹å¯ä»¥ä½¿ç”¨ <strong>launch æˆ–è€… async å‡½æ•°</strong>ï¼Œåç¨‹å°±æ˜¯<strong>è¿™ä¸¤ä¸ªå‡½æ•°ä¸­é—­åŒ…çš„ä»£ç å—</strong>ã€‚<strong>launchï¼Œasync æˆ–è€…å…¶ä»–å‡½æ•°åˆ›å»ºçš„åç¨‹ï¼Œ</strong>åœ¨æ‰§è¡Œåˆ°æŸä¸ª suspendå‡½æ•°æ—¶ï¼Œè¿™ä¸ªåç¨‹ä¼šè¢« ã€<strong>suspend</strong>ã€‘æŒ‚èµ·ã€‚</p></blockquote><p>ä»å“ªé‡ŒæŒ‚èµ·ï¼Ÿ</p><blockquote><p>åœ¨å½“å‰çº¿ç¨‹æŒ‚èµ·ã€‚å°±æ˜¯è¯´<strong>å½“å‰åç¨‹</strong>åœ¨æ‰§è¡Œçš„çº¿ç¨‹ä¸­è„±ç¦»ã€‚æ³¨æ„ å®ƒåªæ˜¯è„±ç¦»äº†ï¼Œå½“å‰çº¿ç¨‹ä¸å†å»ç®¡ç†è¿™ä¸ªåç¨‹è¦æ±‚åšä»€ä¹ˆã€‚</p></blockquote><p><strong>å½“çº¿ç¨‹æ‰§è¡Œåˆ°åç¨‹çš„suspendå‡½æ•°çš„æ—¶å€™ï¼Œæš‚æ—¶ä¸å†æ‰§è¡Œåç¨‹ä¸­çš„ä»£ç äº†ã€‚</strong></p><p>åˆ†å¼€æ¥çœ‹ï¼Œäº’ç›¸è„±ç¦»çš„çº¿ç¨‹å’Œåç¨‹æ¥ä¸‹æ¥å°†å‘ç”Ÿä»€ä¹ˆäº‹æƒ…ã€‚</p><h4 id="çº¿ç¨‹ï¼š"><a href="#çº¿ç¨‹ï¼š" class="headerlink" title="çº¿ç¨‹ï¼š"></a>çº¿ç¨‹ï¼š</h4><p>åç¨‹çš„ä»£ç å—ä¸­ï¼Œ<strong>çº¿ç¨‹æ‰§è¡Œåˆ°äº†suspendå‡½æ•°è¿™é‡Œçš„æ—¶å€™ï¼Œå°±æš‚æ—¶ä¸å†æ‰§è¡Œå‰©ä½™çš„åç¨‹ä»£ç ï¼Œè·³å‡ºåç¨‹çš„ä»£ç å—ã€‚</strong></p><p>é‚£çº¿ç¨‹æ¥ä¸‹æ¥ä¼šåšä»€ä¹ˆï¼Ÿ</p><p>ä¾‹å¦‚å®ƒæ˜¯åå°çº¿ç¨‹ï¼š</p><ul><li>æ— äº‹å¯åšï¼Œè¢«ç³»ç»Ÿå›æ”¶</li><li>ç»§ç»­æ‰§è¡Œåˆ«çš„åå°ä»»åŠ¡</li></ul><p>åŒJavaçº¿ç¨‹æ± ç”¨åˆ°çº¿ç¨‹åœ¨å·¥ä½œç»“æŸåçš„å®Œå…¨ä¸€æ ·ï¼šå›æ”¶æˆ–è€…å†åˆ©ç”¨ã€‚</p><p>å¦‚æœæ˜¯ä¸ªAndroidçš„ä¸»çº¿ç¨‹ï¼Œé‚£ä¹ˆå®ƒä¼šä»¥ä¸€ç§’å…­åæ¬¡çš„ç•Œé¢åˆ·æ–°ä»»åŠ¡ã€‚</p><p>å¸¸è§çš„åœºæ™¯æ˜¯ï¼Œè·å–å›¾ç‰‡ï¼Œæ˜¾ç¤ºå‡ºæ¥ï¼š</p><pre><code class="kotlin">// ä¸»çº¿ç¨‹ä¸­GlobalScope.launch(Dispatchers.Main) {  val image = suspendingGetImage(imageId)  // è·å–å›¾ç‰‡  avatarIv.setImageBitmap(image)           // æ˜¾ç¤ºå‡ºæ¥}suspend fun suspendingGetImage(id: String) = withContext(Dispatchers.IO) {  ...}</code></pre><p>åœ¨ä¸»çº¿ç¨‹çš„åç¨‹ï¼Œ<strong>å®ƒå®è´¨ä¸Šä¼šå¾€ä½ çš„ä¸»çº¿ç¨‹ post ä¸€ä¸ª Runnableï¼Œè¿™ä¸ª Runnable å°±æ˜¯ä½ çš„åç¨‹ä»£ç ï¼š</strong></p><pre><code class="kotlin">handler.post {  val image = suspendingGetImage(imageId)  avatarIv.setImageBitmap(image)}</code></pre><p>åç¨‹è¢«æŒ‚èµ·æ—¶ï¼Œ<strong>ä¸»çº¿ç¨‹çš„ post çš„Runnable æå‰ç»“æŸï¼Œç„¶åç»§ç»­æ‰§è¡Œå®ƒç•Œé¢çš„åˆ·æ–°ä»»åŠ¡ã€‚</strong></p><h4 id="åç¨‹ï¼š"><a href="#åç¨‹ï¼š" class="headerlink" title="åç¨‹ï¼š"></a>åç¨‹ï¼š</h4><p>çº¿ç¨‹çš„ä»£ç åœ¨åˆ°è¾¾ <strong>suspend</strong>å‡½æ•°æ—¶ä¼šè¢«ææ–­ï¼Œ<strong>åç¨‹ä¼šä»è¿™ä¸ª suspend å‡½æ•°å¼€å§‹ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œä¸è¿‡æ˜¯åœ¨æŒ‡å®šçš„çº¿ç¨‹</strong>ã€‚</p><p>è°æŒ‡å®šçš„ï¼Ÿ</p><blockquote><p>suspend å‡½æ•°æŒ‡å®šçš„ï¼Œ æ¯”å¦‚æˆ‘ä»¬è¿™ä¸ªä¾‹å­ä¸­ï¼Œ å‡½æ•°å†…éƒ¨çš„withContextä¼ å…¥çš„Dispatchers.IOæ‰€æŒ‡å®šçš„IOçº¿ç¨‹ã€‚</p></blockquote><p><strong>Dispatchers è°ƒåº¦å™¨ï¼Œé™åˆ¶åç¨‹åœ¨ç‰¹å®šçš„çº¿ç¨‹æ‰§è¡Œï¼Œæˆ–è€…åˆ†æ´¾çš„ä¸€ä¸ªçº¿ç¨‹æ± ï¼Œæˆ–è€…è®©å®ƒä¸å—é™åˆ¶çš„è¿è¡Œã€‚</strong></p><p>å¸¸ç”¨çš„ Dispatchersï¼Œå…±æœ‰é‚£äº›ï¼š</p><ul><li><strong>Dispatchers.Main</strong>:Androidçš„ä¸»çº¿ç¨‹</li><li><strong>DIspatchers.IO</strong>:é’ˆå¯¹ç£ç›˜å’Œç½‘ç»œIOè¿›è¡Œäº†ä¼˜åŒ–ï¼Œé€‚åˆIOå¯†é›†å‹çš„ä»»åŠ¡ï¼Œä¾‹å¦‚ï¼šè¯»å†™æ–‡ä»¶ï¼Œæ“ä½œæ•°æ®åº“ä»¥åŠç½‘ç»œè¯·æ±‚</li><li><strong>Dispatchers.Detault</strong>:é€‚åˆGPUå¯†é›†å‹ä»»åŠ¡ï¼Œä¾‹å¦‚è®¡ç®—ã€‚</li></ul><p>åç¨‹ä» <strong>suspend</strong> å‡½æ•°å¼€å§‹è„±ç¦»å¯åŠ¨å®ƒçš„çº¿ç¨‹ï¼Œç»§ç»­æ‰§è¡Œåœ¨ <strong>Dispatchers</strong> æ‰€æŒ‡å®šçš„IOçº¿ç¨‹ã€‚</p><p>åœ¨ suspend å‡½æ•°æ‰§è¡Œå®Œæˆä¹‹åï¼Œåç¨‹ä¸ºæˆ‘ä»¬ï¼š<strong>è‡ªåŠ¨å°†çº¿ç¨‹åˆ‡å›æ¥</strong></p><p><strong>åˆ‡å›ï¼Ÿä»€ä¹ˆæ„æ€ï¼Ÿ</strong></p><p>åç¨‹åŸæœ¬æ˜¯åœ¨ <strong>ä¸»çº¿ç¨‹ä¸­è¿åŠ¨çš„</strong>ï¼Œåœ¨ä»£ç æ‰§åˆ° <strong>suspend</strong> å‡½æ•°çš„æ—¶å€™ï¼Œå‘ç”Ÿçº¿ç¨‹åˆ‡æ¢ï¼Œæ ¹æ® <strong>Dispatchers</strong> åˆ‡æ¢åˆ°äº†IOçº¿ç¨‹ï¼›</p><p>ã€<strong>åˆ‡å›</strong>ã€‘æ˜¯åç¨‹ä¼šæ£’æˆ‘å† post ä¸€ä¸ª Runnableï¼Œè®©å‰©ä¸‹çš„ä»£ç ç»§ç»­å›åˆ°ä¸»çº¿ç¨‹å»æ‰§è¡Œã€‚</p><h4 id="æœ¬è´¨ï¼š"><a href="#æœ¬è´¨ï¼š" class="headerlink" title="æœ¬è´¨ï¼š"></a>æœ¬è´¨ï¼š</h4><p>åç¨‹å†æ‰§è¡Œåˆ°æ ‡è®°æœ‰suspendæ ‡è®°çš„å‡½æ•°æ—¶ï¼Œä¼šè¢«suspendä¹Ÿå°±æ˜¯æŒ‚èµ·ï¼Œè€Œæ‰€è°“çš„æŒ‚èµ·ï¼Œå°±æ˜¯åˆ‡çº¿ç¨‹ï¼›ä¸åŒåœ¨äºï¼Œ<strong>æŒ‚èµ·å‡½æ•°åœ¨æ‰§è¡Œå®Œæˆä¹‹åï¼Œåç¨‹ä¼šé‡æ–°åˆ‡å›å®ƒçš„çº¿ç¨‹ã€‚</strong> å†ç®€å•æ¥è¯´ï¼š<strong>kotlin ä¸­æŒ‚èµ·ï¼Œå°±æ˜¯ä¸€ä¸ªç¨åä¼šè¢«è‡ªåŠ¨åˆ‡å›çš„çº¿ç¨‹è°ƒåº¦æ“ä½œã€‚</strong></p><blockquote><p>ã€åˆ‡å›ã€‘åŠ¨ä½œï¼Œåœ¨kotliné‡Œå«åš resumeï¼Œ</p></blockquote><p>å‡½æ•°æŒ‚èµ·åæ˜¯éœ€è¦æ¢å¤çš„ã€‚</p><p>è€Œæ¢å¤è¿™ä¸ªåŠŸèƒ½æ˜¯åç¨‹çš„ï¼Œå¦‚æœä¸åœ¨åç¨‹é‡Œè°ƒç”¨ï¼Œæ¢å¤è¿™ä¸ªåŠŸèƒ½æ˜¯æ²¡æ³•å®ç°çš„ï¼Œæ‰€ä»¥ä¹Ÿå°±å›ç­”äº†è¿™ä¸ªé—®é¢˜ï¼šä¸ºä»€ä¹ˆæŒ‚èµ·å‡½æ•°å¿…é¡»åœ¨åç¨‹æˆ–è€…å¦ä¸€ä¸ªæŒ‚èµ·å‡½æ•°ä¸­è°ƒç”¨ã€‚</p><h1 id="å¦‚ä½•æŒ‚èµ·çš„ï¼Ÿ"><a href="#å¦‚ä½•æŒ‚èµ·çš„ï¼Ÿ" class="headerlink" title="å¦‚ä½•æŒ‚èµ·çš„ï¼Ÿ"></a>å¦‚ä½•æŒ‚èµ·çš„ï¼Ÿ</h1><p>ã€<strong>æŒ‚èµ·</strong>ã€‘æ˜¯å¦‚ä½•åšåˆ°çš„ã€‚</p><p>å®šä¹‰çš„ä»»æ„å‡½æ•°ï¼š</p><pre><code class="kotlin">suspend fun suspendingPrint() {  println(&quot;Thread: ${Thread.currentThread().name}&quot;)}I/System.out: Thread: main</code></pre><p>è¾“å‡ºç»“æœè¿˜æ˜¯ä¸ºä¸»çº¿ç¨‹ã€‚</p><p>ä¸ºä½•æ²¡æœ‰åˆ‡æ¢çº¿ç¨‹äº†ï¼Ÿå› ä¸ºå®ƒå¹¶ä¸çŸ¥é“å¾€å“ªé‡Œåˆ‡ï¼Œéœ€è¦æˆ‘ä»¬å‘Šè¯‰å®ƒã€‚</p><p>å¯¹æ¯”ä¹‹å‰ä¾‹å­ä¸­çš„ suspendingGetImageå‡½æ•°ä»£ç ï¼š</p><pre><code class="kotlin">//                                               ğŸ‘‡suspend fun suspendingGetImage(id: String) = withContext(Dispatchers.IO) {  ...}</code></pre><p>ä¸åŒä¹‹å¤„åœ¨äº <strong>withContext</strong> å‡½æ•°</p><p><strong>withContext</strong>æºç å¯çŸ¥ï¼Œ<strong>å®ƒæœ¬èº«å°±æ˜¯ä¸€ä¸ªæŒ‚èµ·å‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ªDispatcher å‡½æ•°ï¼Œä¾èµ–è¿™ä¸ªDispatcher å‡½æ•°çš„æŒ‡ç¤ºï¼Œä½ çš„åç¨‹è¢«æŒ‚èµ·ï¼Œç„¶ååˆ‡æ¢åˆ°åˆ«çš„çº¿ç¨‹ã€‚</strong></p><p>æ‰€ä»¥suspendï¼Œå¹¶ä¸èƒ½èµ·åˆ°æŒ‚èµ·å‡½æ•°çš„ä½œç”¨ã€‚</p><p>è€ŒçœŸæ­£æŒ‚èµ·åç¨‹çš„ï¼Œkotlinåç¨‹æ¡†æ¶å¸®åŠ©æˆ‘ä»¬åšçš„ã€‚</p><p>åŠ ä¸Š suspend å…³é”®è¯æ˜¯ä¸è¡Œçš„ï¼Œè¿˜éœ€è¦ç›´æ¥æˆ–è€…é—´æ¥çš„è°ƒç”¨åˆ° kotlin åç¨‹æ¡†æ¶è‡ªå¸¦çš„ <strong>suspend</strong> å‡½æ•°æ‰è¡Œã€‚</p><h1 id="suspend-çš„æ„ä¹‰ï¼Ÿ"><a href="#suspend-çš„æ„ä¹‰ï¼Ÿ" class="headerlink" title="suspend çš„æ„ä¹‰ï¼Ÿ"></a>suspend çš„æ„ä¹‰ï¼Ÿ</h1><p>è¿™ä¸ªå…³é”®è¯æœ€é‡è¦çš„ä½œç”¨å°±æ˜¯<strong>æé†’</strong>ã€‚</p><p>æé†’ä½ è¿™ä¸ªå‡½æ•°æ˜¯ä¸€ä¸ªæŒ‚èµ·æ“ä½œï¼Œ<strong>æé†’å®ƒæ˜¯ä¸ªè€—æ—¶å‡½æ•°ï¼Œè¯·åœ¨åç¨‹ä½ è°ƒç”¨å®ƒã€‚</strong></p><pre><code class="kotlin">// ğŸ‘‡ redundant suspend modifiersuspend fun suspendingPrint() {  println(&quot;Thread: ${Thread.currentThread().name}&quot;)}</code></pre><p>å¦‚æœä½ åˆ›å»ºä½¿ç”¨ <strong>suspend</strong> å‡½æ•°ä½†æ˜¯å®ƒå†…éƒ¨å¹¶æ²¡æœ‰åŒ…å«çœŸæ­£çš„æŒ‚èµ·é€»è¾‘æ—¶ï¼Œ<strong>ç¼–è¯‘å™¨ä¼šç»™ä½ æç¤º</strong>ï¼š<strong>redundant suspend modigier</strong>ï¼Œè¿™ä¸ª <strong>suspend</strong> å…³é”®è¯æ˜¯å¤šä½™çš„ã€‚</p><p>å› ä¸ºè¿™ä¸ªå‡½æ•°å¹¶æ²¡æœ‰å‘ç”ŸçœŸæ­£çš„æŒ‚èµ·ï¼Œæ­¤æ—¶ suspend å…³é”®è¯åªæœ‰ä¸€ä¸ªæ•ˆæœï¼š<strong>é™åˆ¶è¿™ä¸ªå‡½æ•°åªèƒ½åœ¨åç¨‹é‡Œè¢«è°ƒç”¨ï¼Œåœ¨éåç¨‹çš„ä»£ç ä¸­æ˜¯æ— æ³•è°ƒç”¨çš„ã€‚</strong></p><p>åˆ›å»ºsuspendå‡½æ•°ï¼Œè¦åœ¨å®ƒå†…éƒ¨ç›´æ¥æˆ–è€…é—´æ¥çš„è°ƒç”¨ kotlin è‡ªå¸¦çš„suspend å‡½æ•°ï¼Œè¿™æ˜¯ä½ çš„ suspendæ‰æœ‰æ„ä¹‰ã€‚</p><h1 id="å¦‚ä½•è‡ªå®šä¹‰-suspend-å‡½æ•°ï¼Ÿ"><a href="#å¦‚ä½•è‡ªå®šä¹‰-suspend-å‡½æ•°ï¼Ÿ" class="headerlink" title="å¦‚ä½•è‡ªå®šä¹‰ suspend å‡½æ•°ï¼Ÿ"></a>å¦‚ä½•è‡ªå®šä¹‰ suspend å‡½æ•°ï¼Ÿ</h1><p>å…ˆåˆ†ä¸ºä¸¤ä¸ªé—®é¢˜:</p><ul><li>ä»€ä¹ˆæ—¶å€™éœ€è¦è‡ªå®šä¹‰ suspend å‡½æ•°ï¼Ÿ</li><li>å…·ä½“åº”è¯¥æ€ä¹ˆå†™?</li></ul><h4 id="ä»€ä¹ˆæ—¶å€™éœ€è¦è‡ªå®šä¹‰-suspend-å‡½æ•°ï¼Ÿ"><a href="#ä»€ä¹ˆæ—¶å€™éœ€è¦è‡ªå®šä¹‰-suspend-å‡½æ•°ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ—¶å€™éœ€è¦è‡ªå®šä¹‰ suspend å‡½æ•°ï¼Ÿ"></a><strong>ä»€ä¹ˆæ—¶å€™éœ€è¦è‡ªå®šä¹‰ suspend å‡½æ•°ï¼Ÿ</strong></h4><p>æŸä¸ªå‡½æ•°éœ€è¦è€—æ—¶æ“ä½œæ—¶ï¼Œé‚£å°±å¯ä»¥æŠŠå®ƒå†™æˆ suspend å‡½æ•°ã€‚è¿™æ˜¯åŸåˆ™ã€‚</p><p>è€—æ—¶æ“ä½œå…±åˆ†ä¸ºä¸¤ç±»ï¼šIOæ“ä½œå’ŒCPUè®¡ç®—å·¥ä½œï¼Œæ¯”å¦‚æ–‡ä»¶çš„è¯»å†™ã€ç½‘ç»œäº¤ä»˜ã€å›¾ç‰‡çš„æ¨¡ç³Šå¤„ç†ï¼Œéƒ½æ˜¯è€—æ—¶çš„ã€‚</p><h4 id="å…·ä½“æ“ä½œï¼š"><a href="#å…·ä½“æ“ä½œï¼š" class="headerlink" title="å…·ä½“æ“ä½œï¼š"></a>å…·ä½“æ“ä½œï¼š</h4><p>ç»™å‡½æ•°åŠ ä¸Š <strong>suspend</strong> å…³é”®å­—ï¼Œç„¶å <strong>withContext</strong> æŠŠå‡½æ•°çš„å†…å®¹åŒ…ä½å°±å¯ä»¥äº†ã€‚</p><p>ä½¿ç”¨ <strong>withContext</strong> æ˜¯å› ä¸ºå®ƒåœ¨æŒ‚èµ·å‡½æ•°ä¸­åŠŸèƒ½æœ€ç®€å•ç›´æ¥ï¼šæŠŠçº¿ç¨‹è‡ªåŠ¨åˆ‡èµ°æˆ–è€…åˆ‡å›ã€‚</p><p>å½“ç„¶å¹¶ä¸æ˜¯åªæœ‰ <strong>withContext</strong> è¿™ä¸ªå‡½æ•°æ¥è¾…åŠ©æˆ‘ä»¬è‡ªå®šä¹‰<strong>suspend</strong> å‡½æ•°ï¼Œæ¯”å¦‚æŒ‚èµ·å‡½æ•° <strong>delay</strong>ï¼Œå®ƒçš„ä½œç”¨æ˜¯ç­‰å¾…æŒ‡å®šæ—¶é—´å†å¾€ä¸‹æ‰§è¡Œä»£ç ã€‚</p><p><strong>ä½¿ç”¨delayæ‰§è¡Œç­‰å¾…è€—æ—¶æ“ä½œ</strong></p><pre><code class="kotlin">suspend fun suspendUntilDone() {  while (!done) {    delay(5)  }}</code></pre><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>ä»€ä¹ˆæ˜¯æŒ‚èµ·ï¼Ÿ</p><blockquote><p>æŒ‚èµ·ï¼Œå°±æ˜¯ä¸€ä¸ªç¨åä¼šè¢«æŒ‡å®šåˆ‡å›æ¥çš„çº¿ç¨‹è°ƒåº¦æ“ä½œã€‚</p></blockquote><p>ç–‘æƒ‘ï¼š</p><p>åç¨‹ä¸­çš„éé˜»å¡å¼æ˜¯ä»€ä¹ˆ</p><p>åç¨‹å’ŒRxJavaåœ¨åˆ‡æ¢çº¿ç¨‹æ–¹é¢åŠŸèƒ½æ˜¯ä¸€æ ·çš„ï¼Œéƒ½èƒ½å†™å‡ºé¿å…åµŒå¥—å›è°ƒçš„å¤æ‚å¹¶å‘ä»£ç ï¼Œåç¨‹ç›¸æ¯”æœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Œæˆ–è€…è®©å¼€å‘è€…ä½¿ç”¨çš„ç†ç”±ï¼Ÿ</p><h1 id="åç¨‹-Job"><a href="#åç¨‹-Job" class="headerlink" title="åç¨‹ Job"></a>åç¨‹ Job</h1><p>Job æ˜¯æ ‡å‡†åº“ä¸­å¯åŠ¨åç¨‹åè¿”å›çš„å¯¹è±¡ï¼Œä»£è¡¨ç€åç¨‹æœ¬æ¬¡ä½œä¸šã€‚æˆ‘ä»¬å¯ä»¥åˆ¤æ–­åç¨‹æ˜¯å¦æ¥å—ï¼Œæ˜¯å¦å–æ¶ˆï¼Œæ˜¯å¦å®Œæˆå¹¶ä¸”é¢å¯ä»¥å–æ¶ˆå½“å‰åç¨‹ä»¥åŠåµŒå¥—å­åç¨‹ã€‚</p><p>åŸºæœ¬ä¸Šæ¯å¯åŠ¨ä¸€ä¸ªåç¨‹å°±ä¼šäº§ç”Ÿå¯¹åº”çš„Jobã€‚</p><pre><code class="kotlin">coroutineScope.launch(Dispatchers.IO) {    ...}</code></pre><p>launch è¿”å›çš„å°±æ˜¯ä¸€ä¸ªJobï¼Œå®ƒå¯ä»¥ç”¨æ¥ç®¡ç†åç¨‹ï¼Œä¸€ä¸ªJobä¸­å¯ä»¥å…³è”å¤šä¸ªå­Jobï¼ŒåŒæ—¶å®ƒä¹Ÿæä¾›äº†é€šè¿‡å¤–éƒ¨ä¼ å…¥parentçš„å®ç°ã€‚</p><p>Job ç®¡ç†åç¨‹ï¼Œé‚£ä¹ˆå®ƒæä¾›äº†å…­ç§çŠ¶æ€è¡¨ç¤ºåç¨‹çš„è¿è¡ŒçŠ¶æ€ã€‚</p><ol><li><strong>New</strong>ï¼šåˆ›å»º</li><li><strong>Active</strong>ï¼šè¿è¡Œ</li><li><strong>Completing</strong>ï¼šå·²ç»å®Œæˆç­‰å¾…è‡ªèº«çš„å­åç¨‹</li><li><strong>Completed</strong>ï¼šå®Œæˆ</li><li><strong>Cancelling</strong>ï¼šæ­£åœ¨è¿›è¡Œå–æ¶ˆæˆ–è€…å¤±è´¥</li><li><strong>Cancelled</strong>ï¼šå–æ¶ˆæˆ–å¤±è´¥</li></ol><p>è¿™å…­ç§çŠ¶æ€ <strong>Job</strong>å¯¹å¤–æš´éœ²äº†ä¸‰ç§çŠ¶æ€ï¼Œå®ƒä»¬å¯ä»¥éšæ—¶é€šè¿‡Jobæ¥è·å–</p><pre><code class="java">public val isActive: Booleanpublic val isCompleted: Booleanpublic val isCancelled: Boolean</code></pre><p>åœ¨ä½ éœ€è¦æ‰‹åŠ¨ç®¡ç†åç¨‹æ—¶ï¼Œé€šè¿‡ä¸‹é¢çš„æ–¹æ³•æ¥åˆ¤æ–­å½“å‰åç¨‹æ˜¯å¦åœ¨è¿è¡Œã€‚</p><pre><code class="kotlin">while (job.isActive) {// åç¨‹è¿è¡Œä¸­            }</code></pre><p>ä¸€èˆ¬åç¨‹åˆ›å»ºçš„æ—¶å€™å°±å¤„åœ¨ <strong>Active</strong>çŠ¶æ€ï¼Œä½†æ˜¯ä¹Ÿæœ‰ç‰¹æ®Šæƒ…å†µã€‚</p><p><strong>å¼•ç”¨ï¼š</strong></p><p><a href="https://kaixue.io/kotlin-coroutines-1/" target="_blank" rel="noopener">Kotlin çš„åç¨‹ç”¨åŠ›ç¥ä¸€çœ¼ - å­¦ä¸ä¼šåç¨‹ï¼Ÿå¾ˆå¯èƒ½å› ä¸ºä½ çœ‹è¿‡çš„æ•™ç¨‹éƒ½æ˜¯é”™çš„</a></p><p><a href="https://kaixue.io/kotlin-coroutines-2/" target="_blank" rel="noopener">Kotlin åç¨‹çš„æŒ‚èµ·å¥½ç¥å¥‡å¥½éš¾æ‡‚ï¼Ÿä»Šå¤©æˆ‘æŠŠå®ƒçš„çš®ç»™æ‰’äº†</a></p><p><a href="https://blog.csdn.net/qfanmingyiq/article/details/105547092" target="_blank" rel="noopener">Kotlinåç¨‹æ ¸å¿ƒåº“åˆ†æ-2 Jobç®€è¿°</a></p><p><a href="https://zhuanlan.zhihu.com/p/297543508" target="_blank" rel="noopener">Kotlinåç¨‹å®ç°åŸç†:CoroutineScope&amp;Job</a></p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> Kotlin </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Lifecycle è®²è§£</title>
      <link href="/2020/10/11/Lifecycle/"/>
      <url>/2020/10/11/Lifecycle/</url>
      
        <content type="html"><![CDATA[<h1 id="Lifecycleä½¿ç”¨è¯¦è§£"><a href="#Lifecycleä½¿ç”¨è¯¦è§£" class="headerlink" title="Lifecycleä½¿ç”¨è¯¦è§£"></a>Lifecycleä½¿ç”¨è¯¦è§£</h1><h2 id="Lifecycleå¯ä»¥åšä»€ä¹ˆ"><a href="#Lifecycleå¯ä»¥åšä»€ä¹ˆ" class="headerlink" title="Lifecycleå¯ä»¥åšä»€ä¹ˆ"></a>Lifecycleå¯ä»¥åšä»€ä¹ˆ</h2><p><strong>Lifecycle æ˜¯å…·æœ‰ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥èƒ½åŠ›çš„ç»„ä»¶ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨Activityæˆ–è€…Fragmentçš„ç”Ÿå‘½å‘¨æœŸå‘ç”Ÿå˜åŠ¨çš„æ˜¯å¦å¾—åˆ°é€šçŸ¥</strong>ã€‚æˆ‘ä»¬å¾€å¾€ä¼šåœ¨Activityçš„å„ç§ç”Ÿå‘½å‘¨æœŸæ–¹æ³•é‡Œæ‰§è¡Œç‰¹å®šçš„æ–¹æ³•ã€‚</p><pre><code class="java">public class TestActivity extends AppCompatActivity {    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_test);    }    @Override    protected void onStart() {        super.onStart();        EventBus.getDefault().register(this);    }    @Override    protected void onDestroy() {        EventBus.getDefault().unregister(this);        super.onDestroy();    }}</code></pre><p>å¦‚æœæˆ‘ä»¬æŠŠå¾ˆå¤šè¿™ç§éœ€è¦è·Ÿç”Ÿå‘½å‘¨æœŸç›¸å…³çš„é€»è¾‘ä»£ç ç›´æ¥æ”¾åœ¨Activityçš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­ï¼ŒActivityä¼šå˜çš„å¾ˆéš¾ä»¥ç»´æŠ¤çš„ã€‚é€šè¿‡ä½¿ç”¨Lifecycleï¼Œæ¥é¿å…è¿™ç§æƒ…å†µã€‚</p><h2 id="Lifecycleä½¿ç”¨"><a href="#Lifecycleä½¿ç”¨" class="headerlink" title="Lifecycleä½¿ç”¨"></a>Lifecycleä½¿ç”¨</h2><p>å¯¼å…¥Lifecycleä¾èµ–</p><p>AndroidX:</p><pre><code class="groovy">implementation &quot;androidx.lifecycle:lifecycle-runtime:2.0.0&quot;</code></pre><h3 id="Lifecycler-å®ç°æœºåˆ¶"><a href="#Lifecycler-å®ç°æœºåˆ¶" class="headerlink" title="Lifecycler å®ç°æœºåˆ¶"></a>Lifecycler å®ç°æœºåˆ¶</h3><ol><li><strong>éœ€è¦ä¸€ä¸ªæ„å»ºLifecycleå¯¹è±¡</strong>ï¼ˆé€šè¿‡ä¸€ä¸ªå®ç°äº†LifecycleOwneræ¥å£çš„å¯¹è±¡ getLifecycle() æ–¹æ³•è¿”å›ï¼‰ï¼Œè¿™ä¸ªå¯¹è±¡å°±æ˜¯ä¸€ä¸ªè¢«è§‚å¯Ÿè€…ï¼Œå…·æœ‰ç”Ÿå‘½æ„ŸçŸ¥èƒ½åŠ›ã€‚</li><li><strong>æ„å»ºä¸€ä¸ªLifecycleObserverå¯¹è±¡ï¼Œ</strong>å¯¹æŒ‡å®šçš„Lifecycleå¯¹è±¡è¿›è¡Œç›‘å¬ï¼ˆ<strong>è§‚å¯Ÿè€…</strong>ï¼‰</li><li>é€šè¿‡å°†Lifecycå¯¹è±¡çš„addObserver()æ–¹æ³•ï¼Œå°†Lifecycleå¯¹è±¡å’ŒLifecycleObserverå¯¹è±¡è¿›è¡Œç»‘å®šã€‚</li></ol><h3 id="ç»§æ‰¿AppCompatActivity"><a href="#ç»§æ‰¿AppCompatActivity" class="headerlink" title="ç»§æ‰¿AppCompatActivity"></a>ç»§æ‰¿AppCompatActivity</h3><p>åˆ›å»º MyObserver.java è®©å®ƒå®ç°LifeyclerObserver æ¥å£ï¼ˆ<strong>LifecycleObserveræ¥å£æ˜¯ä¸€ä¸ªç©ºæ¥å£ï¼Œä¸»è¦ç»™æ³¨è§£å¤„ç†å™¨ä½¿ç”¨</strong>):</p><pre><code class="kotlin">/** *   by:Thecara home *   date:2020/10/11 */class MyObserver : LifecycleObserver {    // ä½¿ç”¨æ³¨è§£ @OnLifecycleEvent() è¯¥æ–¹æ³•éœ€è¦ç›‘å¬æŒ‡å®šçš„ç”Ÿå‘½å‘¨æœŸäº‹ä»¶    @OnLifecycleEvent(Lifecycle.Event.ON_RESUME)    fun connectListener() {        Log.d(&quot;MyObserver&quot;, &quot;ON_RESUME&quot;)    }    @OnLifecycleEvent(Lifecycle.Event.ON_PAUSE)    fun disconnectListener() {        Log.d(&quot;MyObserver&quot;, &quot;ON_PAUSE&quot;)    }}</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡åœ¨æ–¹æ³•ä¸Šä½¿ç”¨ <strong>@onLifecycleEvent</strong> æ³¨è§£ä½¿å¾—æ–¹æ³•å…·æœ‰ç”Ÿå‘½æ„ŸçŸ¥èƒ½åŠ›ã€‚<strong>æ‹¬å·é‡Œçš„å‚æ•°ï¼Œè¡¨æ˜éœ€è¦ç›‘å¬çš„æ˜¯ä»€ä¹ˆç”Ÿå‘½å‘¨æœŸäº‹ä»¶ã€‚</strong>Lifecycle ä¸»è¦<strong>é€šè¿‡Eventå’ŒStateè€…ä¸¤ä¸ªæšä¸¾ç±»æ¥è¿½è¸ªå…³è”ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸçŠ¶æ€</strong>ã€‚å…·ä½“çš„Eventå’ŒStateä¹‹é—´çš„è½¬æ¢å…³ç³»ï¼Œå¯ä»¥å‚è€ƒå¦‚ä¸‹ï¼š</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/1692ebbac5daa896" alt=""></p><p>è®©Activityç»§æ‰¿è‡ªAppCompatActivityï¼Œç„¶åå†OnCreate()æ–¹æ³•ä¸­é€šè¿‡ <strong>getLifecycle().addObserver(new MyObserver())</strong> å®Œæˆ<strong>Lifecycle</strong>å’Œ<strong>LifecycleObser</strong>çš„ç»‘å®š:</p><pre><code class="kotlin">class MainActivity : AppCompatActivity() {    override fun onCreate(savedInstanceState: Bundle?) {        super.onCreate(savedInstanceState)        setContentView(R.layout.activity_main)        // ç»‘å®š        lifecycle.addObserver(MyObserver())    }}</code></pre><p>é€šè¿‡åˆ‡æ¢åå°è§‚å¯ŸçŠ¶æ€ã€‚</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/2020-10-11-0.gif" alt="åˆ‡æ¢"></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/2020-10-11-1.gif" alt="Log"></p><p>library 26.1.0 åŠä¹‹åçš„åº“ä¸­ï¼Œ<strong>AppCompatActivityçš„çˆ¶ç±»SupportActivityå·²ç»é»˜è®¤å®ç°äº†LifecycleOwneræ¥å£ï¼Œç›´æ¥é€šè¿‡getLifecycle() æ–¹æ³•è·å¾—Lifecycleå¯¹è±¡ã€‚</strong></p><p>ä¹‹åé€šè¿‡ <strong>addObserver()</strong> æ–¹æ³•å°†Lifecycle è·ŸæŒ‡å®š LifecycleObserver è¿›è¡Œç»‘å®šã€‚</p><p><strong>å¼•ç”¨ï¼š</strong></p><p><a href="https://juejin.im/post/6844903784166998023" target="_blank" rel="noopener">Androidç”Ÿå‘½å‘¨æœŸç»„ä»¶Lifecycleä½¿ç”¨è¯¦è§£</a></p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
          <category> Lifecycle </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»€ä¹ˆæ˜¯BuildConfig</title>
      <link href="/2020/09/17/BuildConfig/"/>
      <url>/2020/09/17/BuildConfig/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»€ä¹ˆæ˜¯-BuildConfig"><a href="#ä»€ä¹ˆæ˜¯-BuildConfig" class="headerlink" title="ä»€ä¹ˆæ˜¯ BuildConfig"></a>ä»€ä¹ˆæ˜¯ BuildConfig</h1><p><strong>åœ¨æ‰“åŒ…æ—¶è‡ªåŠ¨ç”Ÿæˆçš„ç±»ã€‚</strong>ç±»ä¼¼äºR.classï¼Œç”Ÿæˆåä¸èƒ½ä¿®æ”¹ã€‚</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200917233605.png" alt="åœ¨é¡¹ç›®ä¸­çš„ä½ç½®"></p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Timber</title>
      <link href="/2020/09/17/Timber/"/>
      <url>/2020/09/17/Timber/</url>
      
        <content type="html"><![CDATA[<h1 id="ä½¿ç”¨-Timber"><a href="#ä½¿ç”¨-Timber" class="headerlink" title="ä½¿ç”¨ Timber"></a>ä½¿ç”¨ Timber</h1><ul><li>é…ç½® timber</li></ul><pre><code class="groovy">implementation &#39;com.jakewharton.timber:timber:4.7.1&#39;</code></pre><ul><li><h5 id="å‡†å¤‡Logè¾“å‡ºçš„è‡ªå®šä¹‰æ ¼å¼"><a href="#å‡†å¤‡Logè¾“å‡ºçš„è‡ªå®šä¹‰æ ¼å¼" class="headerlink" title="å‡†å¤‡Logè¾“å‡ºçš„è‡ªå®šä¹‰æ ¼å¼"></a><strong>å‡†å¤‡Logè¾“å‡ºçš„è‡ªå®šä¹‰æ ¼å¼</strong></h5></li></ul><blockquote><p>å¯ä»¥ç›´æ¥åœ¨Applicationçš„onCreate()ä¸­è°ƒç”¨<code>Timber.plant(new DebugTree())</code>å®ç°DebugåŠŸèƒ½ã€‚ä½†æ˜¯åŠŸèƒ½æœ‰æ‰€æ¬ ç¼ºï¼Œ<strong>å¯ä»¥ç”¨æ¥ä¸Šä¼ crashä¿¡æ¯</strong>ç­‰ã€‚</p><p>psï¼š</p><p>Timberä¸»è¦é€šè¿‡æ·»åŠ Treeå®ä¾‹æ¥å®ç°ï¼Œæ·»åŠ Treeå®ä¾‹å¯ä»¥é€šè¿‡æ–¹æ³•Timber.plantå®Œæˆã€‚</p><p>è€Œä½¿ç”¨DebugTreeå®ç°è‡ªåŠ¨å®ä¾‹åŒ–</p></blockquote><ol><li>ä¸ä¼š<strong>æ‰“å°å½“å‰çº¿ç¨‹</strong></li><li>ä¸ä¼š<strong>æ‰“å°å½“å‰è¡Œå·</strong></li></ol><p>è‡ªå·±åˆ›å»ºä¸€ä¸ªç»§æ‰¿ç±»æ¥å®ç°è¿™ä¸¤ä¸ªåŠŸèƒ½ã€‚</p><pre><code class="kotlin">class ThreadAwareDebugTree : Timber.DebugTree() {    //æ·»åŠ å½“å‰çº¿ç¨‹    override fun log(priority: Int, tag: String?, message: String, t: Throwable?) {        if (tag != null) {            val threadName = Thread.currentThread().name            tag != &quot;&lt;&quot; + threadName + &quot;&gt;&quot;        }        super.log(priority, tag, message, t)    }    // æ·»åŠ è¡Œå·    override fun createStackElementTag(element: StackTraceElement): String? {        return super.createStackElementTag(element) + &quot;Line(&quot; + element.lineNumber + &quot;)&quot;    }}</code></pre><p><strong>è¿˜æœ‰ä¸€ä¸ªç±»åœ¨ release ç‰ˆæœ¬æ—¶è°ƒç”¨æ‰“å°logä¿¡æ¯</strong></p><blockquote><p>release ç‰ˆæœ¬ç”¨æ¥ä»¥ä¸€ç§è·Ÿè¸ªæ—¥å¿—çš„å½¢å¼ä¸ŠæŠ¥ç»™ <strong>Bugly</strong>ï¼Œå®ƒåªä¼šæ˜¾ç¤º wï¼Œeï¼Œwtfã€‚</p></blockquote><pre><code class="kotlin">class ReleaseTree : ThreadAwareDebugTree() {    override fun isLoggable(tag: String?, priority: Int): Boolean {        return if (priority == Log.VERBOSE || priority == Log.DEBUG || priority == Log.INFO) {            false        } else true    }    override fun log(priority: Int, tag: String?, message: String, t: Throwable?) {        if (!isLoggable(tag, priority)) {            return        }        super.log(priority, tag, message, t)    }}</code></pre><ul><li>å‡†å¤‡ Application</li></ul><pre><code class="kotlin">class TimberDemoApplication : Application() {    override fun onCreate() {        super.onCreate()        if (DEBUG)            Timber.plant(ThreadAwareDebugTree())    }}</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200921111610.png" alt="æ·»åŠ Application"></p><ul><li>è°ƒç”¨ä¸€ä¸ªlog</li></ul><pre><code class="kotlin">println(Timber.v(&quot;hello&quot;))</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200921112051.png" alt="é€šè¿‡è‡ªå®šä¹‰çš„ç±»å‹è¾“å‡ºäº†è¡Œå·çš„ä¿¡æ¯"></p><h2 id="é‡å†™-Log-æ–¹æ³•"><a href="#é‡å†™-Log-æ–¹æ³•" class="headerlink" title="é‡å†™ Log æ–¹æ³•"></a>é‡å†™ Log æ–¹æ³•</h2><p><strong>å‚æ•°</strong></p><blockquote><p>priority:Int ä¼˜å…ˆçº§</p><p>tag:String æ‰“å°æ—¶çš„æ ‡ç­¾</p><p>message:String å†…å®¹</p><p>t:Throwable æŠ›å‡ºçš„å¼‚å¸¸</p></blockquote><p>æ­¤æ–¹æ³•å¯ä»¥ç”¨æ¥æ ¹æ®å‘é€æ¥çš„ <strong>å¼‚å¸¸ç­‰ä¿¡æ¯</strong> è‡ªå®šä¹‰æ¥ä¸‹æ¥çš„åŠ¨ä½œã€‚è¿™äº›ä¿¡æ¯å¹¶ä¸ä¼šè¢«ä»logæ—¥å¿—æ‰“å°å‡ºæ¥ã€‚</p><p><strong>è°ƒç”¨</strong></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201009123005.png" alt="è°ƒç”¨logæ–¹æ³•"></p><pre><code class="kotlin"> Timber.log(1, &quot;æµ‹è¯•æ‰“å°&quot;)</code></pre><h4 id="æ‰“å°æˆ‘ä»¬å‘é€æ¥çš„ä¿¡æ¯"><a href="#æ‰“å°æˆ‘ä»¬å‘é€æ¥çš„ä¿¡æ¯" class="headerlink" title="æ‰“å°æˆ‘ä»¬å‘é€æ¥çš„ä¿¡æ¯"></a>æ‰“å°æˆ‘ä»¬å‘é€æ¥çš„ä¿¡æ¯</h4><pre><code class="kotlin">class MyTimberFree : Timber.Tree() {    override fun log(priority: Int, tag: String?, message: String, t: Throwable?) {        super.log(priority, tag, message, t)        Timber.v(message)    }}</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201009123216.png" alt="å‘é€æˆåŠŸï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®è¿™äº›ä¿¡æ¯ä¸Šä¼ åˆ°crashä¸­ã€‚"></p><h1 id="ä¸ºä»€ä¹ˆä½¿ç”¨Timber"><a href="#ä¸ºä»€ä¹ˆä½¿ç”¨Timber" class="headerlink" title="ä¸ºä»€ä¹ˆä½¿ç”¨Timber"></a>ä¸ºä»€ä¹ˆä½¿ç”¨Timber</h1><ol><li><p>é¡¹ç›®å¼€å‘æ—¶ï¼Œä¸ºäº†æ–¹ä¾¿è°ƒè¯•ï¼Œéœ€è¦è¾“å‡ºlogï¼Œä½†æ˜¯å‘å¸ƒåï¼Œlogä¸­åŒ…å«å¾ˆå¤šé¡¹ç›®ä¿¡æ¯ï¼Œå¦‚æœå…¨éƒ¨æš´éœ²å¯èƒ½ä¼šé€ æˆå®‰å…¨éšæ‚£ï¼Œå½“å®Œå…¨åˆ é™¤ä¹Ÿä¸åˆ©äºåæœŸè°ƒè¯•ï¼Œå› æ­¤éœ€è¦ä¸€ä¸ªå¼€å…³ï¼Œå…³é—­å¼€å…³ä¸èƒ½è¾“å‡ºbugï¼Œæ‰“å¼€å¼€å…³åˆ™å¯ä»¥è¾“å‡ºlogã€‚</p></li><li><p>æ¯æ¬¡éœ€è¦æ‰“å° TAG</p></li><li><p>ä¸ä¼šæ‰“å°å½“å‰çº¿ç¨‹</p></li><li><p>ä¸ä¼šæ‰“å°å½“å‰è¡Œå·</p></li></ol><p><a href="https://xiazdong.github.io/2017/05/17/Timber/" target="_blank" rel="noopener">Timberå’ŒBuglyä½¿ç”¨å…¥é—¨</a></p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> Timber </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨gradle</title>
      <link href="/2020/09/09/%E4%BD%BF%E7%94%A8gradle/"/>
      <url>/2020/09/09/%E4%BD%BF%E7%94%A8gradle/</url>
      
        <content type="html"><![CDATA[<h1 id="åˆ›å»º-Gradle-é¡¹ç›®"><a href="#åˆ›å»º-Gradle-é¡¹ç›®" class="headerlink" title="åˆ›å»º Gradle é¡¹ç›®"></a>åˆ›å»º Gradle é¡¹ç›®</h1><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/2020-9-9-0.gif" alt=""></p><p>ğŸ‘† è”ç½‘çŠ¶æ€æ‰“å¼€ IDEA</p><h1 id="é¡¹ç›®ç»“æ„ä»‹ç»"><a href="#é¡¹ç›®ç»“æ„ä»‹ç»" class="headerlink" title="é¡¹ç›®ç»“æ„ä»‹ç»"></a>é¡¹ç›®ç»“æ„ä»‹ç»</h1><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200910110408.png" alt=""></p><p><strong>src/main/java</strong> æ­£å¼ä»£ç ç›®å½•</p><p><strong>src/main/resources</strong> æ­£å¼é…ç½®æ–‡ä»¶ç›®å½•</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200910111041.png" alt=""></p><p><strong>src/test/java</strong> æ”¾ç½®å•å…ƒæµ‹è¯•ä»£ç ç›®å½•</p><p><strong>src/test/resources</strong> æ”¾ç½®å•å…ƒæµ‹è¯•é…ç½®æ–‡ä»¶ç›®å½•</p><p><strong>src/main/webapp</strong> è¿˜æœ‰ä¸€ä¸ªå¯æ”¾ç½®çš„ web ç›®å½•ï¼ˆé¡µé¢ä¿¡æ¯ï¼‰</p><h4 id="src-build-gradle-æ–‡ä»¶"><a href="#src-build-gradle-æ–‡ä»¶" class="headerlink" title="src/build.gradle æ–‡ä»¶"></a>src/build.gradle æ–‡ä»¶</h4><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200910162235.png" alt=""></p><p><strong>plugins{}</strong></p><blockquote><p>æŒ‡è¿è¡Œç¯å¢ƒ</p></blockquote><p><strong>repositories{}</strong></p><blockquote><p>mavenContral() ä¸ºä¸­å¤®ä»“åº“ï¼Œåœ¨æ²¡æœ‰æŒ‡å®šæƒ…å†µçš„ä¸‹ä¼šç›´æ¥ä»ä¸­å¤®ä»“åº“ä¸‹è½½ jar åŒ…ã€‚</p></blockquote><p><strong>dependenciese{}</strong></p><blockquote><p>gradleå·¥ç¨‹æ‰€æœ‰çš„jaråŒ…çš„åæ ‡éƒ½åœ¨dependencieså±æ€§å†…æ”¾ç½®ã€‚</p><p>åŒæ—¶æ¯ä¸ªjaråŒ…çš„åæ ‡éƒ½æœ‰ä¸‰ä¸ªåŸºæœ¬å…ƒç´ æ„æˆï¼Œgroupï¼Œnameï¼Œversion ç»„æˆ</p></blockquote><p><strong>group</strong>ï¼šå¤šåˆ†ä¸ºå¤šæ®µï¼Œç¬¬ä¸€æ®µä¸º åŸŸï¼Œç¬¬äºŒæ®µå…¬å¸åç§°ã€‚å…¶ä¸­ org ä¸ºéç›ˆåˆ©ç»„ç»‡ï¼Œcon ä¸ºå•†ä¸šç»„ç»‡ã€‚ä¾‹å¦‚ï¼štomatï¼šä¸º apacheé¡¹ç›® groupidä¸ºorg.apacheã€‚</p><p><strong>name</strong>ï¼šé¡¹ç›®çš„å…¨åç§°ã€‚</p><p><strong>version</strong>ï¼šç‰ˆæœ¬å·ã€‚</p><p><strong>testCompile</strong>ï¼šæµ‹è¯•æ—¶æ‰€ä¾èµ–çš„jaråŒ…ï¼Œåœ¨dradleå¯ç”± implementation ä»£æ›¿ã€‚</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200910165023.png" alt=""></p><p>åˆ›å»ºé¡¹ç›®æœ‰æåˆ° ğŸ‘†</p><h4 id="é¡¹ç›®-build-gradle-æ–‡ä»¶"><a href="#é¡¹ç›®-build-gradle-æ–‡ä»¶" class="headerlink" title="é¡¹ç›®/build.gradle æ–‡ä»¶"></a>é¡¹ç›®/build.gradle æ–‡ä»¶</h4><p><strong>buildscript{} å±æ€§</strong></p><blockquote><p>gradleæ‰§è¡Œæ‰€éœ€è¦çš„ä¾èµ–ï¼Œåˆ†åˆ«å¯¹åº”mavenåº“å’Œæ’ä»¶</p></blockquote><h1 id="é€šè¿‡-mevenCentral-å¼•å…¥-jar-åŒ…"><a href="#é€šè¿‡-mevenCentral-å¼•å…¥-jar-åŒ…" class="headerlink" title="é€šè¿‡ mevenCentral å¼•å…¥ jar åŒ…"></a>é€šè¿‡ <strong>mevenCentral</strong> å¼•å…¥ jar åŒ…</h1><p>ä½¿ç”¨ compile æ·»åŠ  jar åŒ…</p><blockquote><p>ç”¨æ¥è§£ææ‰€éœ€è¦çš„ä¾èµ–åœ¨classpathä¸­å¯ç”¨ï¼Œå¹¶ä¸”å°†å®ƒä»¬æ‰“åŒ…ã€‚</p></blockquote><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/2020-9-10-1.gif" alt=""></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200910180423.png" alt=""></p><p>ä¾èµ–å®Œæˆ</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200910182006.png" alt=""></p><p>åœ¨ ç”¨æˆ·çš„ user/ç”¨æˆ·å/.gradle/caches/modules-2/files-2.1 ä¸‹æœ‰æˆ‘ä»¬åŠ è½½çš„ jar åŒ…</p><h1 id="demo-å¼•å…¥ä¸€ä¸ªspringåŒ…-å¹¶æµ‹è¯•ä½¿ç”¨"><a href="#demo-å¼•å…¥ä¸€ä¸ªspringåŒ…-å¹¶æµ‹è¯•ä½¿ç”¨" class="headerlink" title="demo å¼•å…¥ä¸€ä¸ªspringåŒ… å¹¶æµ‹è¯•ä½¿ç”¨"></a>demo å¼•å…¥ä¸€ä¸ªspringåŒ… å¹¶æµ‹è¯•ä½¿ç”¨</h1><h3 id="åœ¨-mavenRepository-ä¸­å¼•å…¥jar-åŒ…"><a href="#åœ¨-mavenRepository-ä¸­å¼•å…¥jar-åŒ…" class="headerlink" title="åœ¨ mavenRepository ä¸­å¼•å…¥jar åŒ…"></a>åœ¨ mavenRepository ä¸­å¼•å…¥jar åŒ…</h3><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200911162643.png" alt=""></p><pre><code class="groovy">// https://mvnrepository.com/artifact/org.springframework/spring-contextcompile group: &#39;org.springframework&#39;, name: &#39;spring-context&#39;, version: &#39;5.2.8.RELEASE&#39;</code></pre><h3 id="å¼•å…¥åçš„ä¾èµ–åŒ…ä½ç½®æŸ¥çœ‹"><a href="#å¼•å…¥åçš„ä¾èµ–åŒ…ä½ç½®æŸ¥çœ‹" class="headerlink" title="å¼•å…¥åçš„ä¾èµ–åŒ…ä½ç½®æŸ¥çœ‹"></a>å¼•å…¥åçš„ä¾èµ–åŒ…ä½ç½®æŸ¥çœ‹</h3><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200911162549.png" alt=""></p><h3 id="å¼€å§‹æµ‹è¯•"><a href="#å¼€å§‹æµ‹è¯•" class="headerlink" title="å¼€å§‹æµ‹è¯•"></a>å¼€å§‹æµ‹è¯•</h3><p><strong>åˆ›å»º æ¥å£ â€AccountDaoâ€œ</strong></p><p>ä½ç½® â€com.gradlelearn.daoâ€œ</p><pre><code class="java">public interface AccountDao {    public List findAll();}</code></pre><p>ä½œä¸ºæ¥å£ï¼ŒæŸ¥è¯¢æ–¹æ³•</p><p><strong>åˆ›å»º â€AccountDaoImplâ€œ</strong></p><p>ä½ç½® â€com.gradlelearn.dao.implâ€œ</p><pre><code class="java">public class AccountDaoImpl implements AccountDao {    @Override    public List findAll() {        System.out.println(&quot;test&quot;);        return null;    }}</code></pre><p>å®ç°æŸ¥è¯¢åŠŸèƒ½</p><h4 id="æµ‹è¯•æ–¹æ³•"><a href="#æµ‹è¯•æ–¹æ³•" class="headerlink" title="æµ‹è¯•æ–¹æ³•"></a>æµ‹è¯•æ–¹æ³•</h4><p><strong>åˆ›å»º â€AccountTestâ€œ</strong></p><p>ä½ç½® test æ–‡ä»¶ä¸‹ â€com.gradle.testâ€œ</p><p><strong>ClassPathXmlApplicationContext</strong> ç±»å‹</p><blockquote><p>è·å¾—å½“å‰ bean å®¹å™¨</p><p>åˆ›å»ºå¯¹è±¡ ApplicationContext ç±»å‹</p></blockquote><p><strong>applicationContext.getBean</strong> æ–¹æ³•</p><blockquote><p>ä»å®¹å™¨ä¸­è·å¾—å½“å‰ Dao</p></blockquote><pre><code class="java">public class AccountTest {    @Test    public void acccountTest() {        ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;bean.xml&quot;);        AccountDao bean = applicationContext.getBean(AccountDao.class);        bean.findAll();    }}</code></pre><h4 id="æµ‹è¯•ç»“æœ"><a href="#æµ‹è¯•ç»“æœ" class="headerlink" title="æµ‹è¯•ç»“æœ"></a>æµ‹è¯•ç»“æœ</h4><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200911164758.png" alt=""></p><h3 id="æ‰“åŒ…-jar-åŒ…"><a href="#æ‰“åŒ…-jar-åŒ…" class="headerlink" title="æ‰“åŒ… jar åŒ…"></a>æ‰“åŒ… jar åŒ…</h3><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/2020-9-11-0.gif" alt=""></p><p><strong>jar åŒ…çš„ä½ç½®</strong></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200911165345.png" alt=""></p><h1 id="åˆ›å»º-web-å·¥ç¨‹-demo"><a href="#åˆ›å»º-web-å·¥ç¨‹-demo" class="headerlink" title="åˆ›å»º web å·¥ç¨‹ demo"></a>åˆ›å»º web å·¥ç¨‹ demo</h1><h1 id="è¡¥å……"><a href="#è¡¥å……" class="headerlink" title="è¡¥å……"></a>è¡¥å……</h1><h5 id="æ‰©å±•å±æ€§"><a href="#æ‰©å±•å±æ€§" class="headerlink" title="æ‰©å±•å±æ€§"></a>æ‰©å±•å±æ€§</h5><p>ä½¿ç”¨ ext æ‰©å±•å—å¯ä»¥ä¸€æ¬¡æ·»åŠ å¤šä¸ªå±æ€§ã€‚</p><p>å£°æ˜å¤šä¸ªå±æ€§ã€‚æ·»åŠ äº†é”®å€¼å¯¹çš„å±æ€§é›†åˆã€‚</p><pre><code class="groovy">ext.versions = [minSdk:21,targetSdk:29]</code></pre><h5 id="apply-plugin"><a href="#apply-plugin" class="headerlink" title="apply plugin"></a>apply plugin</h5><p>æ­¤æ–¹å¼ç”¨æ¥å¼•å…¥ <strong>Gradle å®˜æ–¹æ’ä»¶åº“</strong>ã€‚</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200915181918.png" alt=""></p><h5 id="apply-from"><a href="#apply-from" class="headerlink" title="apply from"></a>apply from</h5><p>å¼•ç”¨æœ¬åœ°èµ„æº</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200915182720.png" alt=""></p><h2 id="android"><a href="#android" class="headerlink" title="android"></a>android</h2><p>è¿™ä¸ªé—­åŒ…ä¸»è¦ä¸ºäº†é…ç½®é¡¹ç›®ç»“æ„çš„å„ç§å±æ€§ã€‚</p><h5 id="compileSdkVersion"><a href="#compileSdkVersion" class="headerlink" title="compileSdkVersion"></a>compileSdkVersion</h5><p>è®¾ç½®ç¼–è¯‘æ—¶ç”¨çš„Androidç‰ˆæœ¬</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200915183321.png" alt=""></p><h2 id="defaultConfig-é—­åŒ…"><a href="#defaultConfig-é—­åŒ…" class="headerlink" title="defaultConfig é—­åŒ…"></a>defaultConfig é—­åŒ…</h2><p>é»˜è®¤é—­åŒ…</p><h5 id="applicationId"><a href="#applicationId" class="headerlink" title="applicationId"></a>applicationId</h5><p>é¡¹ç›®çš„åŒ…å</p><h5 id="minSdkVersion"><a href="#minSdkVersion" class="headerlink" title="minSdkVersion"></a>minSdkVersion</h5><p>æœ€ä½å…¼å®¹ç‰ˆæœ¬</p><h5 id="targetSdkVersion"><a href="#targetSdkVersion" class="headerlink" title="targetSdkVersion"></a>targetSdkVersion</h5><p>ç›®æ ‡å…¼å®¹ç‰ˆæœ¬</p><h5 id="versionCode"><a href="#versionCode" class="headerlink" title="versionCode"></a>versionCode</h5><p>é¡¹ç›®ç‰ˆæœ¬å·</p><h5 id="versionName"><a href="#versionName" class="headerlink" title="versionName"></a>versionName</h5><p>ç‰ˆæœ¬åç§°</p><h5 id="testInstrumentationRunner"><a href="#testInstrumentationRunner" class="headerlink" title="testInstrumentationRunner"></a>testInstrumentationRunner</h5><p>ç”¨æ¥è¿›è¡Œ AndroidJUnitRunner è¿›è¡Œå•å…ƒæµ‹è¯•</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200915183913.png" alt="detailtConfigé—­åŒ…"></p><h2 id="buildTypes-é—­åŒ…"><a href="#buildTypes-é—­åŒ…" class="headerlink" title="buildTypes é—­åŒ…"></a>buildTypes é—­åŒ…</h2><p>ç”Ÿæˆå®‰è£…æ–‡ä»¶çš„ä¸»è¦é…ç½®ï¼Œå¤šæ•°ä¸ºä¸¤ä¸ªå­é—­åŒ…ï¼Œ    ä¸€ä¸ªdebugé—­åŒ…ï¼Œ<strong>ç”¨äºæŒ‡å®šç”Ÿæˆæµ‹è¯•ç‰ˆå®‰è£…æ–‡ä»¶çš„é…ç½®</strong>ï¼Œå¯å¿½ç•¥ã€‚ä¸€ä¸ªreleaseé—­åŒ…ï¼Œ<strong>ç”¨äºæŒ‡å®šç”Ÿæˆæ­£å¼ç‰ˆçš„é…ç½®</strong>ã€‚ä¸¤è€…é…ç½®å‚æ•°å¤§å¤šä¸€è‡´ï¼ŒåŒºåˆ«ä¸º<strong>é»˜è®¤å±æ€§é…ç½®ä¸ä¸€æ ·</strong>ã€‚</p><h5 id="minifyEnabled"><a href="#minifyEnabled" class="headerlink" title="minifyEnabled"></a>minifyEnabled</h5><p>æ˜¯å¦å¯¹ä»£ç è¿›è¡Œæ··æ·†</p><h5 id="proguardFiles"><a href="#proguardFiles" class="headerlink" title="proguardFiles"></a>proguardFiles</h5><p>æŒ‡å®šæ··æ·†çš„è§„åˆ™æ–‡ä»¶</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200915185118.png" alt=""></p><h2 id="dependenciesé—­åŒ…"><a href="#dependenciesé—­åŒ…" class="headerlink" title="dependenciesé—­åŒ…"></a>dependenciesé—­åŒ…</h2><p>å®šä¹‰äº†é¡¹ç›®çš„ä¾èµ–å…³ç³»ï¼Œä¸‰ç§ä¾èµ–æ–¹å¼ï¼š<strong>æœ¬åœ°ä¾èµ–ï¼Œåº“ä¾èµ–ï¼Œå’Œè¿œç¨‹ä¾èµ–</strong>ã€‚</p><blockquote><p>è‡ªAndroidStudio3.0å compile å¼•å…¥åº“ä¸å†ä½¿ç”¨ï¼Œè€Œé€šè¿‡apiå’Œimplementationï¼Œapiå®Œå…¨ç­‰åŒäºå…ˆå‰çš„ compile</p><p>ï¼Œé€šè¿‡ api å¼•å…¥ æ•´ä¸ªé¡¹ç›®æ˜¯å¯ä»¥ä½¿ç”¨å½“å‰çš„ä¾èµ–åº“çš„ã€‚<strong>implementation å¼•å…¥çš„åº“åªæœ‰å¯¹åº”çš„ Module ä½¿ç”¨</strong>ã€‚</p><p>åœ¨ä½¿ç”¨ compileæ—¶å¯¼è‡´æ¨¡å—ä¹‹é—´çš„è€¦åˆè¿‡é«˜ï¼Œä¸åˆ©äºé¡¹ç›®çš„æ‹†è§£ï¼Œ<strong>é€šè¿‡ implementationåšåˆ°é™ä½è€¦åˆæé«˜å®‰å…¨æ€§</strong>ã€‚</p></blockquote><p>Moduleï¼šæŒ‡é¡¹ç›®ä¸­åˆ›å»ºçš„ä¸åŒModuleã€‚</p><h5 id="implementation"><a href="#implementation" class="headerlink" title="implementation"></a>implementation</h5><p>è¿œç¨‹ä¾èµ–</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200915190215.png" alt=""></p><h5 id="testImplementation-å’Œ-androidTestImplementation"><a href="#testImplementation-å’Œ-androidTestImplementation" class="headerlink" title="testImplementation å’Œ androidTestImplementation"></a>testImplementation å’Œ androidTestImplementation</h5><p>æµ‹è¯•ç”¨ä¾èµ–åº“</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200915190143.png" alt=""></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200915190127.png" alt=""></p><h1 id="groovy-å¿«é€Ÿä½¿ç”¨"><a href="#groovy-å¿«é€Ÿä½¿ç”¨" class="headerlink" title="groovy å¿«é€Ÿä½¿ç”¨"></a>groovy å¿«é€Ÿä½¿ç”¨</h1><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/2020-9-10-0.gif" alt=""></p><p>æ‰“å¼€ idea çš„ groovy ç¼–è¾‘å™¨</p><h3 id="åŸºç¡€è¯­æ³•"><a href="#åŸºç¡€è¯­æ³•" class="headerlink" title="åŸºç¡€è¯­æ³•"></a>åŸºç¡€è¯­æ³•</h3><p><strong>groovy hellow wordï¼</strong></p><pre><code class="groovy">println(&quot;hello world!&quot;);</code></pre><p>groovy æ›´ç±»ä¼¼äº java è¯­è¨€ã€‚</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200910113424.png" alt=""></p><p><strong>groovy å¯ä»¥çœç•¥æœ«å°¾ â€œ;â€å·</strong></p><pre><code class="groovy">println(&quot;hello world!&quot;)</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200910112155.png" alt=""></p><p><strong>groovy å¯ä»¥ çœç•¥æ‹¬å·</strong></p><pre><code class="groovy">println &quot;hello world!&quot;</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200910120309.png" alt=""></p><p><strong>å®šä¹‰å˜é‡</strong></p><pre><code class="groovy">def x = 15println x</code></pre><p>def ä¿®é¥°ç¬¦æ˜¯ <strong>å¼±ç±»å‹</strong> å£°æ˜ï¼Œgroovyä¼šè‡ªåŠ¨æ ¹æ®æƒ…å†µæ¥ç»™å˜é‡èµ‹äºˆå¯¹åº”çš„ç±»å‹ã€‚</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200910150342.png" alt=""></p><p><strong>å®šä¹‰é›†åˆ</strong></p><pre><code class="groovy">def x = [&#39;x&#39;, &#39;f&#39;, &#39;c&#39;]x &lt;&lt; &#39;y&#39;println x</code></pre><p>å®šä¹‰é›†åˆï¼šé€šè¿‡ â€œ[]â€ ä¸­æ‹¬å·å£°æ˜</p><p>é›†åˆæ·»åŠ æ•°æ®ï¼Œâ€&lt;&lt;â€ åŒå°äºå·å³å¯</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200910151126.png" alt=""></p><p><strong>æå–å…ƒç´ </strong></p><pre><code class="groovy">x.get(2)</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200910151255.png" alt=""></p><p>æå–å…ƒç´ ä¸‹æ ‡ä¸º 2 çš„å…ƒç´ </p><h4 id="å®šä¹‰map"><a href="#å®šä¹‰map" class="headerlink" title="å®šä¹‰map"></a><strong>å®šä¹‰map</strong></h4><p><strong>å£°æ˜map</strong></p><pre><code class="groovy">def m = [&#39;key1&#39;: &#39;value1&#39;]</code></pre><p>åœ¨åˆå§‹åŒ–æ—¶å¿…é¡»è¦æœ‰åˆå§‹åŒ–çš„å€¼ï¼Œç”¨æ¥å¯¹å¼±ç±»å‹è¿›è¡Œä¿®æ”¹ã€‚</p><p><strong>æ·»åŠ é”®å€¼å¯¹</strong></p><pre><code class="groovy">m.key2 = &quot;value2&quot;</code></pre><p>æ‰“å°é”®å€¼å¯¹</p><pre><code class="groovy">println m.get(&#39;key2&#39;)println m</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200910152935.png" alt=""></p><h3 id=""><a href="#" class="headerlink" title=""></a></h3><h3 id="groovy-ä¸­çš„é—­åŒ…"><a href="#groovy-ä¸­çš„é—­åŒ…" class="headerlink" title="groovy ä¸­çš„é—­åŒ…"></a>groovy ä¸­çš„é—­åŒ…</h3><p><strong>ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿ</strong></p><p>groovyä¸­çš„ä¸€ä¸ªä»£ç å—ã€‚ç”¨äºåœ¨<strong>gradleä¸­æŠŠé—­åŒ…å½“ä½œå‚æ•°ä½¿ç”¨</strong>ã€‚</p><p><strong>å®šä¹‰é—­åŒ…å’Œæºå¸¦å‚æ•°çš„é—­åŒ…</strong></p><pre><code class="groovy">def b = {    println &quot;hello world!&quot;}</code></pre><pre><code class="groovy">def b = {   v-&gt; println &quot;hello world! $v&quot;}</code></pre><p>èŠ±æ‹¬å· â€œ{}â€ å³ä¸ºé—­åŒ…çš„æ ·å¼ã€‚</p><p>v è¡¨ç¤ºä¸€ä¸ªå˜é‡ï¼Œé€šè¿‡ â€œ$vâ€ å¼•ç”¨å˜é‡ã€‚</p><p><strong>é—­åŒ…ä½œä¸ºæ–¹æ³•çš„å‚æ•°ï¼Œä¸ºé—­åŒ…æ·»åŠ å‚æ•°</strong></p><pre><code class="groovy">def method(Closure closure) {    closure()}</code></pre><pre><code class="groovy">def method(Closure closure) {    closure(&quot;arguments&quot;)}</code></pre><p>Closureï¼šä¸ºé—­åŒ…çš„ç±»å‹ï¼Œä½äº â€œgroovy.langâ€ åŒ…ä¸‹ã€‚</p><p>å­—ç¬¦â€œargumentsâ€ä½œä¸ºå‚æ•°ä¼ é€’ç»™äº†é—­åŒ…ï¼Œ<strong>åœ¨ä½¿ç”¨æ—¶å°†å¯¹åº”é—­åŒ…æ·»åŠ åˆ°æ–¹æ³•ä¸­å³å¯</strong>ã€‚</p><p><strong>ä½¿ç”¨é—­åŒ…</strong></p><pre><code class="groovy">method (b)</code></pre><p>method ä¸ºè‡ªå·±åˆ›å»ºçš„æ–¹æ³•ã€‚</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200910155625.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> gradle </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> gradle </tag>
            
            <tag> groovy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RxJava2 Android ä¸­ä½¿ç”¨</title>
      <link href="/2020/08/21/Android-RxJava/"/>
      <url>/2020/08/21/Android-RxJava/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»€ä¹ˆæ˜¯RxJava"><a href="#ä»€ä¹ˆæ˜¯RxJava" class="headerlink" title="ä»€ä¹ˆæ˜¯RxJava"></a>ä»€ä¹ˆæ˜¯RxJava</h1><p>å®ç°å¼‚æ­¥æ“ä½œçš„åº“</p><h1 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h1><p>RxJava æ˜¯åŸºäº<strong>äº‹ä»¶æµçš„ã€å®ç°å¼‚æ­¥æ“ä½œçš„åº“</strong></p><h1 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h1><p>å®ç°å¼‚æ­¥æ“ä½œ</p><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><h4 id="æ·»åŠ ä¾èµ–"><a href="#æ·»åŠ ä¾èµ–" class="headerlink" title="æ·»åŠ ä¾èµ–"></a>æ·»åŠ ä¾èµ–</h4><pre><code class="groovy">    implementation &quot;io.reactivex.rxjava2:rxjava:2.2.6&quot;    implementation &quot;io.reactivex.rxjava2:rxandroid:2.1.0&quot;</code></pre><h4 id="ä½¿ç”¨ä¸€æ¬¡è®¢é˜…å¹¶æ‰“å°å‡ºæ¥"><a href="#ä½¿ç”¨ä¸€æ¬¡è®¢é˜…å¹¶æ‰“å°å‡ºæ¥" class="headerlink" title="ä½¿ç”¨ä¸€æ¬¡è®¢é˜…å¹¶æ‰“å°å‡ºæ¥"></a>ä½¿ç”¨ä¸€æ¬¡è®¢é˜…å¹¶æ‰“å°å‡ºæ¥</h4><ul><li>éœ€è¦ Observable.fromArray æ–¹æ³•</li></ul><blockquote><p>fromArrayç”¨æ¥åˆ›å»ºä¸€ä¸ªObservableï¼ˆè¢«è§‚å¯Ÿè€…ï¼‰å¯¹è±¡ï¼Œå¯ä»¥å°†ä¸€ä¸ªæ•°ç»„è½¬åŒ–ä¸ºå¯è¢«è§‚å¯Ÿçš„åºåˆ—å¹¶ä¸”å°†å®ƒçš„æ•°æ®é€ä¸ªå‘é€ã€‚</p><p>è¿”å›å€¼ï¼šObservable</p></blockquote><ul><li>éœ€è¦ subscribe æ–¹æ³•</li></ul><blockquote><p>subscribe åªç”¨äºè¿æ¥è¢«è§‚å¯Ÿè€…å’Œè§‚å¯Ÿè€…â€â€œ()â€åœ†æ‹¬å·å†…ä¸ºè§‚å¯Ÿè€…â€</p></blockquote><ul><li>éœ€è¦ Consumber ç±»ä½œä¸ºå‚æ•°</li></ul><blockquote><p>å½“ä½ åªå…³å¿ƒè§‚å¯Ÿè€…çš„onNextæ–¹æ³•æ—¶å¯ä»¥ä½¿ç”¨Consumerç±»</p></blockquote><ul><li>éœ€è¦ Subscriber.onNext() æ–¹æ³•</li></ul><blockquote><p>è¢«è§‚å¯Ÿè€…æ‰§è¡ŒSubscriber.onNext()æ–¹æ³•æ—¶ä¼šåœ¨ è§‚å¯Ÿè€… è®¢é˜…æ—¶å¤å†™è¯¥æ–¹æ³•æ¥è¿›è¡Œå‘é€æ•°æ®</p></blockquote><p>å¯åŠ¨å®ƒå³å¯</p><pre><code class="kotlin">        Observable.fromArray(&quot;Ted&quot;, &quot;Ryan&quot;, &quot;Billy&quot;)            .subscribe { onNext -&gt; println(&quot;name: $onNext&quot;) </code></pre><p>è§‚å¯Ÿè€…æ‰“å°äº†å­—ç¬¦</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200824012835.png" alt=""></p><p><a href="https://www.youtube.com/watch?v=v7drKJyxo10&list=PL8g0JDLEKun5cDCSkiLkZ1t4r0kE4j0sV" target="_blank" rel="noopener">Android Kotlin - RxJava Intro</a></p><h4 id="åˆ·æ–°ä¸€æ¬¡ç•Œé¢æ§ä»¶"><a href="#åˆ·æ–°ä¸€æ¬¡ç•Œé¢æ§ä»¶" class="headerlink" title="åˆ·æ–°ä¸€æ¬¡ç•Œé¢æ§ä»¶"></a>åˆ·æ–°ä¸€æ¬¡ç•Œé¢æ§ä»¶</h4><ul><li>éœ€è¦ Obserbable.subscribeOn()</li></ul><blockquote><p>æŒ‡å®šObservableï¼ˆè¢«è§‚å¯Ÿè€…ï¼‰è‡ªèº«åœ¨å“ªä¸ªè°ƒåº¦å™¨ä¸Šæ‰§è¡Œ</p></blockquote><ul><li>éœ€è¦ Schedule() çº¿ç¨‹æ§åˆ¶å™¨</li></ul><blockquote><p>ä½œç”¨ï¼šæŒ‡å®šæ¯ä¸€æ®µä»£ç åœ¨ä»€ä¹ˆæ ·çš„çº¿ç¨‹ä¸­æ‰§è¡Œ</p></blockquote><ul><li>éœ€è¦ filer() è¿‡æ»¤æ“ä½œç¬¦å·</li></ul><blockquote><p>ä½œç”¨ï¼šè¾“å‡ºè¿‡æ»¤æ¡ä»¶åçš„ç»“æœé¡¹ã€‚</p></blockquote><ul><li>éœ€è¦ Obserbable.observeOn() æ–¹æ³•</li></ul><blockquote><p>æŒ‡å®š Subscribe æ‰€è¿è¡Œåœ¨çš„çº¿ç¨‹ã€‚æˆ–è€…äº‹ä»¶æ¶ˆè´¹çš„çº¿ç¨‹ã€‚</p><p>æŒ‡å®šä¸€ä¸ªè§‚å¯Ÿè€…åœ¨å“ªä¸ªè°ƒåº¦å™¨ä¸Šè§‚å¯Ÿè¿™ä¸ªObservableã€‚</p><p><strong>observeOn()å¯ä»¥å¤šæ¬¡ä½¿ç”¨ï¼Œå¯ä»¥éšæ„å˜æ¢çº¿ç¨‹</strong>ã€‚</p></blockquote><ul><li>ä½¿ç”¨ AndroidSchedulers.mainThread() æ–¹æ³•</li></ul><blockquote><p>åˆ‡æ¢è‡³ä¸»çº¿ç¨‹</p></blockquote><pre><code class="kotlin">        Observable.fromArray(&quot;Ted&quot;, &quot;Ryan&quot;, &quot;Billy&quot;)            .subscribeOn(Schedulers.newThread())            .filter { item -&gt; item == &quot;Ted&quot; }            .observeOn(AndroidSchedulers.mainThread())            .subscribe { onNext -&gt; textView.text = onNext }</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200825112654.png" alt=""></p><h4 id="æ‰§è¡Œä¸€æ¬¡ç½‘ç»œè®¿é—®"><a href="#æ‰§è¡Œä¸€æ¬¡ç½‘ç»œè®¿é—®" class="headerlink" title="æ‰§è¡Œä¸€æ¬¡ç½‘ç»œè®¿é—®"></a>æ‰§è¡Œä¸€æ¬¡ç½‘ç»œè®¿é—®</h4><ul><li>ä½¿ç”¨ Observable.create() æ–¹æ³•</li></ul><blockquote><p>ä½œç”¨ï¼šåˆ›å»ºä¸€ä¸ªè¢«è§‚å¯Ÿè€…ã€‚</p><p>å¯ä»¥é€šè¿‡æ³›å‹<String>æŒ‡å®šå‘é€æ•°æ®çš„ç±»å‹</p><p>å‚æ•°ï¼šå¤å†™ ObservableOnSubscribe ç±»å‹ï¼Œå½“è¢«è§‚å¯Ÿè€…è¢«è®¢é˜…æ—¶ä¼šæ‰§è¡Œ subscribe() ä¸­çš„äº‹ä»¶ã€‚</p></blockquote><ul><li>éœ€è¦ onError() æ–¹æ³•</li></ul><blockquote><p>è¢«è§‚å¯Ÿè€…æ‰§è¡ŒSubscriber.onError()æ–¹æ³•æ—¶ä¼šåœ¨ è§‚å¯Ÿè€… è®¢é˜…æ—¶å¤å†™è¯¥æ–¹æ³•æ¥è¿›è¡Œå‘é€æ•°æ®</p><p>å‚æ•°ï¼š å‘é€çš„æ³›å‹æ•°æ®ç±»å‹</p></blockquote><ul><li>éœ€è¦ onComplate() æ–¹æ³•</li></ul><blockquote><p>è¢«è§‚å¯Ÿè€…æ‰§è¡ŒSubscriber.onComplate()æ–¹æ³•æ—¶ä¼šåœ¨ è§‚å¯Ÿè€… è®¢é˜…æ—¶å¤å†™è¯¥æ–¹æ³•æ¥è¿›è¡Œå‘é€æ•°æ®</p><p>å‚æ•°ï¼š å‘é€çš„æ³›å‹æ•°æ®ç±»å‹</p></blockquote><p>åˆ›å»º æ–¹æ³• getTextFromNetwork () </p><p>åˆ›å»º Observable ï¼ˆè¢«è§‚å¯Ÿè€…ï¼‰å¤„ç†å®Œæˆåå‘é€äº‹ä»¶ï¼ŒsubscribeOn è®© subscribe åˆ°ä¸€ä¸ªæ–°çš„çº¿ç¨‹ä¸­æ‰§è¡Œï¼ŒobserveOn åˆ‡æ¢è§‚å¯Ÿè€…çš„çº¿ç¨‹åˆ°ä¸»çº¿ç¨‹åˆ·æ–°UIï¼Œå¹¶ä¸æ–­æ¥å—è¢«è§‚å¯Ÿè€…å‘é€æ¥çš„äº‹ä»¶ã€‚<strong>è¿™æ˜¯ä¸€ä¸ªå¼‚æ­¥çš„æ“ä½œã€‚</strong></p><pre><code class="kotlin">    fun getTextFromNetwork() {        val task = Observable.create&lt;String&gt; { subscriber -&gt;            try {                subscriber.onNext(&quot;ç½‘ç»œè®¿é—®&quot;)            } catch (e: Exception) {                subscriber.onError(e)            }            subscriber.onComplete()        }        task.subscribeOn(Schedulers.newThread())        task.observeOn(AndroidSchedulers.mainThread())            .subscribe { onNext -&gt; textView.text = onNext }    }</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200825210344.png" alt=""></p><p>åœ¨è°ƒç”¨ MainActivity </p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200825211048.png" alt=""></p><h4 id=""><a href="#" class="headerlink" title=""></a></h4><h1 id="è¡¥å……"><a href="#è¡¥å……" class="headerlink" title="è¡¥å……"></a>è¡¥å……</h1><h2 id="Observer-æ¥å£"><a href="#Observer-æ¥å£" class="headerlink" title="Observer æ¥å£"></a>Observer æ¥å£</h2><pre><code class="kotlin">        val observer = object: Observable&lt;String&gt;() {            //è§‚å¯Ÿè€…æ¥æ”¶äº‹ä»¶å‰ï¼Œé»˜è®¤æœ€å…ˆè°ƒç”¨å¤å†™ onSubscribe()            override fun subscribeActual(observer: Observer&lt;in String&gt;?) {                TODO(&quot;Not yet implemented&quot;)            }        }</code></pre><h2 id="Subscriber-æ¥å£"><a href="#Subscriber-æ¥å£" class="headerlink" title="Subscriber æ¥å£"></a>Subscriber æ¥å£</h2><p>Subscriber æ¥å£å¯¹ Observer æ¥å£è¿›è¡Œäº†æ‰©å±•</p><pre><code class="kotlin">        val subscribe= object : Subscriber&lt;String&gt;{            //è¢«è§‚å¯Ÿè€…è°ƒç”¨ onSubscribe æ—¶å‘é€äº‹ä»¶ï¼Œè§‚å¯Ÿè€…ä¼šè°ƒç”¨æ­¤æ–¹æ³•è¿›è¡Œå“åº”æ¥å—æ­¤äº‹ä»¶            override fun onSubscribe(s: Subscription?) {                TODO(&quot;Not yet implemented&quot;)            }            //è¢«è§‚å¯Ÿè€…è°ƒç”¨ onNext æ—¶å‘é€äº‹ä»¶ï¼Œè§‚å¯Ÿè€…ä¼šè°ƒç”¨æ­¤æ–¹æ³•è¿›è¡Œå“åº”æ¥å—æ­¤äº‹ä»¶            override fun onNext(t: String?) {                TODO(&quot;Not yet implemented&quot;)            }            //è¢«è§‚å¯Ÿè€…è°ƒç”¨ onError æ—¶å‘é€äº‹ä»¶ï¼Œè§‚å¯Ÿè€…ä¼šè°ƒç”¨æ­¤æ–¹æ³•è¿›è¡Œå“åº”æ¥å—æ­¤äº‹ä»¶            override fun onError(t: Throwable?) {                TODO(&quot;Not yet implemented&quot;)            }            //è¢«è§‚å¯Ÿè€…è°ƒç”¨ onComplete æ—¶å‘é€äº‹ä»¶ï¼Œè§‚å¯Ÿè€…ä¼šè°ƒç”¨æ­¤æ–¹æ³•è¿›è¡Œå“åº”æ¥å—æ­¤äº‹ä»¶            override fun onComplete() {                TODO(&quot;Not yet implemented&quot;)            }        }</code></pre><h2 id="Singleä¸SingleObserver"><a href="#Singleä¸SingleObserver" class="headerlink" title="Singleä¸SingleObserver"></a>Singleä¸SingleObserver</h2><p><strong>ä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨ Singleã€‚</strong></p><p>å¦‚æœä½ ä½¿ç”¨ä¸€ä¸ªå•ä¸€çš„è¿ç»­äº‹ä»¶æµï¼Œæ—¢ç„¶åªæœ‰ä¸€ä¸ªonNext()äº‹ä»¶ï¼Œæ¥ç€å°±è§¦å‘onCompleteæˆ–è€…onErrorï¼Œè¿™æ ·ä½ ä½¿ç”¨Singleã€‚</p><p><strong>Singleå…±åŒ…å«é‚£äº›</strong></p><p>ä¸€ä¸ªæ­£å¸¸å¤„ç†æˆåŠŸçš„onSuccessï¼Œå¦ä¸€ä¸ªå¤„ç†å¤±è´¥çš„onErrorï¼Œå½“ç„¶å®ƒä¹‹å‘é€ä¸€æ¬¡ä¿¡æ¯ï¼Œå…¶ä¸­Singleç±»ä¼¼äºObservableã€‚</p><p><strong>è¢«è§‚å¯Ÿè€…</strong></p><pre><code class="kotlin">        val single: Single&lt;String&gt; = Single.create&lt;String&gt;(object : SingleOnSubscribe&lt;String&gt; {            override fun subscribe(emitter: SingleEmitter&lt;String&gt;) {                emitter.onSuccess(&quot;t&quot;)                emitter.onSuccess(&quot;c&quot;)                // è¿ç»­å‘é€ä¸¤æ¬¡æ˜¯ä¸èƒ½æˆåŠŸçš„ã€‚            }        })</code></pre><p><strong>è§‚å¯Ÿè€…</strong></p><pre><code class="kotlin">        single.subscribe(object : SingleObserver&lt;String&gt; {            // åœ¨è¢«è§‚å¯Ÿè€…è°ƒç”¨ onSubscribe åï¼Œè§‚å¯Ÿè€…å›è°ƒåˆ°è¿™é‡Œã€‚            override fun onSubscribe(d: Disposable) {            }            // åœ¨è¢«è§‚å¯Ÿè€…è°ƒç”¨ onSuccess åï¼Œè§‚å¯Ÿè€…å›è°ƒåˆ°è¿™é‡Œã€‚            override fun onSuccess(t: String) {                tv.text = t            }            // åœ¨è¢«è§‚å¯Ÿè€…è°ƒç”¨ onError åï¼Œè§‚å¯Ÿè€…å›è°ƒåˆ°è¿™é‡Œã€‚            override fun onError(e: Throwable) {            }        })</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/2020-10-10-0.gif" alt="å¹¶æ²¡æœ‰æŒ‰ç…§é¢„æœŸå˜æˆâ€œcâ€"></p><p>æ‰€æœ‰ singleåªé€‚åˆå•æ¬¡äº‹ä»¶æµã€‚</p><h2 id="RxJavaä¸­å…³äº-Disposable"><a href="#RxJavaä¸­å…³äº-Disposable" class="headerlink" title="RxJavaä¸­å…³äº Disposable"></a>RxJavaä¸­å…³äº Disposable</h2><p>Disposable ç±»</p><ul><li><h5 id="dispose"><a href="#dispose" class="headerlink" title="dispose()"></a>dispose()</h5></li></ul><blockquote><p>ä¸»åŠ¨è§£é™¤è®¢é˜…</p></blockquote><ul><li><h5 id="isDisposed"><a href="#isDisposed" class="headerlink" title="isDisposed()"></a>isDisposed()</h5></li></ul><blockquote><p>æŸ¥è¯¢æ˜¯å¦è§£é™¤è®¢é˜… ã€‚ï¼ˆtrue ä»£è¡¨è§£é™¤ï¼‰</p></blockquote><h1 id="ä»€ä¹ˆæ˜¯åŒæ­¥"><a href="#ä»€ä¹ˆæ˜¯åŒæ­¥" class="headerlink" title="ä»€ä¹ˆæ˜¯åŒæ­¥"></a>ä»€ä¹ˆæ˜¯åŒæ­¥</h1><p>åœ¨æ‰§è¡ŒåŠŸèƒ½å‰å¿…é¡»ä¸€ä»¶ä¸€ä»¶åšå®Œæ‰èƒ½è¿›è¡Œä¸‹ä¸€æ­¥ã€‚</p><h1 id="ä»€ä¹ˆæ˜¯å¼‚æ­¥"><a href="#ä»€ä¹ˆæ˜¯å¼‚æ­¥" class="headerlink" title="ä»€ä¹ˆæ˜¯å¼‚æ­¥"></a>ä»€ä¹ˆæ˜¯å¼‚æ­¥</h1><p>ä¸åŒæ­¥æ˜¯ç›¸å¯¹çš„ï¼Œåœ¨æˆ‘ä»¬æ‰§è¡Œå®ŒæŸä¸ªåŠŸèƒ½ä¹‹åï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦ç«‹åˆ»å¾—åˆ°ç»“æœï¼Œæˆ‘ä»¬å¯ä»¥æ­£ç¡®çš„åšå…¶ä»–çš„æ“ä½œï¼Œè¿™ä¸ªåŠŸèƒ½å¯ä»¥åœ¨å®Œæˆåé€šçŸ¥æˆ–è€…å›è°ƒå‘Šè¯‰æˆ‘ä»¬ï¼›</p><p>ä¾‹å¦‚ï¼šåå°ä¸‹è½½çš„ä¾‹å­ä¸­ï¼Œåœ¨æ‰§è¡Œä¸‹è½½åŠŸèƒ½åï¼Œæˆ‘ä»¬æ— éœ€å…³å¿ƒå®ƒçš„ä¸‹è½½è¿‡ç¨‹ï¼Œåœ¨å®ƒä¸‹è½½å®Œæ¯•ä¹‹åé€šçŸ¥æˆ‘ä»¬å°±å¯ä»¥äº†ã€‚</p><h1 id="è§‚å¯Ÿè€…æ¨¡å¼"><a href="#è§‚å¯Ÿè€…æ¨¡å¼" class="headerlink" title="è§‚å¯Ÿè€…æ¨¡å¼"></a>è§‚å¯Ÿè€…æ¨¡å¼</h1><p><a href="https://www.runoob.com/design-pattern/observer-pattern.html" target="_blank" rel="noopener">è§‚å¯Ÿè€…æ¨¡å¼</a></p><p>å½“å¯¹è±¡é—´å­˜åœ¨ä¸€å¯¹å¤šçš„å…³ç³»æ—¶ï¼Œåˆ™ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserver Pattermï¼‰ã€‚    ä¾‹å¦‚ï¼šå½“å‰å¯¹è±¡è¢«ä¿®æ”¹æ—¶è¿™ä¼šé€šçŸ¥ä¾èµ–å®ƒçš„å¯¹è±¡ã€‚è§‚å¯Ÿè€…æ¨¡å¼å±äºè¡Œä¸ºå‹æ¨¡å¼ã€‚</p><h3 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><p><strong>æ„å›¾</strong>:å®šä¹‰å¯¹è±¡ä¹‹é—´çš„ä¸€ç§å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½å¾—åˆ°é€šçŸ¥å¹¶ä¸”è¢«è‡ªåŠ¨æ›´æ–°ã€‚</p><p><strong>ä¸»è¦è§£å†³</strong>:ä¸€ä¸ªå¯¹è±¡çŠ¶æ€æ”¹å˜ç»™å…¶ä»–å¯¹è±¡é€šçŸ¥çš„é—®é¢˜ï¼Œè€Œä¸”è¦è€ƒè™‘åˆ°æ˜“ç”¨æ€§å’Œä½è€¦åˆï¼Œä¿è¯é«˜åº¦çš„åä½œã€‚</p><p><strong>ä½•æ—¶ä½¿ç”¨</strong>:ä¸€ä¸ªå¯¹è±¡ï¼ˆç›®æ ‡å¯¹è±¡ï¼‰çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜ï¼Œæ‰€æœ‰çš„ä¾èµ–å¯¹è±¡ï¼ˆè§‚å¯Ÿè€…å¯¹è±¡)éƒ½å°†å¾—åˆ°é€šçŸ¥ï¼Œè¿›è¡Œå¹¿æ’­é€šçŸ¥ã€‚</p><p>å¦‚ä½•è§£å†³å½“å¯¹è±¡é—´å­˜åœ¨ä¸€å¯¹å¤šå…³ç³»æ—¶ï¼Œåˆ™ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserver Patternï¼‰ã€‚æ¯”å¦‚ï¼Œå½“ä¸€ä¸ªå¯¹è±¡è¢«ä¿®æ”¹æ—¶ï¼Œåˆ™ä¼šè‡ªåŠ¨é€šçŸ¥ä¾èµ–å®ƒçš„å¯¹è±¡ã€‚è§‚å¯Ÿè€…æ¨¡å¼å±äºè¡Œä¸ºå‹æ¨¡å¼ã€‚</p><p><strong>å¦‚ä½•è§£å†³</strong>ï¼šä½¿ç”¨é¢å‘å¯¹è±¡æŠ€æœ¯ï¼Œå¯ä»¥å°†è¿™ç§å…³ç³»å¼±åŒ–ã€‚</p><p><strong>å…³é”®ä»£ç </strong>ï¼šåœ¨æŠ½è±¡ç±»ä¸­æœ‰ä¸€ä¸ªArrayListå­˜æ”¾è§‚å¯Ÿè€…ã€‚</p><p><strong>åº”ç”¨å®ä¾‹</strong>ï¼š</p><ol><li>æ‹å–æ—¶ï¼Œæ‹å–å¸ˆè§‚å¯Ÿæœ€é«˜æ ‡ä»·ï¼Œç„¶åé€šçŸ¥å…¶ä»–ç«ä»·è€…ç«ä»·ã€‚</li><li>è©è¨é€šè¿‡æ´’æ°´æ‹›æ¥è€ä¹Œé¾Ÿï¼Œè€ä¹Œé¾Ÿå°±æ˜¯è§‚å¯Ÿè€…ï¼Œè§‚å¯Ÿè©è¨çš„æ´’æ°´åŠ¨ä½œ</li></ol><p><strong>ä¼˜ç‚¹</strong>ï¼š</p><ol><li>è§‚å¯Ÿè€…å’Œè¢«è§‚å¯Ÿè€…æ˜¯æŠ½è±¡è€¦åˆçš„ã€‚</li><li>å»ºç«‹ä¸€å¥—è§¦å‘æœºåˆ¶</li></ol><p><strong>ç¼ºç‚¹</strong>ï¼š</p><ol><li>å¦‚æœä¸€ä¸ªè¢«è§‚å¯Ÿè€…å¯¹è±¡æœ‰å¾ˆå¤šç›´æ¥å’Œé—´æ¥çš„è§‚å¯Ÿè€…çš„è¯ï¼Œå°†æ‰€æœ‰çš„è§‚å¯Ÿè€…éƒ½é€šçŸ¥åˆ°ä¼šèŠ±è´¹å¾ˆå¤šæ—¶é—´ã€‚</li><li>å¦‚æœè§‚å¯Ÿè€…å’Œè§‚å¯Ÿç›®æ ‡ä¹‹é—´æœ‰å¾ªç¯ä¾èµ–çš„è¯ï¼Œè§‚å¯Ÿç›®æ ‡ä¼šè§¦å‘å®ƒä»¬ä¹‹é—´è¿›è¡Œå¾ªç¯è°ƒç”¨ï¼Œå¯èƒ½å¯¼è‡´ç³»ç»Ÿå´©æºƒã€‚</li><li>è§‚å¯Ÿè€…æ¨¡å¼æ²¡æœ‰ç›¸åº”çš„æœºåˆ¶è®©è§‚å¯Ÿè€…çŸ¥é“æ‰€è§‚å¯Ÿçš„ç›®æ ‡å¯¹è±¡æ˜¯æ€ä¹ˆå‘ç”Ÿå˜åŒ–çš„ï¼Œè€Œä»…ä»…çŸ¥é“è§‚å¯Ÿç›®æ ‡å‘é€å˜åŒ–ã€‚</li></ol><p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š</p><p>ä¸€ä¸ªæŠ½è±¡æ¨¡å‹æœ‰ä¸¤ä¸ªæ–¹é¢ï¼Œå…¶ä¸­ä¸€ä¸ªæ–¹é¢ä¾èµ–äºå¦ä¸€ä¸ªæ–¹é¢ã€‚å°†è¿™äº›æ–¹é¢å°è£…åˆ°ç‹¬ç«‹çš„å¯¹è±¡ä¸­ä½¿å®ƒä»¬å¯ä»¥å„è‡ªç‹¬ç«‹çš„æ”¹å˜å’Œå¤ç”¨ã€‚</p><p>ä¸€ä¸ªå¯¹è±¡çš„æ”¹å˜å°†å¯¼è‡´ä¸€ä¸ªæˆ–å¤šä¸ªå¯¹è±¡ä¹Ÿå‘ç”Ÿæ”¹å˜ï¼Œè€Œä¸çŸ¥é“æœ‰å¤šå°‘å¯¹è±¡æ”¹å˜ï¼Œå¯ä»¥é™ä½å¯¹è±¡ä¹‹é—´çš„è€¦åˆåº¦ã€‚</p><p>ä¸€ä¸ªå¯¹è±¡å¿…é¡»é€šçŸ¥å…¶ä»–å¯¹è±¡ï¼Œè€Œä¸çŸ¥é“è¿™ä¸ªå¯¹è±¡æ—¶è°ã€‚</p><p>éœ€è¦åœ¨ç³»ç»Ÿä¸­åˆ›å»ºä¸€ä¸ªè§¦å‘é“¾ï¼ŒAå¯¹è±¡çš„è¡Œä¸ºå°†å½±å“Bå¯¹è±¡ï¼ŒBå¯¹è±¡çš„è¡Œä¸ºå°†å½±å“Cå¯¹è±¡â€¦â€¦ã€‚å¯ä»¥ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼åˆ›å»ºä¸€ç§é“¾å¼è§¦å‘æœºåˆ¶ã€‚</p><h3 id="è°æ˜¯è§‚å¯Ÿè€…è°æ˜¯è¢«è§‚å¯Ÿè€…ï¼Ÿ"><a href="#è°æ˜¯è§‚å¯Ÿè€…è°æ˜¯è¢«è§‚å¯Ÿè€…ï¼Ÿ" class="headerlink" title="è°æ˜¯è§‚å¯Ÿè€…è°æ˜¯è¢«è§‚å¯Ÿè€…ï¼Ÿ"></a>è°æ˜¯è§‚å¯Ÿè€…è°æ˜¯è¢«è§‚å¯Ÿè€…ï¼Ÿ</h3><p>å½“ä½ åšå‡ºäº†æŸäº›åŠ¨ä½œå¦ä¸€ä¸ªäººæ ¹æ®ä½ çš„åŠ¨ä½œåšå‡ºæŸäº›è¡Œä¸ºï¼Œè¿™æ—¶ä½ å°±æ˜¯è¢«è§‚å¯Ÿè€…ï¼Œå¦ä¸€ä¸ªäººæ˜¯è§‚å¯Ÿè€…ã€‚</p><h1 id="è®¢é˜…-å‘å¸ƒæ¨¡å¼"><a href="#è®¢é˜…-å‘å¸ƒæ¨¡å¼" class="headerlink" title="è®¢é˜…-å‘å¸ƒæ¨¡å¼"></a>è®¢é˜…-å‘å¸ƒæ¨¡å¼</h1><p>è®¢é˜…-å‘å¸ƒæ¨¡å¼æ˜¯è§‚å¯Ÿè€…æ¨¡å¼çš„å¦ä¸€ä¸ªåˆ«ç§°ã€‚</p><p>ä½†æ˜¯éšç€æ—¶é—´çš„å˜åŒ–ï¼Œå·²ç»ç‹¬ç«‹äºè§‚å¯Ÿè€…æ¨¡å¼ï¼Œæˆä¸ºå¦ä¸€ç§çš„è®¾è®¡æ¨¡å¼ã€‚</p><p>åœ¨ç°åœ¨çš„å‘å¸ƒè®¢é˜…æ¨¡å¼ä¸­ï¼Œæˆä¸ºå‘å¸ƒè€…çš„æ¶ˆæ¯å‘é€è€…ä¸ä¼šå°†ä¿¡æ¯ç›´æ¥å‘é€ç»™è®¢é˜…è€…ï¼Œè¿™æ„å‘³è¿™å‘å¸ƒè€…å’Œè®¢é˜…è€…ä¸çŸ¥é“å½¼æ­¤çš„å­˜åœ¨ã€‚åœ¨å‘å¸ƒè€…å’Œè®¢é˜…è€…ä¹‹é—´å­˜åœ¨ç¬¬ä¸‰ä¸ªç»„ä»¶ï¼Œç§°ä¸ºè°ƒåº¦ä¸­å¿ƒæˆ–äº‹ä»¶é€šé“ï¼Œå®ƒç»´æŒç€å‘å¸ƒè€…å’Œè®¢é˜…è€…ä¹‹é—´çš„è”ç³»ï¼Œè¿‡æ»¤æ‰€æœ‰å‘å¸ƒè€…ä¼ å…¥çš„ä¿¡æ¯å¹¶ç›¸åº”çš„åˆ†å‘ç»™å®ƒçš„è®¢é˜…è€…ã€‚</p><p>ä¾‹å­ï¼š</p><p>ä½ åœ¨å¾®åšå…³æ³¨äº†Aï¼ŒåŒæ—¶å…¶ä»–å¾ˆå¤šäººä¹Ÿå…³æ³¨äº†Aï¼Œé‚£ä¹ˆå½“Aå‘å¸ƒåŠ¨æ€çš„æ—¶å€™ï¼Œå¾®åšå°±ä¼šä¸ºä½ æ¨é€è¿™æ¡åŠ¨æ€ã€‚Aå°±æ˜¯å‘å¸ƒè€…ï¼Œä½ æ˜¯è®¢é˜…è€…ï¼Œå¾®åšå°±æ˜¯è°ƒåº¦ä¸­å¿ƒï¼Œä½ å’ŒAä¹‹é—´æ²¡æœ‰ç›´æ¥çš„æ¶ˆæ¯å¾€æ¥ï¼Œå…¨æ˜¯é€šè¿‡å¾®åšæ¥åè°ƒçš„ã€‚</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/2020-8-3-1.gif" alt="å¦‚æœæœ‰äº›æ–¹æ³•æ²¡æœ‰è¯¦ç»†è¯´æ˜ä½ å¯ä»¥è‡ªè¡Œæœç´¢æŸ¥çœ‹"></p><p><strong>å¼•ç”¨ï¼š</strong></p><p><a href="(https://www.cnblogs.com/onepixel/p/10806891.html)">è§‚å¯Ÿè€…æ¨¡å¼ä¸è®¢é˜…å‘å¸ƒæ¨¡å¼çš„åŒºåˆ«</a></p><p><a href="https://maxwell-nc.github.io/android/rxjava2-1.html#Single%E5%92%8CSingleObserver" target="_blank" rel="noopener"><strong>RxJava 2.x ä½¿ç”¨è¯¦è§£(ä¸€) å¿«é€Ÿå…¥é—¨</strong></a></p><p><a href="https://www.jianshu.com/p/2a882604bbe8" target="_blank" rel="noopener">Rxjavaå…³äºDisposableä½ åº”è¯¥çŸ¥é“çš„äº‹</a></p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> RxJava </tag>
            
            <tag> è½¯ä»¶å·¥ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>koinä¾èµ–æ³¨å…¥æ¡†æ¶</title>
      <link href="/2020/08/13/%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5-koin/"/>
      <url>/2020/08/13/%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5-koin/</url>
      
        <content type="html"><![CDATA[<h2 id="koinçš„ä½¿ç”¨"><a href="#koinçš„ä½¿ç”¨" class="headerlink" title="koinçš„ä½¿ç”¨"></a>koinçš„ä½¿ç”¨</h2><h4 id="æ·»åŠ ä¾èµ–åº“"><a href="#æ·»åŠ ä¾èµ–åº“" class="headerlink" title="æ·»åŠ ä¾èµ–åº“"></a>æ·»åŠ ä¾èµ–åº“</h4><pre><code>    implementation &#39;org.koin:koin-androidx-viewmodel:2.0.1&#39;    implementation &#39;org.koin:koin-android:2.0.1&#39;</code></pre><h4 id="éœ€è¦åˆ›å»ºä¾èµ–å¯¹è±¡"><a href="#éœ€è¦åˆ›å»ºä¾èµ–å¯¹è±¡" class="headerlink" title="éœ€è¦åˆ›å»ºä¾èµ–å¯¹è±¡"></a>éœ€è¦åˆ›å»ºä¾èµ–å¯¹è±¡</h4><p>è¿™é‡Œåˆ›å»ºä¸‰ä¸ªç±»ï¼ŒStudentï¼ŒSchoolCourseï¼ŒFriendã€‚</p><ul><li>Studentç±»</li></ul><blockquote><p>ä¾èµ–äºSchoolCourseï¼ŒFriendç±»çš„æ–¹æ³•ã€‚</p></blockquote><pre><code class="kotlin">class Student(val course: SchoolCourse,val friend: Friend) {    fun beSmart() {        course.study()        friend.hangout()    }}</code></pre><ul><li>SchoolCourseç±»</li></ul><blockquote><p>æä¾›æ–¹æ³• study è´Ÿè´£æ‰“å° â€œI am studyingâ€</p></blockquote><pre><code>class SchoolCourse {    fun study() {        println(&quot;I am studying&quot;)    }}</code></pre><ul><li>Friend ç±»</li></ul><blockquote><p>æä¾›æ–¹æ³• hangout è´Ÿè´£æ‰“å° â€œWeâ€™re hanging outâ€</p></blockquote><pre><code>class Friend {    fun hangout() {        println(&quot;We&#39;re hanging out&quot;)    }}</code></pre><h4 id="å®šä¹‰ä¾èµ–é›†åˆ"><a href="#å®šä¹‰ä¾èµ–é›†åˆ" class="headerlink" title="å®šä¹‰ä¾èµ–é›†åˆ"></a>å®šä¹‰ä¾èµ–é›†åˆ</h4><p>åˆ›å»º Modeles æ–‡ä»¶ </p><ul><li>éœ€è¦ä½¿ç”¨ module æ–¹æ³•</li></ul><blockquote><p>æä¾›æ‰€éœ€è¦çš„ä¾èµ–</p></blockquote><ul><li>éœ€è¦ signle æ–¹æ³•</li></ul><blockquote><p>ä½¿å½“å‰ä¾èµ–ä¸ºä¸€ä¸ªå•ä¾‹çš„å¯¹è±¡</p></blockquote><ul><li>éœ€è¦ factory æ–¹æ³•</li></ul><blockquote><p>å®šä¹‰ä¸€ä¸ªå·¥åœºæ¯æ¬¡è°ƒç”¨åˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹</p></blockquote><ul><li>éœ€è¦ get() æ–¹æ³•</li></ul><blockquote><p>get ç”¨äºæœ€ç»ˆå®ç°æ³¨å…¥</p></blockquote><pre><code>val appModule: Module = module {    single { SchoolCourse() }    factory { Friend() }    factory { Student(get(), get()) }}</code></pre><h4 id="å¯åŠ¨-Koin"><a href="#å¯åŠ¨-Koin" class="headerlink" title="å¯åŠ¨ Koin"></a>å¯åŠ¨ Koin</h4><ul><li><p>éœ€è¦ç³»ç»Ÿåœ¨åˆ›å»ºæ—¶ç¬¬ä¸€ä¸ªå¯åŠ¨Applicationå®ä¾‹</p><blockquote><p>ä¿®æ”¹ application ä¸­çš„ name å±æ€§ ä½¿å¾—åº”ç”¨ç¬¬ä¸€ä¸ªå¯åŠ¨å®ƒ</p></blockquote></li></ul><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200813224142.png" alt=""></p><ul><li>éœ€è¦åˆ›å»º MyApp</li></ul><blockquote><p>ç¬¬ä¸€ä¸ªå¯åŠ¨çš„Applicationå®ä¾‹</p></blockquote><ul><li>éœ€è¦ startKoin</li></ul><blockquote><p>ç”¨æ¥å¯åŠ¨Koin</p></blockquote><ul><li>éœ€è¦ modules</li></ul><blockquote><p>æ³¨å†Œå£°æ˜çš„Module</p></blockquote><ul><li>éœ€è¦ androidContext</li></ul><blockquote><p>å‘Koinä¸­æ³¨å…¥context</p></blockquote><pre><code>class MyApp : Application() {    override fun onCreate() {        super.onCreate()        startKoin {            androidContext(this@MyApp)            modules(listOf(appModule))        }    }}</code></pre><h4 id="ä½¿ç”¨-koin-å®ç°æ³¨å…¥"><a href="#ä½¿ç”¨-koin-å®ç°æ³¨å…¥" class="headerlink" title="ä½¿ç”¨ koin å®ç°æ³¨å…¥"></a>ä½¿ç”¨ koin å®ç°æ³¨å…¥</h4><p>åœ¨éœ€è¦æ³¨å…¥çš„åœ°æ–¹ä½¿ç”¨</p><ul><li>éœ€è¦ä½¿ç”¨ get()</li></ul><blockquote><p>é æ‡’åŠ è½½ï¼Œæ³¨å…¥å®ä¾‹</p></blockquote><p>é€šè¿‡ æ³¨å…¥ä¾èµ–å®Œæˆåçš„å®ä¾‹è°ƒç”¨beSmart()æ–¹æ³•</p><pre><code>        val student = get&lt;Student&gt;()        student.beSmart()        val student2 = get&lt;Student&gt;()        student2.beSmart()</code></pre><h4 id="å®Œæˆæ³¨å…¥"><a href="#å®Œæˆæ³¨å…¥" class="headerlink" title="å®Œæˆæ³¨å…¥"></a>å®Œæˆæ³¨å…¥</h4><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/image-20200813233756977.png" alt=""></p><h4 id="ä»€ä¹ˆæ˜¯-koinï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-koinï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ koinï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ koinï¼Ÿ</h4><p>ä¸€ä¸ªè½»é‡çº§çš„ä¾èµ–æ³¨å…¥ç»„ä»¶ã€‚</p><h2 id="è¡¥å……"><a href="#è¡¥å……" class="headerlink" title="è¡¥å……"></a>è¡¥å……</h2><p><a href="https://zhuanlan.zhihu.com/p/188485918" target="_blank" rel="noopener">Koin in Android: æ›´ç®€å•çš„ä¾èµ–æ³¨å…¥</a></p><h4 id="Get"><a href="#Get" class="headerlink" title="Get"></a>Get</h4><p>get()ç”¨äºå®ç°æ³¨å…¥ã€‚</p><p>å½“ä½ æ‰€å±ç±»å‹ä¸ç¡®å®šæ—¶ï¼Œå¯ä»¥æŒ‡å®šç±»å‹ã€‚get<Type>()</p><h4 id="å£°æ˜ï¼šç»‘å®šä¸€ä¸ªæ¥å£"><a href="#å£°æ˜ï¼šç»‘å®šä¸€ä¸ªæ¥å£" class="headerlink" title="å£°æ˜ï¼šç»‘å®šä¸€ä¸ªæ¥å£"></a>å£°æ˜ï¼šç»‘å®šä¸€ä¸ªæ¥å£</h4><p>ä¸€ä¸ª  single æˆ–è€… factory å£°æ˜å°†ä¼šä½¿ç”¨å…¶ç»™å®šçš„ lambda è¡¨è¾¾å¼ç±»å‹ã€‚æ¯”å¦‚ single{T}ï¼Œè¯¥å£°æ˜æ‰€åŒ¹é…çš„ç±»å‹å°±æ˜¯è¡¨è¾¾å¼æ‰€å£°æ˜çš„ç±»å‹ T è®©æˆ‘ä»¬ä»¥ä¸€ä¸ªç±»åŠå…¶å®ç°çš„æ¥å£ä¸ºä¾‹ï¼š</p><pre><code class="java">// Service interfaceinterface Service{    fun doSomething()}// Service Implementationclass ServiceImp() : Service {    fun doSomething() { ... }}</code></pre><p>åœ¨koinæ¨¡å—(module)ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Kotilnä¸‹çš„ as æ“ä½œç¬¦ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code class="java">val myModule = module {    // åªåŒ¹é… Service ç±»å‹    single { ServiceImp() }    // åªåŒ¹é… Service ç±»å‹    single { ServiceImp() as Service }}</code></pre><p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨æ¨æ–­ç±»å‹è¡¨è¾¾å¼</p><pre><code class="java">val myModule = module {    // åªåŒ¹é… Service ç±»å‹    single { ServiceImp() }    // åªåŒ¹é… Service ç±»å‹    single&lt;Service&gt; { ServiceImp() }}</code></pre><p>ç¬¬äºŒç§é£æ ¼æ˜¯é¦–é€‰çš„ï¼Œåœ¨æ¥ä¸‹æ¥çš„æ–‡æ¡£ä¸­ï¼Œä¹Ÿä¼šä½¿ç”¨è¯¥æ–¹æ³•ã€‚</p><h4 id="Bind"><a href="#Bind" class="headerlink" title="Bind"></a>Bind</h4><ul><li><p><code>bind()</code> - ä¸ºç»™å®šçš„å¯¹è±¡å£°æ˜æ·»åŠ è¦ç»‘å®šçš„ç±»å‹</p><p>Bind æ˜¯ä¸€ä¸ªä¸­è¾å‡½æ•°ï¼Œå¯ä»¥ç”¨äºæŠŠä¸€ä¸ªServiceå…³è”åˆ°å¤šä¸ªç±»ã€‚ä¾‹å¦‚ç°åœ¨æœ‰ä¸¤ä¸ªæ¥å£ï¼šToolï¼ŒFlammableï¼ŒStoveå®ç°äº†è¿™ä¸¤ä¸ªæ¥å£ã€‚æ˜¾ç„¶å¦‚æœåªå®šä¹‰1ä¸ªServiceæ˜¯ä¸èƒ½åŒæ—¶æ³¨å…¥Stoveå’Œè¿™ä¸¤ä¸ªæ¥å£çš„ã€‚</p><p>è¿™æ˜¯å°±å¯ä»¥å‘æŒ¥Bindçš„ä½œç”¨äº†</p><pre><code>val myModule = module{    factory { Stove() } bind Tool::class bind Flammable::class // &lt;- here!    factory { Chef(get()) }}</code></pre><p>è¿™ä¹ˆä¸€æ¥ï¼Œä¸‹é¢çš„ä¸‰ä¸ªæ³¨å…¥éƒ½æ˜¯åˆæ³•çš„ï¼Œå¹¶éƒ½ä¼šå¾—åˆ°ä¸€ä¸ª Stove å®ä¾‹ï¼š</p><pre><code>val chef: Chef = get()val tool:Tool = get()val flammable:Flammable = get()</code></pre></li></ul><h4 id="named"><a href="#named" class="headerlink" title="named"></a>named</h4><p>é™å®šç¬¦ï¼Œç”¨æ¥åŒºåˆ«åŒä¸€ä¸ªç±»çš„ä¸åŒå®ä¾‹</p><p>ä½¿ç”¨</p><pre><code class="java"> single(named(&quot;dev&quot;)) { DataRepository() } single(named(&quot;test&quot;)) { DataRepository() }</code></pre><h4 id="name-å±æ€§"><a href="#name-å±æ€§" class="headerlink" title="name å±æ€§"></a>name å±æ€§</h4><p>å¯é€šè¿‡nameæˆ–è€…classæ£€ç´¢åˆ°å¯¹åº”çš„å®ä¾‹</p><p>ä½¿ç”¨</p><pre><code class="kotlin">    factory(name = MAIN) {        AndroidSchedulers.mainThread()    }</code></pre><h2 id="ä¾èµ–æ³¨å…¥å’Œæ§åˆ¶åè½¬"><a href="#ä¾èµ–æ³¨å…¥å’Œæ§åˆ¶åè½¬" class="headerlink" title="ä¾èµ–æ³¨å…¥å’Œæ§åˆ¶åè½¬"></a>ä¾èµ–æ³¨å…¥å’Œæ§åˆ¶åè½¬</h2><h3 id="ä¾èµ–æ³¨å…¥ï¼ˆDependency-Injectionï¼Œç®€ç§°-DIï¼‰"><a href="#ä¾èµ–æ³¨å…¥ï¼ˆDependency-Injectionï¼Œç®€ç§°-DIï¼‰" class="headerlink" title="ä¾èµ–æ³¨å…¥ï¼ˆDependency  Injectionï¼Œç®€ç§° DIï¼‰"></a>ä¾èµ–æ³¨å…¥ï¼ˆDependency  Injectionï¼Œç®€ç§° DIï¼‰</h3><p>ä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥ï¼Ÿ</p><p>å‡è®¾ A æ˜¯ è€³æœºï¼ŒB æ˜¯æ’­æ”¾å™¨ã€‚</p><p>å½“ A ä¾èµ– B æ—¶ï¼ˆä¹Ÿå°±æ˜¯è€³æœºæƒ³è¦æ’­æ”¾ä»¥éŸ³ä¹æ—¶ï¼‰ï¼ŒA è¦æƒ³æ’­æ”¾éŸ³ä¹å°±å¿…é¡»è¦æœ‰Bçš„å®ä¾‹ï¼Œä¹Ÿå°±æ˜¯</p><ol><li>é€šè¿‡Açš„æ¥å£ï¼ŒæŠŠBä¼ å…¥ï¼›</li><li>é€šè¿‡Açš„æ„é€ ï¼ŒæŠŠBä¼ å…¥ï¼›</li><li>é€šè¿‡Açš„å±æ€§ï¼ŒæŠŠBä¼ å…¥ï¼›</li></ol><p>è¿™äº›è¿‡ç¨‹å«åš<strong>ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰</strong></p><h3 id="æ§åˆ¶åè½¬ï¼ˆInversion-of-Controlï¼Œç®€ç§°-Iocï¼‰"><a href="#æ§åˆ¶åè½¬ï¼ˆInversion-of-Controlï¼Œç®€ç§°-Iocï¼‰" class="headerlink" title="æ§åˆ¶åè½¬ï¼ˆInversion of Controlï¼Œç®€ç§° Iocï¼‰"></a>æ§åˆ¶åè½¬ï¼ˆInversion of Controlï¼Œç®€ç§° Iocï¼‰</h3><p>ä½†æ˜¯ A å¹¶ä¸èƒ½æ§åˆ¶ B ä½•æ—¶æ’­æ”¾(åˆ›å»º)æˆ–è€…å…³é—­(é”€æ¯)ï¼Œä»…ä½¿ç”¨ B ï¼Œé‚£ä¹ˆ B çš„æ§åˆ¶æƒäº¤ç»™ A ä¹‹å¤–çš„äº‹åŠ¡å¤„ç†ï¼Œè¿™äº›å«åš <strong>æ§åˆ¶åè½¬ï¼ˆIocï¼‰</strong></p><h3 id="ä¸ºä»€ä¹ˆéœ€è¦ä¾èµ–æ³¨å…¥"><a href="#ä¸ºä»€ä¹ˆéœ€è¦ä¾èµ–æ³¨å…¥" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦ä¾èµ–æ³¨å…¥"></a>ä¸ºä»€ä¹ˆéœ€è¦ä¾èµ–æ³¨å…¥</h3><p>é™ä½è€¦åˆ</p><p>ä»€ä¹ˆæ˜¯è€¦åˆ</p><p>è€¦åˆæ€§(Coupling)ï¼Œä¹Ÿå«è€¦åˆåº¦ï¼Œæ˜¯å¯¹æ¨¡å—é—´å…³è”ç¨‹åº¦çš„åº¦é‡ã€‚ä¸¤ä¸ªæˆ–å¤šä¸ªåŠŸèƒ½æ¨¡å—ä¹‹é—´çš„å…³è”ç¨‹åº¦ã€‚</p><p>ä»€ä¹ˆæ˜¯è§£è€¦</p><p>è§£é™¤ç±»ï¼ˆæ¨¡å—ï¼‰ä¹‹é—´çš„ç›´æ¥å…³ç³»ï¼Œå°†ç›´æ¥å…³ç³»è½¬æ¢æˆé—´æ¥å…³ç³»</p><p><strong>å¼•ç”¨ï¼š</strong></p><p><a href="https://www.youtube.com/watch?v=eH9UrAwKEcE&t=140s" target="_blank" rel="noopener">Dependency Injection with Koin - Android Kotlin tutorial</a></p><p><a href="https://github.com/AndyJennifer/koin_doc_zh" target="_blank" rel="noopener">koin ä¸­æ–‡ DOC</a></p><p><a href="https://juejin.im/post/6844904202586554382" target="_blank" rel="noopener">Koin in Android: æ›´ç®€å•çš„ä¾èµ–æ³¨å…¥</a></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/2020-8-3-1.gif" alt="å¦‚æœæœ‰äº›æ–¹æ³•æ²¡æœ‰è¯¦ç»†è¯´æ˜ä½ å¯ä»¥è‡ªè¡Œæœç´¢æŸ¥çœ‹"></p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> è½¯ä»¶å·¥ç¨‹ </tag>
            
            <tag> Kotlin </tag>
            
            <tag> koin </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>BottomSheetã€BottomShaeetDialogä½¿ç”¨æµç¨‹</title>
      <link href="/2020/08/06/BottomSheets/"/>
      <url>/2020/08/06/BottomSheets/</url>
      
        <content type="html"><![CDATA[<h1 id="BottomSheet"><a href="#BottomSheet" class="headerlink" title="BottomSheet"></a>BottomSheet</h1><p>Demo ä»£ç  <a href="https://medium.com/@droidbyme/android-bottom-sheet-7e9cfcec6427" target="_blank" rel="noopener">https://medium.com/@droidbyme/android-bottom-sheet-7e9cfcec6427</a><br>ä½¿ç”¨ BottomSheetã€BottomSheetDialogã€BottomSheetDialogFragment</p><h4 id="BottomSheetä½¿ç”¨æµç¨‹"><a href="#BottomSheetä½¿ç”¨æµç¨‹" class="headerlink" title="BottomSheetä½¿ç”¨æµç¨‹"></a>BottomSheetä½¿ç”¨æµç¨‹</h4><p>BottomSheetå®ç°æŒ‰é’®åœ¨ç‚¹å‡»ä¹‹åæ»‘åŠ¨å¸ƒå±€.ä¸è”åŠ¨ä¹Ÿæ˜¯å¯ä»¥çš„åªè¦ä¸è®¾ç½®å®ƒå°±å¯ä»¥äº†ã€‚</p><p><strong>è¢«è”åŠ¨çš„å¸ƒå±€ä½¿ç”¨</strong></p><pre><code class="xml">app:layout_behavior=&quot;@string/bottom_sheet_behavior&quot;</code></pre><p><strong>è”åŠ¨æŒ‰é’®ä½¿ç”¨å±æ€§</strong></p><pre><code class="xml">app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot;&gt;</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/Snipaste_2020-07-17_21-58-16.png" alt=""></p><p><strong>åœ¨åˆå§‹åŒ–æ—¶è¢«è”åŠ¨</strong></p><pre><code class="kotlin">          //  è®¾ç½®ç»‘å®šåŠ¨ä½œ        //  æ§ä»¶å’Œå®ƒç»‘å®š        var buttomSheetBehavior = BottomSheetBehavior.from(bottom_sheet_layout)</code></pre><p><strong>è®¾ç½®æŒ‰é’®äº†</strong></p><p>ä¹Ÿå°±æ˜¯åœ¨ç°åœ¨ç›‘å¬æŒ‰é’®çš„æ—¶å€™æ‰è¿›è¡Œè¿™ä¸ªæŒ‰é’®çš„è”åŠ¨æ»‘åŠ¨</p><pre><code class="kotlin">     btnBottomSheet.setOnClickListener {            if (buttomSheetBehavior.getState() != BottomSheetBehavior.STATE_EXPANDED)                buttomSheetBehavior.state = BottomSheetBehavior.STATE_EXPANDED            else                buttomSheetBehavior.state = BottomSheetBehavior.STATE_COLLAPSED        }</code></pre><p>è®¾ç½®åœ¨æ˜¾ç¤ºæ—¶ä¸æ˜¾ç¤º,ä¸æ˜¾ç¤ºæ—¶æ˜¾ç¤ºã€‚</p><p>è®¾ç½®ç›‘å¬å™¨åœ¨å®ƒè¢«æ‹–åŠ¨ã€æ»‘åŠ¨ã€åˆ‡æ¢æ—¶äº§ç”Ÿæç¤ºã€‚</p><pre><code class="kotlin">        buttomSheetBehavior.setBottomSheetCallback(object : BottomSheetCallback() {            //è¿™é‡Œæ˜¯æ‹–æ‹½ä¸­çš„å›è°ƒï¼Œæ ¹æ®slideOffsetå¯ä»¥åšä¸€äº›åŠ¨ç”»            override fun onSlide(bottomSheet: View, slideOffset: Float) {            }            //è¿™é‡Œæ˜¯bottomSheetçŠ¶æ€çš„æ”¹å˜            override fun onStateChanged(bottomSheet: View, newState: Int) {                when (newState) {                    BottomSheetBehavior.STATE_EXPANDED -&gt; {                        Toast.makeText(this@MainActivity, &quot;å±•å¼€&quot;, Toast.LENGTH_LONG).show()                    }                    BottomSheetBehavior.STATE_COLLAPSED -&gt; {                        Toast.makeText(this@MainActivity, &quot;å…³é—­&quot;, Toast.LENGTH_LONG).show()                    }                    BottomSheetBehavior.STATE_DRAGGING -&gt; {                        Toast.makeText(this@MainActivity, &quot;æ‹–æ‹½çŠ¶æ€&quot;, Toast.LENGTH_LONG).show()                    }                    BottomSheetBehavior.STATE_HIDDEN -&gt; {                        Toast.makeText(this@MainActivity, &quot;éšè—çŠ¶æ€&quot;, Toast.LENGTH_LONG).show()                    }                    BottomSheetBehavior.STATE_SETTLING -&gt; {                        Toast.makeText(                            this@MainActivity,                            &quot; æ‹–æ‹½æ¾å¼€ä¹‹ååˆ°è¾¾ç»ˆç‚¹ä½ç½®ï¼ˆcollapsed or expandedï¼‰å‰çš„çŠ¶æ€&quot;,                            Toast.LENGTH_LONG                        ).show()                    }                }            }        })</code></pre><h4 id="BottomSheetDialogä½¿ç”¨æµç¨‹"><a href="#BottomSheetDialogä½¿ç”¨æµç¨‹" class="headerlink" title="BottomSheetDialogä½¿ç”¨æµç¨‹"></a>BottomSheetDialogä½¿ç”¨æµç¨‹</h4><p>ç‚¹å‡»æŒ‰é’®ä¹‹åå¼¹å‡ºDialogæç¤º(å¸ƒå±€ç•Œé¢æœ‰ä¸”å‡†å¤‡å¥½çš„)</p><p><strong>è®¾ç½®æŒ‰é’®çš„ç›‘å¬å™¨ï¼Œç‚¹å‡»ä¹‹åç›´æ¥å¼¹å‡ºDialogçª—å£ã€‚</strong></p><pre><code class="kotlin">  /*        * Javaå‡½æ•°å¼æ¥å£        * å¼¹çª—æç¤º        * */        btnBottomSheetDialog.setOnClickListener {            //ä½¿ç”¨å¸ƒå±€åŠ è½½å™¨layoutInflater            val view = layoutInflater.inflate(R.layout.fragment_bottom_sheet, null)            //å®ä¾‹è¯BottomSheetDialog():ç”¨æ¥å®ç°å¼¹å‡ºæç¤ºåŠŸèƒ½            val dialog = BottomSheetDialog(this)            dialog.setContentView(view)            dialog.show()        }</code></pre><h4 id="BottomSheetDialogFragmentåœ¨å½“å‰ç•Œé¢åŠ è½½Dialogç¢ç‰‡"><a href="#BottomSheetDialogFragmentåœ¨å½“å‰ç•Œé¢åŠ è½½Dialogç¢ç‰‡" class="headerlink" title="BottomSheetDialogFragmentåœ¨å½“å‰ç•Œé¢åŠ è½½Dialogç¢ç‰‡"></a>BottomSheetDialogFragmentåœ¨å½“å‰ç•Œé¢åŠ è½½Dialogç¢ç‰‡</h4><pre><code class="kotlin">        /*        * åœ¨å½“å‰ç•Œé¢åŠ è½½ç¢ç‰‡        * */        btnBottomSheetDialogFragment.setOnClickListener {            val bottomSHeetFragment = BottomSheetFragment()            bottomSHeetFragment.show(supportFragmentManager, bottomSHeetFragment.tag)        }</code></pre><p><strong>å‡†å¤‡å¥½è¦åŠ è½½çš„ç¢ç‰‡,å®ƒæ˜¯è¦æœ‰bottom_sheet_dialogç±»å‹çš„ç•Œé¢</strong></p>]]></content>
      
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MediaStoreè®¿é—®å›¾ç‰‡ã€è§†é¢‘</title>
      <link href="/2020/08/01/MediaStore%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
      <url>/2020/08/01/MediaStore%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="ä½¿ç”¨â€MediaStoreâ€è®¿é—®å›¾ç‰‡ã€è§†é¢‘çš„ç¼©ç•¥å›¾"><a href="#ä½¿ç”¨â€MediaStoreâ€è®¿é—®å›¾ç‰‡ã€è§†é¢‘çš„ç¼©ç•¥å›¾" class="headerlink" title="ä½¿ç”¨â€MediaStoreâ€è®¿é—®å›¾ç‰‡ã€è§†é¢‘çš„ç¼©ç•¥å›¾"></a>ä½¿ç”¨â€MediaStoreâ€è®¿é—®å›¾ç‰‡ã€è§†é¢‘çš„ç¼©ç•¥å›¾</h2><h3 id="éœ€è¦åŠ¨æ€ç”³è¯·æƒé™"><a href="#éœ€è¦åŠ¨æ€ç”³è¯·æƒé™" class="headerlink" title="éœ€è¦åŠ¨æ€ç”³è¯·æƒé™"></a>éœ€è¦åŠ¨æ€ç”³è¯·æƒé™</h3><p>éœ€è¦é…ç½®æ–‡ä»¶ä¸­æ·»åŠ è¦ ç”³è¯·çš„æƒé™ â€œAndroidManifest.xmlâ€</p><pre><code class="xml">&lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;</code></pre><h4 id="æ³¨å†ŒåŠ¨æ€æƒé™"><a href="#æ³¨å†ŒåŠ¨æ€æƒé™" class="headerlink" title="æ³¨å†ŒåŠ¨æ€æƒé™"></a>æ³¨å†ŒåŠ¨æ€æƒé™</h4><ul><li><p>éœ€è¦è‡ªå®šä¹‰ â€œcheckReadExternalStoragePermission()â€æ–¹æ³•</p></li><li><p>éœ€è¦ â€œBuild.VERSION.SDK_INTâ€æ–¹æ³•è·å¾—å½“å‰ç³»ç»Ÿçš„ç‰ˆæœ¬å·</p></li><li><p>éœ€è¦ â€œBuild.VERSION_CODES.Mâ€è¡¨ç¤ºå®‰å“6</p></li><li><p>éœ€è¦ â€œContextCompat.checkSelfPermission()â€æ–¹æ³•, åˆ¤æ–­æ˜¯å¦è·å¾—äº†æƒé™.</p></li></ul><blockquote><p>å‚æ•°1:ä¸Šä¸‹æ–‡.å‚æ•°2:è¦åˆ¤æ–­çš„æƒé™. </p><p>è¿”å›å€¼:PackageManager.<strong>PERMISSION_GRANTED</strong> <strong>è¡¨ç¤ºæˆäºˆæƒé™</strong>,PackageManager.<strong>PERMISSION_DENIED</strong>  = -1    <strong>è¡¨ç¤ºæƒé™æœªå¼€å¯</strong>ï¼›</p></blockquote><ul><li>éœ€è¦ â€œshouldShowRequestPermissionRationale()â€æ–¹æ³•.</li></ul><blockquote><p>åˆ¤æ–­å½“å‰æƒé™æ˜¯å¦è¢«æ‹’ç»,å¹¶ä¸”æ˜¾ç¤ºçª—å£,æ˜¾ç¤ºâ€è¿è¡Œâ€å’Œâ€æ‹’ç»â€é€‰é¡¹.</p><p>ç¬¬ä¸€æ¬¡ä¸æ˜¾ç¤ºâ€ä¸å†æé†’â€æŒ‰é’®,ç¬¬äºŒæ¬¡çª—å£æ·»åŠ â€ä¸å†æ˜¾ç¤ºé€‰æ‹©æ¡†â€ã€‚</p><p>è¿”å›å€¼:æ‹’ç»è¿”å› true ,å…è®¸è¿”å› false æˆ–è€… ä¸å†æé†’é€‰ä¸­å è¿”å› false</p></blockquote><ul><li>éœ€è¦ â€œrequestPermission()â€æ–¹æ³•.</li></ul><blockquote><p>ç”¨æ¥ç”³è¯·ç³»ç»Ÿæƒé™. <strong>æ¯æ¬¡è¢«è°ƒç”¨æ—¶éƒ½ä¼šå›è°ƒâ€onRequestPermissionsResult()â€æ–¹æ³•ã€‚</strong></p><p>å‚æ•°1:è¦ç”³è¯·çš„æƒé™.</p><p>å‚æ•°2:è¦ç”³è¯·æƒé™çš„ code ä»¥ç”¨æ¥åœ¨ç”³è¯·æ–¹æ³•å›è°ƒæ—¶ç¡®å®šæ˜¯å½“å‰çš„ç”³è¯·æ“ä½œ.</p></blockquote><p>åœ¨éœ€è¦æ³¨å†Œæƒé™çš„æ´»åŠ¨ä¸Šæ·»åŠ </p><pre><code>    private fun checkReadExternalStoragePermission() {        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {            if (ContextCompat.checkSelfPermission(                    this,                    permission.READ_EXTERNAL_STORAGE                ) == PackageManager.PERMISSION_GRANTED            ) {                   } else {                if (shouldShowRequestPermissionRationale(permission.READ_EXTERNAL_STORAGE)) {                    Toast.makeText(this, &quot;App needs to view thumbnails&quot;, Toast.LENGTH_LONG).show()                }                requestPermissions(                    arrayOf(permission.READ_EXTERNAL_STORAGE),                    READ_EXTERNAL_STORAGE_PERMISSION_RESULT                )            }        } else {        }    }</code></pre><pre><code>    private val READ_EXTERNAL_STORAGE_PERMISSION_RESULT: Int = 0</code></pre><ul><li>éœ€è¦é‡å†™ â€œonRequestPermissionsResult()â€æ–¹æ³•</li></ul><blockquote><p>ç”³è¯·æƒé™æ—¶ä¼šè°ƒç”¨å®ƒ(ç”³è¯·æƒé™æ—¶çš„å›è°ƒ)</p><p>å‚æ•°1:ç”³è¯·æƒé™æ—¶çš„Code,è¡¨ç¤ºç”³è¯·æƒé™çš„æ“ä½œæ˜¯å¦ç›¸åŒ.</p><p>å‚æ•°2:è¿™æ˜¯è¦ç”³è¯·çš„æƒé™æ°¸è¿œä¸ä¸ºç©º.</p><p>å‚æ•°3:è¡¨ç¤ºæƒé™æˆæƒçš„ç»“æœæ°¸è¿œå°è£…åœ¨grantResultæ•°ç»„ä¸­</p></blockquote><pre><code>override fun onRequestPermissionsResult(        requestCode: Int,        permissions: Array&lt;out String&gt;,        grantResults: IntArray    ) {        super.onRequestPermissionsResult(requestCode, permissions, grantResults)        when (requestCode) {            READ_EXTERNAL_STORAGE_PERMISSION_RESULT -&gt; {                if (grantResults[0] == PackageManager.PERMISSION_GRANTED) {                    Toast.makeText(this, &quot;now have access to view thumbs&quot;, Toast.LENGTH_LONG).show()                }            }        }    }</code></pre><h3 id="éœ€è¦RecyclerViewçš„é€‚é…å™¨"><a href="#éœ€è¦RecyclerViewçš„é€‚é…å™¨" class="headerlink" title="éœ€è¦RecyclerViewçš„é€‚é…å™¨"></a>éœ€è¦RecyclerViewçš„é€‚é…å™¨</h3><p><a href="https://thecara.github.io/2020/07/26/RecyclerView%E5%9C%A8Kotlin%E4%B8%AD%E7%9A%84%E4%BD%BF%E7%94%A8/#toc-heading-7">ä½¿ç”¨æ­¤æ¡ˆä¾‹åˆ›å»ºé€‚é…å™¨</a></p><p>åˆå§‹åŒ–æ§ä»¶ä¸å†å¤è¿°äº†,</p><ul><li>éœ€è¦å˜é‡â€mMediaStoreCursorâ€</li></ul><blockquote><p>è¡¨ç¤ºå½“å‰çš„Cursor</p></blockquote><pre><code>class MediaStoreAdapter(private val mActivity: Activity) :    RecyclerView.Adapter&lt;MediaStoreAdapter.ViewHolder&gt;() {    private var mMediaStoreCursor: Cursor? = null        }</code></pre><ul><li><strong>éœ€è¦è‡ªå®šä¹‰â€getBitmapFromMediaStore()â€æ–¹æ³•</strong></li></ul><blockquote><p>è·å¾—ç³»ç»Ÿä¸­å›¾ç‰‡å’Œè§†é¢‘çš„ç¼©ç•¥å›¾.é€šè¿‡Cursorè·å¾—ç…§ç‰‡å’ŒVideoçš„ç¼©ç•¥å›¾</p><p>å‚æ•°1:ç§»åŠ¨åˆ°å¯¹åº”Cursorçš„è¡Œ.</p></blockquote><ul><li>éœ€è¦ä½¿ç”¨â€Cursor.getColumnIndex()â€æ–¹æ³•</li></ul><blockquote><p>è·å¾—å½“å‰MediaStoreCursorçš„â€å‚æ•°1â€çš„ç´¢å¼•</p><p>å‚æ•°1:è¦ç´¢å¼•çš„ä½ç½®</p><p>è¿”å›å€¼: è¿”å›åœ¨å½“å‰ Cursor ä¸­çš„ä½ç½®,æ²¡æœ‰è¿”å› -1 </p></blockquote><ul><li>éœ€è¦ä½¿ç”¨â€Cursor.getInt()â€™æ–¹æ³•</li></ul><blockquote><p>è·å¾—â€Cursorâ€ä¸­ç´¢å¼•(åˆ—)çš„æ•°å€¼.</p><p>å‚æ•°1:ä½ æƒ³è¦è·å¾—çš„åˆ—</p><p>è¿”å›å€¼:è¿”å›æŒ‡å®šåˆ—çš„æ•°å€¼</p></blockquote><ul><li>éœ€è¦ â€œMediaStore.Images.Thumbnails.getThumbnailâ€æ–¹æ³•</li></ul><blockquote><p>è·å¾—ç¼©ç•¥å›¾.</p><p>å‚æ•°1:è¡¨ç¤ºå†…å®¹æä¾›å™¨. å‚æ•°2:å½“å‰â€Cursorâ€ç¼©ç•¥å›¾çš„ID. </p><p>å‚æ•°3:è¿”å›æ—¶çš„æ¸…æ™°åº¦.MICRO_KIND,MINI_KINDå­—é¢æ„æ€ä¸ºå¾®å‹å’Œè¿·ä½ ç¼©ç•¥æ¨¡å¼,å‰è€…åˆ†è¾¨ç‡æ›´ä½.</p><p>è¿”å›å€¼:è¿”å›ä¸€ä¸ªBitmapæ ¼å¼</p></blockquote><p>åœ¨é€‚é…å™¨ä¸­æ·»åŠ </p><pre><code>class MediaStoreAdapter(private val mActivity: Activity) :    RecyclerView.Adapter&lt;MediaStoreAdapter.ViewHolder&gt;() {              private fun getBitmapFromMediaStore(position: Int): Bitmap? {        val idIndex: Int = mMediaStoreCursor!!.getColumnIndex(MediaStore.Files.FileColumns._ID)        val mediaTypeIndex: Int =            mMediaStoreCursor!!.getColumnIndex(MediaStore.Files.FileColumns.MEDIA_TYPE)        mMediaStoreCursor!!.moveToPosition(position)        when (mMediaStoreCursor!!.getInt(mediaTypeIndex)) {            // å½“å‰ç±»å‹ä¸º IMAGE æ—¶            MediaStore.Files.FileColumns.MEDIA_TYPE_IMAGE -&gt; {                return MediaStore.Images.Thumbnails.getThumbnail(                    mActivity.contentResolver,                    mMediaStoreCursor!!.getLong(idIndex),                    MediaStore.Images.Thumbnails.MICRO_KIND, null                )            }            // å½“å‰ç±»å‹ä¸º VIDEO            MediaStore.Files.FileColumns.MEDIA_TYPE_VIDEO -&gt; {                return MediaStore.Video.Thumbnails.getThumbnail(                    mActivity.contentResolver,                    mMediaStoreCursor!!.getLong(idIndex),                    MediaStore.Video.Thumbnails.MICRO_KIND, null                )            }        }        return null    }}</code></pre><ul><li><strong>éœ€è¦è‡ªå®šä¹‰æ–¹æ³•â€swapCursor()â€</strong></li></ul><blockquote><p>è·å¾—ä¸Šä¸€ä¸ªCursor.</p></blockquote><ul><li>éœ€è¦ â€œnotifyDataSetChanged()â€ æ–¹æ³•</li></ul><blockquote><p>æ£€æµ‹å½“å‰UIçº¿ç¨‹,åˆ·æ–°UI</p></blockquote><pre><code>class MediaStoreAdapter(private val mActivity: Activity) :    RecyclerView.Adapter&lt;MediaStoreAdapter.ViewHolder&gt;() {   private fun swapCursor(cursor: Cursor): Cursor? {        if (mMediaStoreCursor == cursor) {            return null        }        val oldCursor: Cursor? = mMediaStoreCursor        this.mMediaStoreCursor = cursor        if (cursor != null) {            this.notifyDataSetChanged()        }        return oldCursor    }}</code></pre><ul><li><strong>éœ€è¦ è‡ªå®šä¹‰æ–¹æ³•â€changeCursor()â€</strong></li></ul><blockquote><p>æ£€æµ‹ä¸Šä¸€ä¸ªCursor,ç”¨æ¥å…³é—­ä¸Šä¸ªCursor.</p></blockquote><pre><code>class MediaStoreAdapter(private val mActivity: Activity) :    RecyclerView.Adapter&lt;MediaStoreAdapter.ViewHolder&gt;() {        fun changeCursor(cursor: Cursor?) {        val oldCursor: Cursor? = swapCursor(cursor!!)        if (oldCursor != null)            oldCursor.close()    }}</code></pre><ul><li>éœ€è¦é‡å†™ â€œonBindViewHolder()â€æ–¹æ³•</li></ul><pre><code>    override fun onBindViewHolder(holder: ViewHolder, position: Int) {        val bitmap: Bitmap? = getBitmapFromMediaStore(position)        if (bitmap != null) {            holder.mediastoreImageView.setImageBitmap(bitmap)        }    }</code></pre><ul><li>éœ€è¦é‡å†™â€getItemCount()â€æ–¹æ³•</li></ul><pre><code>    override fun getItemCount(): Int {        return if (mMediaStoreCursor == null) 0 else mMediaStoreCursor!!.count    }</code></pre><ul><li>éœ€è¦é‡å†™â€onCreateViewHolder()â€æ–¹æ³•</li></ul><pre><code>    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {        val view =            LayoutInflater.from(parent.context).inflate(R.layout.media_image_view, parent, false)        return ViewHolder(view)    }</code></pre><h3 id="éœ€è¦â€LoaderManager-LoaderCallbacksâ€"><a href="#éœ€è¦â€LoaderManager-LoaderCallbacksâ€" class="headerlink" title="éœ€è¦â€LoaderManager.LoaderCallbacksâ€"></a>éœ€è¦â€LoaderManager.LoaderCallbacksâ€</h3><ul><li>éœ€è¦å®ç°LoaderManager.LoaderCallbacks<cursor>.(åœ¨MediaMainActivity)</li></ul><blockquote><p>åœ¨éœ€è¦çš„Fragmentæˆ–Activityä¸­å®ç°å®ƒã€‚</p></blockquote><pre><code>class MediaMainActivity : AppCompatActivity(), LoaderManager.LoaderCallbacks&lt;Cursor&gt; {}</code></pre><ul><li>éœ€è¦é‡å†™â€onCreateLoaderâ€</li></ul><blockquote><p>åœ¨è°ƒç”¨initLoader()è¿”å›æ—¶åˆ›å»ºä¸€ä¸ªLoader.</p><p>æ ¹æ®ä¼ å…¥çš„ID,åˆå§‹åŒ–å¹¶è¿”å›ä¸€ä¸ªæ–°çš„åŠ è½½å™¨.</p></blockquote><ul><li>éœ€è¦è¿”å›çš„åˆ—</li></ul><blockquote><p>MediaStore.Files.FileColums.ID è¿”å›Idåˆ—</p><p>MediaStore.Files.FIleColums.DATE_ADDED å›¾ç‰‡è¢«æ·»åŠ çš„æ—¶é—´</p><p>MediaStore.Files.FileColums.MEDIA_TYPE åª’ä½“ç±»å‹</p><p>MediaStore.Files.FileColums.MEDIA_TYPE_IMAGE å›¾ç‰‡åˆ—(ç´¢å¼•)</p><p>MediaStore.Files.FileColums.MEDIA_TYPE_VIDEO è§†é¢‘åˆ—(ç´¢å¼•)</p></blockquote><ul><li>éœ€è¦â€CursorLoader()â€åŒ¿åç±»</li></ul><blockquote><p>å®ƒæŸ¥è¯¢ContentResolverç„¶åè¿”å›ä¸€ä¸ªCursor.</p><p>å‚æ•°1:ä¸Šä¸‹æ–‡. å‚æ•°2:è¦æ“ä½œçš„URI.å½“å‰è¡¨ç¤ºæ‰€æœ‰å›¾ç‰‡çš„URI.</p><p>å‚æ•°3:è¦è¿”å›çš„åˆ—. å‚æ•°4:ä¸€ä¸ªè¿‡æ»¤å™¨,è¡¨æ˜å“ªäº›è¡Œè¦è¢«è¿”å›.å½“å‰è¿”å›ç±»å‹ä¸ºIMAGE æˆ– VIDEO</p><p>å‚æ•°5:ç”¨ä½œè¿‡æ»¤å™¨çš„å‚æ•°. </p><p>å‚æ•°6:è®¾ç½®æ’åº.ç›¸å½“äºSQLè¯­å¥ä¸­Order by.è¿™é‡Œä½¿ç”¨ DATA_ADDED + DESC è¡¨ç¤ºæŒ‰ç…§æ—¶é—´è¿›è¡Œæ’åº.</p></blockquote><pre><code class="kotlin">    override fun onCreateLoader(p0: Int, p1: Bundle?): androidx.loader.content.Loader&lt;Cursor&gt; {        val projection = arrayOf&lt;String&gt;(            MediaStore.Files.FileColumns._ID,            MediaStore.Files.FileColumns.DATE_ADDED,            MediaStore.Files.FileColumns.MEDIA_TYPE        )        // SQLå‘½ä»¤        val selection =            MediaStore.Files.FileColumns.MEDIA_TYPE +                    &quot; = &quot; + MediaStore.Files.FileColumns.MEDIA_TYPE_IMAGE + &quot; or &quot; + MediaStore.Files.FileColumns.MEDIA_TYPE +                    &quot; = &quot; + MediaStore.Files.FileColumns.MEDIA_TYPE_VIDEO        return object : CursorLoader(            this,            MediaStore.Files.getContentUri(&quot;external&quot;),            projection,            selection,            null,            MediaStore.Files.FileColumns.DATE_ADDED + &quot; DESC &quot;        ) {}    }</code></pre><ul><li>éœ€è¦é‡å†™ â€œonLoadFinished()â€æ–¹æ³•</li></ul><blockquote><p>æ›´æ–°UIæ“ä½œ.å½“ä¸€ä¸ªåŠ è½½å™¨å®Œæˆäº†å®ƒçš„è£…è½½è¿‡ç¨‹åè¢«è°ƒç”¨.</p></blockquote><ul><li>éœ€è¦è°ƒç”¨changeCursor()æ–¹æ³•</li></ul><blockquote><p>åˆ·æ–°å½“å‰å‚æ•°1,å…³é—­ä¸Šä¸€ä¸ªCursor</p><p>å‚æ•°1:å½“å‰çš„Cursor</p></blockquote><pre><code>class MediaMainActivity : AppCompatActivity(), LoaderManager.LoaderCallbacks&lt;Cursor&gt; {    override fun onLoadFinished(loader: androidx.loader.content.Loader&lt;Cursor&gt;, data: Cursor?) {        mMediaStoreAdapter?.changeCursor(data!!)    }}</code></pre><ul><li>éœ€è¦é‡å†™â€onLoaderReset()â€æ–¹æ³•</li></ul><blockquote><p>ä½•æ—¶é‡Šæ”¾å†…å­˜,å½“ä¸€ä¸ªåŠ è½½å™¨å®Œæˆäº†å®ƒçš„è£…è½½å·¥ä½œä¹‹åè¢«è°ƒç”¨</p></blockquote><pre><code>class MediaMainActivity : AppCompatActivity(), LoaderManager.LoaderCallbacks&lt;Cursor&gt; {   override fun onLoaderReset(loader: androidx.loader.content.Loader&lt;Cursor&gt;) {        mMediaStoreAdapter?.changeCursor(null)    }}</code></pre><ul><li><p>éœ€è¦åœ¨ç”¨äºæƒé™å’Œç”³è¯·æƒé™ä¹‹åæ·»åŠ </p></li><li><p>éœ€è¦åœ¨â€onRequestPermissionsResult()â€ä¸­è°ƒç”¨â€getSupportLoaderManager.initLoader()â€</p></li></ul><blockquote><p>å¯åŠ¨åŠ è½½å™¨</p><p>å‚æ•°1:ä¸€ä¸ªå”¯ä¸€çš„IDæ¥æ ‡å¿—åŠ è½½å™¨.</p><p>å‚æ•°2:å¯é€‰å‚æ•°,ç”¨äºåŠ è½½åˆå§‹åŒ–æ—¶(æœ¬ä¾‹ä¸ºnull)</p><p>å‚æ•°3:LoaderManager.LoaderCallbacksçš„å®ç°.è¢«LoaderMangerè°ƒç”¨ä»¥æŠ¥å‘ŠåŠ è½½äº‹ä»¶,åœ¨ä¾‹å­ä¸­æ˜¯ä¼ é€’ç»™è‡ªå·±â€thisâ€</p></blockquote><pre><code>when (requestCode) {            READ_EXTERNAL_STORAGE_PERMISSION_RESULT -&gt; {                if (grantResults[0] == PackageManager.PERMISSION_GRANTED) {                //æ·»åŠ  supportLoaderManager.initLoader(MEDIASTORE_LODAR_ID, null, this)                }            }        }</code></pre><ul><li>éœ€è¦åœ¨â€checkReadExternalStoragePermission()â€ä¸­è°ƒç”¨</li><li>éœ€è¦åœ¨æ‹¥æœ‰æƒé™åè°ƒç”¨,åœ¨â€checkSelfPermission()â€åˆ¤æ–­æ‹¥æœ‰æƒé™åè°ƒç”¨</li></ul><pre><code>        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {                  if (ContextCompat.checkSelfPermission(                    this,                    permission.READ_EXTERNAL_STORAGE                ) == PackageManager.PERMISSION_GRANTED            ) {              //æ·»åŠ   supportLoaderManager.initLoader(MEDIASTORE_LODAR_ID, null, this)            }         } else {            //æ·»åŠ   supportLoaderManager.initLoader(MEDIASTORE_LODAR_ID, null, this)        }</code></pre><p>ps:æ˜¾ç¤ºäº†åœ¨å“ªé‡Œæ·»åŠ å…¶ä»–çš„ä»£ç ä¸ç”¨ä¿®æ”¹.</p><ul><li>éœ€è¦æ·»åŠ å”¯ä¸€çš„IDæ ‡å¿—åŠ è½½å™¨.</li></ul><pre><code>class MediaMainActivity : AppCompatActivity(), LoaderManager.LoaderCallbacks&lt;Cursor&gt; {    private val MEDIASTORE_LODAR_ID: Int = 0}</code></pre><ul><li>éœ€è¦GridLayoutManger,åœ¨ â€œonCreate()â€ ä¸­æ·»åŠ </li></ul><blockquote><p>è®¾ç½®RecyclerViewçš„å¸ƒå±€</p><p>å‚æ•°1:ä¸Šä¸‹æ–‡ . å‚æ•°2:å¤šå°‘åˆ—</p></blockquote><pre><code>val gridLayoutManager: GridLayoutManager = GridLayoutManager(this, 3)</code></pre><ul><li>éœ€è¦RecyclerViewçš„setLayoutManager</li></ul><blockquote><p>è®¾ç½® GridLayoutManager</p></blockquote><pre><code>thumbnailRecyclerView.layoutManager = gridLayoutManager</code></pre><ul><li>éœ€è¦è®¾ç½®é€‚é…å™¨çœç•¥..</li></ul><h3 id="ä½¿ç”¨-â€œGlideâ€çš„æ–¹å¼åŠ è½½å›¾ç‰‡"><a href="#ä½¿ç”¨-â€œGlideâ€çš„æ–¹å¼åŠ è½½å›¾ç‰‡" class="headerlink" title="ä½¿ç”¨ â€œGlideâ€çš„æ–¹å¼åŠ è½½å›¾ç‰‡"></a>ä½¿ç”¨ â€œGlideâ€çš„æ–¹å¼åŠ è½½å›¾ç‰‡</h3><ul><li>éœ€è¦æ·»åŠ ä¾èµ–</li></ul><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200803180403.png" alt=""></p><ul><li>éœ€è¦â€œMediaStore.Files.FileColumns.DATAâ€ï¼ˆéœ€è¦åœ¨onCreateLoaderçš„projectionä¿®æ”¹ï¼‰</li></ul><blockquote><p>è¡¨è¿°ç´¢å¼•åœ¨ç£ç›˜ä¸­ä½ç½®</p></blockquote><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200803180843.png" alt=""></p><p>éœ€è¦åˆ›å»ºè‡ªå®šä¹‰è¿”å›â€œgetUriFromMediaStore()â€ï¼ˆåœ¨MediaStoreAdapterä¸­æ·»åŠ ï¼‰</p><blockquote><p>è·å¾—ç¼©ç•¥å›¾åœ¨ContentResolverä¸­çš„uri</p><p>å‚æ•°1ï¼šmediaçš„é‚£ä¸ªè¡Œ</p></blockquote><p>éœ€è¦â€œUri.parse()â€ æ–¹æ³•</p><blockquote><p>å°†å­—ç¬¦ä¸²è§£ææˆuriå¯¹è±¡</p></blockquote><pre><code>    private fun getUriFromMediaStore(position: Int): Uri {        val dataIndex: Int = mMediaStoreCursor!!.getColumnIndex(MediaStore.Files.FileColumns.DATA)        mMediaStoreCursor!!.moveToPosition(position)        val mediaUri: Uri =            Uri.parse(&quot;file://&quot; + mMediaStoreCursor!!.getString(dataIndex).toString())        return mediaUri    }</code></pre><p>éœ€è¦â€œGlideâ€ - (åœ¨onBindViewHolder()ä¸­æ·»åŠ )</p><blockquote><p>with(content:Content) - éœ€è¦ä¸Šä¸‹æ–‡</p><p>load(uri:String) - å›¾ç‰‡çš„uri</p><p>centerCrop() - å°†å›¾ç‰‡æŒ‰æ¯”ä¾‹ç¼©æ”¾åˆ°è¶³ä»¥å¡«å……ImageViewçš„å°ºå¯¸ï¼Œä½†æ˜¯å›¾ç‰‡å¯èƒ½ä¼šæ˜¾ç¤ºä¸å®Œæ•´ã€‚</p><p>override(width,height) é‡æ–°æ”¹å˜å›¾ç‰‡å¤§å°ã€‚</p><p>into() - ä½ éœ€è¦æ˜¾ç¤ºå›¾ç‰‡çš„ç›®æ ‡ã€‚</p></blockquote><pre><code>      Glide.with(mActivity).load(getUriFromMediaStore(position)).centerCrop().override(96, 96)            .into(holder.mediastoreImageView)</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200803184305.png" alt=""></p><h2 id="ä»€ä¹ˆæ˜¯Loader"><a href="#ä»€ä¹ˆæ˜¯Loader" class="headerlink" title="ä»€ä¹ˆæ˜¯Loader"></a>ä»€ä¹ˆæ˜¯Loader</h2><p><a href="http://www.jcodecraeer.com/a/anzhuokaifa/developer/2014/0325/1602.html" target="_blank" rel="noopener">android åŠ è½½å™¨loaderè¯¦è§£</a></p><p>Loaderç®€åŒ–äº†activityå’ŒFragmentä¸­å¼‚æ­¥åŠ è½½æ•°æ®çš„æ­¥éª¤.</p><p>ç‰¹ç‚¹:é€‚ç”¨äºæ¯ä¸ªActivityå’ŒFragment,æä¾›å¼‚æ­¥åŠ è½½çš„å®ç°æ–¹å¼,ç›‘å¬æ•°æ®æº,åœ¨æ•°æ®å‘ç”Ÿæ”¹å˜æ—¶è‡ªåŠ¨è¿”å›æ–°çš„ç»“æœã€‚å½“ç”±äºé…ç½®æ”¹å˜åè¢«é‡æ–°åˆ›å»ºå,å®ƒä»¬è‡ªåŠ¨é‡æ–°é“¾æ¥ä¸Šä¸€ä¸ªåŠ è½½æ¸¸æ ‡,æ‰€ä»¥ä¸å¿…é‡æ–°æŸ¥æ•°æ®.</p><p>loader API è¯´æ˜</p><table><thead><tr><th align="center">Class/Interface</th><th align="center">æè¿°</th></tr></thead><tbody><tr><td align="center">LoaderManager</td><td align="center">ä¸€ä¸ªä¸Activityå’ŒFragmentç›¸å…³è”çš„æŠ½è±¡ç±»,å®ƒç®¡ç†ä¸€ä¸ªæˆ–è€…å¤šä¸ªLoaderå®ä¾‹,å¸®åŠ©ä¸€ä¸ªåº”ç”¨ç®¡ç†å“ªäº›ä¸Activityæˆ–Fragmentçš„å£°æ˜å‘¨æœŸç›¸å…³çš„é•¿æ—¶é—´æ“ä½œ.å¸¸è§æ–¹å¼æ˜¯ä¸CursorLoaderä¸€èµ·ä½¿ç”¨,ç„¶ååº”ç”¨ä¹Ÿå¯ä»¥è‡ªå·±å†™ä¸€ä¸ªåŠ è½½å…¶ä»–æ•°æ®ç±»å‹æˆ–è€…æ•°æ®æºçš„loaderã€‚<strong>æ¯ä¸ªActivityæˆ–è€…Fragmentåªæœ‰ä¸€ä¸ªLoaderManager.ä½†æ˜¯ä¸€ä¸ªLoaderManagerå¯ä»¥æ‹¥æœ‰å¤šä¸ªåŠ è½½å™¨</strong></td></tr><tr><td align="center">LoaderManager.LoaderCallbacks</td><td align="center">ç”¨äºä¸€ä¸ªå®¢æˆ·ç«¯ä¸LoaderManageräº¤äº’çš„ä¼šè°ƒæ¥å£.ä¾‹å¦‚,ä½ ä½¿ç”¨å›è°ƒæ–¹æ³•onCreateLoader()æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„åŠ è½½å™¨.</td></tr><tr><td align="center">Loader</td><td align="center">ä¸€ä¸ªæ‰§è¡Œå¼‚æ­¥æ•°æ®åŠ è½½çš„æŠ½è±¡ç±»,å®ƒæ˜¯åŠ è½½å™¨çš„åŸºç¡€ç±».ä½ å¯ä»¥ä½¿ç”¨ç»å…¸çš„CursorLoader,ä½†æ˜¯ä½ ä¹Ÿå¯ä»¥å®ç°ä½ çš„å­ç±».ä¸€æ—¦åŠ è½½å™¨è¢«æ¿€æ´»,å®ƒä»¬å°†ç›‘å¬å®ƒçš„æ•°æ®æºå¹¶ä¸”åœ¨æ•°æ®æ”¹å˜æ—¶å‘é€æ–°çš„ç»“æœ.</td></tr><tr><td align="center">AsyncTaskLoader</td><td align="center">æä¾›ä¸€ä¸ªAsyncTaskæ¥æ‰§è¡Œå¼‚æ­¥åŠ è½½å·¥ä½œçš„æŠ½è±¡ç±»</td></tr><tr><td align="center">CursorLoader</td><td align="center">AsyncTaskLoaderçš„å­ç±»,å®ƒæŸ¥è¯¢ContentResolverç„¶åè¿”å›ä¸€ä¸ªCursor.è¿™ä¸ªç±»ä¸ºæŸ¥è¯¢Cursorä»¥æ ‡å‡†çš„æ–¹å¼å®ç°äº†åŠ è½½å™¨åè®®,å®ƒçš„æ¸¸æ ‡æŸ¥è¯¢æ˜¯é€šè¿‡AsyncTaskLoaderåœ¨åå°çº¿ç¨‹ä¸­æ‰§è¡Œ,ä»è€Œä¸ä¼šé˜»æ–­çº¿ç¨‹</td></tr></tbody></table><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/2020-8-3-1.gif" alt="å¦‚æœæœ‰äº›æ–¹æ³•æ²¡æœ‰è¯¦ç»†è¯´æ˜ä½ å¯ä»¥è‡ªè¡Œæœç´¢æŸ¥çœ‹"></p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> Kotlin </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SQLite Database ä½¿ç”¨</title>
      <link href="/2020/07/28/SQLite-Database-%E4%BD%BF%E7%94%A8/"/>
      <url>/2020/07/28/SQLite-Database-%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="åˆ›å»ºæ•°æ®åº“"><a href="#åˆ›å»ºæ•°æ®åº“" class="headerlink" title="åˆ›å»ºæ•°æ®åº“"></a>åˆ›å»ºæ•°æ®åº“</h2><h5 id="éœ€è¦-åˆ›å»ºæ•°æ®åº“-ç±»-â€œMyHelperâ€"><a href="#éœ€è¦-åˆ›å»ºæ•°æ®åº“-ç±»-â€œMyHelperâ€" class="headerlink" title="éœ€è¦ åˆ›å»ºæ•°æ®åº“ ç±» â€œMyHelperâ€"></a>éœ€è¦ åˆ›å»ºæ•°æ®åº“ ç±» â€œMyHelperâ€</h5><pre><code class="kotlin">class MyHelper(    private val mContext: Context? = null,    private val dbname: String = &quot;mydb&quot;,    private val version: Int = 1) : SQLiteOpenHelper(mContext, dbname, null, version) {    /*    * éœ€è¦å˜é‡sqlç¡®å®šè¡¨çš„æ ¼å¼    * éœ€è¦ execSQL()æ‰§è¡Œåˆ›å»ºè¡¨çš„åŠ¨ä½œ    * */    override fun onCreate(p0: SQLiteDatabase?) {        // åˆ›å»ºæ•°æ®åº“è¡¨        val sql: String =            &quot;CREATE TABLE PRODUCTS (_id INTEGER PRIMARY KEY AUTOINCREMENT, NAME TEXT, DESCRIPTION TEXT, PRICE READ)&quot;        // æ‰§è¡Œåˆ›å»ºè¡¨çš„åŠ¨ä½œ        p0?.execSQL(sql)    }    /*    *    * */    override fun onUpgrade(p0: SQLiteDatabase?, p1: Int, p2: Int) {        TODO(&quot;Not yet implemented&quot;)    }}</code></pre><ul><li>åˆ›å»ºæ•°æ®åº“éœ€è¦ç»§æ‰¿SQLiteOpenHelper()ç±»å‹,éœ€è¦å››ä¸ªå‚æ•°è¿›è¡Œåˆå§‹åŒ–</li><li>(å››ä¸ªå‚æ•°:mContext:ä¸Šä¸‹æ–‡,dbname: æ•°æ®åº“åç§°,version:æ•°æ®åº“ç‰ˆæœ¬,factory:null)</li><li>éœ€è¦å®ç°ä¸¤ä¸ªæ–¹æ³•onCreate()å’ŒonUpgrade()æ–¹æ³•</li></ul><h5 id="åœ¨éœ€è¦åˆ›å»ºæ•°æ®åº“æ—¶è°ƒç”¨"><a href="#åœ¨éœ€è¦åˆ›å»ºæ•°æ®åº“æ—¶è°ƒç”¨" class="headerlink" title="åœ¨éœ€è¦åˆ›å»ºæ•°æ®åº“æ—¶è°ƒç”¨"></a>åœ¨éœ€è¦åˆ›å»ºæ•°æ®åº“æ—¶è°ƒç”¨</h5><pre><code class="kotlin"> var myHelper: MyHelper = MyHelper(mContext = this) val sqlLiteDatabase: SQLiteDatabase = myHelper.readableDatabase</code></pre><p>è¿™æ—¶æ•°æ®åº“å°±åˆ›å»ºå®Œæˆäº†</p><h2 id="æ’å…¥æ•°æ®"><a href="#æ’å…¥æ•°æ®" class="headerlink" title="æ’å…¥æ•°æ®"></a>æ’å…¥æ•°æ®</h2><p>åˆ›å»ºä»“åº“åæ’å…¥æ•°æ®</p><p>éœ€è¦â€ContentValues()â€ç±»å‹</p><p>éœ€è¦â€SQLiteDatabaseçš„insert()â€æ–¹æ³•</p><p>åœ¨â€è‡ªå®šä¹‰æ•°æ®åº“ä¸­â€ä¸­æ·»åŠ æ–¹æ³•</p><pre><code>    private fun instertData(        name: String,        description: String,        price: Double,        database: SQLiteDatabase    ) {        // ContentValues() ç±»å‹è´Ÿè´£å­˜æ”¾é”®å€¼çš„æ•°æ®.ä½ åªéœ€è¦è®°ä½å®ƒæ˜¯å¾€æ•°æ®åº“ä¸­å­˜æ”¾æ•°æ®çš„.        val values: ContentValues = ContentValues()        values.put(&quot;NAME&quot;, name)        values.put(&quot;DESCRIPTION&quot;, description)        values.put(&quot;PRICE&quot;, price)        // å‘å½“å‰æ•°æ®åº“(database)æ’å…¥æ•°æ®(values)        database.insert(&quot;PRODUCTS&quot;, null, values)    }</code></pre><p>åœ¨<strong>å¤–éƒ¨è¦æ’å…¥æ•°æ®</strong>è®¾ç½®ç±»å‹ä¸º â€œpublicâ€å³å¯ã€‚</p><p>æ’å…¥æ•°æ®åœ¨å¤–éƒ¨è°ƒç”¨æ–¹æ³•</p><pre><code>        // insert        instertData(&quot;Jam&quot;, &quot;Fruit Jam&quot;, 300.1, p0!!)        instertData(&quot;Yli&quot;, &quot;Te Jam&quot;, 305.13, p0!!)        instertData(&quot;Tom Li&quot;, &quot;Zhou Jam&quot;, 210.7, p0!!)</code></pre><h2 id="è¯»å–æ•°æ®"><a href="#è¯»å–æ•°æ®" class="headerlink" title="è¯»å–æ•°æ®"></a>è¯»å–æ•°æ®</h2><p>éœ€è¦â€MyHelperâ€è‡ªå®šä¹‰<strong>æ•°æ®åº“ç±»çš„å®ä¾‹</strong></p><p>éœ€è¦â€MyHelper.readableDatabaseâ€æ–¹æ³•è¯»å–æ•°æ®åº“æ–¹æ³•<strong>è¿”å›ä¸€ä¸ªå¯å¯¹æ•°æ®åº“è¯»å†™çš„å¯¹è±¡</strong>.</p><p>éœ€è¦â€sqlLiteDatabase.rawQuery()â€æ–¹æ³•<strong>è·å¾—(æ•°æ®åº“è¡¨)æ¯è¡Œçš„é›†åˆ</strong>(Cursorç±»å‹).</p><pre><code>  // å®ä¾‹è¯è‡ªå®šä¹‰çš„æ•°æ®ç±»        var myHelper: MyHelper = MyHelper(mContext = this)        // åˆ›å»ºæ•°æ®åº“        val sqlLiteDatabase: SQLiteDatabase = myHelper.readableDatabase        val cursor: Cursor =            sqlLiteDatabase.rawQuery(&quot;SELECT NAME, PRICE FROM PRODUCTS&quot;, arrayOf&lt;String&gt;())        if (cursor != null)            cursor.moveToFirst()        val builder: StringBuilder = StringBuilder()        do {            val name: String = cursor.getString(0)            val price: Double = cursor.getDouble(1)            builder.append(&quot;NAME - &quot; + name + &quot;PRICE - &quot; + price)        } while (cursor.moveToNext())        // è¿™æ˜¯åœ¨ç•Œé¢ä¸Šåˆ·æ–°äº†è¯»å–çš„æ•°æ®        text_view.setText(builder.toString())</code></pre><p><img src="1595946627126.png" alt=""></p><h4 id="æŒ‰ç…§æ¡ä»¶æŸ¥è¯¢æŒ‡å®šæ•°æ®"><a href="#æŒ‰ç…§æ¡ä»¶æŸ¥è¯¢æŒ‡å®šæ•°æ®" class="headerlink" title="æŒ‰ç…§æ¡ä»¶æŸ¥è¯¢æŒ‡å®šæ•°æ®"></a>æŒ‰ç…§æ¡ä»¶æŸ¥è¯¢æŒ‡å®šæ•°æ®</h4><pre><code>   val cursor: Cursor =            sqlLiteDatabase.rawQuery(&quot;SELECT NAME, PRICE FROM PRODUCTS WHERE NAME = ?&quot;, arrayOf&lt;String&gt;(&quot;Tom Li&quot;))</code></pre><p>æŸ¥è¯¢ åˆ— â€œNAME,PRICEâ€ æ¥è‡ªè¡¨ â€œPRODUCTSâ€ æ ¹æ®æ¡ä»¶ â€œNAME = ?â€</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200731132244.png" alt=""></p><p>æŸ¥è¯¢å®Œæˆ</p><h2 id="ä»€ä¹ˆæ˜¯Cursorç±»å‹"><a href="#ä»€ä¹ˆæ˜¯Cursorç±»å‹" class="headerlink" title="ä»€ä¹ˆæ˜¯Cursorç±»å‹"></a>ä»€ä¹ˆæ˜¯Cursorç±»å‹</h2><p><a href="https://blog.csdn.net/android_zyf/article/details/53420267" target="_blank" rel="noopener">å¼•ç”¨:Androidä¸­çš„Cursoråˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•ç†è§£Cursorçš„æ–¹æ³•éƒ½åœ¨åšä»€ä¹ˆäº‹æƒ…ï¼Ÿ</a></p><blockquote><p>Cursoræ˜¯æ¯è¡Œçš„é›†åˆ</p></blockquote><p>è¡¨ä¸­å…±æœ‰å¤šè¡Œæ•°æ®.</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200729122947.png" alt=""></p><p>å‡å¦‚:è·å¾—é€šè¿‡â€selectâ€è¯­å¥â€genderâ€è·å¾—ç¬¦åˆè¿™åˆ—çš„ç”·æ€§é‚£ä¹ˆå¾—åˆ°çš„æ˜¯ â€œå¼ ä¸‰,èµµå…­â€è¿™ä¸¤è¡Œæ•°æ®.ä¹Ÿå°±æ˜¯<strong>è¯´ â€œCursorâ€ç±»å‹å­˜æ”¾äº†ä¸¤è¡Œæ•°æ®ã€‚</strong></p><h4 id="å¦‚ä½•è·å¾—Cursorç±»å‹"><a href="#å¦‚ä½•è·å¾—Cursorç±»å‹" class="headerlink" title="å¦‚ä½•è·å¾—Cursorç±»å‹"></a>å¦‚ä½•è·å¾—Cursorç±»å‹</h4><p>é€šè¿‡æ•°æ®åº“å¯¹è±¡çš„æ–¹æ³•è·å¾—ã€‚ğŸ‘‡</p><pre><code>SQLiteDataBase db;Cursor cursor = db.query(å„ç§å‚æ•°);</code></pre><p>è¿™äº›å°±æ˜¯æ¯ä¸€è¡Œçš„é›†åˆ</p><h4 id="ç´¢å¼•åœ¨Cursorä¸­æ˜¯ä»€ä¹ˆ"><a href="#ç´¢å¼•åœ¨Cursorä¸­æ˜¯ä»€ä¹ˆ" class="headerlink" title="ç´¢å¼•åœ¨Cursorä¸­æ˜¯ä»€ä¹ˆ"></a>ç´¢å¼•åœ¨Cursorä¸­æ˜¯ä»€ä¹ˆ</h4><p>åœ¨Cursorä¸­ç´¢å¼•æŒ‡çš„å°±æ˜¯<strong>è¡¨ä¸­çš„åˆ—</strong></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200731174701.png" alt=""></p><p>è¿”å›äº†â€PRICEâ€åˆ—åœ¨è¡¨ä¸­çš„ç´¢å¼•(ä½ç½®)ã€‚</p><h4 id="å…³äºä¸ºä½•è¦ä½¿ç”¨-â€œmoveToFirst-â€-æ–¹æ³•"><a href="#å…³äºä¸ºä½•è¦ä½¿ç”¨-â€œmoveToFirst-â€-æ–¹æ³•" class="headerlink" title="å…³äºä¸ºä½•è¦ä½¿ç”¨ â€œmoveToFirst()â€ æ–¹æ³•"></a>å…³äºä¸ºä½•è¦ä½¿ç”¨ â€œmoveToFirst()â€ æ–¹æ³•</h4><p>åˆ©ç”¨åè¯æ³•,<strong>ä¸ä½¿ç”¨â€moveToFirst()â€æ–¹æ³•,</strong>è·å¾—æ¸¸æ ‡å,ç›´æ¥è¾“å‡ºå½“å‰çš„â€positionâ€å€¼</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200729210143.png" alt=""></p><p><strong>â€œpositionâ€çš„å€¼ä¼šç›´æ¥è¾“å‡º â€œ-1â€</strong>,ä¹Ÿå°±æ˜¯è¯´å½“æˆ‘ä»¬ä¸é€‚ç”¨â€moveToFirst()â€æ–¹æ³•æ—¶å®ƒä¼šåœ¨åæ ‡â€positionâ€(0)çš„<strong>ä¸Šè¾¹</strong>ã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬åº”è¯¥ä½¿ç”¨æ–¹æ³•â€moveToFirst()â€ä½¿â€positionâ€ä¸ºâ€0â€ã€‚</p><h4 id="æºç åˆ†æ-ä½¿ç”¨â€moveToNext-â€æ–¹æ³•æ˜¯å¦‚ä½•å¾—çŸ¥éå†å®Œæˆçš„"><a href="#æºç åˆ†æ-ä½¿ç”¨â€moveToNext-â€æ–¹æ³•æ˜¯å¦‚ä½•å¾—çŸ¥éå†å®Œæˆçš„" class="headerlink" title="æºç åˆ†æ ä½¿ç”¨â€moveToNext()â€æ–¹æ³•æ˜¯å¦‚ä½•å¾—çŸ¥éå†å®Œæˆçš„?"></a>æºç åˆ†æ ä½¿ç”¨â€moveToNext()â€æ–¹æ³•æ˜¯å¦‚ä½•å¾—çŸ¥éå†å®Œæˆçš„?</h4><p>å…ˆè¯´æ˜ <strong>è°ƒç”¨â€moveToNext()â€æ–¹æ³•æœ€æ€»ä¼šè°ƒç”¨â€moveToPosition()â€æ–¹æ³•</strong></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200729212802.png" alt=""></p><p>ğŸ‘†ç•Œé¢åœ¨è¢«åˆå§‹åŒ–æ—¶,æŒ‡å½“å‰é¡µé¢çš„å¯¹è±¡ã€‚è¿™æ—¶æº<strong>ç ä¸­çš„â€mPos=-1â€ä¼šè¢«åœ¨ä¸€ä¸ªç©ºå‚æ•°æ„é€ æ–¹æ³•é‡Œåˆå§‹åŒ–</strong>ã€‚</p><p>ä»…ç†è§£çš„è¯: <strong>â€œmoveToFirst()â€è°ƒç”¨çš„æ˜¯â€moveToPostion(0)â€,â€moveToNext()â€ è°ƒç”¨çš„æ˜¯â€moveToNext(mPos+1)â€,æ‰€ä»¥è¯´å½“é¦–æ¬¡è°ƒç”¨çš„ä»–ä»¬ä¸¤ä¸ªçš„ç»“æœæ˜¯ä¸€æ ·çš„ã€‚</strong></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200729215028.png" alt=""></p><p>ps:ä¸ªäººç†è§£:åœ¨ä½¿ç”¨â€cursor.moveToFirst()â€å…ˆè¿›è¡Œåˆ¤æ–­å¯ä»¥æ›´æœ‰æ•ˆçš„é¿å…ç©ºæŒ‡é’ˆå¼‚å¸¸j</p><h2 id="æ›´æ–°æ•°æ®"><a href="#æ›´æ–°æ•°æ®" class="headerlink" title="æ›´æ–°æ•°æ®"></a>æ›´æ–°æ•°æ®</h2><p>éœ€è¦ä¿®æ”¹<strong>æ•°æ®åº“è¿”å›çš„ç±»å‹ä¸ºå¯å†™å…¥ç±»å‹</strong></p><pre><code class="kotlin">        // åˆ›å»ºæ•°æ®åº“        val sqlLiteDatabase: SQLiteDatabase = myHelper.writableDatabase</code></pre><p>éœ€è¦ â€œContentValues()â€ ç±»å‹å­˜æ”¾æ›´æ–°çš„å€¼</p><pre><code>        //æ›´æ–°æ•°æ®        val values: ContentValues = ContentValues()        values.put(&quot;PRICE&quot;, 280)        // å‚æ•°1:è¡¨ç¤ºæ›´æ–°çš„è¡¨.å‚æ•°2:è¡¨ç¤ºæ›´æ–°çš„æ•°æ®.å‚æ•°3:è¡¨ç¤ºæ¡ä»¶(è¡¨ç¤ºé€šè¿‡é‚£ä¸ªæ¡ä»¶æ›´æ–°å€¼) å‚æ•°4:æ¡ä»¶çš„å€¼        sqlLiteDatabase.update(&quot;PRODUCTS&quot;, values, &quot;_id = ?&quot;, arrayOf&lt;String&gt;(&quot;1&quot;))</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200731130854.png" alt=""></p><p>â€œ280â€ä»·æ ¼æ›´æ–°äº†</p><h4 id="å¤šæ¡ä»¶æ›´æ–°"><a href="#å¤šæ¡ä»¶æ›´æ–°" class="headerlink" title="å¤šæ¡ä»¶æ›´æ–°"></a>å¤šæ¡ä»¶æ›´æ–°</h4><p>æ›´æ–°è¡¨ â€œ<strong>PRODUCTS</strong>â€œ çš„å€¼ â€œ<strong>values</strong>â€œ,æ ¹æ® â€œ<strong>NAME</strong>â€œä¸ºâ€<strong>Tom Li</strong>â€œ å’Œâ€<strong>DESCRIPTION</strong>â€œ ä¸º â€œ<strong>Zhou Jam</strong>â€œ çš„è¡Œä¸­çš„æ•°æ®.</p><pre><code>sqlLiteDatabase.update(&quot;PRODUCTS&quot;, values, &quot;NAME = ? AND DESCRIPTION = ?&quot;, arrayOf&lt;String&gt;(&quot;Tom Li&quot;,&quot;Zhou Jam&quot;))</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200731132831.png" alt=""></p><h2 id="åˆ é™¤æ•°æ®"><a href="#åˆ é™¤æ•°æ®" class="headerlink" title="åˆ é™¤æ•°æ®"></a>åˆ é™¤æ•°æ®</h2><p>åœ¨è·å¾—æ•°æ®åº“çš„<strong>å¯å†™å…¥ç±»å‹åã€‚</strong> è°ƒç”¨ â€œdelete()â€æ–¹æ³•ã€‚</p><pre><code>        // æ ¹æ®æ¡ä»¶åˆ é™¤ä¸€è¡Œæ•°æ®        // å‚æ•°1:è¦åˆ é™¤çš„è¡¨åå­—,å‚æ•°2:é€‰æ‹©åˆ é™¤çš„æ¡ä»¶(æ ¹æ®è¿™ä¸ªæ¡ä»¶åˆ é™¤),å‚æ•°3:æ¡ä»¶çš„å€¼        sqlLiteDatabase.delete(&quot;PRODUCTS&quot;, &quot;_id=?&quot;, arrayOf&lt;String&gt;(&quot;1&quot;))</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200731131332.png" alt=""></p><p>åˆ é™¤æˆåŠŸäº†.</p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> SQLite </tag>
            
            <tag> Cursor </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°æ®åº“ç´¢å¼•</title>
      <link href="/2020/07/28/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B4%A2%E5%BC%95/"/>
      <url>/2020/07/28/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B4%A2%E5%BC%95/</url>
      
        <content type="html"><![CDATA[<h2 id="ä»€ä¹ˆæ˜¯æ•°æ®åº“ç´¢å¼•"><a href="#ä»€ä¹ˆæ˜¯æ•°æ®åº“ç´¢å¼•" class="headerlink" title="ä»€ä¹ˆæ˜¯æ•°æ®åº“ç´¢å¼•"></a>ä»€ä¹ˆæ˜¯æ•°æ®åº“ç´¢å¼•</h2><p>MySqlå®˜ç½‘çš„ä»‹ç»,ç´¢å¼•æ˜¯å¸®åŠ©<code>MySQL</code>é«˜æ•ˆè·å¾—æ•°æ®çš„ç»“æ„ã€‚ç±»ä¼¼äºä¹¦æœ¬çš„ç›®å½•,ä»è€Œæé«˜æŸ¥è¯¢é€Ÿåº¦ã€‚</p><p><a href="https://segmentfault.com/a/1190000022341554" target="_blank" rel="noopener">åˆæ¢MySQLç´¢å¼•</a></p>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®åº“ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®åº“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Chocolateyçš„é…ç½®ä¸åº”ç”¨çš„å®‰è£…</title>
      <link href="/2020/07/26/choco%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%BA%94%E7%94%A8%E7%9A%84%E5%AE%89%E8%A3%85/"/>
      <url>/2020/07/26/choco%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%BA%94%E7%94%A8%E7%9A%84%E5%AE%89%E8%A3%85/</url>
      
        <content type="html"><![CDATA[<h2 id="ä½¿ç”¨-Chocolateyå®‰è£…7zip"><a href="#ä½¿ç”¨-Chocolateyå®‰è£…7zip" class="headerlink" title="ä½¿ç”¨ Chocolateyå®‰è£…7zip"></a>ä½¿ç”¨ Chocolateyå®‰è£…7zip</h2><p>å…¨ç¨‹ä½¿ç”¨ç§‘å­¦ä¸Šç½‘</p><pre><code>choco install 7zip</code></pre><h2 id="å¦‚ä½•å®‰è£…Chocolatey"><a href="#å¦‚ä½•å®‰è£…Chocolatey" class="headerlink" title="å¦‚ä½•å®‰è£…Chocolatey"></a>å¦‚ä½•å®‰è£…Chocolatey</h2><p><a href="https://chocolatey.org/install.ps1" target="_blank" rel="noopener">åœ¨æ¡Œé¢ä¸‹è½½</a></p><p>ä½¿ç”¨ç®¡ç†å‘˜æ‰“å¼€cmdè®¿é—®åˆ°ä¸‹è½½çš„ç›®å½•ä¸­</p><p>è¾“å…¥ğŸ‘‡.å®‰è£…çš„åŒæ—¶è¦ä½¿ç”¨ç§‘å­¦ä¸Šç½‘</p><pre><code>@powershell -NoProfile -ExecutionPolicy Bypass -Command &quot;iex ((New-Object System.Net.WebClient).DownloadString(&#39;install.ps1&#39;))&quot; &amp;&amp; SET &quot;PATH=%PATH%;%ALLUSERSPROFILE%\chocolatey\bin&quot;</code></pre><p>æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸï¼š</p><p>choco</p><p><img src="1595823753408.png" alt=""></p><h2 id="ä»€ä¹ˆæ˜¯Chocolatey"><a href="#ä»€ä¹ˆæ˜¯Chocolatey" class="headerlink" title="ä»€ä¹ˆæ˜¯Chocolatey"></a>ä»€ä¹ˆæ˜¯Chocolatey</h2><p>Chocolateyæ˜¯ä¸€ä¸ªWindowsä¸‹çš„è½¯ä»¶åŒ…ç®¡ç†å™¨ï¼Œä½ å¯ä»¥åƒåœ¨ç±»Unixç³»ç»Ÿä¸­ä½¿ç”¨Yumå’ŒAPTä¸€æ ·ä½¿ç”¨å®ƒï¼Œåœ¨Windowsä¸­å®ç°è‡ªåŠ¨åŒ–è½»æ¾ç®¡ç†Windowsè½¯ä»¶çš„æ‰€æœ‰æ–¹é¢ã€‚</p><p> <a href="https://zh.wikipedia.org/zh-cn/Chocolatey" target="_blank" rel="noopener">ç»´åŸºç™¾ç§‘</a></p><h2 id="æ›´å¤š"><a href="#æ›´å¤š" class="headerlink" title="æ›´å¤š"></a>æ›´å¤š</h2>]]></content>
      
      
      <categories>
          
          <category> Chocolatey </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Chocolatey </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>kotlin</title>
      <link href="/2020/07/26/kotlin-in-Action-Kotlin%E5%AE%9E%E6%88%98/"/>
      <url>/2020/07/26/kotlin-in-Action-Kotlin%E5%AE%9E%E6%88%98/</url>
      
        <content type="html"><![CDATA[<h1 id="2-Kotlin-åŸºç¡€"><a href="#2-Kotlin-åŸºç¡€" class="headerlink" title="2 Kotlin åŸºç¡€"></a>2 Kotlin åŸºç¡€</h1><h2 id="2-1-åŸºæœ¬è¦ç´ -å‡½æ•°å˜é‡"><a href="#2-1-åŸºæœ¬è¦ç´ -å‡½æ•°å˜é‡" class="headerlink" title="2.1 åŸºæœ¬è¦ç´ : å‡½æ•°å˜é‡"></a>2.1 åŸºæœ¬è¦ç´ : å‡½æ•°å˜é‡</h2><h3 id="2-1-3-å˜é‡"><a href="#2-1-3-å˜é‡" class="headerlink" title="2.1.3 å˜é‡"></a>2.1.3 å˜é‡</h3><p><strong>å¯å˜å˜é‡å’Œä¸å¯å˜å˜é‡</strong></p><ul><li>valâ€“ä¸å¯å˜å¼•ç”¨ã€‚ä½¿ç”¨valå£°æ˜çš„å˜é‡ä¸èƒ½åœ¨åˆå§‹åŒ–ä¹‹åå†æ¬¡èµ‹å€¼ã€‚å®ƒå¯¹åº”çš„æ˜¯javaä¸­çš„finalå˜é‡</li><li>varâ€“å¯å˜å¼•ç”¨ã€‚è¿™ç§å˜é‡çš„å€¼å¯ä»¥è¢«æ”¹å˜ã€‚è¿™ç§å£°æ˜å¯¹åº”çš„æ˜¯æ™®é€š(éfinal)å˜é‡</li></ul><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/1595899792330.png" alt=""></p><p>ğŸ‘†åœ¨å®šä¹‰äº†valå˜é‡çš„ä»£ç å—æœŸé—´,<strong>valå˜é‡åªèƒ½è¿›è¡Œå”¯ä¸€ä¸€æ¬¡åˆå§‹åŒ–</strong>ã€‚ä½†æ˜¯,å¦‚æœç¼–è¯‘å™¨èƒ½ç¡®ä¿åªæœ‰å”¯ä¸€ä¸€æ¬¡åˆå§‹åŒ–è¯­å¥ä¼šè¢«æ‰§è¡Œ,å¯ä»¥æ ¹æ®æ¡ä»¶ä½¿ç”¨ä¸åŒçš„å€¼æ¥åˆå§‹åŒ–å®ƒã€‚</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/1595899976491.png" alt=""></p><p>è‡ªèº«ä¸å¯å˜(åªå¯ä»¥æ‰§è¡Œä¸€æ¬¡,åˆå§‹åŒ–ä¸€æ¬¡)</p><p>æ³¨æ„,å°½ç®¡valå¼•ç”¨è‡ªèº«æ˜¯ä¸å¯å˜çš„,ä½†æ˜¯å®ƒæŒ‡å‘çš„å¯¹è±¡<strong>`å¯èƒ½</strong>`æ˜¯å¯å˜çš„ã€‚åˆ—å¦‚</p><pre><code class="kotlin">val languages = arrayListOf(&quot;Java&quot;)lenguages.add(&quot;Kotlin&quot;)</code></pre><h2 id="2-3-è¡¨ç¤ºå’Œå¤„ç†é€‰æ‹©ï¼šæšä¸¾å’Œâ€œwhenâ€"><a href="#2-3-è¡¨ç¤ºå’Œå¤„ç†é€‰æ‹©ï¼šæšä¸¾å’Œâ€œwhenâ€" class="headerlink" title="2.3 è¡¨ç¤ºå’Œå¤„ç†é€‰æ‹©ï¼šæšä¸¾å’Œâ€œwhenâ€"></a>2.3 è¡¨ç¤ºå’Œå¤„ç†é€‰æ‹©ï¼šæšä¸¾å’Œâ€œwhenâ€</h2><h3 id="2-3-1-å£°æ˜æšä¸¾ç±»"><a href="#2-3-1-å£°æ˜æšä¸¾ç±»" class="headerlink" title="2.3.1 å£°æ˜æšä¸¾ç±»"></a>2.3.1 å£°æ˜æšä¸¾ç±»</h3><p><strong>ä»€ä¹ˆæ˜¯æšä¸¾</strong></p><p>ä¸ºäº†è®©ç¼–è¯‘å™¨èƒ½å¤Ÿè‡ªåŠ¨æ£€æŸ¥æŸä¸ªå€¼åœ¨æšä¸¾çš„é›†åˆä¸­ï¼Œå¹¶ä¸”ï¼Œä¸åŒç”¨é€”çš„æšä¸¾éœ€è¦ä¸åŒçš„ç±»å‹æ¥æ ‡è®°ï¼Œä¸èƒ½æ··ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <strong>enum</strong> æ¥å®šä¹‰æšä¸¾ç±»ã€‚</p><pre><code class="kotlin">enum class Color{    RED,ORANGE,YELLOW,GREEN,BLUE,INDIGO,VIOLET}</code></pre><p>kotlin ä¸­ enum æ˜¯ä¸€ä¸ªæ‰€è°“çš„è½¯å…³é”®è¯ï¼šåªæœ‰å½“å®ƒå‡ºç°åœ¨classå‰é¢æ—¶æ‰ä¼šæœ‰ç‰¹æ®Šçš„æ„ä¹‰ï¼Œåœ¨å…¶ä»–åœ°æ–¹å¯ä»¥æŠŠå®ƒå½“ä½œæ™®é€šçš„åç§°ä½¿ç”¨ã€‚</p><h3 id="2-3-5-æ™ºèƒ½è½¬æ¢ï¼šåˆå¹¶ç±»å‹æ£€æŸ¥å’Œè½¬æ¢"><a href="#2-3-5-æ™ºèƒ½è½¬æ¢ï¼šåˆå¹¶ç±»å‹æ£€æŸ¥å’Œè½¬æ¢" class="headerlink" title="2.3.5 æ™ºèƒ½è½¬æ¢ï¼šåˆå¹¶ç±»å‹æ£€æŸ¥å’Œè½¬æ¢"></a>2.3.5 æ™ºèƒ½è½¬æ¢ï¼šåˆå¹¶ç±»å‹æ£€æŸ¥å’Œè½¬æ¢</h3><p><strong>kotlinæ™ºèƒ½è½¬æ¢çš„æ¡ˆä¾‹</strong> </p><p><strong>è¡¨è¾¾å¼ç±»å‹å±‚æ¬¡</strong></p><pre><code class="kotlin">interface Exprclass Num(val value: Int) : Expr    // ç®€å•çš„å€¼å¯¹è±¡ç±»ï¼Œåªæœ‰ä¸€ä¸ªå±æ€§valueï¼Œå®ç°äº†Expræ¥å£class Sum(val left: Expr, val right: Expr) : Expr   // Sumè¿ç®—çš„å®å‚å¯ä»¥æ˜¯ä»»ä½•Expr:Num æˆ–è€… Sum</code></pre><p><strong>å¯¹è¡¨è¾¾å¼æ±‚å€¼</strong></p><pre><code class="kotlin">fun eval(e: Expr): Int {    if (e is Num) {//        val n = e.value as Num //æ˜¾ç¤ºçš„è½¬æ¢ä¸ºNumç±»å‹å¤šä½™çš„        return e.value    }    if (e is Sum) {        return eval(e.left) + eval(e.right) // å˜é‡ e è¢«æ™ºèƒ½çš„è½¬æ¢äº†ç±»å‹    }    throw IllegalArgumentException(&quot;test&quot;)}</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200831171911.png" alt=""></p><p>ç»“æœ</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200831171248.png" alt=""></p><p><strong>â€œisâ€ ä¿®é¥°ç¬¦</strong></p><p>åœ¨ kotlin ä¸­ï¼Œä½ è¦ä½¿ç”¨ is æ£€æŸ¥æ¥åˆ¤æ–­ä¸€ä¸ªå˜é‡æ˜¯å¦æ˜¯æŸä¸ªç±»å‹ã€‚</p><p><strong>ä»€ä¹ˆæ—¶å€™è¿›è¡Œæ™ºèƒ½è½¬æ¢ï¼Ÿ</strong></p><p>å¦‚æœä½ æ£€æŸ¥è¿‡ä¸€ä¸ªå˜é‡æ˜¯æŸç§ç±»å‹ï¼Œåé¢å°±ä¸å†éœ€è¦è½¬æ¢å®ƒäº†ï¼Œå¯ä»¥å°±æŠŠå®ƒå½“ä½œä½ æ£€æŸ¥è¿‡çš„ç±»å‹ä½¿ç”¨ã€‚äº‹å®ä¸Šç¼–è¯‘å™¨ä¸ºä½ æ‰§è¡Œäº†ç±»å‹è½¬æ¢ï¼Œæˆ‘ä»¬æŠŠè¿™ç§è¡Œä¸ºç§°ä¸º <strong>æ™ºèƒ½è½¬æ¢ã€‚</strong></p><h1 id="3-å‡½æ•°çš„è®¢é˜…å’Œè°ƒç”¨"><a href="#3-å‡½æ•°çš„è®¢é˜…å’Œè°ƒç”¨" class="headerlink" title="3 å‡½æ•°çš„è®¢é˜…å’Œè°ƒç”¨"></a>3 å‡½æ•°çš„è®¢é˜…å’Œè°ƒç”¨</h1><h2 id="3-3-ç»™åˆ«äººçš„ç±»æ·»åŠ æ–¹æ³•ï¼šæ‰©å±•å‡½æ•°å’Œå±æ€§"><a href="#3-3-ç»™åˆ«äººçš„ç±»æ·»åŠ æ–¹æ³•ï¼šæ‰©å±•å‡½æ•°å’Œå±æ€§" class="headerlink" title="3.3 ç»™åˆ«äººçš„ç±»æ·»åŠ æ–¹æ³•ï¼šæ‰©å±•å‡½æ•°å’Œå±æ€§"></a>3.3 ç»™åˆ«äººçš„ç±»æ·»åŠ æ–¹æ³•ï¼šæ‰©å±•å‡½æ•°å’Œå±æ€§</h2><p><strong>ä»‹ç»</strong></p><blockquote><p>æ‰©å±•å‡½æ•°éå¸¸ç®€å•ï¼Œä½œä¸ºä¸€ä¸ªç±»çš„æˆå‘˜å‡½æ•°ï¼Œä¸è¿‡å®ƒå®šä¹‰åœ¨ç±»çš„å¤–è¾¹ã€‚</p></blockquote><h1 id="4-ç±»ã€å¯¹è±¡å’Œæ¥å£"><a href="#4-ç±»ã€å¯¹è±¡å’Œæ¥å£" class="headerlink" title="4 ç±»ã€å¯¹è±¡å’Œæ¥å£"></a>4 ç±»ã€å¯¹è±¡å’Œæ¥å£</h1><h2 id="4-1-å®šä¹‰ç±»ç»§æ‰¿ç»“æ„"><a href="#4-1-å®šä¹‰ç±»ç»§æ‰¿ç»“æ„" class="headerlink" title="4.1 å®šä¹‰ç±»ç»§æ‰¿ç»“æ„"></a>4.1 å®šä¹‰ç±»ç»§æ‰¿ç»“æ„</h2><h3 id="4-1-1-Kotlin-ä¸­çš„æ¥å£"><a href="#4-1-1-Kotlin-ä¸­çš„æ¥å£" class="headerlink" title="4.1.1 Kotlin ä¸­çš„æ¥å£"></a>4.1.1 Kotlin ä¸­çš„æ¥å£</h3><p><strong>å£°æ˜æ¥å£</strong></p><pre><code class="kotlin">interface Clickable{    fun click()}</code></pre><p><strong>å®ç°æ¥å£</strong></p><pre><code>class Button : Clickble {    override fun click() {        println(&quot;I was clicked&quot;)    }}</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200826205307.png" alt=""></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200826205356.png" alt=""></p><p><strong>Kotlinå®ç°æ¥å£ä¸ Java æœ‰é‚£äº›ä¸åŒ</strong></p><p>Kotlin åœ¨ç±»åé¢ä½¿ç”¨å†’å·æ¥ä»£æ›¿ <strong>Java</strong> ä¸­çš„ extends å’Œ implements å…³é”®è¯ã€‚ å’Œ Java ä¸€æ ·ï¼Œ<strong>ä¸€ä¸ªç±»å¯ä»¥å®ç°ä»»æ„å¤šä¸ªæ¥å£</strong>ï¼Œä½†<strong>åªèƒ½ç»§æ‰¿ä¸€ä¸ªç±»å‹</strong>ã€‚</p><p><strong>override ä¿®é¥°ç¬¦çš„ä½œç”¨</strong></p><ul><li>ç›¸åŒ</li></ul><p>ä¸ Java ä¸­çš„ @Override æ³¨è§£ç±»ä¼¼ï¼Œ<strong>override ä¿®é¥°ç¬¦ç”¨æ¥æ ‡æ³¨è¢«é‡å†™çš„çˆ¶ç±»æˆ–è€…æ¥å£çš„æ–¹æ³•å’Œå±æ€§</strong>ã€‚</p><ul><li>ä¸åŒ</li></ul><p>åœ¨ Kotlin ä¸­ä½¿ç”¨ override ä¿®é¥°ç¬¦æ˜¯å¼ºåˆ¶è¦æ±‚çš„ã€‚<strong>è¿™ä¼šé¿å…å…ˆå†™å‡ºå®ç°æ–¹æ³•å†æ·»åŠ æŠ½è±¡æ–¹æ³•é€ æˆçš„æ„å¤–é‡å†™ï¼š</strong>ä½ çš„ä»£ç å°†ä¸èƒ½ç¼–è¯‘ï¼Œé™¤éä½ æ˜¾å¼åœ°å°†è¿™ä¸ªæ–¹æ³•æ ‡æ³¨ä¸º Override æˆ–è€…é‡å‘½åå®ƒã€‚</p><p><strong>å¦‚ä½•ç»™æ¥å£æ·»åŠ ä¸€ä¸ªé»˜è®¤å®ç°çš„æ–¹æ³•</strong></p><p>æ¥å£çš„æ–¹æ³•å¯ä»¥æœ‰ä¸€ä¸ªé»˜è®¤å®ç°çš„æ–¹æ³•ã€‚</p><pre><code class="kotlin">interface Clickable{    fun click() // æ™®é€šçš„æ–¹æ³•å£°æ˜    fun showOff() = println(&quot;I&#39;m clickable!&quot;) // å¸¦é»˜è®¤å®ç°çš„æ–¹æ³•}</code></pre><p><strong>å®ç°ä¸€ä¸ªå¸¦æœ‰é»˜è®¤å®ç°çš„æ–¹æ³•çš„æ¥å£è¦æ³¨æ„ä»€ä¹ˆ</strong></p><p>å¦‚æœä½ å®ç°äº†è¿™ä¸ªæ¥å£ï¼Œä½ éœ€è¦ä¸º click æä¾›ä¸€ä¸ªå®ç°ã€‚å¯ä»¥é‡æ–°å®šä¹‰ showOff() æ–¹æ³•çš„è¡Œä¸ºï¼Œæˆ–è€…å¦‚æœä½ å¯¹é»˜è®¤è¡Œä¸ºæ„Ÿåˆ°æ»¡æ„ä¹Ÿå¯ä»¥ç›´æ¥çœç•¥å®ƒã€‚ï¼ˆé»˜è®¤å®ç°çš„æ–¹æ³•ä¹Ÿå¯ä»¥è¢«é‡å†™ï¼‰</p><p><strong>å®šä¹‰å®ç°äº†åŒæ ·æ–¹æ³•çš„æ¥å£</strong></p><pre><code class="kotlin">interface Focusable {    fun setFocus(b: Boolean) = println(&quot;I ${if (b) &quot;got&quot; else &quot;lost&quot;} focus.&quot;)    fun showOff() = println(&quot;I&#39;m focusable!&quot;)}</code></pre><p><strong>åœ¨ç±»ä¸­å®ç°ä¸¤ä¸ªæœ‰ç›¸åŒé»˜è®¤å®ç°æ–¹æ³•çš„æ¥å£ä¼šå‘ç”Ÿä»€ä¹ˆ</strong></p><p>åœ¨è¿™ä¸¤ä¸ªæ¥å£ä¸­éƒ½å¸¦æœ‰é»˜è®¤å®ç°çš„ showOff() æ–¹æ³•ï¼šåœ¨æ²¡æœ‰æ˜¾ç¤ºçš„å®ç° showOff() ,ä¼šå¾—åˆ°ç¼–è¯‘é”™è¯¯ä¿¡æ¯ã€‚</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200827000446.png" alt=""></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200827000526.png" alt=""></p><p><strong>è§£å†³åŠæ³•</strong></p><p>å¿…é¡»æ˜¾å¼çš„å®ç°ç›¸åŒæ–¹æ³•ã€‚</p><p><strong>è°ƒç”¨ç»§æ‰¿(æ¥å£)çš„é»˜è®¤å®ç°æ–¹æ³•</strong></p><pre><code class="kotlin">class Button : Clickable, Focusable {    override fun click() {        TODO(&quot;Not yet implemented&quot;)    }    //å¦‚æœåŒæ ·çš„ç»§æ‰¿æˆå‘˜ä¸æ­¢ä¸€ä¸ªå®ç°ï¼Œå¿…é¡»æä¾›ä¸€ä¸ªæ˜¾ç¤ºçš„å®ç°ã€‚    override fun showOff() {        // ä½¿ç”¨å°–æ‹¬å·åŠ ä¸Šçˆ¶ç±»åå­—çš„â€œsuperâ€è¡¨æ˜äº†ä½ æƒ³è¦è°ƒç”¨å“ªä¸€ä¸ªçˆ¶ç±»çš„æ–¹æ³•        super&lt;Clickable&gt;.showOff()        super&lt;Focusable&gt;.showOff()    }}</code></pre><p>é€šè¿‡è°ƒç”¨ç»§æ‰¿çš„ä¸¤ä¸ªçˆ¶ç±»å‹ä¸­çš„å®ç°æ¥å®ç° showOff() ã€‚</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200827005257.png" alt=""></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200827005432.png" alt=""></p><h3 id="4-1-2-openã€final-å’Œ-abstract-ä¿®é¥°ç¬¦ï¼šé»˜è®¤ä¸º-final"><a href="#4-1-2-openã€final-å’Œ-abstract-ä¿®é¥°ç¬¦ï¼šé»˜è®¤ä¸º-final" class="headerlink" title="4.1.2 openã€final å’Œ abstract ä¿®é¥°ç¬¦ï¼šé»˜è®¤ä¸º final"></a>4.1.2 openã€final å’Œ abstract ä¿®é¥°ç¬¦ï¼šé»˜è®¤ä¸º final</h3><p><strong>kotlin ä¸­å¦‚ä½•ç»§æ‰¿ä¸€ä¸ªç±»</strong></p><p>å¦‚æœä½ æƒ³è¦åˆ›å»ºä¸€ä¸ªç±»çš„å­ç±»ï¼Œéœ€è¦ä½¿ç”¨ open ä¿®é¥°ç¬¦æ¥æ ‡ç¤ºè¿™ä¸ªç±»ã€‚æ­¤å¤–<strong>éœ€è¦ç»™æ¯ä¸ªå¯ä»¥è¢«é‡å†™çš„å±æ€§æˆ–è€…æ–¹æ³•æ·»åŠ  open å±æ€§</strong>ã€‚</p><p><strong>å£°æ˜ä¸€ä¸ªå¸¦open æ–¹æ³•çš„ open ç±»</strong></p><pre><code class="kotlin">open class RichButton : Clickable {    fun disable() {}    // è¿™ä¸ªå‡½æ•°æ˜¯ final çš„ï¼š ä¸èƒ½åœ¨å­ç±»ä¸­é‡å†™å®ƒã€‚    open fun animate() {} // è¿™ä¸ªå‡½æ•°æ˜¯ open çš„ï¼š å¯ä»¥åœ¨å­ç±»ä¸­é‡å†™å®ƒ    // è¿™ä¸ªå‡½æ•°é‡å†™äº† open å‡½æ•°å¹¶ä¸”å®ƒæœ¬èº«åŒæ ·æ˜¯ open çš„    override fun click() {        TODO(&quot;Not yet implemented&quot;)    }}</code></pre><p><strong>é»˜è®¤ final çš„å¥½å¤„</strong></p><p>ç±»é»˜è®¤ final å¸¦æ¥äº†ä¸€ä¸ªé‡è¦çš„å¥½å¤„å°±æ˜¯è¿™ä½¿å¾—åœ¨å¤§é‡çš„åœºæ™¯ä¸­çš„åªèƒ½è½¬æ¢æˆä¸ºå¯èƒ½ã€‚</p><p><strong>æ™ºèƒ½è½¬æ¢çš„å‰æ</strong></p><p><strong>æ™ºèƒ½è½¬æ¢åªèƒ½åœ¨è¿›è¡Œç±»å‹æ£€æŸ¥åæ²¡æœ‰æ”¹å˜è¿‡çš„å˜é‡ä¸Šèµ·çš„ä½œç”¨ã€‚</strong>å¯¹äºä¸€ä¸ªç±»æ¥è¯´ï¼Œè¿™æ„å‘³ç€<strong>æ™ºèƒ½è½¬æ¢åœ¨valç±»å‹å¹¶ä¸”æ²¡æœ‰è‡ªå®šä¹‰è®¿é—®å™¨çš„ç±»å±æ€§ä¸Šä½¿ç”¨</strong>ã€‚ è¿™ä¸ªå‰ææ„å‘³ç€å±æ€§å¿…é¡»æ˜¯ final çš„ï¼Œå¦åˆ™å¦‚æœä¸€ä¸ªå­ç±»å¯ä»¥é‡å†™å±æ€§å¹¶ä¸”å®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰çš„è®¿é—®å™¨å°†ä¼šæ‰“ç ´æ™ºèƒ½è½¬æ¢çš„å…³é”®å‰æã€‚</p><p><strong>æŠ½è±¡ç±»çš„é»˜è®¤ä¿®é¥°ç¬¦</strong></p><p>æŠ½è±¡æˆå‘˜å§‹ç»ˆæ˜¯opençš„ï¼Œæ‰€ä»¥ä¸éœ€è¦æ˜¾å¼åœ°ä½¿ç”¨openä¿®é¥°ç¬¦ã€‚</p><p><strong>å£°æ˜ä¸€ä¸ªæŠ½è±¡ç±»</strong></p><pre><code class="kotlin">abstract class Animated {    abstract fun animate()  // è¿™ä¸ªå‡½æ•°æ˜¯æŠ½è±¡çš„ï¼šå®ƒæ²¡æœ‰å®ç°å¿…é¡»è¢«å­ç±»é‡å†™    // æŠ½è±¡ç±»ä¸­çš„éæŠ½è±¡å‡½æ•° å¹¶ä¸æ˜¯é»˜è®¤ open çš„ï¼Œä½†æ˜¯å¯ä»¥æ ‡æ³¨ä¸º opençš„    open fun stopAnimating() {    }    fun animateTwice() {}}</code></pre><h3 id="4-1-4-å†…éƒ¨ç±»å’ŒåµŒå¥—ç±»ï¼šé»˜è®¤åµŒå¥—ç±»"><a href="#4-1-4-å†…éƒ¨ç±»å’ŒåµŒå¥—ç±»ï¼šé»˜è®¤åµŒå¥—ç±»" class="headerlink" title="4.1.4 å†…éƒ¨ç±»å’ŒåµŒå¥—ç±»ï¼šé»˜è®¤åµŒå¥—ç±»"></a>4.1.4 å†…éƒ¨ç±»å’ŒåµŒå¥—ç±»ï¼šé»˜è®¤åµŒå¥—ç±»</h3><p>å†…éƒ¨ç±»ï¼šéé™æ€åµŒå¥—ç±»ï¼Œä¹Ÿè¢«æˆä¸ºå†…éƒ¨ç±»ã€‚</p><p>åµŒå¥—ç±»ï¼šé™æ€åµŒå¥—ç±»ï¼ŒåµŒå¥—ç±»å¤šç§°ä¸ºï¼šé™æ€åµŒå¥—ç±»ã€‚</p><p><strong>Kotlinä¸­åµŒå¥—ç±»å’ŒJavaä¸­çš„ä¸åŒ</strong></p><p>åœ¨Kotlinä¸­çš„åµŒå¥—ç±»ä¸èƒ½è®¿é—®å¤–éƒ¨ç±»çš„å®ä¾‹ï¼Œé™¤éä½ ç‰¹åˆ«çš„åšå‡ºè¦æ±‚ã€‚ </p><p><strong>åœ¨åºåˆ—åŒ–æ—¶ä½¿ç”¨å†…éƒ¨ç±»</strong></p><p>åœ¨ä½ å®šä¹‰ä¸€ä¸ª View å…ƒç´ ï¼Œå®ƒçš„çŠ¶æ€æ—¶å¯åºåˆ—åŒ–çš„ã€‚<strong>æƒ³è¦åºåˆ—åŒ–ä¸€ä¸ªè§†å›¾å¯èƒ½å¹¶ä¸å®¹æ˜“ï¼Œä½†æ˜¯å¯ä»¥æŠŠæ‰€æœ‰éœ€è¦çš„æ•°æ®å¤åˆ¶åˆ°å¦ä¸€ä¸ªè¾…åŠ©ç±»ä¸­å»ã€‚</strong></p><pre><code class="kotlin">interface State : Serializableinterface View {    fun getCurrentState(): State    fun restoreState(state: State) {}}</code></pre><p>å£°æ˜Stateæ¥å£å»å®ç°Serializableã€‚Viewæ¥å£å£°æ˜äº†å¯ä»¥ç”¨æ¥ä¿å­˜è§†å›¾çŠ¶æ€çš„getCurrentStateå’ŒrestoreStateæ–¹æ³•ã€‚</p><p><strong>ç”¨å†…éƒ¨ç±»çš„javaä»£ç æ¥å®ç°View</strong></p><pre><code class="java">public class Button implements View{    @Override    public State getCurrentState(){        return new ButtonState();    }    @Override    public voiew restoreState(State state){        /**/    }    public class ButtonState implements State{        /**/    }}</code></pre><p>é—®é¢˜ï¼šåœ¨è¿è¡Œæ—¶ä½ ä¼šå¾—åˆ° java.io.NotSerializable.Exception:Button å¼‚å¸¸ï¼Œåœ¨ä½ åºåˆ—åŒ–å£°æ˜çš„æŒ‰é’®çŠ¶æ€æ—¶ã€‚è¿™ä¸ªå¯èƒ½çœ‹èµ·æ¥ä¼šå¾ˆå¥‡æ€ªï¼šä½ åºåˆ—åŒ–çš„å˜é‡æ˜¯ButtonStateç±»å‹ï¼Œä¸ºä»€ä¹ˆä¼šæœ‰Buttonå¼‚å¸¸å‘¢ï¼Ÿ</p><p><strong>æ— æ³•åºåˆ—åŒ–çš„åŸå› </strong></p><p>åœ¨javaä¸­ï¼Œå½“ä½ åœ¨å¦ä¸€ä¸ªç±»ä¸­å£°æ˜ä¸€ä¸ªç±»æ—¶ï¼Œå®ƒä¼šé»˜è®¤å˜æˆå†…éƒ¨ç±»ã€‚æ¡ˆä¾‹ä¸­ï¼šButtonStateç±»éšç¤ºçš„å­˜å‚¨äº†å®ƒçš„å¤–éƒ¨Buttonç±»çš„åº”ç”¨ã€‚ä»è€Œè§£é‡Šäº†ä¸ºä»€ä¹ˆButtonStateä¸èƒ½è¢«åºåˆ—åŒ–ã€‚</p><p><strong>ä¿®å¤æ— æ³•åºåˆ—åŒ–</strong></p><p><strong>éœ€è¦å£°æ˜ButtonStateç±»æ˜¯staticçš„</strong>ã€‚å°†åµŒå¥—ç±»å£°æ˜ä¸ºstaticä¼šå†²è¿™ä¸ªç±»ä¸­åˆ é™¤åŒ…å›´å®ƒçš„ç±»çš„éšå¼å¼•ç”¨ã€‚</p><p><strong>åœ¨kotlinä¸­ä½¿ç”¨åµŒå¥—ç±»æ¥å®ç° View</strong></p><pre><code class="kotlin">class Button : View {    override fun getCurrentState(): State {        TODO(&quot;Not yet implemented&quot;)    }    override fun restoreState(state: State) {        TODO(&quot;Not yet implemented&quot;)    }    // è¿™ä¸ªç±»ä¸Javaä¸­çš„é™æ€æ½œé€ƒç±»ç±»ä¼¼    class ButtonState : State {    }}</code></pre><p><strong>kotlinä¸­é»˜è®¤è¡Œä¸ºæ˜¯åµŒå¥—ç±»ã€‚</strong></p><p><strong>å¦‚ä½•è®©é»˜è®¤åµŒå¥—ç±»çš„ç±»å‹å˜ä¸ºå†…éƒ¨ç±»ï¼</strong></p><p>è¦æŠŠå®ƒï¼ˆåµŒå¥—ç±»ï¼‰å˜æˆä¸ºä¸€ä¸ªå†…éƒ¨ç±»æ¥æŒæœ‰ä¸€ä¸ªå¤–éƒ¨ç±»çš„å¼•ç”¨çš„è¯éœ€è¦ä½¿ç”¨ <strong>inner</strong> ä¿®é¥°ç¬¦ã€‚</p><p><strong>kotlinä¸­å†…éƒ¨ç±»è®¿é—®å¤–éƒ¨ç±»</strong></p><p>åœ¨kotlinä¸­å¼•ç”¨å¤–éƒ¨ç±»å®ä¾‹çš„è¯­æ³•ä¸javaä¸åŒã€‚éœ€è¦ä½¿ç”¨this@Outerä»Innerç±»å»è®¿é—®Outerç±»ã€‚</p><h3 id="4-1-5-å¯†å°ç±»ï¼šå®šä¹‰å—é™çš„ç±»ç»§æ‰¿ç»“æ„"><a href="#4-1-5-å¯†å°ç±»ï¼šå®šä¹‰å—é™çš„ç±»ç»§æ‰¿ç»“æ„" class="headerlink" title="4.1.5 å¯†å°ç±»ï¼šå®šä¹‰å—é™çš„ç±»ç»§æ‰¿ç»“æ„"></a>4.1.5 å¯†å°ç±»ï¼šå®šä¹‰å—é™çš„ç±»ç»§æ‰¿ç»“æ„</h3><p><strong>ä»€ä¹ˆæ˜¯å¯†å°ç±»â€sealedâ€œ</strong></p><p>sealed ç±»ã€‚ä¸ºçˆ¶ç±»æ·»åŠ äº†ä¸€ä¸ªæ–°çš„ sealed ä¿®é¥°ç¬¦ï¼Œå¯å¯¹åˆ›å»ºçš„å­ç±»åšå‡ºä¸¥æ ¼çš„é™åˆ¶ã€‚<strong>æ‰€æœ‰çš„å­ç±»å¿…é¡»åµŒå¥—åœ¨çˆ¶ç±»ä¸­ã€‚</strong></p><p><strong>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å¯†å°ç±»ï¼ˆå®šä¹‰å—é™çš„ç±»ç»§æ‰¿ç»“æ„ï¼‰</strong></p><p><strong>ä½œä¸ºæ¥å£å®ç°çš„è¡¨è¾¾å¼ ğŸ‘‡</strong></p><pre><code class="kotlin">interface Exprclass Num(val value: Int) : Exprclass Sum(val left: Expr, val right: Expr):Exprfun eval(e: Expr): Int =    when (e) {        is Num -&gt; e.value        is Sum -&gt; eval(e.left) + eval(e.right)        else -&gt; // å¿…é¡»æ£€æŸ¥ else åˆ†æ”¯            throw  IllegalArgumentException(&quot;Unknown expression!&quot;)    }</code></pre><p><strong>å½“ä½¿ç”¨ when ç»“æ„æ¥æ‰§è¡Œè¡¨è¾¾å¼çš„æ—¶å€™ï¼ŒKotlin ç¼–è¯‘å™¨ä¼šå¼ºåˆ¶æ£€æŸ¥é»˜è®¤é€‰é¡¹</strong>ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<strong>ä¸èƒ½è¿”å›ä¸€ä¸ªæœ‰æ„ä¹‰çš„å€¼ï¼Œæ‰€ä»¥ç›´æ¥è¿”å›å¼‚å¸¸çŠ¶æ€ã€‚</strong></p><p>æ›´é‡è¦çš„æ˜¯ï¼Œå¦‚æœä½ æ·»åŠ äº†ä¸€ä¸ªæ–°çš„å­ç±»ï¼Œç¼–è¯‘å™¨å¹¶ä¸èƒ½å‘ç°ä½ ä¿®æ”¹äº†ã€‚<strong>å¦‚æœä½ å¿˜è®°æ·»åŠ ä¸€ä¸ªæ–°çš„åˆ†æ”¯ï¼Œå°±ä¼šé€‰æ‹©é»˜è®¤é€‰é¡¹ï¼Œè¿™åˆå¯èƒ½å¯¼è‡´æ½œåœ¨çš„ bugã€‚</strong></p><p><strong>å¦‚ä½•ä½¿ç”¨å¯†å°ç±» â€œsealedâ€</strong></p><pre><code class="kotlin">sealed class Expr { //å°†åŸºç±»æ ‡è®°ä¸ºå°é—­çš„    class Num(val value: Int) : Expr()    class Sum(val left: Expr, val right: Expr) : Expr() // å°†æ‰€æœ‰å¯èƒ½çš„ç±»ä½œä¸ºåµŒå¥—ç±»åˆ—å‡º}fun eval(expr: Expr): Int =    // â€œwhenâ€è¡¨è¾¾å¼è¦†ç›–äº†æ‰€æœ‰çš„å¯èƒ½æƒ…å†µï¼Œæ‰€ä»¥ä¸å†éœ€è¦ else åˆ†æ”¯    when (expr) {        is Expr.Num -&gt; expr.value        is Expr.Sum -&gt; eval(expr.left) + eval(expr.right)    }</code></pre><p><strong>å¦‚æœä½ åœ¨ when è¡¨è¾¾å¼ä¸­å¤„ç†äº†æ‰€æœ‰çš„ sealed ç±»çš„å­ç±»ï¼Œä½ å°±ä¸å†éœ€è¦æä¾›é»˜è®¤åˆ†æ”¯ã€‚</strong>æ³¨æ„ï¼Œsealed ä¿®é¥°ç¬¦éšå«çš„è¿™ä¸ªç±»æ˜¯ä¸€ä¸ª open ç±»ï¼Œä½ ä¸å†éœ€è¦æ˜¾å¼åœ°æ·»åŠ  open ä¿®é¥°ç¬¦ã€‚</p><h2 id="4-2-å£°æ˜ä¸€ä¸ªå¸¦é»˜è®¤æ„é€ æ–¹æ³•æˆ–å±æ€§çš„ç±»"><a href="#4-2-å£°æ˜ä¸€ä¸ªå¸¦é»˜è®¤æ„é€ æ–¹æ³•æˆ–å±æ€§çš„ç±»" class="headerlink" title="4.2 å£°æ˜ä¸€ä¸ªå¸¦é»˜è®¤æ„é€ æ–¹æ³•æˆ–å±æ€§çš„ç±»"></a>4.2 å£°æ˜ä¸€ä¸ªå¸¦é»˜è®¤æ„é€ æ–¹æ³•æˆ–å±æ€§çš„ç±»</h2><p><strong>kotlinä¸­æ„é€ æ–¹æ³•å’Œjavaä¸­æœ‰é‚£äº›ä¸åŒ</strong></p><p>ä¸javaä¸­ä¸€ä¸ªç±»å¯ä»¥å£°æ˜ä¸€ä¸ªæˆ–å¤šä¸ªæ„é€ æ–¹æ³•ã€‚kotlinä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼Œåªæ˜¯åšå‡ºäº†ä¸€äº›ä¿®æ”¹ï¼šåŒºåˆ†äº†ä¸»æ„é€ æ–¹æ³•ï¼ˆé€šå¸¸æ˜¯ä¸»è¦è€Œç®€æ´çš„åˆå§‹åŒ–ç±»çš„æ–¹æ³•ï¼Œå¹¶ä¸”åœ¨ç±»ä½“å¤–éƒ¨å£°æ˜ï¼‰å’Œä»æ„é€ æ–¹æ³•ã€‚</p><h3 id="4-2-1-åˆå§‹åŒ–ç±»ï¼šä¸»æ„é€ æ–¹æ³•å’Œåˆå§‹åŒ–ä»£ç å—"><a href="#4-2-1-åˆå§‹åŒ–ç±»ï¼šä¸»æ„é€ æ–¹æ³•å’Œåˆå§‹åŒ–ä»£ç å—" class="headerlink" title="4.2.1 åˆå§‹åŒ–ç±»ï¼šä¸»æ„é€ æ–¹æ³•å’Œåˆå§‹åŒ–ä»£ç å—"></a>4.2.1 åˆå§‹åŒ–ç±»ï¼šä¸»æ„é€ æ–¹æ³•å’Œåˆå§‹åŒ–ä»£ç å—</h3><p><strong>ä»€ä¹ˆæ˜¯ä¸»æ„é€ æ–¹æ³•ã€‚</strong></p><pre><code class="kotlin">class User(val nickname:String)</code></pre><p>è¿™æ®µè¢«æ‹¬å·å›´èµ·æ¥çš„ä»£ç å—å°±å«<strong>åšä¸»æ„é€ æ–¹æ³•</strong>ã€‚å®ƒæœ‰ä¸¤ä¸ªç›®çš„ï¼šè¡¨æ˜æ„é€ æ–¹æ³•çš„<strong>å‚æ•°</strong>ï¼Œä»¥åŠå®šä¹‰ä½¿ç”¨è¿™ä¸ª<strong>å‚æ•°</strong>çš„å±æ€§ã€‚</p><p><strong>æ˜ç¡®çš„ä¸»æ„é€ æ–¹æ³•å£°æ˜</strong></p><pre><code class="kotlin">class User constructor(_nickname: String) {   // å¸¦ä¸€ä¸ªå‚æ•°çš„ä¸»æ„é€ æ–¹æ³•    val nickname: String    init {  // åˆå§‹åŒ–ä»£ç å—        nickname = _nickname    }}</code></pre><p>ç°åœ¨æ¥çœ‹çœ‹å®ŒæˆåŒæ ·åŠŸèƒ½çš„ä»£ç å…·ä½“æ˜¯ä»€ä¹ˆæ ·å­ã€‚</p><blockquote><p>ä¸¤ä¸ªå…³é”®è¯ <strong>construtor</strong> å’Œ <strong>init</strong>ã€‚ constructor å…³é”®è¯ç”¨æ¥å¼€å§‹ä¸€ä¸ª<strong>æ„é€ æ–¹æ³•</strong>æˆ–è€…<strong>ä»æ„é€ æ–¹æ³•</strong>çš„å£°æ˜ã€‚init å…³é”®è¯ç”¨æ¥å¼•å…¥åˆå§‹åŒ–ä»£ç å—ã€‚è¿™ç§ä»£ç å—åŒ…å«äº†ç±»åœ¨åˆ›å»ºæ—¶æ‰§è¡Œçš„ä»£ç ï¼Œå¹¶ä¸”ä¼šå’Œä¸»æ„é€ æ–¹æ³•ä¸€èµ·ä½¿ç”¨ã€‚<strong>å› ä¸ºä¸»æ„é€ æ–¹æ³•æœ‰è¯­æ³•é™åˆ¶ï¼Œä¸èƒ½åŒ…å«åˆå§‹åŒ–ä»£ç ï¼Œè¿™å°±æ˜¯éœ€è¦åˆå§‹åŒ–ä»£ç å—ï¼ˆinitï¼‰çš„åŸå› ã€‚</strong>åŒæ—¶å¯ä»¥åˆ›å»ºå¤šä¸ªåˆå§‹åŒ–ä»£ç å—ã€‚</p></blockquote><p><strong>ç”¨å‚æ•°æ¥åˆå§‹åŒ–å±æ€§</strong></p><pre><code class="kotlin">class User(_nickname: String) { // å¸¦ä¸€ä¸ªå‚æ•°çš„æ„é€ æ–¹æ³•    val nickname: String = _nickname    // ç”¨å‚æ•°æ¥åˆå§‹åŒ–å±æ€§}</code></pre><blockquote><p>åœ¨ä¾‹å­ä¸­ï¼Œä¸éœ€è¦æŠŠåˆå§‹åŒ–ä»£ç æ”¾åœ¨åˆå§‹åŒ–ä»£ç å—ä¸­ï¼Œå› ä¸ºå®ƒå¯ä»¥ä¸nicknameå±æ€§å£°æ˜ç»“åˆã€‚å¦‚æœä¸»æ„é€ æ–¹æ³•æ²¡æœ‰æ³¨è§£æˆ–å¯è§æ€§ä¿®é¥°ç¬¦ï¼ŒåŒæ ·å¯ä»¥å»é™¤ constructor å…³é”®è¯ã€‚</p></blockquote><p><strong>ç”¨æœ€ç®€æ´çš„æ–¹æ³•å†æ¬¡åˆå§‹åŒ–ç±»</strong></p><pre><code class="kotlin">class User(val nickname:String)    // â€œvalâ€ æ„å‘³ç›¸å¯¹åº”çš„å±æ€§ä¼šç”¨æ„é€ æ–¹æ³•çš„å‚æ•°æ¥åˆå§‹åŒ–ã€‚</code></pre><p>å‰å‡ ä¸ªæ¡ˆä¾‹ç”¨ val å…³é”®è¯å£°æ˜äº†å±æ€§ã€‚å¦‚æœå±æ€§ç”¨ç›¸å¯¹åº”çš„æ„é€ æ–¹æ³•å‚æ•°æ¥åˆå§‹åŒ–ï¼Œ<strong>ä»£ç å¯ä»¥é€šè¿‡æŠŠ val å…³é”®è¯åŠ è½½å‚æ•°å‰çš„æ–¹æ³•æ¥ç®€åŒ–å®ƒ</strong>ã€‚å¯ä»¥ç”¨æ¥ä»£æ›¿ç±»ä¸­çš„å±æ€§å®šä¹‰äº†ã€‚</p><p><strong>ä¸ºæ„é€ æ–¹æ³•æä¾›é»˜è®¤å€¼</strong></p><pre><code class="kotlin">class User(val nickname: String, val isSubscribed: Boolean = true) // ä¸ºæ„é€ æ–¹æ³•æä¾›ä¸€ä¸ªé»˜è®¤å€¼    </code></pre><p>å¯ä»¥åƒå‡½æ•°å‚æ•°ä¸€æ ·ä¸ºæ„é€ æ–¹æ³•å£°æ˜é»˜è®¤å€¼ã€‚</p><p><strong>å¦‚ä½•è®©ä¸€ä¸ªç±»ä¸è¢«å…¶ä»–ä»£ç å®ä¾‹åŒ–</strong></p><p>å¦‚æœæƒ³è¦ä½ çš„ç±»ä¸è¢«å…¶ä»–ä»£ç å®ä¾‹åŒ–ï¼Œå¿…é¡»æŠŠæ„é€ æ–¹æ³•æ ‡è®°ä¸º privateã€‚</p><pre><code class="kotlin">class Secretive private constructor()   // è¿™ä¸ªç±»æœ‰ private æ„é€ æ–¹æ³•</code></pre><h3 id="4-2-2-æ„é€ æ–¹æ³•ï¼šç”¨ä¸åŒçš„æ–¹æ³•æ¥åˆå§‹åŒ–æ–¹æ³•"><a href="#4-2-2-æ„é€ æ–¹æ³•ï¼šç”¨ä¸åŒçš„æ–¹æ³•æ¥åˆå§‹åŒ–æ–¹æ³•" class="headerlink" title="4.2.2 æ„é€ æ–¹æ³•ï¼šç”¨ä¸åŒçš„æ–¹æ³•æ¥åˆå§‹åŒ–æ–¹æ³•"></a>4.2.2 æ„é€ æ–¹æ³•ï¼šç”¨ä¸åŒçš„æ–¹æ³•æ¥åˆå§‹åŒ–æ–¹æ³•</h3><p><strong>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å¤šç§æ–¹æ³•åˆå§‹åŒ–çˆ¶ç±»</strong></p><p>æœ€å¸¸è§çš„ä¸€ç§å°±æ˜¯å½“ä½ éœ€è¦æ‰©å±•ä¸€ä¸ªæ¡†æ¶ç±»æ¥æä¾›å¤šä¸ªæ„é€ æ–¹æ³•ï¼Œä»¥ä¾¿äºé€šè¿‡ä¸åŒçš„æ–¹æ³•æ¥åˆå§‹åŒ–ç±»çš„æ—¶å€™ã€‚</p><p><strong>çˆ¶ç±»ä½¿ç”¨ä»æ„é€ æ–¹æ³•</strong></p><pre><code class="kotlin">open class View {    constructor(ctx: Context) { // ä»æ„é€ æ–¹æ³•        //some code    }    constructor(ctx: Context, attr: AttributeSet) { // ä»æ„é€ æ–¹æ³•        //some code    }}</code></pre><p><strong>æ‰©å±•çˆ¶ç±»</strong></p><pre><code class="kotlin">class MyButton : View {    constructor(ctx: Context) : super(ctx) {        // è°ƒç”¨çˆ¶ç±»æ„é€ æ–¹æ³•    }    constructor(ctx: Context, attr: AttributeSet) : super(ctx, attr) {    }}</code></pre><p><strong>è°ƒç”¨çˆ¶ç±»çš„å¦ä¸€ä¸ªæ„é€ æ–¹æ³•</strong></p><pre><code class="kotlin">class MyButton : View {    constructor(ctx: Context) : this(ctx, My_SYTLE) {        // å§”æ‰˜ç»™è¿™ä¸ªç±»çš„å¦ä¸€ä¸ªæ„é€ æ–¹æ³•    }    constructor(ctx: Context, attr: AttributeSet) : super(ctx, attr) {    }}</code></pre><p>ä»<strong>æ„é€ æ–¹æ³•</strong>ä¸­è°ƒç”¨ä½ è‡ªå·±ç±»çš„å¦ä¸€ä¸ª<strong>æ„é€ æ–¹æ³•</strong>ã€‚</p><p>å¯ä»¥ä¿®æ”¹ MyButtonç±» <strong>ä½¿å¾—ä¸€ä¸ªæ„é€ æ–¹æ³•å§”æ‰˜ç»™åŒä¸€ä¸ªç±»çš„å¦ä¸€ä¸ªæ„é€ æ–¹æ³•</strong>ï¼Œä¸ºå‚æ•°ä¼ å…¥é»˜è®¤å€¼ï¼Œå›¾ä¸‹ğŸ‘‡ã€‚ç¬¬äºŒä¸ªæ–¹æ³•ç»§ç»­è°ƒç”¨super()ã€‚</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200906113216.png" alt=""></p><h3 id="4-2-3-å®ç°åœ¨æ¥å£ä¸­å£°æ˜çš„å±æ€§"><a href="#4-2-3-å®ç°åœ¨æ¥å£ä¸­å£°æ˜çš„å±æ€§" class="headerlink" title="4.2.3 å®ç°åœ¨æ¥å£ä¸­å£°æ˜çš„å±æ€§"></a>4.2.3 å®ç°åœ¨æ¥å£ä¸­å£°æ˜çš„å±æ€§</h3><p><strong>åœ¨æ¥å£ä¸­å£°æ˜ä¸€ä¸ªå±æ€§</strong></p><pre><code class="kotlin">interface User {    val nickname: String}</code></pre><p>æ¥å£å¯ä»¥åŒ…å«æŠ½è±¡å±æ€§å£°æ˜ã€‚</p><p>è¿™æ„å‘³è¿™<strong>å®ç°Useræ¥å£çš„ç±»éœ€è¦</strong>æä¾›ä¸€ä¸ªå–å¾—nicknameå€¼çš„æ–¹å¼ã€‚</p><p><strong>å®ç°æ¥å£ä¸­çš„å±æ€§ ä¸‰ç§</strong></p><p>ç¬¬ä¸€ç§</p><pre><code class="kotlin">// ä¸»æ„é€ æ–¹æ³•å±æ€§class PrivateUser(override val nickname: String) : User {}</code></pre><p>å¯¹äº PrivateUser æ¥è¯´ï¼Œ<strong>ä½ æ˜¯ç”¨äº†é—´æ¥çš„è¯­æ³•ç›´æ¥åœ¨ä¸»æ„é€ æ–¹æ³•ä¸­å£°æ˜äº†ä¸€ä¸ªå±æ€§</strong>ã€‚è¿™ä¸ªå±æ€§å®ç°äº†æ¥è‡ªäºUserçš„æŠ½è±¡å±æ€§ï¼Œæ‰€ä»¥ä½ å°†å…¶æ ‡è®°ä¸º overrideã€‚</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200908100413.png" alt=""></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200908095819.png" alt=""></p><p>è¿è¡Œç»“æœ</p><p>ç¬¬äºŒç§</p><pre><code class="kotlin">class SubscribingUser(val email: String) : User {    override val nickname: String get() = email.substringBefore(&#39;@&#39;)  // è‡ªå®šä¹‰getter}</code></pre><p>å¯¹äº SubscribeingUser æ¥è¯´ï¼Œnikenameå±æ€§é€šè¿‡ä¸€ä¸ªè‡ªå®šä¹‰ getter å®ç°ã€‚<strong>è¿™ä¸ªå±æ€§æ²¡æœ‰ä¸€ä¸ªæ”¯æŒå­—æ®µæ¥å­˜å‚¨å®ƒçš„å€¼ï¼Œå®ƒåªæœ‰ä¸€ä¸ª getter åœ¨æ¯æ¬¡è°ƒç”¨æ—¶ä» email ä¸­å¾—åˆ°æ˜µç§°ã€‚</strong></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200908100342.png" alt=""></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200908100257.png" alt=""></p><p>è¿è¡Œç»“æœ</p><p>ç¬¬ä¸‰ç§</p><pre><code class="kotlin">class FacebookUser(val accoundId: Int) : User {    override val nickname = getFacebookName(accoundId)  // å±æ€§åˆå§‹åŒ–    fun getFacebookName(text: String): String {        return text    }}</code></pre><p>nicknameåœ¨SubscribingUserå’ŒFackbookUserä¸­çš„ä¸åŒå®ç°ã€‚å³ä½¿å®ƒä»¬çœ‹èµ·æ¥å¾ˆç›¸ä¼¼ï¼Œç¬¬ä¸€ä¸ªå±æ€§æœ‰ä¸€ä¸ªè‡ªå®šä¹‰getteråœ¨æ¯æ¬¡è®¿é—®æ—¶è®¡ç®— subscringBeforeï¼Œç„¶å FackbookUserä¸­çš„å±æ€§æœ‰ä¸€ä¸ª<strong>æ”¯æŒå­—æ®µæ¥å­˜å‚¨åœ¨ç±»åˆå§‹åŒ–æ—¶è®¡ç®—å¾—åˆ°æ•°æ®</strong>ã€‚</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200908104646.png" alt=""></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200908111027.png" alt=""></p><p>è¿è¡Œç»“æœ</p><h3 id="4-2-4-é€šè¿‡-getteræˆ–setterè®¿é—®æ”¯æŒå­—æ®µ"><a href="#4-2-4-é€šè¿‡-getteræˆ–setterè®¿é—®æ”¯æŒå­—æ®µ" class="headerlink" title="4.2.4 é€šè¿‡ getteræˆ–setterè®¿é—®æ”¯æŒå­—æ®µ"></a>4.2.4 é€šè¿‡ getteræˆ–setterè®¿é—®æ”¯æŒå­—æ®µ</h3><p>å…³äºä¸¤ç§å±æ€§çš„ä¾‹å­ï¼šå­˜å‚¨å€¼çš„å±æ€§å’Œå…·æœ‰è‡ªå®šä¹‰è®¿é—®å™¨åœ¨æ¯æ¬¡è®¿é—®æ—¶çš„å±æ€§ã€‚<strong>ç°åœ¨è®©æˆ‘ä»¬æ¥çœ‹çœ‹æ€ä¹ˆç»“åˆè¿™ä¸¤ç§æ¥å®ç°ä¸€ä¸ªæ—¢å¯ä»¥å­˜å‚¨å€¼åˆå¯ä»¥è¢«å€¼è®¿é—®å’Œä¿®æ”¹æ—¶æä¾›é¢å¤–é€»è¾‘çš„å±æ€§ã€‚</strong>è¦æ”¯æŒè¿™ç§æƒ…å†µï¼Œéœ€è¦èƒ½å¤Ÿä»å±æ€§çš„è®¿é—®å™¨ä¸­è®¿é—®å®ƒçš„æ”¯æŒå­—æ®µã€‚</p><p>å‡è®¾åœ¨ä»»ä½•é€‚åˆå¯¹å­˜å‚¨çš„å±æ€§ä¸­çš„æ•°æ®è¿›è¡Œä¿®æ”¹æ—¶è¾“å‡ºæ—¥å¿—ï¼Œä½ å£°æ˜äº†ä¸€ä¸ªå¯å˜å±æ€§å¹¶ä¸”åœ¨æ¯æ¬¡ setter è®¿é—®æ—¶æ‰§è¡Œé¢å¤–çš„ä»£ç ã€‚</p><pre><code class="kotlin">/*    åœ¨ setter ä¸­è®¿é—®æ”¯æŒå­—æ®µ    */class User(val name:String) {    var address: String = &quot;unspecified&quot;        set(value: String){            println(&quot;&quot;&quot;                Address was changed for $name:&quot;$field&quot; -&gt; &quot;$value&quot;.&quot;&quot;&quot;.trinmIndent())    //è¯»å–æ”¯æŒå­—æ®µçš„å€¼                field = value    // æ›´æ–°æ”¯æŒå­—æ®µçš„å€¼        }}</code></pre><pre><code class="kotlin">&gt;&gt;&gt; val user = User(&quot;Alice&quot;)&gt;&gt;&gt; user.address = &quot;Elasenheimerstrasse 47, 80687 Muenchen&quot;Address was changed for Alice:&quot;unspecified&quot; -&gt; &quot;Elsenheimerstrasse 47, 80687 Muenchen&quot;</code></pre><blockquote><p>å¯ä»¥åƒå¹³å¸¸ä¸€æ ·é€šè¿‡ä½¿ç”¨ user.address = â€œnew valueâ€ æ¥ä¿®æ”¹ä¸€ä¸ªå±æ€§çš„å€¼ï¼Œè¿™å…¶å®åœ¨åº•å±‚è°ƒç”¨äº†setterã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œsetter è¢«é‡æ–°å®šä¹‰äº†ï¼Œæ‰€ä»¥é¢å¤–çš„è¾“å‡ºæ—¥å¿—çš„ä»£ç è¢«æ‰§è¡Œäº†ï¼ˆç®€å•èµ·è§ï¼Œè¿™é‡Œç›´æ¥å°†å…¶æ‰“å°å‡ºæ¥ï¼‰ã€‚</p><p>åœ¨ setter çš„å‡½æ•°ä½“ä¸­ï¼Œä½¿ç”¨äº†ç‰¹æ®Šçš„æ ‡è¯†ç¬¦ fieldæ¥è®¿é—®æ”¯æŒå­—æ®µçš„å€¼ã€‚åœ¨ getter ä¸­ï¼Œåªèƒ½è¯»å–å€¼ï¼šè€Œåœ¨ setter ä¸­ï¼Œæ—¢èƒ½è¯»å–å®ƒä¹Ÿèƒ½ä¿®æ”¹å®ƒã€‚</p></blockquote><h2 id="4-3-ç¼–è¯‘å™¨ç”Ÿæˆçš„æ–¹æ³•-æ•°æ®ç±»å’Œå§”æ‰˜"><a href="#4-3-ç¼–è¯‘å™¨ç”Ÿæˆçš„æ–¹æ³•-æ•°æ®ç±»å’Œå§”æ‰˜" class="headerlink" title="4.3 ç¼–è¯‘å™¨ç”Ÿæˆçš„æ–¹æ³•:æ•°æ®ç±»å’Œå§”æ‰˜"></a>4.3 ç¼–è¯‘å™¨ç”Ÿæˆçš„æ–¹æ³•:æ•°æ®ç±»å’Œå§”æ‰˜</h2><h3 id="4-3-2-æ•°æ®ç±»-è‡ªåŠ¨ç”Ÿæˆé€šç”¨æ–¹æ³•çš„å®ç°"><a href="#4-3-2-æ•°æ®ç±»-è‡ªåŠ¨ç”Ÿæˆé€šç”¨æ–¹æ³•çš„å®ç°" class="headerlink" title="4.3.2 æ•°æ®ç±»:è‡ªåŠ¨ç”Ÿæˆé€šç”¨æ–¹æ³•çš„å®ç°."></a>4.3.2 æ•°æ®ç±»:è‡ªåŠ¨ç”Ÿæˆé€šç”¨æ–¹æ³•çš„å®ç°.</h3><p>å®ç°ä¸€ä¸ªæ•°æ®ç±»éœ€è¦é‡å†™æ–¹æ³•:toStringã€equalså’Œhashcodeã€‚</p><p><strong>æ•°æ®ç±»</strong></p><pre><code class="kotlin">data class Client(val name:String,val postalCode:Int)</code></pre><p>è¿™æ˜¯ä¸€ä¸ªæ•°æ®ç±»,é‡å†™äº†æ‰€æœ‰æ ‡å‡†çš„Javaæ–¹æ³•:</p><ul><li>equals ç”¨æ¥æ¯”è¾ƒå®ä¾‹</li><li>hashCodeç”¨æ¥ä½œä¸ºä¾‹å¦‚HashMapè¿™ç§åŸºäºå“ˆå¸Œå®¹å™¨çš„é”®</li><li>toStringç”¨æ¥ä¸ºç±»ç”ŸæˆæŒ‰å£°æ˜é¡ºåºæ’åˆ—çš„æ‰€æœ‰å­—æ®µçš„å­—ç¬¦ä¸²è¡¨è¾¾å½¢å¼</li></ul><h2 id="4-4-â€œobjectâ€-å…³é”®å­—ï¼š-å°†å£°æ˜ä¸€ä¸ªç±»ä¸åˆ›å»ºä¸€ä¸ªå®ä¾‹ç»“åˆèµ·æ¥"><a href="#4-4-â€œobjectâ€-å…³é”®å­—ï¼š-å°†å£°æ˜ä¸€ä¸ªç±»ä¸åˆ›å»ºä¸€ä¸ªå®ä¾‹ç»“åˆèµ·æ¥" class="headerlink" title="4.4 â€œobjectâ€ å…³é”®å­—ï¼š å°†å£°æ˜ä¸€ä¸ªç±»ä¸åˆ›å»ºä¸€ä¸ªå®ä¾‹ç»“åˆèµ·æ¥"></a>4.4 â€œobjectâ€ å…³é”®å­—ï¼š å°†å£°æ˜ä¸€ä¸ªç±»ä¸åˆ›å»ºä¸€ä¸ªå®ä¾‹ç»“åˆèµ·æ¥</h2><p>è¿™ä¸ªå…³é”®è¯å®šä¹‰ä¸€ä¸ªç±»å¹¶åŒæ—¶åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼ˆæ¢å¥è¯è¯´å°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼‰ã€‚</p><ul><li><strong>å¯¹è±¡å£°æ˜</strong>æ˜¯å®šä¹‰ä¸€ä¸ªå•ä¾‹çš„ä¸€ç§æ–¹å¼ã€‚</li><li><strong>ä¼´ç”Ÿå¯¹è±¡</strong>å¯ä»¥æŒæœ‰<strong>å·¥åœºæ–¹æ³•</strong>å’Œå…¶ä»–ä¸è¿™ä¸ªç±»çš„ç›¸å…³ï¼Œä½†æ˜¯åœ¨è°ƒç”¨æ—¶å¹¶ä¸ä¾èµ–ç±»å®ä¾‹æ–¹æ³•ã€‚<strong>å®ƒä»¬çš„æˆå‘˜å¯ä»¥é€šè¿‡ç±»åæ¥è®¿é—®</strong>ã€‚</li><li><strong>å¯¹è±¡è¡¨è¾¾å¼ç”¨æ¥ä»£æ›¿Javaçš„åŒ¿åå†…éƒ¨ç±»</strong></li></ul><h3 id="4-4-1-å¯¹è±¡å£°æ˜ï¼šåˆ›å»ºå•ä¾‹æ˜“å¦‚åæŒ"><a href="#4-4-1-å¯¹è±¡å£°æ˜ï¼šåˆ›å»ºå•ä¾‹æ˜“å¦‚åæŒ" class="headerlink" title="4.4.1 å¯¹è±¡å£°æ˜ï¼šåˆ›å»ºå•ä¾‹æ˜“å¦‚åæŒ"></a>4.4.1 å¯¹è±¡å£°æ˜ï¼šåˆ›å»ºå•ä¾‹æ˜“å¦‚åæŒ</h3><p><strong>ä¸ºä»€ä¹ˆä½¿ç”¨å¯¹è±¡å£°æ˜ï¼Ÿ</strong></p><p>åœ¨é¢å‘å¯¹è±¡ç³»ç»Ÿä¸­ä¸€ä¸ªç›¸å½“å¸¸è§çš„æƒ…å½¢å°±æ˜¯åªéœ€è¦ä¸€ä¸ªå®ä¾‹çš„ç±»ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªå¯¹è±¡å£°æ˜æ¥è¡¨ç¤ºä¸€ä¸ªç»„ç»‡çš„å·¥èµ„å•ã€‚</p><p><strong>åœ¨Javaä¸­æ˜¯å¦‚ä½•å®ç°å•ä¾‹æ¨¡å¼ï¼Ÿ</strong></p><p>å®šä¹‰ä¸€ä¸ªä½¿ç”¨privateæ„é€ æ–¹æ³•å¹¶ä¸”ç”¨é™æ€å­—æ®µæ¥æŒæœ‰è¿™ä¸ªç±»ä»…æœ‰çš„å®ä¾‹ã€‚</p><p><strong>ä»€ä¹ˆæ˜¯å¯¹è±¡å£°æ˜</strong></p><p>Kotliné€šè¿‡ä½¿ç”¨å¯¹è±¡å£°æ˜åŠŸèƒ½ä¸ºè¿™ä¸€åˆ‡æä¾›äº†æœ€é«˜çº§çš„è¯­è¨€æ”¯æŒã€‚<strong>å¯¹è±¡å£°æ˜å°†ç±»å£°æ˜ä¸è¯¥ç±»çš„å•ä¸€å®ä¾‹å£°æ˜ç»“åˆåˆ°äº†ä¸€èµ·ã€‚</strong></p><p><strong>å¯¹è±¡å£°æ˜ä½¿ç”¨</strong></p><pre><code>object Payroll {    val allEmployees = arrayListOf&lt;Person&gt;()    fun calculateSalary() {        for (person in allEmployees){        }    }}</code></pre><p>å¯¹è±¡å£°æ˜é€šè¿‡ object å…³é”®è¯å¼•å…¥ã€‚ä¸ç±»ä¸€æ ·ï¼Œä¸€ä¸ªå¯¹è±¡å£°æ˜ä¹Ÿå¯ä»¥åŒ…å«å±æ€§ã€æ–¹æ³•ã€åˆå§‹åŒ–è¯­å¥å—ç­‰çš„å£°æ˜ï¼Œå”¯ä¸€ä¸å…è®¸çš„æ˜¯æ„é€ æ–¹æ³•ã€‚å¯¹è±¡å£°æ˜åœ¨å®šä¹‰æ—¶å°±åˆ›å»ºäº†æ„é€ å¯¹è±¡ï¼Œä¸éœ€è¦åœ¨ä»£ç çš„å…¶ä»–åœ°æ–¹è°ƒç”¨æ„é€ æ–¹æ³•ã€‚å¯¹è±¡å£°æ˜åŒæ ·å¯ä»¥ç»§æ‰¿ç±»å’Œæ¥å£ã€‚</p><h1 id="5-Lambda-ç¼–ç¨‹"><a href="#5-Lambda-ç¼–ç¨‹" class="headerlink" title="5 Lambda ç¼–ç¨‹"></a>5 Lambda ç¼–ç¨‹</h1><h2 id="5-1-Lambdaè¡¨è¾¾å¼å’Œæˆå‘˜å¼•ç”¨"><a href="#5-1-Lambdaè¡¨è¾¾å¼å’Œæˆå‘˜å¼•ç”¨" class="headerlink" title="5.1 Lambdaè¡¨è¾¾å¼å’Œæˆå‘˜å¼•ç”¨"></a>5.1 Lambdaè¡¨è¾¾å¼å’Œæˆå‘˜å¼•ç”¨</h2><h3 id="5-1-1-Lambda-ç®€ä»‹ï¼šä½œä¸ºå‡½æ•°å‚æ•°çš„ä»£ç å—"><a href="#5-1-1-Lambda-ç®€ä»‹ï¼šä½œä¸ºå‡½æ•°å‚æ•°çš„ä»£ç å—" class="headerlink" title="5.1.1 Lambda ç®€ä»‹ï¼šä½œä¸ºå‡½æ•°å‚æ•°çš„ä»£ç å—"></a>5.1.1 Lambda ç®€ä»‹ï¼šä½œä¸ºå‡½æ•°å‚æ•°çš„ä»£ç å—</h3><p>åœ¨ä»£ç ä¸­å­˜å‚¨å’Œä¼ é€’ä¸€å°æ®µè¡Œä¸ºæ˜¯å¸¸æœ‰çš„ä»»åŠ¡ã€‚ä¾‹å¦‚ï¼Œâ€œå½“ä¸€ä¸ªäº‹ä»¶å‘ç”Ÿçš„æ—¶å€™è¿è¡Œè¿™ä¸ªäº‹ä»¶å¤„ç†å™¨â€åˆæˆ–æ˜¯â€œæŠŠè¿™ä¸ªæ“ä½œåº”ç”¨åˆ°è¿™ä¸ªæ•°æ®ç»“æ„çš„æ‰€æœ‰å…ƒç´ ä¸Šâ€ã€‚åœ¨è€ç‰ˆæœ¬çš„Javaä¸­å¯ä»¥ä½¿ç”¨åŒ¿åå‡½æ•°ã€‚</p><blockquote><p>ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹ æä¾›äº†å¦å¤–ä¸€ç§è§£å†³é—®é¢˜çš„æ–¹æ³•ï¼š</p><p>æŠŠå‡½æ•°å½“ä½œå€¼æ¥å¯¹å¾…ã€‚å¯ä»¥ç›´æ¥ä¼ é€’å‡½æ•°ï¼Œè€Œä¸éœ€è¦å…ˆå£°æ˜ä¸€ä¸ªç±»å†ä¼ é€’ä¸€ä¸ªç±»çš„å®ä¾‹ã€‚ä½¿ç”¨ lambda è¡¨è¾¾å¼åä»£ç ä¼šå˜çš„æ›´åŠ ç®€æ´ã€‚</p></blockquote><p>ä¾‹å­ã€‚å‡è®¾ä½ è¦å®šä¹‰ä¸€ä¸ªç‚¹å‡»æŒ‰é’®çš„è¡Œä¸ºï¼Œæ·»åŠ ä¸€ä¸ªå¤„ç†ç‚¹å‡»çš„ç›‘å¬å™¨ã€‚ç›‘å¬å™¨å®ç°äº†æƒ³å¯¹åº”çš„æ¥å£ OnClickListener å’Œå®ƒçš„ä¸€ä¸ªæ–¹æ³• onClickã€‚</p><pre><code class="java">/*    ç”¨åŒ¿åå†…éƒ¨ç±»å®ç°ç›‘å¬å™¨    */button.setOnClickListener(new OnClickListener(){    @Override    public void onClick(View view){        /*ç‚¹å‡»ä¹‹åæ‰§è¡Œçš„åŠ¨ä½œ*/    }})</code></pre><p>ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»çš„å†™æ³•ï¼Œæ›´åŠ å†—ä½™ã€‚æ¥ä¸‹æ¥ä½¿ç”¨ lambda å†™æ³•</p><pre><code class="kotlin">/*    ç”¨ lambda å®ç°ç›‘å¬å™¨    */button.setOnClickListener{    /*    ç‚¹å‡»åæ‰§è¡Œæ“ä½œ    */    }</code></pre><h3 id="5-1-2-Lamda-å’Œ-é›†åˆ"><a href="#5-1-2-Lamda-å’Œ-é›†åˆ" class="headerlink" title="5.1.2 Lamda å’Œ é›†åˆ"></a>5.1.2 Lamda å’Œ é›†åˆ</h3><p>è‰¯å¥½çš„ç¼–ç¨‹é£æ ¼åŸåˆ™ä¹‹ä¸€æ˜¯é¿å…ä»£ç çš„é‡å¤ã€‚æˆ‘ä»¬å¯¹é›†åˆæ‰§è¡Œå¤§éƒ¨åˆ†ä»»åŠ¡éƒ½éµå¾ªè¿™å‡ ä¸ªé€šç”¨çš„æ¨¡å¼ï¼Œæ‰€ä»¥è¦å®ç°è¿™å‡ ä¸ªæ¨¡å¼çš„ä»£ç åº”è¯¥æ”¾åœ¨ä¸€ä¸ªåº“é‡Œã€‚åœ¨æ²¡æœ‰ lambda çš„å¸®åŠ©ï¼Œå¾ˆéš¾ä¸ºé›†åˆæä¾›ä¸€ä¸ªå¥½ç”¨æ–¹ä¾¿çš„åº“ã€‚</p><p>çœ‹ä¸ªä¾‹å­ã€‚</p><p>åˆ›å»ºä¸€ä¸ª Person ç±»ï¼Œå®ƒåŒ…å«äº†è¿™ä¸ªäº†çš„åå­—å’Œå¹´é¾„ä¿¡æ¯ã€‚</p><pre><code class="kotlin">data class Person(val name:String, val age :Int)</code></pre><p>å‡è®¾ä½ ç°åœ¨è¦åœ¨åˆ—è¡¨ä¸­æ‰¾åˆ°å¹´é¾„æœ€å¤§çš„é‚£ä¸ªäººã€‚</p><pre><code class="kotlin">/*    æ‰‹åŠ¨åœ¨é›†åˆä¸­æœç´¢    */fun findTheOldest(people:List&lt;Person&gt;){    var maxAge = 0    //å­˜å‚¨æœ€å¤§å¹´é¾„    var theOldest:Person ?= null //å­˜å‚¨å¹´é¾„æœ€å¤§çš„äºº    for (person in people){        if(person.age &gt; maxAge){    //å¦‚æœä¸‹ä¸€ä¸ªæ¯”ç°åœ¨å¹´é¾„æœ€å¤§çš„äººè¿˜è¦å¤§ï¼Œæ”¹å˜æœ€å¤§å€¼            maxAge = person.age            theOldest = person        }    }    println(theOldest)}&gt;&gt;&gt; val people = listOf(Person(&quot;Alice&quot;,29),Person(&quot;Bob&quot;,31))&gt;&gt;&gt; findTheOldest(people)Person(name = Bob,age = 31)</code></pre><pre><code class="kotlin">/*    ç”¨ lambda åœ¨é›†åˆä¸­æœç´¢    */&gt;&gt;&gt; val people = listOf(Person(&quot;Alice&quot;,29),Person(&quot;Bob&quot;,31))&gt;&gt;&gt; println(people.maxBy{it.age})    // æ¯”è¾ƒå¹´é¾„æœ€å¤§çš„å…ƒç´ Person(name = Bob, age = 31)</code></pre><p>maxByå‡½æ•°å¯ä»¥åœ¨ä»»ä½•é›†åˆä¸Šè°ƒç”¨ï¼Œä¸”åªéœ€è¦ä¸€ä¸ªå‚æ•°ï¼šå‡½æ•°æŒ‡å®šæ¯”è¾ƒå“ªä¸ªå€¼æ¥æ‰¾åˆ°æœ€å¤§å…ƒç´ ã€‚</p><p>èŠ±æ‹¬å·ä¸­çš„ä»£ç  <strong>{it.age}</strong>å°±æ˜¯å®ç°äº†è¿™ä¸ªé€»è¾‘çš„lmabdaã€‚ å®ƒæ¥æ”¶ä¸€ä¸ªé›†åˆä¸­çš„å…ƒç´ ä½œä¸ºå®å‚(ä½œç”¨ it å¼•ç”¨å®ƒ)å¹¶ä¸”è¿”å›ç”¨æ¥æ¯”è¾ƒçš„å€¼ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œé›†åˆå…ƒç´ æ˜¯Personå¯¹è±¡ï¼Œç”¨æ¥æ¯”è¾ƒçš„æ˜¯å­˜å‚¨åœ¨å…¶ageå±æ€§ä¸­çš„å¹´é¾„ã€‚</p><pre><code class="kotlin">/*    ç”¨æˆå‘˜å¼•ç”¨    */people.maxBy(Person:age)</code></pre><h3 id="5-1-3-Lambda-è¡¨è¾¾å¼çš„è¯­æ³•"><a href="#5-1-3-Lambda-è¡¨è¾¾å¼çš„è¯­æ³•" class="headerlink" title="5.1.3 Lambda è¡¨è¾¾å¼çš„è¯­æ³•"></a>5.1.3 Lambda è¡¨è¾¾å¼çš„è¯­æ³•</h3><p>æ¦‚è¿° lambda</p><blockquote><p>ä¸€ä¸ª lambda æŠŠä¸€å°æ®µè¡Œä¸ºè¿›è¡Œç¼–ç ï¼Œä½ èƒ½æŠŠå®ƒå½“ä½œå€¼åˆ°å¤„ä¼ é€’ã€‚å®ƒå¯ä»¥è¢«ç‹¬ç«‹åœ°å£°æ˜å¹¶å‚¨å­˜ä¸€ä¸ªå˜é‡ã€‚</p></blockquote><pre><code class="kotlin">/*    lambda è¡¨è¾¾å¼çš„è¯­æ³•    */{x:Int,y:Int -&gt; x+y}/*    å‚æ•° -&gt; å‡½æ•°ä½“    */</code></pre><blockquote><p>Kotlin çš„lambda è¡¨è¾¾å¼å§‹ç»ˆç”¨èŠ±æ‹¬å·åŒ…å›´ã€‚å®å‚å¹¶æ²¡æœ‰ç”¨æ‹¬å·æ‹¬èµ·æ¥ã€‚ç®­å¤´æŠŠå®å‚åˆ—è¡¨å’Œlambda å‡½æ•°ä½“éš”å¼€äº†ã€‚</p></blockquote><p>å¯ä»¥æŠŠ lambdaè¡¨è¾¾å¼å­˜å‚¨åœ¨ä¸€ä¸ªå˜é‡ä¸­ï¼ŒæŠŠè¿™ä¸ªå˜é‡å½“ä½œæ™®é€šå‡½æ•°å¯¹å¾…ï¼ˆå³é€šè¿‡ç›¸åº”å®å‚è°ƒç”¨å®ƒï¼‰</p><pre><code class="kotlin">&gt;&gt;&gt; val sum = {x:Int,y:int -&gt; x+y}&gt;&gt;&gt; println(sum(1,2))    // è°ƒç”¨ä¿å­˜åœ¨å˜é‡ä¸­çš„lambda3</code></pre><blockquote><p>Kotlin ä¸­çš„è¯­æ³•çº¦å®šï¼Œå¦‚æœ lambda è¡¨è¾¾å¼æ˜¯å‡½æ•°è°ƒç”¨çš„æœ€åä¸€ä¸ªå®å‚ï¼Œå®ƒå¯ä»¥æ”¾åˆ°æ‹¬å·å¤–è¾¹ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­lambdaæ˜¯å”¯ä¸€çš„å®å‚ï¼Œæ‰€ä»¥å¯ä»¥æ”¾åˆ°æ‹¬å·å¤–è¾¹</p><pre><code class="kotlin">people.maxBy(){p:Person -&gt; p.age}</code></pre><p>å½“ lamdba æ˜¯å‡½æ•°çš„å”¯ä¸€å®å‚æ—¶ï¼Œè¿˜å¯ä»¥å»é™¤è°ƒç”¨ä»£ç ä¸­çš„ç©ºæ‹¬å·ã€‚</p><pre><code class="kotlin">people.maxBy{p:Person -&gt; p.age}</code></pre><p>ä¸‰ç§è¯­æ³•å½¢å¼çš„å«ä¹‰éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä½†æœ€åéƒ½æ˜¯æ˜“è¯»çš„ã€‚å¦‚æœlambdaæ˜¯å”¯ä¸€çš„å®å‚ï¼Œä½ å½“ç„¶æ„¿æ„åœ¨å†™ä»£ç çš„æ—¶å€™çœæ‰è¿™ä¸ªæ‹¬å·ã€‚è€Œå½“ä½ æœ‰å¤šä¸ªå®å‚æ—¶ï¼Œæ—¢å¯ä»¥æŠŠlambdaç•™åœ¨æ‹¬å·å†…æ¥å¼ºè°ƒå®ƒæ˜¯ä¸€ä¸ªå®å‚ï¼Œä¹Ÿå¯ä»¥æŠŠå®ƒæ”¾åœ¨æ‹¬å·å¤–é¢ï¼Œä¸¤ç§é€‰æ‹©éƒ½æ˜¯å¯è¡Œçš„ã€‚å¦‚æœä½ æƒ³ä¼ é€’ä¸¤ä¸ªæˆ–å¤šä¸ªlamdbaï¼Œä¸èƒ½æŠŠè¶…è¿‡ä¸€ä¸ªçš„lamdbaæ”¾åœ¨å¤–é¢ã€‚è¿™æ—¶ä½¿ç”¨å¸¸è§„è¯­æ³•æ¥ä¼ é€’å®ƒä»¬é€šå¸¸æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚</p></blockquote><p>å›é¡¾ joinToString å‡½æ•° ï¼ˆå¯¹å…ƒç´ æ·»åŠ åˆ†éš”ç¬¦ï¼‰ã€‚ Kotlin æ ‡å‡†åº“ä¸­ä¹Ÿæœ‰å®šä¹‰å®ƒï¼Œæ ‡å‡†åº“ä¸­çš„è¿™ä¸ªç‰ˆæœ¬çš„ä¸åŒä¹‹å¤„åœ¨äºå®ƒå¯ä»¥æ¥æ”¶ä¸€ä¸ªé™„åŠ çš„å‡½æ•°å‚æ•°ã€‚è¿™ä¸ªå‡½æ•°å¯ä»¥ä½¿ç”¨ toStringå‡½æ•°ä»¥å¤–çš„æ–¹æ³•æŠŠä¸€ä¸ªå…ƒç´ è½¬æ¢æˆå­—ç¬¦ä¸²ã€‚</p><p><strong>æ‰“å°å‡ºäººçš„åå­—</strong></p><pre><code class="kotlin">/*    æŠŠ lambda ä½œä¸ºå‘½åå®å‚ä¼ é€’    */&gt;&gt;&gt;val people = listOf(Person(&quot;Alice&quot;,31),Person(&quot;Bob&quot;,29))&gt;&gt;&gt;val names = people.joinToString(separator = &quot;&quot;,transform = {p:Person -&gt; p.name})&gt;&gt;&gt;println(names)Alices Bob</code></pre><p><strong>ç”¨æ›´ç®€å•çš„æ–¹æ³•</strong></p><pre><code class="kotlin">/*    æŠŠ lambda æ”¾åœ¨æ‹¬å·å¤–ä¼ é€’    */people.joinToString(&quot; &quot;){p:Person -&gt; p.name}</code></pre><p><strong>ç®€åŒ–è¯­æ³•ï¼Œç§»é™¤å‚æ•°ç±»å‹</strong></p><pre><code class="kotlin">/*    çœç•¥ lambda å‚æ•°ç±»å‹    */people.maxBy{p:Person -&gt; p.age}    // æ˜¾å¼åœ°å†™å‡ºå‚æ•°ç±»å‹people.maxBY{p-&gt;p.age}    // æ¨å¯¼å‡ºå‚æ•°ç±»å‹</code></pre><p>å’Œå±€éƒ¨å˜é‡ä¸€æ ·ï¼Œå¦‚æœ lambda å‚æ•°çš„ç±»å‹å¯ä»¥è¢«æ¨å¯¼å‡ºæ¥ï¼Œä½ å°±ä¸éœ€è¦æ˜¾å¼åœ°æŒ‡å®šå®ƒã€‚ä»¥è¿™é‡Œçš„ maxBy ä¸ºä¾‹å­ï¼Œå…¶å‚æ•°ç±»å‹å§‹ç»ˆå’Œé›†åˆçš„å…ƒç´ ç±»å‹ç›¸åŒã€‚ç¼–è¯‘å™¨çŸ¥é“ä½ æ˜¯å¯¹ä¸€ä¸ªPersonå¯¹è±¡çš„é›†åˆè°ƒç”¨maxByå‡½æ•°ï¼Œæ‰€ä»¥å®ƒèƒ½æ¨æ–­å‡º lambdaå‚æ•°ä¹Ÿä¼šæ˜¯Personç±»å‹ã€‚<strong>ä¹Ÿå­˜åœ¨ä¸èƒ½æ¨æ–­å‡ºçš„æƒ…å†µï¼Œå…ˆéµå¾ªï¼šå…ˆä¸å£°æ˜ç±»å‹ï¼Œç­‰ç¼–è¯‘å™¨æŠ¥é”™åå†æŒ‡å®šå®ƒã€‚</strong></p><p><strong>æœ€åçš„ç®€åŒ–æ˜¯ä½¿ç”¨é»˜è®¤å‚æ•°åç§° it ä»£æ›¿å‘½åå‚æ•°</strong></p><pre><code class="kotlin">/*    ä½¿ç”¨é»˜è®¤å‚æ•°åç§°    */people.maxBy(it.age)    //&quot;it&quot;æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„å‚æ•°åç§°</code></pre><p>ä»…åœ¨å‚æ•°åç§°æ²¡æœ‰æ˜¾å¼åœ°æŒ‡å®šæ—¶è¿™ä¸ªé»˜è®¤çš„åç§°æ‰ä¼šç”Ÿæˆã€‚</p><p><strong>å¯ä»¥ç”¨å˜é‡å­˜å‚¨ lambda è¡¨è¾¾å¼</strong></p><pre><code class="kotlin">&gt;&gt;&gt; val getAge = {p:Person -&gt; p.age}&gt;&gt;&gt; people.maxBy(getAge)</code></pre><blockquote><p>lambda å¹¶æ²¡æœ‰è¢«é™åˆ¶åœ¨è¿™æ ·å°çš„è§„æ¨¡ï¼Œå®ƒå¯ä»¥åŒ…å«æ›´å¤šçš„è¯­å¥ã€‚</p></blockquote><pre><code class="kotlin">&gt;&gt;&gt; val sum = {x:Int,y:Int -&gt;    println(&quot;Computing the sum of $x and $y...&quot;)    x + y}&gt;&gt;&gt; println(sum(1,2))Computing the sum of 1 and 2...3</code></pre><h3 id="5-1-4-åœ¨ä½œç”¨åŸŸä¸­è®¿é—®å˜é‡"><a href="#5-1-4-åœ¨ä½œç”¨åŸŸä¸­è®¿é—®å˜é‡" class="headerlink" title="5.1.4 åœ¨ä½œç”¨åŸŸä¸­è®¿é—®å˜é‡"></a>5.1.4 åœ¨ä½œç”¨åŸŸä¸­è®¿é—®å˜é‡</h3><blockquote><p>åœ¨å£°æ˜ä¸€ä¸ªåŒ¿åå†…éƒ¨ç±»çš„æ—¶å€™ï¼Œèƒ½å¤Ÿåœ¨è¿™ä¸ªåŒ¿åç±»å†…éƒ¨å¼•ç”¨è¿™ä¸ªå‡½æ•°çš„å‚æ•°å’Œå±€éƒ¨å˜é‡ã€‚</p><p>è€Œåœ¨ä½¿ç”¨ lambda å£°æ˜çš„æ—¶å€™ï¼Œä¹Ÿå¯ä»¥åšåŒæ ·çš„äº‹æƒ…ã€‚å¦‚æœåœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨ lambda ä¹Ÿå¯ä»¥è®¿é—®è¿™ä¸ªå‡½æ•°çš„å‚æ•°ï¼Œè¿˜æœ‰åœ¨ lambda ä¹‹å‰å®šä¹‰çš„å±€éƒ¨å˜é‡ã€‚</p></blockquote><p><strong>forEach å‡½æ•°</strong></p><p> ç”¨ forEach å‡½æ•°å±•ç¤º ä¸Šè¿°è¡Œä¸ºã€‚</p><p>å®ƒæ˜¯æœ€åŸºæœ¬é›†åˆæ“ä½œå‡½æ•°ä¹‹ä¸€ï¼›å®ƒæ‰€ä½œçš„å…¨éƒ¨äº‹æƒ…å°±æ˜¯åœ¨é›†åˆä¸­çš„æ¯ä¸ªå…ƒç´ ä¸Šéƒ½è°ƒç”¨ç»™å®šçš„ lambdaã€‚forEach å‡½æ•°æ¯”æ™®é€šfor å‡½æ•°å¾ªç¯æ›´ç®€æ´ï¼Œé™¤æ­¤ä¹‹å¤–æ²¡æœ‰å…¶å®ƒä¼˜åŠ¿ï¼Œæ‰€ä»¥å¹¶ä¸æ€¥äºæŠŠæ‰€æœ‰çš„å¾ªç¯æ›´æ”¹ä¸º  lambdaã€‚</p><pre><code class="kotlin">/*    åœ¨ lambda ä¸­ä½¿ç”¨å‡½æ•°å‚æ•°    */fun printMessageWithPrefix(message : Collection&lt;String&gt;,prefix:String){    messages.forEach{    // æ¥å— lambda ä½œä¸ºå®å‚æŒ‡å®šå¯¹æ¯ä¸ªå…ƒç´ æ“ä½œ        println(&quot;$prefix $it&quot;)    // åœ¨ lambda ä¸­è®¿é—® â€œprefixâ€    }}&gt;&gt;&gt; val errors = listOf(&quot;433 Forbidden&quot;,&quot;404 Not Found&quot;)&gt;&gt;&gt; printMessagesWithPrefix(errors,&quot;Error:&quot;)Error:403 ForbiddenError:404 Not Found</code></pre><blockquote><p>Kotlin å’Œ Javaçš„ä¸€ä¸ªæ˜¾è‘—åŒºåˆ«å°±æ˜¯ï¼Œåœ¨ Kotlin ä¸­ä¸ä¼šä»…é™äºè®¿é—® final å˜é‡ï¼Œåœ¨ lambda å†…éƒ¨ä¹Ÿå¯ä»¥ä¿®æ”¹å˜é‡ã€‚</p></blockquote><pre><code class="kotlin">/*    åœ¨lambdaä¸­æ”¹å˜å±€éƒ¨å˜é‡    */fun printProblemCounts(responeses:Collection&lt;String&gt;){    var clientErrors = 0    var serverErrors = 0    responeses.forEach{        if(it.startsWith(&quot;4&quot;)){            clientErrors ++        }else if(it.startsWith(&quot;5&quot;)){            serverErrors++        }    }    println(&quot;$clientErrors client error,$serverErrors server errors&quot;)}&gt;&gt;&gt; val responses = listOf(&quot;200 OK&quot;,&quot;418 I&#39;m a teapot&quot;,&quot;500 Internal Server Error&quot;)...&gt;&gt;&gt; printProblemCounts(responses)1 client errors,1 server errors</code></pre><blockquote><p>äº Java ä¸åŒï¼ŒKotlin å…è®¸åœ¨ lambda å†…éƒ¨è®¿é—®é final å˜é‡ç”šè‡³ä¿®æ”¹å®ƒä»¬ã€‚ä» lambda å†…è®¿é—®å¤–éƒ¨å˜é‡ï¼Œæˆ‘ä»¬ç§°è¿™ä¸ªå˜é‡è¢« <strong>lambdaæ•æ‰</strong>ï¼Œå¦‚åŒä¸Šè¿°çš„æ¡ˆä¾‹ä¸­çš„ prefixï¼ŒclientErrorsï¼ŒserverErrorsä¸€æ ·ã€‚</p></blockquote><p><strong>é»˜è®¤æƒ…å†µä¸‹ï¼Œå±€éƒ¨å˜é‡çš„å£°æ˜æœŸè¢«é™åˆ¶åœ¨å£°æ˜è¿™ä¸ªå˜é‡çš„å‡½æ•°ä¸­ã€‚ä½†æ˜¯å¦‚æœå®ƒè¢«lambdaæ•æ‰äº†ï¼Œä½¿ç”¨è¿™ä¸ªå˜é‡çš„ä»£ç å¯ä»¥è¢«å­˜å‚¨å¹¶ç¨åæ‰§è¡Œã€‚</strong></p><p><strong>å¦‚æœ lambda è¢«ç”¨ä½œ <em>äº‹ä»¶å¤„ç†å™¨</em> æˆ–è€…ç”¨åœ¨å…¶ä»– <em>å¼‚æ­¥æ‰§è¡Œ</em> çš„æƒ…å†µä¸‹ï¼Œå¯¹å±€éƒ¨å˜é‡çš„ä¿®æ”¹åªä¼šåœ¨ lambda æ‰§è¡Œçš„æ—¶å€™å‘ç”Ÿã€‚</strong></p><blockquote><p>åé¢æ¡ˆä¾‹</p><pre><code class="kotlin">fun tryToCountButtonClicks(button:Button):Int{    var clicks = 0    button.onClick{clicks++}    return clicks}</code></pre><p>è¿™ä¸ªå‡½æ•°å§‹ç»ˆè¿”å›0ã€‚å°½ç®¡ onClick å¤„ç†å™¨å¯ä»¥ä¿®æ”¹clicksçš„å€¼ï¼Œä½ å¹¶ä¸èƒ½è§‚å¯Ÿåˆ°å€¼å‘ç”Ÿäº†å˜åŒ–ï¼Œå› ä¸ºonClickå¤„ç†å™¨æ˜¯åœ¨å‡½æ•°è¿”å›ä¹‹åè°ƒç”¨çš„ã€‚<strong>è¿™ä¸ªå‡½æ•°æ­£ç¡®çš„å®ç°æ–¹æ³•éœ€è¦æŠŠç‚¹å‡»æ¬¡æ•°å­˜å‚¨åœ¨å‡½æ•°å¤–ä¾ç„¶å¯ä»¥è®¿é—®åˆ°çš„åœ°æ–¹â€“ä¾‹å¦‚ç±»çš„å±æ€§ï¼Œè€Œä¸æ˜¯å­˜å‚¨åœ¨å‡½æ•°çš„å±€éƒ¨å˜é‡ä¸­ã€‚</strong></p></blockquote><h3 id="5-1-5-æˆå‘˜å¼•ç”¨"><a href="#5-1-5-æˆå‘˜å¼•ç”¨" class="headerlink" title="5.1.5 æˆå‘˜å¼•ç”¨"></a>5.1.5 æˆå‘˜å¼•ç”¨</h3><p>â€‹    å¦‚æœæŠŠå‡½æ•°è½¬æ¢æˆä¸€ä¸ªå€¼ï¼Œä½ å°±å¯ä»¥ä¼ é€’å®ƒã€‚</p><pre><code class="kotlin">val getAge = Person::age    //å¼•ç”¨ age</code></pre><blockquote><p>è¿™ç§è¡¨è¾¾å¼ç§°ä¸º <strong>æˆå‘˜å¼•ç”¨</strong>ï¼Œå®ƒæä¾›äº†ç®€æ˜è¯­æ³•ï¼Œæ¥åˆ›å»ºä¸€ä¸ªè°ƒç”¨å•ä¸ªæ–¹æ³•æˆ–è€…è®¿é—®å•ä¸ªå±æ€§çš„å‡½æ•°å€¼ã€‚ <strong>åŒå†’å·æŠŠç±»åç§°ä¸ä½ è¦å¼•ç”¨çš„æˆå‘˜ï¼ˆä¸€ä¸ªæ–¹æ³•æˆ–è€…ä¸€ä¸ªå±æ€§ï¼‰åç§°éš”å¼€</strong></p><pre><code class="kotlin">Person::age //ç±»::æˆå‘˜</code></pre></blockquote><p>ç­‰ä»·äº </p><pre><code class="kotlin">val getAge = {person:Person -&gt;person.age}</code></pre><blockquote><p>æ³¨æ„ï¼Œä¸ç®¡ä½ å¼•ç”¨çš„æ˜¯å‡½æ•°è¿˜æ˜¯å±æ€§ï¼Œéƒ½ä¸è¦åœ¨æˆå‘˜å¼•ç”¨çš„åç§°åé¢æ·»åŠ æ‹¬å·ã€‚</p></blockquote><blockquote><p>æˆå‘˜å¼•ç”¨å’Œè°ƒç”¨è¯¥å‡½æ•°çš„lambdaå…·æœ‰ä¸€æ ·çš„ç±»å‹ï¼Œæ‰€ä»¥å¯ä»¥äº’æ¢ä½¿ç”¨ï¼š</p><pre><code class="kotlin">people.maxBy(Person::age)</code></pre><p>è¿˜å¯ä»¥å¼•ç”¨é¡¶å±‚å‡½æ•°</p><pre><code class="kotlin">fun salute() = println(&quot;Salute!&quot;)&gt;&gt;&gt; run(::salute)    // å¼•ç”¨é¡¶å±‚å‡½æ•°Salute!</code></pre><p>è¿™ç§æƒ…å†µä¸‹ï¼Œä½ çœç•¥äº†ç±»åç§°ï¼Œç›´æ¥ä»¥::å¼€å¤´ã€‚æˆå‘˜å¼•ç”¨::saluteè¢«å½“ä½œå®å‚ä¼ é€’ç»™åº“å‡½æ•°runï¼Œå®ƒä¼šè°ƒç”¨æƒ³å¯¹åº”çš„å‡½æ•°ã€‚</p><p>å¦‚æœ lambda è¦å§”æ‰˜ç»™ä¸€ä¸ªæ¥æ”¶å¤šä¸ªå‚æ•°çš„å‡½æ•°ï¼Œæä¾›æˆå‘˜å¼•ç”¨ä»£æ›¿å®ƒå°†ä¼šéå¸¸æ–¹ä¾¿</p><pre><code class="kotlin">val action = {person:Person,message:String -&gt;    sendEmail(person,massage)    //è¿™ä¸ªlambdaå§”æ‰˜sendEmailå‡½æ•°    }val nextAction = :: sendEmail    //ç”¨æˆå‘˜å¼•ç”¨ä»£æ›¿</code></pre><pre><code class="kotlin">/*    ç”¨æ„é€ æ–¹æ³•å¼•ç”¨å­˜å‚¨æˆ–è€…å»¶æœŸæ‰§è¡Œåˆ›å»ºç±»å®ä¾‹çš„åŠ¨ä½œã€‚ æ„é€ æ–¹æ³•å¼•ç”¨çš„å½¢å¼åœ¨åŒå†’å·åæŒ‡å®šç±»çš„åç§°ï¼š    */data class Person(val name:String,val age:Int)&gt;&gt;&gt; val createPerson = :ï¼šPerson    //åˆ›å»ºPersonå®ä¾‹çš„åŠ¨ä½œè¢«ä¿å­˜æˆäº†å€¼&gt;&gt;&gt; val p = createPerson(&quot;Alice&quot;,29)&gt;&gt;&gt; println(p)Person(name = Alice,age = 29)</code></pre><p><strong>å¯ä»¥ç”¨åŒæ ·çš„æ–¹æ³•å¼•ç”¨æ‰©å±•å‡½æ•°</strong></p><pre><code class="kotlin">fun Person.isAdult() = age &gt;= 21val predicate = Person::isAdult</code></pre><p>å°½ç®¡ isAdult ä¸åŒç±»çš„æˆå‘˜ï¼Œè¿˜æ˜¯å¯ä»¥é€šè¿‡å¼•ç”¨è®¿é—®å®ƒï¼Œè¿™ä¸ªè®¿é—®çš„æˆå‘˜æ²¡æœ‰ä¸¤æ ·ï¼šperson.isAdult()ã€‚</p></blockquote><p><strong>ç»‘å®šå¼•ç”¨</strong></p><blockquote><p>åœ¨ kotlin 1.0 ä¸­ ï¼Œå½“æ¥å—ä¸€ä¸ªç±»çš„æ–¹æ³•æˆ–è€…å±æ€§å¼•ç”¨æ—¶ï¼Œä½ å§‹ç»ˆéœ€è¦æä¾›ä¸€ä¸ªè¯¥ç±»çš„å®ä¾‹æ¥è°ƒç”¨è¿™ä¸ªå¼•ç”¨ã€‚Kotlin1.1è®¡åˆ’æ”¯æŒç»‘å®šæˆå‘˜å¼•ç”¨ï¼Œå®ƒå…è®¸ä½ ä½¿ç”¨æˆå‘˜å¼•ç”¨è¯­æ³•æ•æ‰ç‰¹å®šå®ä¾‹å¯¹è±¡çš„æ–¹æ³•å¼•ç”¨ã€‚</p><pre><code class="kotlin">&gt;&gt;&gt; val p = Person(&quot;Dmitry&quot;,34)&gt;&gt;&gt; val personAgeFunction = Person::age&gt;&gt;&gt; println(personsAgeFunction(p))34 &gt;&gt;&gt; val dmitrysAgeFunction = p::age&gt;&gt;&gt; println(dmitryAgeFunction())34</code></pre><p>æ³¨æ„ï¼ŒpersonsAgeFunctionæ˜¯ä¸€ä¸ªå½“å‚æ•°å‡½æ•°ï¼ˆè¿”å›ç»™å®šäº†çš„å¹´é¾„ï¼‰ï¼Œè€ŒdmitryAgeFunctionæ˜¯ä¸€ä¸ªé›¶å‚æ•°çš„å‡½æ•°ï¼ˆè¿”å›å·²ç»æŒ‡å®šå¥½çš„äººçš„å¹´é¾„ï¼‰ã€‚</p><p>åœ¨ Kotlin1.1ä¹‹å‰ï¼Œä½ éœ€è¦æ˜¾å¼åœ°å†™å‡º lambda{p.age},è€Œä¸æ˜¯ä½¿ç”¨ç»‘å®šæˆå‘˜å¼•ç”¨p::ageã€‚</p></blockquote><h2 id="5-2-é›†åˆçš„å‡½æ•°å¼API"><a href="#5-2-é›†åˆçš„å‡½æ•°å¼API" class="headerlink" title="5.2 é›†åˆçš„å‡½æ•°å¼API"></a>5.2 é›†åˆçš„å‡½æ•°å¼API</h2><p>æˆ‘ä»¬å…ˆä»filterå’Œmapè¿™ç±»å‡½æ•°åŠå®ƒä»¬èƒŒåçš„æ¦‚å¿µå¼€å§‹ã€‚</p><h3 id="5-2-1-åŸºç¡€ï¼šfilterå’Œmap"><a href="#5-2-1-åŸºç¡€ï¼šfilterå’Œmap" class="headerlink" title="5.2.1 åŸºç¡€ï¼šfilterå’Œmap"></a>5.2.1 åŸºç¡€ï¼šfilterå’Œmap</h3><p>filterå’Œmapå‡½æ•°å½¢æˆäº†é›†åˆæ“ä½œçš„åŸºç¡€ï¼Œå¾ˆå¤šé›†åˆæ“ä½œéƒ½æ˜¯å€ŸåŠ©å®ƒä»¬æ¥è¡¨è¾¾çš„ã€‚</p><p>é€šè¿‡ä¸¤ç§æ ·å­çš„ä¾‹å­å¸®åŠ©ä½ æ¥ç†è§£ï¼Œä¸€ä¸ªçº¯æ•°å­—å½¢å¼ä¸€ä¸ªä½¿ç”¨<strong>è‡ªå®šä¹‰</strong>çš„Personç±»æ¥å®ç°ã€‚</p><pre><code class="kotlin">data class Person(val name:String,val age:Int)</code></pre><p><strong>filterå‡½æ•°</strong></p><blockquote><p>éå†é›†åˆå¹¶é€‰å‡ºå¼•ç”¨ç»™å®š lambda æ¡ä»¶ åä¼šè¿”å›trueçš„é‚£äº›å…ƒç´ </p><pre><code class="kotlin">&gt;&gt;&gt; val list = listOf(1,2,3,4)&gt;&gt;&gt; println(list.filter{it%2==0})[2,4]</code></pre></blockquote><p><strong>mapå‡½æ•°</strong></p><blockquote><p>å¯¹é›†åˆä¸­æ¯ä¸ªå…ƒç´ åº”ç”¨ç»™å®šçš„å‡½æ•°å¹¶æŠŠç»“æœæ”¶é›†åˆ°ä¸€ä¸ªæ–°çš„é›†åˆä¸­ã€‚</p><p>æ ¹æ®lambdaå‚æ•°ä½œä¸ºåˆ¤æ–­ç”Ÿæˆæ–°çš„é›†åˆã€‚</p><pre><code class="kotlin">&gt;&gt;&gt; val list = listOf(1,2,3,4)&gt;&gt;&gt; println(list.map{it*it})[1,4,9,16]</code></pre></blockquote><blockquote><p>å¦‚æœç›´æƒ³æ‰“å°åå­—åˆ—è¡¨ï¼Œè€Œä¸æ˜¯å®Œæ•´ä¿¡æ¯ï¼Œå¯ä»¥ç”¨mapå˜æ¢åˆ—è¡¨ï¼š</p><pre><code class="kotlin">&gt;&gt;&gt; val people=listOf(Person(&quot;Alice&quot;,29),Person(&quot;Bob&quot;,31))&gt;&gt;&gt; println(people.map{it.name})[Alice,Bob]</code></pre><p>ä½¿ç”¨ <strong>æˆå‘˜å¼•ç”¨</strong> åŒæ ·å¯ä»¥</p><pre><code class="kotlin">people.map(Person::name)</code></pre></blockquote><blockquote><p>å½“éœ€è¦è·å¾—åˆ†ç»„ä¸­æœ€å¤§äººçš„åå­—æ—¶ã€‚</p><pre><code class="kotlin"> val maxAge = people.maxBy(Person::age).age people.filter{it.age == maxAge}</code></pre><p><strong>map åº”ç”¨è¿‡æ»¤å’Œå˜æ¢å‡½æ•°</strong></p><pre><code class="kotlin">&gt;&gt;&gt; val numbers = mapOf(0 to &quot;zero&quot;,1 to &quot;one&quot;)&gt;&gt;&gt; println(numbers.mapValues{it.value.toUppterCase()})    // å¯¹mapé›†åˆçš„å€¼è¿›è¡Œæ“ä½œ[0=ZERO,1=ONE]</code></pre><p>é”®å’Œå€¼åˆ†åˆ«ç”±å„è‡ªçš„å‡½æ•°æ¥å¤„ç†ã€‚<strong>filterKeyså’ŒmapKeysè¿‡æ»¤å’Œå˜æ¢mapçš„é”®ï¼Œè€Œå¦å¤–çš„filterValueså’ŒmapValuesè¿‡æ»¤å’Œå˜æ¢å¯¹åº”çš„å€¼ã€‚</strong></p></blockquote><h3 id="5-2-2-â€œallâ€â€œanyâ€â€œcountâ€å’Œâ€œfindâ€ï¼šå¯¹é›†åˆå¼•ç”¨åˆ¤æ–­å¼"><a href="#5-2-2-â€œallâ€â€œanyâ€â€œcountâ€å’Œâ€œfindâ€ï¼šå¯¹é›†åˆå¼•ç”¨åˆ¤æ–­å¼" class="headerlink" title="5.2.2 â€œallâ€â€œanyâ€â€œcountâ€å’Œâ€œfindâ€ï¼šå¯¹é›†åˆå¼•ç”¨åˆ¤æ–­å¼"></a>5.2.2 â€œallâ€â€œanyâ€â€œcountâ€å’Œâ€œfindâ€ï¼šå¯¹é›†åˆå¼•ç”¨åˆ¤æ–­å¼</h3><blockquote><p>è¿™äº›æ–¹æ³•ä½œç”¨</p><p>Kotlinä¸­ï¼Œå®ƒä»¬æ˜¯é€šè¿‡ all å’Œ any å‡½æ•°è¡¨è¾¾å¼çš„ï¼ˆæ£€æŸ¥é›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ æ˜¯å¦éƒ½ç¬¦åˆæŸä¸ªæ¡ä»¶ï¼‰ã€‚count å‡½æ•°æ£€æŸ¥ç”±å¤šå°‘å…ƒç´ æ»¡è¶³åˆ¤æ–­å¼ï¼Œè€Œfindå‡½æ•°è¿”å›ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„å…ƒç´ ã€‚</p><p>æ¡ˆä¾‹ï¼š</p><p>æ£€æŸ¥ä¸€ä¸ªäººæ˜¯å¦è¿˜æ²¡æœ‰åˆ°28å²ã€‚</p><pre><code class="kotlin">val canBeInClub27 = {p:Person -&gt; p.age &lt;=27}</code></pre><p>å¦‚æœæ˜¯<strong>æ‰€æœ‰å…ƒç´ éƒ½æ»¡è¶³åˆ¤æ–­å¼æ¡ä»¶</strong>çš„åº”è¯¥ä½¿ç”¨ all å‡½æ•°ã€‚ï¼ˆï¼‰</p><pre><code class="kotlin">&gt;&gt;&gt; val people = listOf(Person(&quot;Alice&quot;,27),Person(&quot;Bob&quot;,31))&gt;&gt;&gt; println(people.all(canBeInClub27))false</code></pre><p>å¦‚æœä½ <strong>æ£€æŸ¥é›†åˆä¸­è‡³å°‘å­˜åœ¨ä¸€ä¸ªåŒ¹é…çš„å…ƒç´ </strong>ï¼Œåˆ™ä½¿ç”¨ any å‡½æ•°</p><pre><code class="kotlin">&gt;&gt;&gt; println(people.any(canBeInClub27))</code></pre><p>true</p><p>å¦‚æœ<strong>ä½ æƒ³çŸ¥é“æœ‰å¤šå°‘å…ƒç´ æ»¡è¶³åˆ¤æ–­å¼</strong>ï¼Œä½¿ç”¨countï¼š</p><pre><code class="kotlin">&gt;&gt;&gt; val people = listOf(Person(&quot;Alice&quot;,27),Person(&quot;Bob&quot;,31))&gt;&gt;&gt; println(people.count(canBeInClub27))1</code></pre></blockquote><p><strong>ä½¿ç”¨æ­£ç¡®çš„å‡½æ•°å®Œæˆå·¥ä½œï¼šâ€countâ€ VS. â€œsizeâ€</strong></p><p>count æ–¹æ³•å®¹æ˜“è¢«é—å¿˜ï¼Œç„¶åé€šè¿‡è¿‡æ»¤é›†åˆä¹‹åå†å–å¤§å°æ¥å®ç°å®ƒï¼š</p><pre><code class="kotlin">&gt;&gt;&gt; println(people.filter(canBeInClub27).size)1</code></pre><p>å†è¿™ç§æƒ…å†µä¸‹ï¼Œä¸€ä¸ªé›†åˆä¸­é—´ä¼šè¢«åˆ›å»ºå¹¶ç”¨æ¥å­˜å‚¨æ‰€æœ‰æ»¡è¶³åˆ¤æ–­å¼çš„å…ƒç´ ã€‚</p><p>è€Œå¦ä¸€æ–¹é¢ï¼Œcount æ–¹æ³•åªæ˜¯æœ€ç»ˆåŒ¹é…å…ƒç´ çš„æ•°é‡ï¼Œä¸å…³å¿ƒå…ƒç´ æœ¬èº«ï¼Œæ‰€ä»¥æ›´é«˜æ•ˆã€‚</p><blockquote><p><strong>è¦æ‰¾åˆ°ä¸€ä¸ªæ»¡è¶³åˆ¤æ–­å¼çš„å…ƒç´ ï¼Œä½¿ç”¨ find å‡½æ•°</strong></p><pre><code class="kotlin">&gt;&gt;&gt; val people = listOf(Person(&quot;Alice&quot;,27),Person(&quot;Bob&quot;,31))&gt;&gt;&gt; println(people.find(canBeInClub27))Person[name = Alice,age = 27]</code></pre><p>å­˜åœ¨å¤šä¸ªèƒ½å¤ŸåŒ¹é…çš„å…ƒç´ å°±è¿”å›å…¶ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ ï¼šæˆ–è€…è¿”å› nullï¼Œå¦‚æœæ²¡æœ‰ä¸€ä¸ªå…ƒç´ èƒ½æ»¡è¶³åˆ¤æ–­å¼ã€‚findè¿˜æœ‰ä¸€ä¸ªåŒä¹‰æ–¹æ³• firstOrNullï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•æ›´åŠ æ¸…æ¥šçš„è¡¨è¾¾ä½ çš„æ„å›¾ã€‚</p></blockquote><h3 id="5-2-3-groupByï¼šæŠŠåˆ—è¡¨è½¬æ¢æˆåˆ†ç»„çš„map"><a href="#5-2-3-groupByï¼šæŠŠåˆ—è¡¨è½¬æ¢æˆåˆ†ç»„çš„map" class="headerlink" title="5.2.3 groupByï¼šæŠŠåˆ—è¡¨è½¬æ¢æˆåˆ†ç»„çš„map"></a>5.2.3 groupByï¼šæŠŠåˆ—è¡¨è½¬æ¢æˆåˆ†ç»„çš„map</h3><blockquote><p><strong>å½“ä½ æƒ³æŠŠäººæŒ‰ç…§å¹´é¾„åˆ†ç»„ï¼Œç›¸åŒå¹´é¾„çš„äººæ”¾åœ¨ä¸€ç»„ã€‚</strong></p><p>groupBy: æŒ‰ç…§è¡¨è¾¾å¼å°†å‡ ä¸ªè¿›è¡Œåˆ†ç»„å¹¶è¿”å›ä¸€ä¸ª map é›†åˆ</p><pre><code class="kotlin">&gt;&gt;&gt; val people = listOf(Perosn(&quot;Alice&quot;,31),Perosn(&quot;Bob&quot;,29),Person(&quot;Carol&quot;,31))&gt;&gt;&gt; println(people.groupBy{it.age})</code></pre><p>è¿”å›ç»“æœ mapï¼Œæ˜¯å…ƒç´ åˆ†ç»„ä¾æ®çš„é”®ï¼ˆè¿™ä¸ªä¾‹å­ä¸­æ˜¯ageï¼‰å’Œå…ƒç´ åˆ†ç»„ï¼ˆpersonsï¼‰ä¹‹é—´æ˜ å°„</p><pre><code class="kotlin">{29 = [Person(name = Bob,age = 29)],31 = [Person(name = Alice,age = 31),        Person(name = Carol,age = 31)]        }</code></pre><p>æ¯ä¸ªåˆ†ç»„éƒ½æ˜¯å­˜å‚¨åœ¨ä¸€ä¸ªåˆ—è¡¨ä¸­ï¼Œ<strong>ç»“æœçš„ç±»å‹å°±æ˜¯Map&lt;Int,List<Person>&gt;</strong>ã€‚</p><p>å¯ä»¥ä½¿ç”¨åƒ mapKeys å’Œ mapValues è¿™ä¹Ÿçš„å‡½æ•°å¯¹è¿™ä¸ªmapåšè¿›ä¸€æ­¥çš„ä¿®æ”¹ã€‚</p></blockquote><blockquote><p><strong>ä½¿ç”¨æˆå‘˜å¼•ç”¨æŠŠå­—ç¬¦ä¸²æŒ‰ç…§é¦–å­—æ¯åˆ†ç»„ï¼š</strong></p><pre><code class="kotlin">&gt;&gt;&gt; val list = listOf(&quot;a&quot;,&quot;ab&quot;,b)&gt;&gt;&gt; println(list.groupBy(String::first)){a = [a,ab], b = [b]}</code></pre><p>firstå¹¶ä¸æ˜¯Stringç±»çš„æˆå‘˜ï¼Œè€Œæ˜¯ä¸€ä¸ªæ‰©å±•ã€‚ç„¶è€Œï¼Œå¯ä»¥æŠŠå®ƒå½“ä½œæˆå‘˜å¼•ç”¨è®¿é—®ã€‚</p></blockquote><h3 id="5-2-4-flatMap-å’Œ-flattenï¼šå¤„ç†åµŒå¥—é›†åˆå’Œå…ƒç´ "><a href="#5-2-4-flatMap-å’Œ-flattenï¼šå¤„ç†åµŒå¥—é›†åˆå’Œå…ƒç´ " class="headerlink" title="5.2.4 flatMap å’Œ flattenï¼šå¤„ç†åµŒå¥—é›†åˆå’Œå…ƒç´ "></a>5.2.4 flatMap å’Œ flattenï¼šå¤„ç†åµŒå¥—é›†åˆå’Œå…ƒç´ </h3><p><strong>ä¾‹å­</strong></p><blockquote><p>å‡è®¾ä½ æœ‰ä¸€å †è—ä¹¦ï¼Œä½¿ç”¨Bookè¡¨ç¤ºï¼š</p><pre><code class="kotlin">class Book(val title:String,val authors:List&lt;String&gt;)</code></pre><p>authors ï¼šä¿å­˜ä¹¦çš„æ‰€æœ‰ä½œè€…ã€‚</p><p>ç»Ÿè®¡å‡ºå›¾ä¹¦é¦†ä¸­æ‰€æœ‰ä½œè€…çš„setï¼›</p><pre><code class="kotlin">books.flatMap{it.authros}.toSet()    //åŒ…å«æ’°å†™ â€œbooksâ€ é›†åˆä¸­ä¹¦ç±çš„æ‰€æœ‰ä½œè€… set</code></pre><p>flatMap:ä½œç”¨ï¼Œ1.é¦–å…ˆæ ¹æ®ä½œä¸ºå®å‚ç»™å®šçš„å‡½æ•°å¯¹é›†åˆä¸­çš„æ¯ä¸ªå…ƒç´ åšè½¬æ¢ï¼ˆæˆ–è€…è¯´æ˜ å°„ï¼‰ï¼Œç„¶åæŠŠå¤šä¸ªåˆ—è¡¨åˆå¹¶ï¼ˆæˆ–è€…è¯´å¹³é“ºï¼‰æˆä¸€ä¸ªåˆ—è¡¨ã€‚</p></blockquote><blockquote><p>è¯´æ˜ï¼š</p><pre><code class="kotlin">&gt;&gt;&gt; val strings = listOf(&quot;abc&quot;,&quot;def&quot;)&gt;&gt;&gt; pritnln(strings.flatMap{it.toList()})[a,b,c,d,e,f]</code></pre><p>å­—ç¬¦ä¸²ä¸Šçš„toListå‡½æ•°æŠŠå®ƒè½¬æ¢æˆå­—ç¬¦åˆ—è¡¨ã€‚</p><p>ä½¿ç”¨ map å‡½æ•°ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªå­—ç¬¦åˆ—è¡¨çš„åˆ—è¡¨ã€‚</p><p>flatMap å‡½æ•°ï¼šæ‰§è¡Œåé¢æ“ä½œï¼Œå¹¶è¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰å…ƒç´ ï¼ˆå­—ç¬¦ï¼‰çš„åˆ—è¡¨</p><p>å›åˆ°ä¾‹å­ä¸­ï¼š</p><pre><code class="kotlin">&gt;&gt;&gt; val books = listOf(Book(&quot;Thursday Next&quot;,listOf(&quot;Jasper Fforde&quot;)),                        Book(&quot;Mort&quot;,listOf(&quot;Terry Pratchett&quot;)),                        Book(&quot;Good Omens&quot;,listOf(&quot;Terry Pratchett&quot;,                                                &quot;Neil Gaiman&quot;)))&gt;&gt;&gt; println(books.flatMap{it.authors}.toSet)                                                [Jasper Fforde,Terry Pratchett,Neil Gaiman]</code></pre><p>book.authors æ˜¯å­˜å‚¨äº†å¤šä¸ªä½œè€…çš„é›†åˆã€‚flatMap å‡½æ•°æŠŠæ‰€æœ‰ä¹¦ç±çš„ä½œè€…åˆå¹¶æˆå˜é¢‘çš„åˆ—è¡¨ã€‚</p><p><strong>toSetè°ƒç”¨ç§»é™¤äº†ç»“æœé›†åˆä¸­çš„æ‰€æœ‰é‡å¤å…ƒç´ ã€‚</strong></p><p>æ‰€ä»¥ Terry Pratchett åœ¨è¾“å‡ºä¸­åªå‡ºç°äº†ä¸€æ¬¡ã€‚</p><p><strong>å¦‚æœä½ åªéœ€è¦å¹³é“ºä¸€ä¸ªé›†åˆï¼Œå¯ä»¥ä½¿ç”¨ flatten å‡½æ•°ï¼šlistOfLists.flatten</strong></p></blockquote><h2 id="5-3-æƒ°æ€§é›†åˆæ“ä½œï¼šåºåˆ—"><a href="#5-3-æƒ°æ€§é›†åˆæ“ä½œï¼šåºåˆ—" class="headerlink" title="5.3 æƒ°æ€§é›†åˆæ“ä½œï¼šåºåˆ—"></a>5.3 æƒ°æ€§é›†åˆæ“ä½œï¼šåºåˆ—</h2><blockquote><p>ä½ çœ‹åˆ°äº†å…³äºè®¸å¤šé“¾å¼è°ƒç”¨çš„ä¾‹å­ï¼Œä¾‹å¦‚ map å’Œ filterã€‚è¿™äº›å‡½æ•°ä¼šåŠæ—©çš„åˆ›å»ºä¸­é—´é›†åˆï¼Œä¹Ÿå°±æ˜¯è¯´æ¯ä¸€æ­¥çš„ä¸­é—´ç»“æœéƒ½è¢«å­˜å‚¨åœ¨ä¸€ä¸ªä¸´æ—¶åˆ—è¡¨ã€‚</p><pre><code class="kotlin">people.map(Person::name).filter{it.startsWith(&quot;A&quot;)}</code></pre><p>Kotlin æ ‡å‡†åº“å‚è€ƒæ–‡æ¡£è¯´æ˜ï¼Œfilter å’Œ map éƒ½ä¼šè¿”å›ä¸€ä¸ªåˆ—è¡¨ã€‚è¿™æ„å‘³è¿™ä¸Šé¢çš„ä¾‹å­ä¸­çš„é“¾å¼è°ƒç”¨ä¼šåˆ›å»ºä¸¤ä¸ªåˆ—è¡¨ï¼šä¸€ä¸ªä¿å­˜filterå‡½æ•°çš„ç»“æœï¼Œå¦ä¸€ä¸ªä¿å­˜ mapå‡½æ•°çš„ç»“æœã€‚å¦‚æœæºåˆ—è¡¨åªæœ‰ä¸¤ä¸ªå…ƒç´ ï¼Œè¿™ä¸æ˜¯ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯å¦‚æœæœ‰ä¸€ç™¾ä¸‡ä¸ªå…ƒç´ ï¼Œï¼ˆé“¾å¼ï¼‰è°ƒç”¨å°±ä¼šå˜å¾—ååˆ†ä½æ•ˆã€‚</p><p>ä¸ºäº†æé«˜æ•ˆç‡å¯ä»¥å°†æ“ä½œå˜æ¢æˆåºåˆ—ï¼Œè€Œä¸æ˜¯ä½¿ç”¨é›†åˆï¼š</p><pre><code class="kotlin">people.asSequence()    //æŠŠåˆå§‹é›†åˆè½¬æ¢æˆåºåˆ—      .map(Person::name)          .filter{it.startsWith(&quot;A&quot;)}    //ç³»åˆ—æ”¯æŒå’Œé›†åˆä¸€æ ·çš„API      .toList()    // æŠŠç»“æœåºåˆ—è½¬æ¢ä¼šåˆ—è¡¨</code></pre><p>è¿™ä¸ªä¾‹å­æ²¡æœ‰åˆ›å»ºä»»ä½•ä¸€ä¸ªå­˜å‚¨å…ƒç´ çš„ï¼Œæ‰€ä»¥å…ƒç´ æ•°é‡å·¨å¤§çš„æƒ…å†µä¸‹æ€§èƒ½æ˜¾è‘—æå‡ã€‚</p><p>Kotlin æƒ°æ€§é›†åˆæ“ä½œçš„å…¥å£å°±æ˜¯ Sequence æ¥å£ã€‚è¿™ä¸ªæ¥å£è¡¨ç¤ºå¯ä»¥è¯¸è‘›åˆ—ä¸¾çš„å…ƒç´ åºåˆ—ã€‚Sequence åªæä¾›äº†ä¸€ä¸ªæ–¹æ³•ï¼Œiteratorï¼Œç”¨æ¥ä»åºåˆ—ä¸­è·å–å€¼</p></blockquote><p>ä¼˜åŠ¿</p><blockquote><p>Sequenceæ¥å£çš„å¼ºå¤§ä¹‹å¤„åœ¨äºå…¶æ“ä½œçš„å®ç°æ–¹å¼ã€‚åºåˆ—ä¸­çš„å…ƒç´ æ±‚å€¼æ˜¯æƒ°æ€§çš„ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨åºåˆ—æ›´é«˜æ•ˆåœ°å¯¹é›†åˆå…ƒç´ æ‰§è¡Œé“¾å¼æ“ä½œï¼Œè€Œä¸éœ€è¦åˆ›å»ºé¢å¤–çš„é›†åˆæ¥ä¿å­˜è¿‡ç¨‹ä¸­äº§ç”Ÿçš„æ€»ç»“ç»“æœã€‚</p></blockquote><p>ä¸ºä»€ä¹ˆéœ€è¦æŠŠåºåˆ—è½¬æ¢å›é›†åˆï¼ŸæŠŠåºåˆ—ä»£æ›¿é›†åˆä¸æ˜¯æ›´æ–¹ä¾¿å—ï¼Ÿç‰¹åˆ«æ˜¯å®ƒçš„è¿™äº›ä¼˜ç‚¹ã€‚</p><blockquote><p>å¤§å¤šæ•°æ˜¯è¿™æ ·çš„ã€‚å¦‚æœä½ éœ€è¦è¿­ä»£åºåˆ—ä¸­çš„å…ƒç´ ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚è€Œè¦ä½¿ç”¨å…¶ä»–APIæ–¹æ³•ï¼Œä¾‹å¦‚ä¸‹æ ‡è®¿é—®å…ƒç´ ï¼Œé‚£ä¹ˆä½ éœ€è¦å°†åºåˆ—è½¬æ¢æˆåˆ—è¡¨ã€‚</p></blockquote><blockquote><p>é€šå¸¸ï¼Œå¯¹ä¸€ä¸ªå¤§å‹é›†åˆæ‰§è¡Œé“¾å¼æ“ä½œæ—¶è¦ä½¿ç”¨åºåˆ—ã€‚åœ¨åé¢çš„ç« èŠ‚ä¸­ç»§ç»­è®¨è®ºKotlinå¸¸è§„é›†åˆçš„åŠæ—©æ“ä½œé«˜æ•ˆçš„åŸå› ï¼Œå°½ç®¡å®ƒä¼šåˆ›å»ºä¸­é—´é›†åˆã€‚å½“é›†åˆæ‹¥æœ‰æ•°é‡å·¨å¤§çš„å…ƒç´ ï¼Œå…ƒç´ ä¸ºä¸­é—´ç»“æœè¿›è¡Œé‡æ–°åˆ†é…å¼€é”€å·¨å¤§ï¼Œæ‰€ä»¥æƒ°æ€§æ±‚å€¼æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚</p></blockquote><h3 id="5-3-1-æ‰§è¡Œåºåˆ—æ“ä½œï¼šä¸­é—´å’Œæœ«ç«¯æ“ä½œ"><a href="#5-3-1-æ‰§è¡Œåºåˆ—æ“ä½œï¼šä¸­é—´å’Œæœ«ç«¯æ“ä½œ" class="headerlink" title="5.3.1 æ‰§è¡Œåºåˆ—æ“ä½œï¼šä¸­é—´å’Œæœ«ç«¯æ“ä½œ"></a>5.3.1 æ‰§è¡Œåºåˆ—æ“ä½œï¼šä¸­é—´å’Œæœ«ç«¯æ“ä½œ</h3><p><strong>åºåˆ—æ“ä½œå…±åˆ†ä¸¤ç§</strong>ï¼š</p><blockquote><p>ä¸­é—´å’Œæœ«ç«¯ã€‚</p><p>ä¸€æ¬¡ä¸­é—´æ“ä½œè¿”å›çš„æ˜¯å¦ä¸€ä¸ªåºåˆ—ï¼Œè¿™ä¸ªåºåˆ—çŸ¥é“å¦‚ä½•å˜æ¢åŸå§‹åºåˆ—ä¸­çš„å…ƒç´ ã€‚</p><p>è€Œæœ«ç«¯æ“ä½œè¿”å›çš„æ˜¯ä¸€ä¸ªç»“æœï¼Œè¿™ä¸ªç»“æœå¯èƒ½æ˜¯é›†åˆã€å…ƒç´ ã€æ•°å­—ï¼Œæˆ–è€…å…¶ä»–çš„åˆå§‹é›†åˆçš„å˜æ¢åºåˆ—ä¸­è·å¾—çš„ä»»æ„å¯¹è±¡ã€‚</p><pre><code class="kotlin">sequence.map{...}.filter{...}//ä¸­é—´æ“ä½œ        .toList()//æœ«ç«¯æ“ä½œ</code></pre></blockquote><p><strong>æ²¡æœ‰æœ«ç«¯æ“ä½œçš„ä¾‹å­ï¼š</strong></p><pre><code class="kotlin">&gt;&gt;&gt; listOf(1,2,3,4).asSequence()    //åºåˆ—åŒ–...        .map{print(&quot;map($it)&quot;);it*it}    // è½¬æ¢æˆmapé›†åˆå¹¶æ“ä½œå®ƒ...        .filter{ print(&quot;filter($it)&quot;);it%2==0}    //è°ƒç”¨å¯¹è±¡ï¼Œç„¶åæ ¹æ®æ¡ä»¶è¿‡æ»¤</code></pre><blockquote><p>æ‰§è¡Œè¿™æ®µä»£ç å¹¶ä¸ä¼šåœ¨æ§åˆ¶å°ä¸Šè¾“å‡ºä»»ä½•å†…å®¹ã€‚è¿™æ„å‘³ç€mapå’Œfilterå˜æ¢è¢«å»¶æœŸäº†ï¼Œå®ƒä»¬åªæœ‰åœ¨è·å–ç»“æœçš„æ˜¯å¦æ‰ä¼šè¢«åº”ç”¨(å³æœ«ç«¯æ“ä½œè¢«è°ƒç”¨çš„æ—¶å€™)ï¼š</p><pre><code class="kotlin">&gt;&gt;&gt;listOf(1,2,3,4).asSequence()...                .map{print(&quot;map($it);it*it&quot;)}...                .filter{print(filter(&quot;$it&quot;);it%2 == 0)}...                .toList()map(1) filter(1) map(2) filter(4) map(3) filter(9) map(4) filter(16)</code></pre><p>æœ«ç«¯æ“ä½œè§¦å‘æ‰§è¡Œäº†æ‰€æœ‰çš„å»¶æœŸè®¡ç®—ã€‚</p></blockquote><p><strong>è®¡ç®—æ‰§è¡Œçš„é¡ºåºã€‚</strong></p><blockquote><p>ä¸€ä¸ªç¬¨åŠæ³•å®åœ¨æ¯ä¸ªå…ƒç´ ä¸Šè°ƒç”¨mapå‡½æ•°ï¼Œç„¶åå†ç»“æœåºåˆ—çš„æ¯ä¸ªå…ƒç´ ä¸Šå†è°ƒç”¨filterå‡½æ•°ã€‚</p><p>mapå’Œfilterå¯¹é›†åˆå°±æ˜¯è¿™æ ·åšçš„ï¼Œè€Œåºåˆ—ä¸ä¸€æ ·ã€‚å¯¹åºåˆ—æ¥è¯´ï¼Œæ‰€æœ‰æ“ä½œæ˜¯æŒ‰åºåˆ—åº”ç”¨å†æ¯ä¸ªå…ƒç´ ä¸Šï¼šå¤„ç†å®Œç¬¬ä¸€ä¸ªå…ƒç´ ï¼ˆå…ˆæ˜ å°„å†è¿‡æ»¤ï¼‰ï¼Œç„¶åå®Œæˆç¬¬äºŒä¸ªå…ƒç´ çš„å¤„ç†ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p><p><strong>è¿™ç§æ–¹æ³•æ„å‘³ç€éƒ¨åˆ†å…ƒç´ æ ¹æœ¬ä¸ä¼šå‘ç”Ÿä»»ä½•è½¬æ¢</strong></p><p>å¦‚æœåœ¨è½®åˆ°å®ƒä»¬ä¹‹å‰å°±å·²ç»å–å¾—äº†ç»“æœã€‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªmapå’Œfindçš„ä¾‹å­ã€‚é¦–å…ˆä¸€ä¸ªæ•°å­—æ˜ å°„æˆå®ƒçš„å¹³æ–¹ï¼Œç„¶åæ‰¾åˆ°ç¬¬ä¸€ä¸ªæ¯”æ•°å­—3å¤§çš„æ¡ç›®ï¼š</p><pre><code class="kotlin">&gt;&gt;&gt; println(listOf(1,2,3,4).asSequence()                           .map{it*it}                           .find{it &gt; 3}                           )4</code></pre><p>å¦‚æœåŒæ ·çš„æ“ä½œè¢«åº”ç”¨åœ¨é›†åˆè€Œä¸æ˜¯åºåˆ—ä¸Šæ—¶ï¼Œé‚£ä¹ˆ map çš„ç»“æœé¦–å…ˆè¢«æ±‚å‡ºæ¥ã€‚å³å˜æ¢åˆå§‹é›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚ç¬¬äºŒæ­¥ï¼Œä¸­é—´é›†åˆä¸­æ»¡è¶³åˆ¤æ–­å¼çš„ä¸€ä¸ªå…ƒç´ ä¼šè¢«æ‰¾å‡ºæ¥ã€‚è€Œå¯¹äºåºåˆ—æ¥è¯´ï¼Œæƒ°æ€§æ–¹æ³•æ„å‘³è¿™ä½ å¯ä»¥è·³è¿‡å¤„ç†éƒ¨åˆ†å…ƒç´ ã€‚å›¾ 5.8 é˜æ˜äº† è¿™æ®µä»£ç ä¸¤ç§æ±‚å€¼æ–¹æ³•ä¹‹é—´çš„åŒºåˆ«ï¼Œä¸€ç§æ˜¯åŠæ—©æ±‚å€¼ï¼ˆä½¿ç”¨é›†åˆï¼‰ï¼Œä¸€ç§æ˜¯æƒ°æ€§æ±‚å€¼ï¼ˆä½¿ç”¨åºåˆ—ï¼‰ã€‚</p></blockquote><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20210402111938.png" alt="åŠæ—©æ±‚å€¼åœ¨æ•´ä¸ªé›†åˆä¸Šæ‰§è¡Œæ¯ä¸ªæ“ä½œï¼›æƒ°æ€§æ±‚å€¼åˆ™é€ä¸ªå¤„ç†å…ƒç´ "></p><p><strong>åœ¨é›†åˆä¸Šæ‰§è¡Œæ“ä½œçš„é¡ºåºä¹Ÿä¼šå½±å“æ€§èƒ½ã€‚</strong></p><p>å‡è®¾ä½ æœ‰ä¸€ä¸ªäººçš„é›†åˆï¼Œæƒ³è¦æ‰“å°é›†åˆä¸­é‚£äº›é•¿åº¦å°äºæŸä¸ªé™åˆ¶çš„äººåã€‚</p><p>è¿™æ—¶ä½ éœ€è¦åšä¸¤ä»¶äº‹ï¼šæŠŠæ¯ä¸ªäººæ˜ å°„æˆä»–ä»¬çš„åå­—ï¼Œç„¶åè¿‡æ»¤æ‰å…¶ä¸­é‚£äº›ä¸å¤ŸçŸ­çš„åå­—ã€‚</p><p><strong>è¿™ç§æƒ…å†µå¯ä»¥ç”¨ä»»ä½•é¡ºåºåº”ç”¨mapå’Œfilteræ“ä½œã€‚ä¸¤ç§é¡ºåºå¾—åˆ°çš„ç»“æœæ˜¯ä¸€æ ·çš„å¦‚ä¸‹</strong></p><pre><code class="kotlin">&gt;&gt;&gt; val people = listOf(Person(&quot;Alice&quot;,29),Person(&quot;Bob&quot;,31),Person(&quot;Charles&quot;,31),Person(&quot;Dan&quot;,21))&gt;&gt;&gt; println(people.asSequence().map(Person::name).filter{it.length &lt; 4}.toList()) // å…ˆ â€œmapâ€ å â€œfilterâ€[Bob,Dan]&gt;&gt;&gt; println(people.asSequence().filter{it.name.length &lt; 4}...            .map(Person::name).tolist())    // å…ˆâ€œfilterâ€å map[Bob,Dan]</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20210402103856.png" alt="å…ˆåº”ç”¨filteræœ‰åŠ©äºå‡å°‘å˜æ¢çš„æ€»æ¬¡æ•°"></p><blockquote><p>å¦‚æœ filter åœ¨å¼ºï¼Œä¸é€‚åˆçš„å…ƒç´ ä¼šè¢«å°½æ—©åœ°è¿‡æ»¤æ‰ä¸”ä¸ä¼šå‘ç”Ÿå˜æ¢ã€‚</p></blockquote><h3 id="5-3-2-åˆ›å»ºåºåˆ—"><a href="#5-3-2-åˆ›å»ºåºåˆ—" class="headerlink" title="5.3.2 åˆ›å»ºåºåˆ—"></a>5.3.2 åˆ›å»ºåºåˆ—</h3><blockquote><p>asSequence()ï¼šå‡½æ•°ç”¨æ¥åœ¨é›†åˆä¸­åˆ›å»ºåºåˆ—</p><p>generateSequence()å‡½æ•°ï¼šç»™å®šåºåˆ—ä¸­çš„å‰ä¸€ä¸ªå…ƒç´ ï¼Œè¿™ä¸ªå‡½æ•°ä¼šè®¡ç®—å‡ºä¸‹ä¸€ä¸ªå…ƒç´ ã€‚</p><p><strong>æ¡ˆä¾‹ ä½¿ç”¨ generateSequence è®¡ç®— 100 ä»¥å†…æ‰€æœ‰çš„è‡ªç„¶æ•°ä¹‹å’Œã€‚</strong></p><pre><code>&gt;&gt;&gt; val naturalNumbers = generateSequence(0) {it +1}&gt;&gt;&gt; val numbersTo100 = naturalNumbers.takeWhile{it &lt;= 100}&gt;&gt;&gt; println(numbersTo100.sum())    //å½“è·å¾—ç»“æœ â€œsumâ€ æ—¶ï¼Œæ‰€æœ‰è¢«æ¨è¿Ÿçš„æ“ä½œéƒ½è¢«æ‰§è¡Œ5050</code></pre><p>ä¾‹å­ä¸­ naturalNumbers å’Œ numbersTo100éƒ½æœ‰å»¶æœŸæ“ä½œåºåˆ—ã€‚è¿™äº›åºåˆ—ä¸­çš„å®é™…æ•°å­—çŸ¥é“ä½ è°ƒç”¨æœ«ç«¯æ“ä½œçš„æ—¶å€™æ‰ä¼šæ±‚å€¼ã€‚ï¼ˆsumï¼‰</p></blockquote><p><strong>åˆ›å»ºçˆ¶ç›®å½•çš„åºåˆ—</strong></p><blockquote><p>å¦‚æœå…ƒç´ çš„çˆ¶å…ƒç´ å’Œå®ƒçš„ç±»å‹ç›¸åŒï¼ˆæ¯”å¦‚äººç±»æˆ–è€…javaæ–‡ä»¶ï¼‰ï¼Œä½ å¯èƒ½ä¼šå¯¹å®ƒçš„æ‰€æœ‰ç¥–å…ˆç»„æˆçš„åºåˆ—çš„ç‰¹è´¨æ„Ÿå…´è¶£ã€‚ä¸‹åˆ—è¿™ä¸ªä¾‹å­å¯ä»¥æŸ¥è¯¢æ˜¯å¦æ”¾åœ¨éšè—ç›®å½•ä¸­ï¼Œé€šè¿‡åˆ›å»ºä¸€ä¸ªå…¶çˆ¶ç›®å½•çš„åºåˆ—å¹¶æ£€æŸ¥æ¯ä¸ªç›®å½•çš„å±æ€§æ¥å®ç°ã€‚</p><pre><code class="kotlin">/*    åˆ›å»ºå¹¶ä½¿ç”¨çˆ¶ç›®å½•çš„åºåˆ—    */fun File.isInsideHiddenDirectory() =         generateSequence(this){it.parentFile}.any{it.isHidden}    // æŸ¥è¯¢æ–‡ä»¶æ˜¯å¦æ”¾åœ¨éšè—ç›®å½•ä¸­ã€‚&gt;&gt;&gt; val file = File(&quot;/Users/svtk/.HiddenDir/a.txt&quot;)        &gt;&gt;&gt; println(file.IsInsideHiddenDirectory())true</code></pre><p>ä½ ç”Ÿæˆäº†ä¸€ä¸ªåºåˆ—ï¼Œé€šè¿‡æä¾›ç¬¬ä¸€ä¸ªå…ƒç´ å’Œè·å–æ¯ä¸ªåç»­å…ƒç´ çš„æ–¹å¼æ¥å®ç°ã€‚å¦‚æœæŠŠanyæ¢æˆfindï¼Œä½ è¿˜å¯ä»¥å¾—åˆ°ä½ æƒ³è¦çš„é‚£ä¸ªç›®å½•ï¼ˆå¯¹è±¡ï¼‰ã€‚æ³¨æ„ï¼Œä½¿ç”¨åºåˆ—å…è®¸ä½ æ‰¾åˆ°éœ€è¦çš„ç›®å½•ä¹‹åç«‹å³åœæ­¢éå†çˆ¶ç›®å½•ã€‚</p></blockquote><h2 id="5-4-ä½¿ç”¨-Java-å‡½æ•°å¼æ¥å£"><a href="#5-4-ä½¿ç”¨-Java-å‡½æ•°å¼æ¥å£" class="headerlink" title="5.4  ä½¿ç”¨ Java å‡½æ•°å¼æ¥å£"></a>5.4  ä½¿ç”¨ Java å‡½æ•°å¼æ¥å£</h2><p>Kotlin çš„ lambda å¯ä»¥å’Œ Java API äº’æ“ä½œã€‚</p><p>åœ¨æœ¬ç« èŠ‚å¼€å¤´å¤„ï¼Œæœ‰çœ‹è¿‡ä¸€ä¸ªæŠŠ lambda ä¼ é€’ç»™ Java æ–¹æ³•çš„ä¾‹å­ï¼š</p><pre><code class="kotlin">button.setOnClickListener{/*    ç‚¹å‡»ä¹‹åçš„åŠ¨ä½œ     */}    //å¤ä¹  ä½œä¸ºæ–¹æ³•çš„æœ€åä¸€ä¸ªå‚æ•°å¯ä»¥çœç•¥()ã€‚æŠŠlambdaä½œä¸ºå®å‚ä¼ é€’ã€‚</code></pre><p>Botton é€šè¿‡æ¥æ”¶ç±»å‹ä¸ºOnClickListenerçš„å®å‚çš„setOnClickListeneræ–¹æ³•ç»™æŒ‰é’®è®¾ç½®ä¸€ä¸ªæ–°çš„ç›‘å¬å™¨ï¼š</p><pre><code class="java">/*    Java    */public class Button{    public void setOnClickListener(OnClickListener l){...}}</code></pre><p>OnClickListener æ¥å£å£°æ˜äº†ä¸€ä¸ªæ–¹æ³•ï¼ŒonClickï¼š</p><blockquote><p><em>æ¥å£å¯ä»¥è¢«å®ç°ï¼Œä½†ä¸èƒ½è¢«å®ä¾‹åŒ–ã€‚</em></p></blockquote><pre><code class="java">public interface OnClickListener{    void onClick(View v)}</code></pre><p>åœ¨Java 8 ä¹‹å‰ä½ ä¸å¾—ä¸åˆ›å»ºä¸€ä¸ªåŒ¿åç±»çš„å®ä¾‹æ¥ä½œä¸ºå®å‚ä¼ é€’ç»™ setOnClickListeneræ–¹æ³•ï¼š</p><pre><code class="java">button.setOnClickListener(new OnClickListener(){    @Override    public void onClick(View v){        ...    }})</code></pre><p>åœ¨ kotlin ä¸­ å¯ä»¥ä¼ é€’ä¸€ä¸ª lambdaï¼Œä»£æ›¿è¿™ä¸ªå®ä¾‹ï¼š</p><pre><code class="kotlin">button.setOnClickListener{view -&gt; ...}</code></pre><p>lambda ç”¨æ¥å®ç° OnClickListenerï¼Œå®ƒæœ‰ä¸€ä¸ªç±»å‹ä¸ºViewçš„å‚æ•°ï¼Œå’ŒonClickä¸€æ ·ã€‚</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20210402121803.png" alt="Lmabdaçš„å‚æ•°å’Œæ–¹æ³•å‚æ•°å¯¹åº”"></p><blockquote><p>è¿™ä¸ªæ–¹æ³•å¯ä»¥å·¥ä½œçš„åŸå› æ˜¯OnClickListeneræ¥å£åªæœ‰ä¸€ä¸ªæ–¹æ³•ã€‚<strong>è¿™ç§æ–¹æ³•è¢«ç§°ä¸ºå‡½æ•°å¼æ¥å£ï¼Œæˆ–è€… SAM æ¥å£ï¼ŒSAM ä»£è¡¨å•æŠ½è±¡æ–¹æ³•ã€‚Java APIéšå¤„å¯è§åƒRunnableå’ŒCallableè¿™æ ·çš„å‡½æ•°å¼æ¥å£ï¼Œä»¥åŠæ”¯æŒå®ƒçš„æ–¹æ³•ã€‚</strong>Kotlinå…è®¸ä½ åœ¨è°ƒç”¨æ¥å£å‡½æ•°å¼æ¥å£ä½œä¸ºå‚æ•°çš„æ–¹æ³•æ—¶ä½¿ç”¨lambdaï¼Œæ¥ä¿è¯ä½ çš„Kotlinä»£ç å³æ•´æ´åˆç¬¦åˆä¹ æƒ¯ã€‚</p></blockquote><p>â€‹             </p><h3 id="5-4-1-æŠŠlambda-å½“ä½œå‚æ•°ä¼ é€’ç»™Javaæ–¹æ³•"><a href="#5-4-1-æŠŠlambda-å½“ä½œå‚æ•°ä¼ é€’ç»™Javaæ–¹æ³•" class="headerlink" title="5.4.1 æŠŠlambda å½“ä½œå‚æ•°ä¼ é€’ç»™Javaæ–¹æ³•"></a>5.4.1 æŠŠlambda å½“ä½œå‚æ•°ä¼ é€’ç»™Javaæ–¹æ³•</h3><p>å¯ä»¥æŠŠlambdaä¼ é€’ç»™ä»»ä½•æœŸæœ›å‡½æ•°å¼æ¥å£çš„æ–¹æ³•ã€‚</p><blockquote><p>ä¾‹å¦‚ï¼Œå¦‚ä¸‹çš„æ–¹æ³• Runableç±»å‹çš„å‚æ•°ï¼š</p><pre><code class="Java">/*    Java    */void postponeComputation(int delay,Runnable computation);</code></pre><p>åœ¨ Kotlin ä¸­ï¼Œå¯ä»¥è°ƒç”¨å®ƒå¹¶æŠŠä¸€ä¸ªlambdaä½œä¸ºå®å‚ä¼ ç»™å®ƒã€‚ç¼–è¯‘å™¨ä¼š<strong>è‡ªåŠ¨</strong>æŠŠå®ƒè½¬æ¢æˆä¸€ä¸ªRunnableçš„å®ä¾‹ï¼š</p><p>postponeComputation(1000){ println(42) }</p><p>å½“æˆ‘ä»¬è¯´â€œä¸€ä¸ªRunnnableçš„å®ä¾‹â€æ—¶ï¼ŒæŒ‡çš„æ˜¯â€œä¸€ä¸ªå®ç°äº†Runnableæ¥å£çš„åŒ¿åç±»çš„å®ä¾‹â€ã€‚ç¼–è¯‘å™¨ä¼šå¸®ä½ åˆ›å»ºå®ƒï¼Œå¹¶ä½¿ç”¨lambdaä½œä¸ºå•æŠ½è±¡æ–¹æ³•â€“è¿™ä¸ªä¾‹å­ä¸­å¼runæ–¹æ³•â€“çš„æ–¹æ³•ä½“ã€‚</p><p>å¦‚ä¸‹ï¼šæ˜¾å¼çš„åˆ›å»ºä¸€ä¸ªRunnableçš„åŒ¿åå¯¹è±¡ä¹Ÿèƒ½è¾¾åˆ°åŒæ ·çš„æ•ˆæœï¼š</p><pre><code class="kotlin">postponeComputation(1000,object:Runnable{    //æŠŠå¯¹è±¡è¡¨è¾¾å¼ä½œä¸ºå‡½æ•°å¼æ¥å£çš„å®ç°ä¼ é€’ã€‚    override fun run(){        println(42)    }})</code></pre><p>ä½†æ˜¯è¿™é‡Œæœ‰ç‚¹ä¸ä¸€æ ·ã€‚å½“ä½ æ˜¾å¼åœ°å£°æ˜å¯¹è±¡æ—¶ï¼Œæ¯æ¬¡è°ƒç”¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹ã€‚ä½¿ç”¨lambdaçš„æƒ…å†µä¸åŒï¼šå¦‚æœlambdaæ²¡æœ‰è®¿é—®ä»»ä½•æ¥è‡ªå®šä¹‰å®ƒçš„å‡½æ•°å˜é‡ï¼Œç›¸åº”çš„åŒ¿åç±»å®ä¾‹å¯ä»¥åœ¨å¤šæ¬¡è°ƒç”¨ä¹‹é—´é‡ï¼ˆchÃ³ngï¼‰ç”¨ï¼š</p><pre><code class="kotlin">postponeComputation(1000){println(42)}    //æ•´ä¸ªç¨‹åºåªä¼šåˆ›å»ºä¸€ä¸ªRunnableçš„å®ä¾‹</code></pre><p>æƒ³è¦å®Œå…¨ç­‰ä»·çš„å®ç°åº”è¯¥æ˜¯ä¸‹é¢è¿™æ®µä»£ç ä¸­çš„æ˜¾å¼objectå£°æ˜ï¼Œå®ƒæŠŠRunnableå®ä¾‹å­˜å‚¨åœ¨ä¸€ä¸ªå˜é‡ä¸­ï¼Œå¹¶ä¸”æ¯æ¬¡è°ƒç”¨çš„æ—¶å€™éƒ½ä½¿ç”¨è¿™ä¸ªå˜é‡ï¼š</p><pre><code class="kotlin">val runnable = Runnable{println(42)}    //ç¼–è¯‘æˆå…¨å±€å˜é‡ï¼šç¨‹åºä¸­ä»…æ­¤ä¸€ä¸ªå®ä¾‹fun handleComputation(){    postponeComputation(1000,runnable)    //æ¯æ¬¡postponeComputationè°ƒç”¨æ—¶ç”¨çš„æ˜¯ä¸€ä¸ªå¯¹è±¡}</code></pre><p>å¦‚æœlambdaåœ¨åŒ…å›´å®ƒçš„ä½œç”¨åŸŸä¸­æ•æ‰åˆ°äº†å˜é‡ï¼Œé‚£ä¹ˆæ¯æ¬¡è°ƒç”¨å°±ä¸å†å¯èƒ½é‡ç”¨åŒä¸€ä¸ªå®ä¾‹äº†ã€‚</p><p>è¿™æ—¶ï¼Œæ¯æ¬¡è°ƒç”¨ç¼–è¯‘å™¨éƒ½è¦åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå…¶ä¸­å­˜å‚¨ç€è¢«æ•æ‰çš„å˜é‡çš„å€¼ã€‚</p><p>å¦‚ä¸‹ï¼šæ¯æ¬¡è°ƒç”¨éƒ½ä¼šä½¿ç”¨ä¸€ä¸ªæ–°çš„Runnableå®ä¾‹ï¼ŒæŠŠidå€¼å­˜å‚¨åœ¨å®ƒçš„å­—æ®µä¸­ï¼š</p><pre><code class="kotlin">fun handleComputation(id:String){    //lambdaä¼šæ•æ‰â€œidâ€è¿™ä¸ªå˜é‡    postponeComputation(1000){println(id)}    //æ¯æ¬¡handleComputationè°ƒç”¨éƒ½åˆ›å»ºä¸€ä¸ªRunnableçš„æ–°å®ä¾‹ã€‚}</code></pre></blockquote><p>Lmabdaçš„å®ç°ç»†èŠ‚</p><blockquote><p>ä» Kotlin1.0èµ·ï¼Œæ¯æ¬¡lambdaè¡¨è¾¾å¼éƒ½ä¼šè¢«ç¼–è¯‘æˆä¸€ä¸ªåŒ¿åç±»ï¼Œé™¤éå®ƒæ˜¯å†…è”lambdaã€‚ï¼ˆå†…è”å‡½æ•°ä¸ä¼šåˆ›å»ºåŒ¿åç±»ï¼‰ã€‚åœ¨åç»­ç‰ˆæœ¬æ”¯æŒç”Ÿæˆjava8å­—èŠ‚ç åï¼Œç¼–è¯‘å™¨å°±å¯ä»¥é¿å…ä¸ºæ¯ä¸€ä¸ªlambdaè¡¨è¾¾å¼éƒ½ç”Ÿæˆä¸€ä¸ªç‹¬ç«‹çš„.classæ–‡ä»¶ã€‚å¦‚æœlambdaæ•æ‰äº†å˜é‡ï¼Œæ¯ä¸ªè¢«æ•æ‰çš„å˜é‡ä¼šåœ¨åŒ¿åç±»ä¸­æœ‰å¯¹åº”çš„å­—æ®µï¼Œè€Œä¸”æ¯æ¬¡ï¼ˆå¯¹lambdaï¼‰çš„è°ƒç”¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ªè¿™ä¸ªåŒ¿åç±»çš„æ–°å®ä¾‹ã€‚</p><p><em>å¦åˆ™ï¼Œä¸€ä¸ªå•ä¾‹å°±ä¼šè¢«åˆ›å»ºã€‚ç±»çš„åç§°ç”±lambdaå£°æ˜æ‰€åœ¨çš„å‡½æ•°åå­—ç§°åŠ ä¸Šåç¼€è¡ç”Ÿå‡ºæ¥ï¼šè¿™ä¸ªä¾‹å­ä¸­å°±æ˜¯ HandleComputation$1ã€‚å¦‚æœä½ åç¼–è¯‘ä¹‹å‰lambdaè¡¨è¾¾å¼çš„ä»£ç ï¼Œå°±ä¼šçœ‹åˆ°ï¼š</em> </p><pre><code class="kotlin">class HandleComputation$1(val id:String):Runnable{    override fun run(){        println(id)    }}fun handleComputation(id:String){    postponeComputation(1000,HandleComputation$1(id))    //åº•å±‚åˆ›å»ºä¸€ä¸ªç‰¹æ®Šçš„å®ä¾‹ï¼Œè€Œä¸æ˜¯lambda}</code></pre><p>ç¼–è¯‘å™¨ç»™æ¯ä¸ªè¢«æ•æ‰çš„å˜é‡ç”Ÿæˆäº†ä¸€ä¸ªå­—æ®µå’Œä¸€ä¸ªæ„é€ æ–¹æ³•å‚æ•°ã€‚</p></blockquote><p><strong>æŠŠlambdaä¼ ç»™æ ‡è®°æˆ inline çš„Kotlinå‡½æ•°ï¼Œæ˜¯ä¸ä¼šåˆ›å»ºä»»ä½•åŒ¿åç±»çš„ã€‚</strong></p><h3 id="5-4-2-SAMæ„é€ æ–¹æ³•ï¼šæ˜¾å¼åœ°æŠŠlambdaè½¬æ¢æˆå‡½æ•°å¼æ¥å£"><a href="#5-4-2-SAMæ„é€ æ–¹æ³•ï¼šæ˜¾å¼åœ°æŠŠlambdaè½¬æ¢æˆå‡½æ•°å¼æ¥å£" class="headerlink" title="5.4.2 SAMæ„é€ æ–¹æ³•ï¼šæ˜¾å¼åœ°æŠŠlambdaè½¬æ¢æˆå‡½æ•°å¼æ¥å£"></a>5.4.2 SAMæ„é€ æ–¹æ³•ï¼šæ˜¾å¼åœ°æŠŠlambdaè½¬æ¢æˆå‡½æ•°å¼æ¥å£</h3><blockquote><p>SAM<strong>æ„é€ æ–¹æ³•</strong>æ˜¯<strong>ç¼–è¯‘å™¨ç”Ÿæˆçš„å‡½æ•°</strong>ã€‚ç”¨æ¥è®©ä½ æ‰§è¡Œä»lambdaåˆ°å‡½æ•°å¼æ¥å£å®ä¾‹çš„æ˜¾å¼è½¬æ¢ã€‚</p><p>å¯ä»¥ç”¨åœ¨ç¼–è¯‘å™¨ä¸ä¼šè‡ªåŠ¨åº”ç”¨è½¬æ¢çš„ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨å®ƒã€‚</p><p><strong>ä¾‹å¦‚ï¼šå¦‚æœæœ‰ä¸€ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ªå‡½æ•°å¼æ¥å£ï¼ˆåªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„å®ä¾‹ï¼‰çš„å®ä¾‹ï¼Œä¸èƒ½ç›´æ¥è¿”å›ä¸€ä¸ªlambdaï¼Œè¦ç”¨SAMæ„é€ æ–¹æ³•æŠŠå®ƒåŒ…è£…èµ·æ¥ã€‚</strong></p><p><strong>å¦‚ä¸‹ä¾‹å­ï¼š</strong></p><pre><code class="kotlin">/*    ä½¿ç”¨SAMæ„é€ æ–¹æ³•æ¥è¿”å›å€¼    */fun createAllDoneRunnable():Runnable{    return Runnable {println(&quot;All done!&quot;)}}&gt;&gt;&gt; createAllDoneRunnable().run()All done!</code></pre><p><strong>SAMï¼ˆå‡½æ•°å¼æ¥å£ï¼‰æ„é€ è¿”å›çš„åç§°å’Œåº•å±‚å‡½æ•°å¼æ¥å£çš„åç§°ä¸€æ ·ã€‚</strong>SAMæ„é€ æ–¹æ³•åªæ¥æ”¶ä¸€ä¸ªå‚æ•°â€” ä¸€ä¸ªè¢«ç”¨ä½œå‡½æ•°å¼æ¥å£å•æŠ½è±¡æ–¹æ³•çš„lambda â€“ å¹¶è¿”å›å®ç°äº†è¿™ä¸ªæ¥å£ç±»çš„ä¸€ä¸ªå®ä¾‹ã€‚</p></blockquote><blockquote><p>é™¤å¼€è¿”å›å€¼å¤–ï¼ŒSAMæ„é€ æ–¹æ³•è¿˜å¯ä»¥ç”¨åœ¨éœ€è¦<strong>æŠŠä»lambdaç”Ÿæˆçš„å‡½æ•°å¼æ¥å£å®ä¾‹å­˜å‚¨åœ¨ä¸€ä¸ªå˜é‡ä¸­çš„æƒ…å†µã€‚**</strong>å‡è®¾ä½ è¦åœ¨å¤šä¸ªæŒ‰é’®ä¸Šé‡ç”¨åŒä¸€ä¸ªç›‘å¬å™¨**ï¼Œå°±åƒä¸‹é¢çš„ä»£ç æ¸…å•ä¸€æ ·ï¼ˆåœ¨Androidåº”ç”¨ä¸­ï¼Œè¿™æ®µä»£ç å¯ä»¥ä½œä¸ºActivity.onCreateæ–¹æ³•çš„ä¸€éƒ¨åˆ†ï¼‰</p><pre><code class="kotlin">/*    ä½¿ç”¨SAMæ„é€ æ–¹æ³•æ¥é‡ç”¨listenerå®ä¾‹    */val listener =OnClickListener{    view -&gt;    val text = when (view.id){        R.id.button1 -&gt; &quot;First button&quot;        R.id.button2 -&gt; &quot;Second button&quot;        else -&gt; &quot;Unknown button&quot;    }    toast(text)}button1.setOnClickListener(listener)button2.setOnClickListener(listener)</code></pre><p>listener ä¼šæ£€æŸ¥é‚£ä¸ªæŒ‰é’®æ˜¯ç‚¹å‡»çš„äº‹ä»¶æºå¹¶ä½œå‡ºå¯¹åº”çš„è¡Œä¸ºã€‚å¯ä»¥ä½¿ç”¨å®ç°äº†OnClickListenerçš„å¯¹è±¡å£°æ˜æ¥å®šä¹‰ç›‘å¬å™¨ï¼Œä½†æ˜¯SAMæ„é€ æ–¹æ³•æä¾›äº†æ›´ç®€æ´çš„æ–¹æ³•ã€‚</p></blockquote><blockquote><p><strong>Lambda å’Œ æ·»åŠ /ç§»é™¤ç›‘å¬å™¨</strong></p><p>lambda å†…éƒ¨ç±»æœ‰åŒ¿åå¯¹è±¡é‚£æ ·çš„thisï¼šæ²¡æœ‰åŠæ³•åº”ç”¨lambdaè½¬æ¢æˆçš„åŒ¿åç±»å®ä¾‹ã€‚<strong>ä»ç¼–è¯‘å™¨çš„è§’åº¦æ¥çœ‹ï¼Œlambdaæ˜¯ä¸€ä¸ªä»£ç å—ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä¸”ä¹Ÿä¸èƒ½å½“ä½œä¸€ä¸ªå¯¹è±¡æ¥å¼•ç”¨</strong>ã€‚<strong>Lambdaä¸­çš„thiså¼•ç”¨æŒ‡å‘çš„æ˜¯åŒ…å›´å®ƒçš„ç±»ã€‚</strong></p><ul><li><input disabled="" type="checkbox"> å¦‚æœä½ çš„äº‹ä»¶ç›‘å¬å™¨åœ¨å¤„ç†äº‹ä»¶æ—¶éœ€è¦å–æ¶ˆå®ƒè‡ªå·±ï¼Œä¸èƒ½ä½¿ç”¨lambdaè¿™æ ·åšã€‚<strong>è¿™ç§æƒ…å†µä½¿ç”¨å®ç°äº†æ¥å£çš„åŒ¿åå¯¹è±¡</strong>ã€‚<strong>åœ¨åŒ¿åå¯¹è±¡å†…ï¼Œthiså…³é”®è¯æŒ‡å‘è¯¥å¯¹è±¡å®ä¾‹ï¼Œå¯ä»¥æŠŠå®ƒä¼ é€’ç»™ç§»é™¤ç›‘å¬å™¨çš„API</strong></li></ul></blockquote><p>å°½ç®¡æ–¹æ³•è°ƒç”¨ä¸­çš„SAMè½¬æ¢ä¸€èˆ¬éƒ½ä¼šè‡ªåŠ¨å‘ç”Ÿï¼Œ<strong>ä½†æ˜¯å½“æŠŠlambdaä½œä¸ºå‚æ•°ä¼ ç»™ä¸€ä¸ªé‡è½½æ–¹æ³•</strong>ï¼Œ<strong>ä¹Ÿæœ‰ç¼–è¯‘å™¨ä¸èƒ½é€‰æ‹©æ­£ç¡®çš„é‡è½½æƒ…å†µ</strong>ã€‚è¿™æ—¶æ˜¾å¼çš„SAMæ„é€ æ–¹æ³•æ—¶è§£å†³é”™è¯¯çš„å¥½æ–¹æ³•ã€‚</p><h2 id="5-5-å¸¦æ¥æ”¶å™¨çš„lambdaï¼šâ€withâ€œ-ä¸-â€applyâ€œ"><a href="#5-5-å¸¦æ¥æ”¶å™¨çš„lambdaï¼šâ€withâ€œ-ä¸-â€applyâ€œ" class="headerlink" title="5.5 å¸¦æ¥æ”¶å™¨çš„lambdaï¼šâ€withâ€œ ä¸ â€applyâ€œ"></a>5.5 å¸¦æ¥æ”¶å™¨çš„lambdaï¼šâ€withâ€œ ä¸ â€applyâ€œ</h2><p><strong>å¸¦æ¥æ”¶è€…çš„lambdaï¼š</strong></p><p>æ­¤èŠ‚å°†åŠç†é€æ­¥ç†Ÿæ‚‰Kotlinçš„lambdaçš„ç‹¬ç‰¹åŠŸèƒ½ï¼š<strong>åœ¨lambdaå‡½æ•°ä½“ç±»å¯ä»¥è°ƒç”¨ä¸€ä¸ªä¸åŒå¯¹è±¡çš„æ–¹æ³•ï¼Œè€Œå´æ— éœ€å€ŸåŠ©ä»»ä½•é™å®šç¬¦</strong>ï¼›æ­¤æ–¹æ³•åœ¨javaä¸­æ˜¯ä¸å­˜åœ¨çš„ã€‚è¿™æ ·çš„lambdaå«åšå¸¦æ¥æ”¶è€…çš„lambda</p><p><strong>ä»€ä¹ˆæ˜¯å¸¦æ¥æ”¶è€…çš„ lambdaï¼Ÿ</strong></p><blockquote><p>Kotlin ä¸­ç‹¬ç‰¹çš„ lambda åŠŸèƒ½ï¼šåœ¨lambdaå‡½æ•°ä½“å†…å¯ä»¥è°ƒç”¨ä¸€ä¸ªä¸åŒçš„å¯¹è±¡æ–¹æ³•ï¼Œè€Œä¸”æ— éœ€å€ŸåŠ©ä»»ä½•é¢å¤–çš„é™å®šç¬¦ã€‚</p></blockquote><p><strong>æ¥æ”¶è€…ï¼š</strong>è°ƒç”¨è€…</p><h3 id="5-5-1-â€œwithâ€-å‡½æ•°"><a href="#5-5-1-â€œwithâ€-å‡½æ•°" class="headerlink" title="5.5.1 â€œwithâ€ å‡½æ•°"></a>5.5.1 â€œwithâ€ å‡½æ•°</h3><p>ä» with å‡½æ•°å¼€å§‹å®ƒç”¨åˆ°äº†å¸¦æ¥æ”¶è€…lambdaã€‚</p><p>withçš„åº“å‡½æ•°ï¼š</p><blockquote><p>å®ƒå¯¹åŒä¸€ä¸ªå¯¹è±¡æ‰§è¡Œå¤šæ¬¡æ“ä½œï¼Œè€Œä¸éœ€è¦åå¤æŠŠå¯¹è±¡çš„åç§°å†™å‡ºæ¥ã€‚</p></blockquote><p><strong>æ„å»ºå­—æ¯è¡¨</strong></p><pre><code class="kotlin">fun alphabet(): String {    val result = StringBuilder()    for (letter in &#39;A&#39;..&#39;Z&#39;) {        result.append(letter)    }    result.append(&quot;\n Now I know the alphbet!&quot;)    return result.toString()}</code></pre><pre><code class="kotlin">fun main() {    println(alphabet())}</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201022214803.png" alt=""></p><p><strong>ä½¿ç”¨åœºæ™¯ï¼ˆä¸ºä»€ä¹ˆè¦ç”¨â€withâ€œï¼‰</strong></p><p>æ¡ˆä¾‹ä¸­å¤šæ¬¡è°ƒç”¨åˆ° â€œ<strong>result</strong>â€œå®ä¾‹ã€‚ä½¿ç”¨â€<strong>with</strong>â€œå‡å°‘å¯¹å®ä¾‹çš„è°ƒç”¨ã€‚</p><p><strong>å¦‚ä½•ä½¿ç”¨ â€withâ€œï¼Ÿ</strong></p><pre><code class="kotlin">fun alphabet(): String {    val result = StringBuilder()    return with(result) {// æŒ‡å®šæ¥æ”¶è€…çš„å€¼        for (letter in &#39;A&#39;..&#39;Z&#39;) {            this.append(letter) // æ˜¾å¼çš„ä½¿ç”¨â€˜thisâ€™æ¥è°ƒç”¨æ¥æ”¶è€…å€¼çš„æ–¹æ³•ï¼ˆresult.appned()æ–¹æ³•ï¼‰        }        append(&quot;\n Now I know the alphabet!&quot;)   // éšè— â€˜thisâ€™ åŒæ ·å¯ä»¥ä½¿ç”¨        this.toString()    }}</code></pre><pre><code class="kotlin">fun main() {    println(alphabet())}</code></pre><p><strong>â€withâ€œçš„ç»“æ„</strong></p><blockquote><p>with ç»“æ„çœ‹ä¸Šå»åƒæ˜¯ä¸€ç§ç‰¹æ®Šçš„è¯­æ³•ç»“æ„ï¼Œä½†å®ƒå®é™…ä¸Šæ˜¯ä¸€ä¸ªæ¥æ”¶ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°ï¼šè¿™ä¸ªä¾‹å­ä¸­ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯ stringBuilder å’Œ lambda ã€‚</p></blockquote><p>with å‡½æ•°æŠŠç¬¬ä¸€ä¸ªå‚æ•°è½¬æ¢ä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ç»™ lambda çš„æ¥æ”¶è€…ã€‚</p><p><strong>åœ¨æ™®é€šå‡½æ•°ä¸­ä¸æ‰©å±•å‡½æ•°ä¸­å¸¦æ¥æ”¶è€…çš„ lambda æœ‰é‚£äº›ä¸åŒ</strong></p><blockquote><p>åœ¨æ‰©å±•å‡½æ•°ä½“å†…éƒ¨ï¼Œthis æŒ‡å‘äº†è¿™ä¸ªå‡½æ•°æ‰©å±•çš„é‚£ä¸ªç±»å‹å®ä¾‹ï¼Œè€Œä¸”ä¹Ÿå¯ä»¥è¢«çœç•¥æ‰ï¼Œè®©ä½ ç›´æ¥è®¿é—®æ¥æ”¶è€…çš„æˆå‘˜ã€‚</p></blockquote><blockquote><p>ä¸Šé¢çš„ä»£ç ä¸­ï¼Œthis æŒ‡å®šäº†stringBuilderï¼Œè¿™æ—¶ä¼ ç»™withçš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚å¯ä»¥é€šè¿‡æ˜¾å¼çš„thiså¼•ç”¨æ¥è®¿é—®stringBuilderçš„æ–¹æ³•ï¼Œå°±åƒthisï¼Œappend(latter)è¿™æ ·ï¼šä¹Ÿå¯ä»¥åƒappendï¼ˆâ€\nNowâ€¦â€)</p></blockquote><p><strong>é‡æ„åˆå§‹çš„alphabetå‡½æ•°ï¼Œå»é™¤stringBuilderå˜é‡ã€‚</strong></p><blockquote><pre><code class="kotlin">/*    ä½¿ç”¨withå’Œä¸€ä¸ªè¡¨è¾¾å¼å‡½æ•°ä½“æ¥æ„é€ å­—æ¯è¡¨    */fun alphabet() = with(StringBuilder){    for(letter in &#39;A&#39;...&#39;Z&#39;){        append(letter)    }    append(&quot;\n Now I know the alphabet!&quot;)    toString()}</code></pre><p>ç°åœ¨æ­¤å‡½æ•°åªè¿”å›ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œæ‰€æœ‰è¡¨è¾¾å¼å‡½æ•°ä½“è¯­æ³•é‡å†™äº†å®ƒã€‚</p><p>å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„StringBuilderå®ä¾‹ç›´æ¥å½“ä½œå®ä¾‹ä¼ é€’ç»™è¿™ä¸ªå‡½æ•°ï¼Œç„¶å lambdaä¸­ä¸éœ€è¦æ˜¾å¼çš„thiså°±å¯ä»¥å¼•ç”¨åˆ°è¿™ä¸ªå®ä¾‹ã€‚</p></blockquote><h3 id="5-5-2-â€œapplyâ€-å‡½æ•°"><a href="#5-5-2-â€œapplyâ€-å‡½æ•°" class="headerlink" title="5.5.2 â€œapplyâ€ å‡½æ•°"></a>5.5.2 â€œapplyâ€ å‡½æ•°</h3><p><strong>apply å’Œ with çš„ä¸åŒ</strong></p><blockquote><p>apply å‡½æ•°åŒwith å‡½æ•°åŠŸèƒ½ç›¸åŒï¼ŒåŒºåˆ«åœ¨äº apply å§‹ç»ˆä¼šè¿”å›ä½œä¸ºå®å‚ä¼ é€’ç»™å®ƒçš„å¯¹è±¡ã€‚ï¼ˆè¿”å›æœ¬èº«ä½œä¸ºå®ä¾‹ï¼‰</p></blockquote><pre><code class="kotlin">fun alphabet() = StringBuilder().apply {    for (letter in &#39;A&#39;..&#39;Z&#39;) {        append(letter)    }    append(&quot;\n Now I know the alphbet!&quot;)}.toString()</code></pre><p>apply è¢«å£°æ˜æˆä¸€ä¸ªæ‰©å±•å‡½æ•°ã€‚å®ƒçš„<strong>æ¥æ”¶è€…</strong>å˜æˆäº†ä½œä¸ºå®å‚çš„ lambda çš„æ¥æ”¶è€…ã€‚æ‰§è¡Œ apply çš„ç»“æœæ˜¯StringBuilder,æ‰€ä»¥æ¥ä¸‹æ¥é‡Œå¯ä»¥è°ƒç”¨ toString æŠŠå®ƒè½¬æ¢æˆ Stringã€‚</p><p><strong>ä½¿ç”¨applyåˆå§‹åŒ–ä¸€ä¸ªTextView</strong></p><pre><code class="kotlin">fun createViewWithCustomAttributes(context : Context) = {    TextView(context).apply{        text = &quot;Sample Text&quot;        textSize = 20.0        setPadding(10,0,0,0)    }}</code></pre><p><strong>applyå‡½æ•°å…è®¸é‡Œä½¿ç”¨ç´§å‡‘çš„è¡¨è¾¾å¼å‡½æ•°ä½“é£æ ¼</strong>ã€‚æ–°çš„<strong>TextView</strong>å®ä¾‹<strong>åˆ›å»º</strong>ä¹‹åç«‹å³è¢«ä¼ ç»™äº†<strong>apply</strong>ã€‚</p><p><strong>é‚£ä¸ªæ˜¯æ¥æ”¶è€…?</strong></p><p>TextViewå®ä¾‹å˜æˆäº† (lambda çš„) æ¥æ”¶è€…ï¼Œä½ å¯ä»¥è°ƒç”¨å®ƒçš„å±æ€§å’Œæ–¹æ³•ã€‚</p><p>with å‡½æ•°å’Œ apply å‡½æ•°æ˜¯æœ€åŸºæœ¬å’Œæœ€é€šç”¨çš„ä½¿ç”¨å¸¦æ¥æ”¶è€…çš„ lambda çš„ä¾‹å­ã€‚æ›´å¤šçš„å‡½æ•°ä¹Ÿå¯ä»¥ä½¿ç”¨è¿™ç§æ¨¡å¼ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨<strong>æ ‡å‡†åº“å‡½æ•°buildStringè¿›ä¸€æ­¥ç®€åŒ–alphbetå‡½æ•°</strong>ï¼Œå®ƒä¼šè´Ÿè´£<strong>åˆ›å»ºStringBuilder</strong>å¹¶<strong>è°ƒç”¨toString</strong>ã€‚<strong>buildingå®é™…æ˜¯å¸¦æ¥æ”¶è€…çš„lambda</strong>ï¼Œ<strong>æ¥æ”¶è€…</strong>å°±æ˜¯<strong>StringBuilder</strong>ã€‚</p><p><strong>ä½¿ç”¨buildStringåˆ›å»ºå­—æ¯è¡¨</strong></p><pre><code class="kotlin">/*    ä½¿ç”¨bulderStringåˆ›å»ºå­—æ¯è¡¨    */fun alphabet()=builderString{    for (letter in &#39;A&#39;...&#39;Z&#39;){        append(latter)    }    append(&quot;\n Now I know tha alphabet!&quot;)}</code></pre><p>buildString å‡½æ•°å®Œæˆäº†å€ŸåŠ©StringBuilderåˆ›å»ºStringçš„ä»»åŠ¡ã€‚</p><h2 id="5-6-å°ç»“"><a href="#5-6-å°ç»“" class="headerlink" title="5.6 å°ç»“"></a>5.6 å°ç»“</h2><ul><li><strong>Lambda å…è®¸ä½ å°†ä»£ç å—å½“ä½œå‚æ•°ä¼ é€’ç»™å‡½æ•°ã€‚</strong></li><li><strong>Kotlinå¯ä»¥æŠŠlambdaæ”¾åœ¨æ‹¬å·æ‹¬å·å¤–ç©¿çš„ç»™å‡½æ•°ï¼Œè€Œä¸”å¯ä»¥ä½¿ç”¨itå¼•ç”¨å•ä¸ªlambdaå‚æ•°</strong></li><li><strong>lambdaä¸­çš„ä»£ç å¯ä»¥è®¿é—®å’Œä¿®æ”¹åŒ…æ‹¬è¿™ä¸ªlambdaè°ƒç”¨çš„å‡½æ•°çš„å˜é‡ï¼ˆè®¿é—®ä¿®æ”¹è°ƒç”¨è€…çš„å˜é‡ï¼‰</strong></li><li><strong>é€šè¿‡åœ¨å‡½æ•°åç§°å‰åŠ ä¸Šå‰æˆ³::ï¼Œå¯ä»¥åˆ›å»ºæ–¹æ³•ã€å¯ä»¥åˆ›å»ºæ–¹æ³•åŠå±æ€§çš„å¼•ç”¨ï¼Œå¹¶ç”¨è¿™äº›å¼•ç”¨ä»£æ›¿lambdaä¼ é€’ç»™å‡½æ•°ã€‚</strong></li><li><strong>ä½¿ç”¨åƒfilterã€mapã€allã€anyã€ç­‰å‡½æ•°ï¼Œå¤§å¤šæ•°å…¬å…±çš„é›†åˆæ“ä½œä¸éœ€è¦æ‰‹åŠ¨è¿­ä»£å…ƒç´ å°±å¯ä»¥å®Œæˆã€‚</strong></li><li><strong>åºåˆ—å…è®¸ä½ åˆå¹¶ä¸€ä¸ªé›†åˆä¸Šçš„å¤šä¸ªæ“ä½œï¼Œè€Œä¸éœ€è¦åˆ›å»ºæ–°çš„é›†åˆæ¥ä¿å­˜ä¸­é—´ç»“æœã€‚</strong></li><li><strong>å¯ä»¥æŠŠlambdaä½œä¸ºå®å‚ä¼ é€’ç»™æ¥æ”¶Javaå‡½æ•°å¼æ¥å£ï¼ˆå¸¦å•æŠ½è±¡æ–¹æ³•çš„æ¥å£ï¼Œä¹Ÿå«SAMæ¥å£ï¼‰ä½œä¸ºå½¢å‚çš„æ–¹æ³•ã€‚</strong></li><li><strong>withæ ‡å‡†åº“å‡½æ•°å…è®¸ä½ è°ƒç”¨åŒä¸€ä¸ªå¯¹è±¡çš„å¤šä¸ªæ–¹æ³•ï¼Œè€Œä¸éœ€è¦åå¤å†™å‡ºè¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨ã€‚applyå‡½æ•°è®©ä½ ä½¿ç”¨æ„é€ è€…é£æ ¼çš„APIåˆ›å»ºå’Œåˆå§‹åŒ–ä»»ä½•å¯¹è±¡ã€‚</strong></li></ul><h1 id="6-Kotlinçš„ç±»å‹ç³»ç»Ÿ"><a href="#6-Kotlinçš„ç±»å‹ç³»ç»Ÿ" class="headerlink" title="6  Kotlinçš„ç±»å‹ç³»ç»Ÿ"></a>6  Kotlinçš„ç±»å‹ç³»ç»Ÿ</h1><h2 id="6-1-å¯ç©ºæ€§"><a href="#6-1-å¯ç©ºæ€§" class="headerlink" title="6.1 å¯ç©ºæ€§"></a>6.1 å¯ç©ºæ€§</h2><p><strong>å¯ç©ºæ€§æ˜¯Kotlinç±»å‹ç³»ç»Ÿä¸­å¸®åŠ©ä½ é¿å…NullPointerExceptioné”™è¯¯çš„ç‰¹æ€§ã€‚</strong></p><p>ç°ä»£ç¼–ç¨‹è¯­è¨€åŒ…æ‹¬Kotlinè§£å†³è¿™ç±»é—®é¢˜çš„æ–¹æ³•æ˜¯æŠŠè¿è¡Œæ—¶çš„é”™è¯¯è½¬å˜æˆç¼–è¯‘æœŸçš„é”™è¯¯ã€‚é€šè¿‡æ”¯æŒä½œä¸ºç±»å‹ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†çš„å¯ç©ºæ€§ï¼Œç¼–è¯‘å™¨å°±èƒ½åœ¨ç¼–è¯‘å™¨å‘ç°å¾ˆå¤šæ½œåœ¨çš„é”™è¯¯ï¼Œä»è€Œå‡å°‘è¿è¡Œæ—¶æŠ›å‡ºå¼‚å¸¸çš„å¯èƒ½æ€§ã€‚</p><p>æˆ‘ä»¬ä¼šè®¨è®ºKotlinä¸­çš„å¯ç©ºç±»å‹ï¼šKotlinæ€æ ·è¡¨ç¤ºå…è®¸nullçš„å€¼ï¼Œä»¥åŠKotlinæä¾›çš„å¤„ç†è¿™äº›å€¼çš„å·¥å…·ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜è¦è®¨è®ºæ··åˆä½¿ç”¨Kotlinå’ŒJavaä»£ç æ—¶å…³äºå¯ç©ºç±»å‹çš„ç»†èŠ‚ã€‚</p><h3 id="6-1-1-å¯ç©ºç±»å‹"><a href="#6-1-1-å¯ç©ºç±»å‹" class="headerlink" title="6.1.1 å¯ç©ºç±»å‹"></a>6.1.1 å¯ç©ºç±»å‹</h3><p>Kotlin  å’Œ Java çš„ç±»å‹ç³»ç»Ÿä¹‹é—´ç¬¬ä¸€æ¡ä¹Ÿå¯èƒ½æ˜¯æœ€é‡è¦çš„ä¸€æ¡åŒºåˆ«æ˜¯ï¼ŒKotlinå¯¹å¯ç©ºç±»å‹çš„æ˜¾å¼çš„æ”¯æŒã€‚</p><blockquote><p>è¿™æ„å‘³ç€ï¼Œè¿™æ˜¯ä¸€ç§æŒ‡å‡ºä½ ç¨‹åºä¸­é‚£äº›å˜é‡å’Œå±æ€§å…è®¸ä¸ºnullçš„æ–¹å¼ã€‚å¦‚æœä¸€ä¸ªå˜é‡å¯ä»¥ä¸ºnullï¼Œå¯¹å˜é‡çš„æ–¹æ³•çš„è°ƒç”¨å°±æ˜¯ä¸å®‰å…¨çš„ï¼Œå› ä¸ºè¿™æ ·ä¼šå¯¼è‡´NullPointerExceptionã€‚Kotlinä¸å…è®¸è¿™æ ·çš„è°ƒç”¨å› è€Œå¯ä»¥é˜»æ­¢è®¸å¤šå¯èƒ½çš„å¼‚å¸¸ã€‚</p></blockquote><p><strong>åœ¨å®è·µæ—¶å®ƒæ˜¯å¦‚æœå·¥ä½œçš„</strong></p><pre><code class="kotlin">int strLen(String s){    return s.length();}</code></pre><blockquote><p>è¿™ä¸ªå‡½æ•°è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œä¼ ç»™å®ƒçš„æ˜¯ä¸€ä¸ªnullå®å‚ï¼Œå®ƒä¼šæŠ›å‡ºNullPointerExceptionã€‚æ˜¯å¦éœ€è¦åœ¨æ–¹æ³•ä¸­å¢åŠ å¯¹nullçš„æ£€æŸ¥ï¼Œè¿™å–å†³äºä½¿ç”¨è¯¥å‡½æ•°çš„æ„å›¾ã€‚</p></blockquote><p><strong>ç”¨Kotliné‡å†™è¿™ä¸ªå‡½æ•°</strong></p><blockquote><p>ä¸å¸Œæœ›åœ¨è°ƒç”¨æ—¶ä¼ é€’ä¸€ä¸ª null è¿›æ¥</p><pre><code class="kotlin">fun strLen(s:String) = s.length</code></pre><p>ä½¿ç”¨å¯èƒ½ä¸ºnullçš„å‚æ•°è°ƒç”¨strLenæ˜¯ä¸å…è®¸çš„ï¼Œåœ¨ç¼–è¯‘æœŸå°±ä¼šè¢«æ ‡è®°æˆé”™è¯¯ï¼š</p><pre><code class="kotlin">&gt;&gt;&gt; strLen(null)ERROR:Null can not be a value of a non-null type String</code></pre><p>è¿™ä¸ªå‡½æ•°ä¸­çš„å‚æ•°è¢«å£°æ˜æˆStringç±»å‹ï¼Œåœ¨Kotlinä¸­è¿™ä¸ªè¡¨ç¤ºå®ƒå¿…é¡»åŒ…å«ä¸€ä¸ªStringå®ä¾‹ã€‚è¿™ä¸€è¾¹ç”±ç¼–è¯‘å™¨å¼ºåˆ¶å®æ–½ï¼Œæ‰€ä»¥ä½ ä¸èƒ½ä¼ é€’ä¸€ä¸ªåŒ…å«nullçš„å‚æ•°ã€‚</p><blockquote><p>å¦‚æœä½ å…è®¸è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„æ—¶å€™ä¼ é€’ç»™å®ƒå¯èƒ½æ‰€æœ‰çš„å®å‚ï¼ŒåŒ…å«é‚£äº›å¯ä»¥ä¸ºnullçš„å®å‚ï¼Œéœ€è¦æ˜¾å¼åœ°åœ¨ç±»å‹åç§°åé¢åŠ ä¸Šé—®å·æ¥æ ‡è®°å®ƒï¼š</p><pre><code class="kotlin">fun strLenSafe(s:String?) = ... //å…è®¸ä¸ºç©º</code></pre><p>é—®å·å¯ä»¥åŠ è½½ä»»ä½•ç±»å‹çš„åé¢æ¥è¡¨ç¤ºè¿™ä¸ªç±»å‹çš„å˜é‡å¯ä»¥å­˜å‚¨nullå¼•ç”¨ï¼šString?ã€Int?ã€MyCustomType?ç­‰ç­‰</p></blockquote></blockquote><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20210404144208.png" alt="å¯ç©ºç±»å‹çš„å˜é‡å¯ä»¥å­˜å‚¨nullå¼•ç”¨"></p><p><strong>æ‰€æœ‰ç±»å‹åœ¨æ²¡æœ‰é—®å·çš„ç±»å‹å£°æ˜çš„æƒ…å†µä¸‹æ˜¯ä¸èƒ½å­˜å‚¨nullå¼•ç”¨çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å¸¸è§ç±»å‹é»˜è®¤éƒ½æ˜¯éç©ºçš„ã€‚</strong></p><blockquote><p><strong>åœ¨æ‹¥æœ‰ä¸€ä¸ªå¯ç©ºç±»å‹çš„å€¼ï¼Œèƒ½å¯¹å®ƒè¿›è¡Œæ“ä½œä¹Ÿæ˜¯æœ‰é™åˆ¶çš„ã€‚</strong></p><p>ä¾‹å¦‚ï¼Œä¸èƒ½å†è°ƒç”¨å®ƒçš„æ–¹æ³•ï¼š</p><pre><code class="kotlin">&gt;&gt;&gt; fun strLenSafe(s:String?) = s.length()ERROR:only safe(?.) or non-null asserted (!!.) calls are allowed on a nullable receiver of type kotlin.String?</code></pre><p>ä¹Ÿä¸èƒ½å†æŠŠå®ƒèµ‹å€¼ç»™éç©ºç±»å‹çš„å˜é‡ï¼š</p><pre><code class="kotlin">&gt;&gt;&gt; val x:String ?= null&gt;&gt;&gt; var y:String =xERROR:Type mismatch:inferred type is String? but String was expected</code></pre><p>ä¹Ÿä¸èƒ½æŠŠå¯ç©ºç±»å‹çš„å€¼ä¼ é€’ç»™æ‹¥æœ‰éç©ºç±»å‹å‚æ•°çš„å‡½æ•°ï¼š</p><pre><code class="kotlin">&gt;&gt;&gt; strLen(x)ERROR:Type mismatch:inferred type is String? but String was expected</code></pre><p><strong>å¯ä»¥è¿›è¡Œçš„æ“ä½œ</strong></p><p>æœ€é‡è¦çš„æ“ä½œå°±æ˜¯å’Œnullè¿›è¡Œæ¯”è¾ƒã€‚è€Œä¸”ä¸€æ—¦ä½ è¿›è¡Œäº†æ¯”è¾ƒæ“ä½œï¼Œç¼–è¯‘å™¨å°±ä¼šè®°ä½ï¼Œå¹¶ä¸”åœ¨è¿™æ¬¡æ¯”è¾ƒå‘ç”Ÿçš„ä½œç”¨åŸŸå†…æŠŠè¿™ä¸ªå€¼å½“ä½œéç©ºæ¥å¯¹å¾…ã€‚</p><p>ä¾‹å¦‚ï¼Œä¸‹åˆ—ä»£ç æ˜¯åˆæ³•çš„ï¼š</p><pre><code class="kotlin">/*    ä½¿ç”¨ if æ£€æŸ¥å¤„ç†null    */fun strLenSafe(s:String?):Int =     if (s != null) s.length else 0    // å¢åŠ äº†null æ£€æŸ¥åï¼Œè¿™æ®µä»£ç å°±å¯ä»¥ç¼–è¯‘äº†&gt;&gt;&gt; val x:String?= null&gt;&gt;&gt; println(strLenSafe(x))0&gt;&gt;&gt; println(strLenSafe(&quot;abc&quot;))3</code></pre><p>if æ£€æŸ¥å¹¶ä¸æ˜¯å”¯ä¸€å¤„ç†å¯ç©ºæ€§çš„å·¥å…·ï¼Œç¨åä¼šæœ‰å…¶ä»–å·¥å…·æ¥å¸®åŠ©æˆ‘ä»¬å¤„ç†å¯ç©ºå€¼ã€‚</p></blockquote><h3 id="6-1-2-ç±»å‹çš„å«ä¹‰"><a href="#6-1-2-ç±»å‹çš„å«ä¹‰" class="headerlink" title="6.1.2 ç±»å‹çš„å«ä¹‰"></a>6.1.2 ç±»å‹çš„å«ä¹‰</h3><p><strong>ä»€ä¹ˆæ˜¯ç±»å‹ï¼Œä¸ºä»€ä¹ˆå˜é‡æ‹¥æœ‰ç±»å‹ï¼Ÿ</strong></p><blockquote><p>ç±»å‹å°±æ˜¯æ•°æ®çš„åˆ†ç±»ï¼Œå†³å®šäº†è¯¥ç±»å‹å¯èƒ½çš„å€¼ï¼Œä»¥åŠè¯¥ç±»å‹çš„å€¼ä¸Šå¯èƒ½å®Œæˆçš„æ“ä½œï¼ˆç»´åŸºç™¾ç§‘ï¼‰ã€‚</p></blockquote><p>è¯•è¯•åœ¨Javaçš„ä¸€äº›ç±»å‹ä¸Šå¥—ç”¨å¦‚ä¸Šçš„å®šä¹‰ï¼Œä»doubleç±»å‹å¼€å§‹ã€‚doubleç±»å‹æ˜¯64ä½çš„åŒç²¾åº¦æµ®ç‚¹æ•°ã€‚å¯ä»¥å¯¹doubleç±»å‹çš„å€¼è¿›è¡Œæ ‡å‡†çš„ç®—æœ¯è¿ç®—ï¼Œæ‰€æœ‰çš„åŠŸèƒ½éƒ½å¯ä»¥ä¸€è§†åŒä»çš„è¿ç”¨åˆ°æ‰€æœ‰doubleç±»å‹çš„å€¼ä¸Šã€‚å› æ­¤å¦‚æœä½ æœ‰ä¸€ä¸ªç±»å‹ä¸ºdoubleçš„å˜é‡ï¼Œé‚£ä¹ˆä½ å°±èƒ½ç¡®å®šç¼–è¯‘å™¨å…è®¸åœ¨è¯¥å€¼ä¸Šè¿›è¡Œä»»æ„æ“ä½œï¼Œéƒ½å¯ä»¥è¢«æˆåŠŸçš„æ‰§è¡Œã€‚</p><p>ç°åœ¨æˆ‘ä»¬æŠŠå®ƒå’ŒStringç±»å‹çš„å˜é‡å¯¹æ¯”ä¸€ä¸‹ã€‚åœ¨Javaä¸­ï¼Œè¿™æ ·çš„å˜é‡å¯ä»¥æŒæœ‰ä¸¤ç§å€¼ï¼Œåˆ†åˆ«æ˜¯Stringå®ä¾‹å’Œnullã€‚è¿™ä¸¤ç§å®Œå…¨ä¸ä¸€æ ·ï¼šå°±è¿Javaè‡ªå·±çš„instanceofè¿ç®—ç¬¦éƒ½ä¼šå‘Šè¯‰ä½ nullä¸æ˜¯Stringã€‚è¿™ä¸¤ç§å€¼çš„æ“ä½œä¹Ÿå®Œå…¨ä¸ä¸€æ ·ï¼šçœŸå®çš„Stringå®ä¾‹å…è®¸ä½ è°ƒç”¨å®ƒçš„ä»»ä½•æ–¹æ³•ï¼Œè€Œnullå€¼åªå…è®¸éå¸¸æœ‰é™çš„æ“ä½œã€‚</p><p>ä¸Šè¿°è¡¨æ˜åœ¨Javaä¸­ç±»å‹ç³»ç»Ÿä¸èƒ½å¾ˆå¥½çš„å·¥ä½œã€‚<strong>å³ä½¿å˜é‡æ‹¥æœ‰å£°æ˜ç±»å‹Stringä½ ä¾ç„¶æ— æ³•çŸ¥é“èƒ½å¯¹è¯¥å˜é‡çš„å€¼åšäº›ä»€ä¹ˆï¼Œé™¤éåšé¢å¤–çš„æ£€æŸ¥ã€‚ä½ å¾€å¾€è·³è¿‡è¿™äº›æ£€æŸ¥ï¼Œå› ä¸ºä½ è§‰å¾—ä½ äº†è§£ç¨‹åºä¸­å¤§æ¦‚çš„æ•°æ®æµåŠ¨ï¼Œå¹¶ç¡®å®šåœ¨æŸä¸ªç‚¹ä¸Šçš„å€¼ä¸å¯èƒ½ä¸ºnullã€‚æœ‰æ—¶å€™ä½ æƒ³é”™äº†ï¼Œè€Œä½ çš„ç¨‹åºå°±ä¼šå› ä¸ºNullPointerExceptionè€Œå´©æºƒã€‚</strong></p><p>Kotlinçš„å¯ç©ºç±»å‹ä¸ºè¿™ç±»é—®é¢˜æä¾›äº†å…¨é¢çš„è§£å†³æ–¹æ¡ˆã€‚åŒºåˆ†å¼€å¯ç©ºç±»å‹å’Œéç©ºç±»å‹ä½¿äº‹æƒ…å˜å¾—æ˜æœ—ï¼šé‚£äº›å¯¹å€¼çš„æ“ä½œä½¿å…è®¸çš„ï¼Œå“ªäº›æ“ä½œæœ‰ä¼šå¯¼è‡´è¿è¡Œæ—¶å¼‚å¸¸å¹¶å› æ­¤è¢«ç¦æ­¢ã€‚</p><blockquote><p><strong>æ³¨æ„</strong>ï¼š</p><p>å¯ç©ºçš„å’Œéç©ºçš„å¯¹è±¡åœ¨è¿è¡Œæ—¶æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼›å¯ç©ºç±»å‹å¹¶ä¸æ˜¯éç©ºç±»å‹çš„åŒ…è£…ã€‚æ‰€æœ‰çš„æ£€æŸ¥éƒ½å‘ç”Ÿåœ¨ç¼–è¯‘æœŸã€‚è¿™æ„å‘³Kotlinçš„å¯ç©ºç±»å‹å¹¶ä¸ä¼šåœ¨è¿è¡Œæ—¶å¸¦æ¥é¢å¤–çš„å¼€é”€ã€‚</p></blockquote><h3 id="6-1-3-å®‰å…¨è°ƒç”¨è¿ç®—ç¬¦ï¼šâ€œ-â€"><a href="#6-1-3-å®‰å…¨è°ƒç”¨è¿ç®—ç¬¦ï¼šâ€œ-â€" class="headerlink" title="6.1.3 å®‰å…¨è°ƒç”¨è¿ç®—ç¬¦ï¼šâ€œ?.â€"></a>6.1.3 å®‰å…¨è°ƒç”¨è¿ç®—ç¬¦ï¼šâ€œ?.â€</h3><p><strong>å®‰å…¨è°ƒç”¨è¿ç®—ç¬¦</strong>ï¼šâ€œ?.â€ï¼Œå®ƒå…è®¸ä½ æŠŠnullæ£€æŸ¥å’Œä¸€æ¬¡æ–¹æ³•å¤ç”¨åˆå¹¶æˆä¸€æ¬¡æ“ä½œã€‚</p><p>ä¾‹å¦‚ï¼šè¡¨è¾¾å¼ s?.toUpperCase() ç­‰ç”¨äºä¸‹é¢è¿™ç§ç¹ççš„å†™æ³•ï¼š if (s!=null) s.toUpperCase() else nullã€‚</p><blockquote><p>ä¹Ÿå°±æ˜¯è¯´åœ¨ä½ è°ƒç”¨ä¸€ä¸ªéç©ºå€¼çš„æ–¹æ³•ï¼Œè¿™æ¬¡æ–¹æ³•è°ƒç”¨ä¼šè¢«æ­£å¸¸çš„è°ƒç”¨ã€‚å¦‚æœæ˜¯nullå€¼çš„è¯ï¼Œè¿™æ¬¡è°ƒç”¨ä¸ä¼šå‘ç”Ÿï¼Œè€Œæ•´ä¸ªè¡¨è¾¾å¼çš„å€¼ä¸ºnullã€‚</p></blockquote><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20210409163831.png" alt="å®‰å…¨è°ƒç”¨è¿ç®—ç¬¦åªä¼šè°ƒç”¨éç©ºå€¼çš„æ–¹æ³•"></p><p>æ³¨æ„ï¼Œè¿™æ¬¡è°ƒç”¨çš„ç»“æœç±»å‹ä¹Ÿæ˜¯å¯ç©ºçš„ã€‚å°½ç®¡String.toUppferCase()ä¼šè¿”å›Stringç±»å‹çš„å€¼ï¼Œä½†sæ˜¯å¯ç©ºçš„æ—¶å€™ï¼Œè¡¨è¾¾å¼s?.toUpperCase()çš„ç»“æœç±»å‹æ˜¯String?:</p><pre><code class="kotlin">fun printAllCaps(s:String?){    val allCaps:String? = s?.toUppperCase()    // allCapså¯èƒ½æ˜¯null    println(allCaps)}&gt;&gt;&gt; printAllCaps(&quot;abc&quot;)ABC&gt;&gt;&gt; printAllCaps(null)null</code></pre><p><strong>å®‰å…¨è°ƒç”¨ä¸å…‰å¯ä»¥è°ƒç”¨æ–¹æ³•ï¼Œå¯èƒ½ç”¨æ¥è®¿é—®å±æ€§ã€‚</strong></p><pre><code class="kotlin">/*    ä½¿ç”¨å®‰å…¨è°ƒç”¨å¤„ç†å¯æ§å±æ€§    */class Employee(val name:String,val manager:Employee?)fun managerName(employee:Employee):String?= employee.maneger?.name&gt;&gt;&gt; val ceo = Employee(&quot;Da Boss&quot;,null)&gt;&gt;&gt; val developer = Employee(&quot;Bob Smith&quot;,ceo)&gt;&gt;&gt; println(managerName(developer))Da Boss&gt;&gt;&gt; println(managerName(ceo))</code></pre><p>å¦‚æœä½ çš„å¯¹è±¡é€”ä¸­åˆå¤šä¸ªå¯ç©ºç±»å‹çš„å±æ€§ï¼Œé€šå¸¸å¯ä»¥åœ¨åŒä¸€è¡¨è¾¾å¼ä¸­æ–¹ä¾¿åœ°ä½¿ç”¨å¤šä¸ªå®‰å…¨è°ƒç”¨ã€‚åŠ å…¥ä½ è¦ä½¿ç”¨ä¸åŒçš„ç±»å‹æ¥ä¿å­˜å…³äºä¸ªäººçš„ä¿¡æ¯ã€ä»–ä»¬çš„å…¬å¸ï¼Œä»¥åŠå…¬å¸çš„åœ°å€ï¼Œè€Œå…¬å¸å’Œåœ°å€éƒ½å¯ä»¥çœç•¥ã€‚ä½¿ç”¨?.è¿ç®—ç¬¦ï¼Œä¸éœ€è¦ä»»ä½•é¢å¤–çš„æ£€æŸ¥ï¼Œå°±å¯ä»¥åœ¨ä»¥æ”¾ä»£ç ä¸­è®¿é—®åˆ°Personçš„countryå±æ€§ã€‚</p><pre><code class="kotlin">/*    é“¾æ¥å¤šä¸ªå®‰å…¨è°ƒç”¨    */class Address(val streetAddress:String,val zipCode:Int,val city:String,val country:String)class Company(val name:String, val address:Address?)class Person(val name:String,val company:Company?)fun Person.countryName():String{    val country = this.company?.address?.country    // å¤šä¸ªå®‰å…¨è°ƒç”¨é“¾æ¥åœ¨ä¸€èµ·    return if (country!=null) contry else &quot;Unknown&quot;}&gt;&gt;&gt; val person = Person(&quot;Dmitry&quot;,null)&gt;&gt;&gt; println(person.countryName())Unknown</code></pre><h3 id="6-1-4-Elvis-è¿ç®—ç¬¦ï¼šâ€œ-â€"><a href="#6-1-4-Elvis-è¿ç®—ç¬¦ï¼šâ€œ-â€" class="headerlink" title="6.1.4 Elvis è¿ç®—ç¬¦ï¼šâ€œ?:â€"></a>6.1.4 Elvis è¿ç®—ç¬¦ï¼šâ€œ?:â€</h3><p>Kotlinæœ‰æ–¹ä¾¿çš„è¿ç®—ç¬¦æ¥æä¾›ä»£æ›¿nullçš„é»˜è®¤å€¼ã€‚å®ƒè¢«ç§°ä¸ºElvisè¿ç®—ç¬¦ã€‚ï¼ˆæˆ–è€…nullåˆå¹¶è¿ç®—ç¬¦ï¼‰</p><pre><code class="kotlin">fun foo(s:String?){    val t:String = s?:&quot;&quot;    //å¦‚æœâ€œsâ€ä¸ºnullï¼Œç»“æœä¸ºç©ºå­—ç¬¦ä¸²}</code></pre><blockquote><p>Elvisè¿ç®—ç¬¦æ¥æ”¶ä¸¤ä¸ªè¿ç®—æ•°ï¼Œå¦‚æœç¬¬ä¸€ä¸ªè¿ç®—æ•°ä¸ä¸ºnullï¼Œæˆ–è€…ç»“æœå°±æ˜¯ç¬¬ä¸€ä¸ªè¿ç®—æ•°ï¼›å¦‚æœç¬¬ä¸€ä¸ªè¿ç®—æ•°ä¸ºnullï¼Œè¿ç®—ç»“æœå°±æ˜¯ç¬¬äºŒä¸ªè¿ç®—æ•°ã€‚</p></blockquote><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20210411235620.png" alt="Elvisè¿ç®—ç¬¦ç”¨å…¶ä»–å€¼ä»£æ›¿null"></p><blockquote><p>Elvis è¿ç®—ç¬¦ç»å¸¸å’Œå®‰å…¨è°ƒç”¨è¿ç®—ç¬¦ä¸€èµ·ä½¿ç”¨ï¼Œ<strong>ç”¨ä¸€ä¸ªå€¼ä»£æ›¿nullå¯¹è±¡è°ƒç”¨è¿”å›æ—¶è¿”å›nullã€‚</strong></p><pre><code class="kotlin">fun strLenSafe(s:String?):Int = s?.length?:0&gt;&gt;&gt; println(strLenSafe(&quot;abc&quot;))3&gt;&gt;&gt; pritnln(strLenSafe(null))0</code></pre></blockquote><blockquote><p>åœ¨ 6.1.3 â€œé“¾æ¥å¤šä¸ªå®‰å…¨è°ƒç”¨â€ çš„å‡½æ•° countryNameç°åœ¨ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€è¡Œä»£ç æ¥å®Œæˆã€‚</p><pre><code class="kotlin">fun Person.countryName()=conpany?.address?.country?:=&quot;Unknown&quot;**</code></pre></blockquote><p><strong>åœ¨Kotlinä¸­æœ‰ç§åœºæ™¯ä¸‹Elvisè¿ç®—ç¬¦ä¼šç‰¹åˆ«é¡ºæ‰‹ï¼Œæƒ³returnå’Œthrowè¿™æ ·çš„æ“ä½œå…¶å®æ˜¯è¡¨è¾¾å¼ï¼Œå› æ­¤å¯ä»¥æŠŠå®ƒä»¬å†™åœ¨Elvisè¿ç®—ç¬¦çš„å³è¾¹ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœElvisè¿ç®—ç¬¦å·¦è¾¹çš„å€¼ä¸ºnullï¼Œå‡½æ•°å°±ä¼šç«‹å³è¿”å›ä¸€ä¸ªå€¼æˆ–è€…æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œå¦‚æœå‡½æ•°ä¸­éœ€è¦æ£€æŸ¥å…ˆå†³æ¡ä»¶ï¼Œè¿™ä¸ªæ–¹å¼ä¼šå¾ˆæœ‰ç”¨ã€‚</strong></p><p><strong>å®ç°ä¸€ä¸ªæ‰“å°åŒ…å«ä¸ªäººå…¬å¸åœ°å€çš„å‡ºè´§æ ‡ç­¾å‡½æ•°ã€‚</strong></p><pre><code class="kotlin">/*    åŒæ—¶ä½¿ç”¨throwå’ŒElvisè¿ç®—ç¬¦    */class Address(val streetAddress:String,val zipCOde:Int,val city:String,val country:String)class Company(val name:String,val address:Address?)class Person(val name:String,val company:Company?)fun pritnlnShippingLabel(person:Person){    val address = person.company?.address                ?: throw IllegalArgumentException(&quot;No address&quot;)    //å¦‚æœç¼ºå°‘addreså°±æŠ›å‡ºå¼‚å¸¸    with(address){    //address ä¸ä¸ºç©º        println(streetAddress        println(&quot;$zipCode $city,$country&quot;)    }}&gt;&gt;&gt; val address = Address(&quot;Elsestr. 47&quot;,80687,&quot;Munich&quot;,&quot;Germany&quot;)               &gt;&gt;&gt; val jetbrains = Company(&quot;JetBrains&quot;,address)                &gt;&gt;&gt; val person = Person(&quot;Dmitry&quot;,jetbrains)                &gt;&gt;&gt; printShippingLabel(person)Elsestr.4780687 Munich.Germany&gt;&gt;&gt; printShippingLable(Person(&quot;Alexey&quot;,null))java.lang.IllegalArgumentException:No address</code></pre><p><strong>å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œå‡½æ•°printShippingLableä¼šæ‰“å°å‡ºæ ‡ç­¾ã€‚å¦‚æœåœ°å€ä¸å­˜åœ¨ï¼Œå®ƒä¸ä¼šåªæ˜¯æŠ›å‡ºä¸€ä¸ªå¸¦è¡Œå·çš„NullPointerExceptionï¼Œç›¸åï¼Œå®ƒä¼šæŠ¥å‘Šä¸€ä¸ªæœ‰æ„ä¹‰çš„é”™è¯¯ã€‚</strong>å¦‚æœåœ°å€å­˜åœ¨ï¼Œæ ‡ç­¾ä¼šåŒ…å«è¡—é“åœ°å€ã€é‚®ç¼–ã€åŸå¸‚å’Œå›½å®¶ã€‚ç•™æ„ä¹‹å‰è¯´è¿‡çš„withå‡½æ•°æ˜¯å¦‚ä½•è¢«ç”¨æ¥é¿å…åœ¨ä¸€è¡Œä¸­é‡å¤å››æ¬¡addressçš„ã€‚</p><h3 id="6-1-5-å®‰å…¨è½¬æ¢-â€œas-â€"><a href="#6-1-5-å®‰å…¨è½¬æ¢-â€œas-â€" class="headerlink" title="6.1.5 å®‰å…¨è½¬æ¢ â€œas?â€"></a>6.1.5 å®‰å…¨è½¬æ¢ â€œas?â€</h3><p>â€œasâ€ç”¨æ¥è½¬æ¢ç±»å‹çš„å¸¸è§„Kotlinè¿ç®—ç¬¦ï¼Œ<strong>å’Œå¸¸è§„çš„Javaç±»å‹è½¬æ¢ä¸€æ ·ï¼Œå¦‚æœè¢«è½¬æ¢çš„å€¼ä¸æ˜¯ä½ è¯•å›¾è½¬æ¢çš„ç±»å‹ï¼Œå°±ä¼šæŠ›å‡ºClassCastExceptionå¼‚å¸¸ã€‚</strong></p><p><strong>â€œas?â€è¿ç®—ç¬¦å°è¯•æŠŠå€¼è½¬æ¢æˆæŒ‡å®šçš„ç±»å‹ï¼Œå¦‚æœå€¼ä¸æ˜¯åˆé€‚çš„ç±»å‹å°±è¿”å›null</strong></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20210414230332.png" alt="å®‰å…¨è½¬æ¢è¿ç®—ç¬¦å°è¯•æŠŠå€¼è½¬æ¢æˆç»™å®šçš„ç±»å‹ã€‚å¦‚æœç±»å‹ä¸åˆé€‚å°±è¿”å›null"></p><p><strong>ä¸€ç§å¸¸è§çš„æ¨¡å¼æ˜¯æŠŠå®‰å…¨è½¬æ¢å’ŒElvisè¿ç®—ç¬¦ç»“åˆä½¿ç”¨ã€‚</strong></p><pre><code class="kotlin">/*    ä½¿ç”¨å®‰å…¨è½¬æ¢å®ç°equals    */class Person(val firstName:String,val lastName:String){    override fun equals(o:Any?):Boolean{        val otherPerson = o as? Person ?: return false    // æ£€æŸ¥ç±»å‹ï¼Œå¦‚æœä¸åŒ¹é…å°±è¿”å›false        return otherPerson.firstName == firstName &amp;&amp; otherPerson.lastName == lastName    //åœ¨å®‰å…¨è½¬æ¢ä¹‹åï¼Œå˜é‡otherPersonè¢«æ™ºèƒ½åœ°è½¬æ¢ä¸º Person ç±»å‹    }    override fun hashCode():Int = firstName.hashCode() * 37 + lastName.hashCode()}&gt;&gt;&gt; val p1 = Person(&quot;Dmitry&quot;,&quot;Jemerov&quot;)&gt;&gt;&gt; val p2 = Person(&quot;Dmitry&quot;,&quot;Jemerov&quot;)&gt;&gt;&gt; println(p1 == p2)true&gt;&gt;&gt; println(p1.equals(42))false</code></pre><p><strong>ä½¿ç”¨è¿™ç§æ¨¡å¼ï¼Œå¯ä»¥éå¸¸å®¹æ˜“åœ°æ£€æŸ¥å®å‚æ˜¯å¦æ˜¯é€‚å½“çš„ç±»å‹ï¼Œè½¬æ¢å®ƒï¼Œå¹¶åœ¨å®ƒçš„ç±»å‹ä¸èƒ½ç¡®å®šæ˜¯è¿”å›falseï¼Œè€Œä¸”è¿™äº›æ“ä½œå…¨éƒ¨åœ¨åŒä¸€ä¸ªè¡¨è¾¾å¼ä¸­ã€‚</strong>å½“ç„¶ï¼Œè¿™ç§åœºæ™¯ä¸‹æ™ºèƒ½è½¬æ¢ä¹Ÿä¼šç”Ÿæ•ˆï¼šå½“ä½ æ£€æŸ¥è¿‡ç±»å‹å¹¶æ‹’ç»äº†nullå€¼ï¼Œç¼–è¯‘å™¨å°±ç¡®å®šäº†å˜é‡otherPersonå€¼çš„ç±»å‹æ˜¯Personå¹¶å½“ä½ èƒ½å¤Ÿç›¸åº”çš„ä½¿ç”¨å®ƒã€‚</p><h3 id="6-1-6-éç©ºæ–­è¨€ï¼šâ€œ-â€"><a href="#6-1-6-éç©ºæ–­è¨€ï¼šâ€œ-â€" class="headerlink" title="6.1.6 éç©ºæ–­è¨€ï¼šâ€œ!!â€"></a>6.1.6 éç©ºæ–­è¨€ï¼šâ€œ!!â€</h3><p>éç©ºæ–­è¨€ï¼š</p><p><strong>å®ƒä½¿ç”¨åŒæ„Ÿå¹å·è¡¨ç¤ºï¼Œå¯ä»¥æŠŠä»»ä½•å€¼è½¬æ¢æˆéç©ºç±»å‹ã€‚å¦‚æœå¯¹nullå€¼åšéç©ºæ–­è¨€ï¼Œåˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</strong></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20210414234748.png" alt="é€šè¿‡ä½¿ç”¨éç©ºæ–­è¨€ï¼Œå¦‚æœå€¼ä¸ºnullï¼Œå¯ä»¥æ˜¾å¼åœ°æŠ›å‡ºå¼‚å¸¸"></p><p><strong>ä½¿ç”¨éç©ºæ–­è¨€æ¥å§å¯ç©ºçš„å®å‚è½¬æ¢æˆéç©ºã€‚</strong></p><pre><code class="kotlin">/*    ä½¿ç”¨éç©ºæ–­è¨€    */fun ignoreNulls(s:String?){    val sNotNull:String = s!!    // å¼‚å¸¸æŒ‡å‘è¿™ä¸€è¡Œ    println(sNotNull.length)}&gt;&gt;&gt; igoreNulls(null)Exceptin in thread &quot;main&quot; kotlin.KotlinNullPointerException    at &lt;...&gt;.ignoreNulls(07_NotnullAssertions.kt:2)</code></pre><blockquote><p>å¦‚æœä¸Šé¢å‡½æ•°ä¸­sä¸ºnullä¼šå‘ç”Ÿä»€ä¹ˆï¼ŸKotlinæ²¡æœ‰å…¶ä»–é€‰æ‹©ï¼Œå®ƒä¼šåœ¨è¿è¡Œæ—¶æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼ˆä¸€ç§ç‰¹æ®Šçš„NullPointerExceptionï¼‰ã€‚ä½†æ˜¯æ³¨æ„å¼‚å¸¸æŠ›å‡ºçš„ä½ç½®æ˜¯éç©ºæ–­è¨€æ‰€åœ¨çš„å“ªä¸€è¡Œï¼Œè€Œä¸æ˜¯æ¥ä¸‹æ¥è¯•å›¾ä½¿ç”¨é‚£ä¸ªå€¼çš„ä¸€è¡Œã€‚æœ¬è´¨ä¸Šï¼Œä½ åœ¨å‘Šè¯‰ç¼–è¯‘å™¨ï¼šâ€œæˆ‘çŸ¥é“è¿™ä¸ªå­—ä¸ä¸ºnullï¼Œå¦‚æœæˆ‘é”™äº†æˆ‘å‡†å¤‡å¥½å•¦æ¥æ”¶è¿™ä¸ªå¼‚å¸¸ã€‚â€</p><blockquote><p>æ³¨æ„ï¼šKotlinçš„è®¾è®¡è€…è¯•å›¾è¯´æœä½ æ€è€ƒæ›´å¥½çš„è§£å†³æ–¹æ¡ˆï¼Œè¿™äº›æ–¹æ¡ˆä¸ä¼šä½¿ç”¨æ–­è¨€è¿™ç§ç¼–è¯‘å™¨æ— æ³•éªŒè¯çš„æ–¹æ³•ã€‚</p></blockquote><p>ä½†æ˜¯ç¡®å®å­˜åœ¨è¿™ç§æƒ…å†µï¼ŒæŸäº›é—®é¢˜é€‚åˆä½¿ç”¨éç©ºæ–­è¨€æ¥è§£å†³ã€‚å½“ä½ åœ¨ä¸€ä¸ªå‡½æ•°ä¸­æ£€æµ‹ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºnullï¼Œè€Œåœ¨å¦ä¸€ä¸ªå‡½æ•°ä¸­ä½¿ç”¨è¿™ä¸ªå€¼æ—¶ï¼Œè¿™ç§æƒ…å†µä¸‹ç¼–è¯‘å™¨æ— æ³•è¯†åˆ«è¿™ç§ç”¨æ³•æ˜¯å¦å®‰å…¨ã€‚ï¼ˆä¹Ÿå°±æ˜¯ä½¿ç”¨å‰æ£€æŸ¥ä»–æ˜¯å¦ä¸ºnullï¼‰</p></blockquote><h3 id="6-1-7-â€œletâ€-å‡½æ•°"><a href="#6-1-7-â€œletâ€-å‡½æ•°" class="headerlink" title="6.1.7 â€œletâ€ å‡½æ•°"></a>6.1.7 â€œletâ€ å‡½æ•°</h3><p><strong>ç”¨æ¥å¤„ç†å¯ç©ºè¡¨è¾¾å¼ã€‚å’Œå®‰å…¨è°ƒç”¨è¿ç®—ç¬¦ä¸€èµ·ä½¿ç”¨ï¼Œå…è®¸ä½ å¯¹è¡¨è¾¾å¼æ±‚å€¼ï¼Œæ£€æŸ¥æ±‚å€¼ç»“æœæ˜¯å¦nullï¼Œå¹¶æŠŠç»“æœä¿å­˜ä¸ºä¸€ä¸ªå˜é‡ã€‚</strong></p><pre><code class="kotlin">/*    ä½¿ç”¨letè°ƒç”¨ä¸€ä¸ªæ¥æ”¶éç©ºå‚æ•°çš„å‡½æ•°    */fun sendEmailTo(email : String){    println(&quot;Sending emaill to $emaill&quot;)}&gt;&gt;&gt; var email:String ? = &quot;yole@example.com&quot;&gt;&gt;&gt; email?.let{sendEmailTo(it)}Sending email to yole@example.com&gt;&gt;&gt; emaill = null&gt;&gt;&gt; emaill?.let{    sendEmailTo(it)        }</code></pre><blockquote><p>æ‰€ä»¥è¯´åªæœ‰è¿™æ®µè¡¨è¾¾å¼ä¸ä¸ºç©ºæ—¶æ‰ä¼šæ‰§è¡Œä»£ç å—é‡Œçš„ä»£ç </p></blockquote><h3 id="6-1-8-å»¶è¿Ÿåˆå§‹åŒ–çš„å±æ€§"><a href="#6-1-8-å»¶è¿Ÿåˆå§‹åŒ–çš„å±æ€§" class="headerlink" title="6.1.8 å»¶è¿Ÿåˆå§‹åŒ–çš„å±æ€§"></a>6.1.8 å»¶è¿Ÿåˆå§‹åŒ–çš„å±æ€§</h3><p><strong>ä½¿ç”¨å»¶è¿Ÿåˆå§‹åŒ–å±æ€§çš„åŸå› </strong></p><blockquote><p>Kotlin é€šå¸¸è¦æ±‚ä½ åœ¨æ„é€ æ–¹æ³•ä¸­åˆå§‹åŒ–æ‰€æœ‰å±æ€§ï¼Œå¦‚æœæŸä¸ªå±æ€§æ˜¯å¯ç©ºç±»å‹ï¼Œä½ å°±å¿…é¡»æä¾›ä¸€ä¸ªéç©ºçš„åˆå§‹åŒ–å€¼ã€‚å¦åˆ™ï¼Œä½ å°±å¿…é¡»ä½¿ç”¨å¯ç©ºç±»å‹ã€‚å¦‚æœä½ è¿™æ ·åšï¼Œè¯¥å±æ€§çš„æ¯ä¸€æ¬¡è®¿é—®éƒ½éœ€è¦nullæ£€æŸ¥æˆ–è€…â€!!â€è¿ç®—ç¬¦</p></blockquote><p><strong>ä½¿ç”¨éç©ºæ–­è¨€è®¿é—®å¯æ§å±æ€§</strong></p><pre><code class="kotlin">/*    ä½¿ç”¨éç©ºæ–­è¨€è®¿é—®å¯ç©ºå±æ€§    */class MyService{    fun performAction():String = &quot;foo&quot;}class MyText{    private var myService : MyService ?= null    // å£°æ˜äº†ä¸€ä¸ªå¯ç©ºç±»å‹åˆå§‹åŒ–ä¸º null    @Before fun setUp(){    // åœ¨ setUpæ–¹æ³•ä¸­æä¾›çœŸæ­£çš„åˆå§‹åŒ–å™¨        myService = MyService()    }    @Test fun testAction(){        Assert.assertEquals(&quot;foo&quot;,myService!!.performAction())    // å¿…é¡»æ³¨æ„å¯ç©ºæ€§ï¼šè¦ä¹ˆç”¨&quot;!!&quot;ï¼Œè¦ä¹ˆç”¨&quot;?.&quot;    }}</code></pre><pre><code class="kotlin">/*    ä½¿ç”¨å»¶è¿Ÿåˆå§‹åŒ–å±æ€§    */class MyService{    fun performAction():String = &quot;foo&quot;}class MyText{    private lateinit var myService : MyService    // å£°æ˜äº†ä¸€ä¸ªä¸éœ€è¦åˆå§‹åŒ–å™¨çš„éç©ºç±»å‹å±æ€§    @Before fun setUp(){    // åœ¨ setUp æ–¹æ³•ä¸­åˆå§‹åŒ– myService        myService = MyService()    }    @Test fun testAction(){        Assert.assertEquals(&quot;foo&quot;,myService.performAction())    // ä¸éœ€è¦ null æ£€æŸ¥ç›´æ¥è®¿é—®å±æ€§    }}</code></pre><p>æ³¨æ„</p><blockquote><p>åˆå§‹åŒ–çš„å±æ€§å¿…é¡»ä¸ºvarï¼Œå› ä¸ºéœ€è¦åœ¨æ„é€ æ–¹æ³•å¤–ä¿®æ”¹å®ƒçš„å€¼ï¼Œä½¿ç”¨valå±æ€§è¢«ç¼–è¯‘æ—¶å¿…é¡»åœ¨æ„é€ æ–¹æ³•ä¸­åˆå§‹åŒ–finalç‰‡æ®µã€‚</p><p>å°½ç®¡ myService å±æ€§æ˜¯éç©ºçš„ï¼Œä½ ä¸éœ€è¦åœ¨æ„é€ æ–¹æ³•ä¸­åˆå§‹åŒ–å®ƒã€‚åœ¨å±æ€§æ²¡æœ‰è¢«åˆå§‹åŒ–ä¹‹å‰è°ƒç”¨ä¼šå¾—åˆ°å¼‚å¸¸ â€œlateinit property myService has not been initializedâ€ã€‚</p><blockquote><p>lateinit å±æ€§å¸¸è§çš„ä¸€ç§ç”¨æ³•æ˜¯åœ¨ä¾èµ–æ³¨å…¥ã€‚åœ¨æŸç§æƒ…å†µä¸‹ï¼Œlateinit å±æ€§çš„å€¼æ˜¯è¢«ä¾èµ–æ³¨å…¥æ¡†æ¶ä»å¤–éƒ¨è®¾ç½®çš„ã€‚ä¸ºäº†ä¿è¯å’Œå„ç§ä¾èµ–æ³¨å…¥æ¡†æ¶çš„å…¼å®¹æ€§</p><p>ï¼ŒKotlin ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªå’Œ lateinit å±æ€§å…·æœ‰ç›¸åŒå¯è§æ€§çš„å­—æ®µã€‚å¦‚æœå±æ€§çš„å¯è§æ€§æ˜¯publicï¼Œç”Ÿæˆå­—æ®µä¹Ÿæ˜¯å¯è§æ€§public</p></blockquote></blockquote><h3 id="6-1-9å¯ç©ºç±»å‹çš„æ‰©å±•"><a href="#6-1-9å¯ç©ºç±»å‹çš„æ‰©å±•" class="headerlink" title="6.1.9å¯ç©ºç±»å‹çš„æ‰©å±•"></a>6.1.9å¯ç©ºç±»å‹çš„æ‰©å±•</h3><blockquote><p>ä¸ºå¯ç©ºç±»å‹å®šä¹‰æ‰©å±•å‡½æ•°ã€‚å¯ä»¥å…è®¸æ¥æ”¶è€…ï¼ˆè°ƒç”¨è€…ï¼‰ä¸ºç©ºnull çš„ï¼ˆæ‰©å±•å‡½æ•°ï¼‰è°ƒç”¨ï¼Œå¹¶åœ¨è¯¥å‡½æ•°ä¸­å¤„ç†nullï¼Œè€Œä¸æ˜¯åœ¨ç¡®ä¿å˜é‡ä¸ä¸ºnullä¹‹åå†è°ƒç”¨å®ƒçš„æ–¹æ³•ã€‚</p><p><strong>åªæœ‰æ‰©å±•å‡½æ•°æ‰èƒ½åšåˆ°è¿™ä¸€ç‚¹ï¼Œæ™®é€šæˆå‘˜æ–¹æ³•çš„è°ƒç”¨æ˜¯é€šè¿‡å¯¹è±¡å®ä¾‹æ¥åˆ†å‘çš„ï¼Œå› æ­¤å®ä¾‹ä¸ºnullæ—¶ï¼ˆæˆå‘˜æ–¹æ³•ï¼‰æ°¸è¿œä¸èƒ½è¢«æ‰§è¡Œã€‚</strong></p></blockquote><p>Kotlinæ ‡å‡†åº“ä¸­å®šä¹‰çš„Stringçš„ä¸¤ä¸ªæ‰©å±•å‡½æ•°isEmptyå’ŒisBlanckå°±æ˜¯è¿™æ ·çš„ä¾‹å­ã€‚ç¬¬ä¸€ä¸ªå‡½æ•°åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æ˜¯ä¸€ä¸ªç©ºçš„å­—ç¬¦ä¸²â€œâ€ã€‚ç¬¬äºŒä¸ªå‡½æ•°åˆ™åˆ¤æ–­å®ƒæ˜¯å¦æ˜¯ç©ºçš„æˆ–è€…å®ƒåªåŒ…å«ç©ºç™½å­—ç¬¦ã€‚é€šå¸¸ç”¨è¿™äº›å‡½æ•°æ¥æ£€æŸ¥å­—ç¬¦ä¸²ä¸­æ˜¯å¦æœ‰ä»·å€¼çš„ï¼Œä»¥ç¡®ä¿å¯¹å®ƒçš„æ“ä½œæ˜¯ç”±æ„ä¹‰çš„ã€‚</p><p><strong>åƒè¿™ç§æ— æ„ä¹‰çš„ç©ºå­—ç¬¦ä¸²å’Œç©ºç™½å­—ç¬¦ä¸²è¿™æ ·å¤„ç†nullä¹Ÿå¾ˆæœ‰ç”¨ã€‚äº‹å®ä¸Šï¼Œä½ çš„ç¡®å¯ä»¥è¿™æ ·åšï¼šå‡½æ•°isEmptyOrNullå’ŒisNullOrBlankå°±å¯ä»¥ç”±String?ç±»å‹çš„æ¥æ”¶è€…è°ƒç”¨ï¼ˆç”¨äºå¯ç©ºç±»å‹æ¥æ”¶è€…è°ƒç”¨ï¼‰ã€‚</strong></p><pre><code class="kotlin">/*    ç”¨å¯ç©ºæ¥æ”¶è€…è°ƒç”¨æ‰©å±•å‡½æ•°    */fun verifyUserInput(input:String?){    if (input.isNullOrBlank()){    //ä¸éœ€è¦å®‰å…¨è°ƒç”¨        println(&quot;Please fill in the requied fileds&quot;)    }}&gt;&gt;&gt; verifyUserInput(&quot; &quot;)    //å¯ç©ºç±»å‹çš„æ‰©å±•å‡½æ•°åœ¨æ¥æ”¶è€…ä¸ºç©ºæ—¶ä¹Ÿå¯ä»¥è°ƒç”¨Please fill in the required fields&gt;&gt;&gt; verifyUserInput(null)Please fill in the required fields</code></pre><p>ä¸éœ€è¦å®‰å…¨è®¿é—®ï¼Œå°±å¯ä»¥ç›´æ¥ä¸ºå¯æ§æ¥æ”¶è€…å£°æ˜æ‰©å±•å‡½æ•°</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20210417170332.png" alt="ä¸éœ€è¦å®‰å…¨è°ƒç”¨å°±å¯ä»¥è®¿é—®å¯ç©ºç±»å‹çš„æ‰©å±•"></p><p><strong>å‡½æ•°isNullOrBlankæ˜¾å¼åœ°æ£€æŸ¥äº†nullï¼Œè¿™ç§æƒ…å†µä¸‹è¿”å›trueï¼Œç„¶åè°ƒç”¨isBlankï¼Œå®ƒåªèƒ½åœ¨éç©ºStringä¸Šè°ƒç”¨ï¼š</strong></p><pre><code class="kotlin">fun String?.isNullOrBlank():Boolean =    //å¯ç©ºå­—ç¬¦ä¸²çš„æ‰©å±•        this == null || this.isBlank    //ç¬¬äºŒä¸ªâ€œthisâ€ä½¿ç”¨äº†æ™ºèƒ½è½¬æ¢</code></pre><blockquote><p>å½“ä½ ä¸ºä¸€ä¸ªå¯ç©ºç±»å‹ï¼ˆä»¥?ç»“å°¾ï¼‰å®šä¹‰æ‰©å±•å‡½æ•°æ—¶ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥å¯¹å¯ç©ºçš„å€¼è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼›å¹¶ä¸”å‡½æ•°ä½“ä¸­çš„thiså¯èƒ½ä¸ºnullï¼Œæ‰€ä»¥ä½ å¿…é¡»æ˜¾å¼åœ°ä»·å·®ã€‚åœ¨Javaä¸­ï¼Œthisæ°¸è¿œæ˜¯éç©ºçš„ï¼Œå› ä¸ºå®ƒå¼•ç”¨çš„æ—¶å½“å‰ä½ æ‰€åœ¨è¿™ä¸ªç±»çš„å®ä¾‹ã€‚è€Œåœ¨Kotlinä¸­ï¼Œè¿™å¹¶ä¸æ°¸è¿œæˆç«‹ï¼šåœ¨å¯ç©ºç±»å‹çš„æ‰©å±•å‡½æ•°ä¸­ï¼Œthiså¯ä»¥æ˜¯nullçš„ã€‚</p><p>letå‡½æ•°ä¹Ÿèƒ½è¢«å¯ç©ºçš„æ¥æ”¶è€…è°ƒç”¨ï¼Œä½†å®ƒå¹¶ä¸æ£€æŸ¥å€¼æ˜¯å¦ä¸ºnullã€‚å¦‚æœä½ åœ¨ä¸€ä¸ªå¯ç©ºç±»å‹ä¸Šè°ƒç”¨letå‡½æ•°ï¼Œè€Œæ²¡æœ‰ä½¿ç”¨å®‰å…¨è°ƒç”¨è¿ç®—ç¬¦ï¼Œlambdaçš„å®å‚å°†ä¼šæ˜¯å¯ç©ºçš„ï¼š</p><p>ï¼ˆletæ£€æŸ¥æ˜¯å¦ä¸ºnullï¼Œå¹¶æŠŠç»“æœä¿å­˜ä¸ºä¸€ä¸ªå˜é‡ï¼‰</p><pre><code class="kotlin">&gt;&gt;&gt; val person:Person?=...    // å¯ç©ºç±»å‹çš„éç©ºå±æ€§&gt;&gt;&gt; person.let{ sendEmailTo(it) }    // æ²¡æœ‰å®‰å…¨è°ƒç”¨ï¼Œæ‰€ä»¥â€œitâ€æ˜¯å¯ç©ºç±»å‹ERROR:Type mismatch:inferred type is Person? but Person was expected</code></pre><p><strong>ä½¿ç”¨letæ¥æ£€æŸ¥éç©ºçš„å®å‚ï¼Œå¿…é¡»ä½¿ç”¨å®‰å…¨è°ƒç”¨è¿ç®—ç¬¦â€œ?.â€ï¼Œå°±åƒä»£ç ï¼šperson?.let{ sendEmailTo(it) }ã€‚</strong></p><blockquote><p>å½“ä½ å®šä¹‰è‡ªå·±çš„æ‰©å±•å‡½æ•°æ—¶ï¼Œéœ€è¦è€ƒè™‘è¯¥æ‰©å±•æ˜¯å¦éœ€è¦ä¸ºå¯ç©ºç±»å‹å®šä¹‰ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œåº”è¯¥æŠŠå®ƒå®šä¹‰æˆä¼šç©ºç±»å‹çš„æ‰©å±•å‡½æ•°ã€‚åœ¨å‘ç°å¤§éƒ¨åˆ†æƒ…å†µä¸‹éœ€è¦åœ¨å¯ç©ºç±»å‹ä¸Šä½¿ç”¨è¿™ä¸ªå‡½æ•°ï¼Œå†å®‰å…¨çš„ä¿®æ”¹å®ƒã€‚</p></blockquote></blockquote><h3 id="6-1-10-ç±»å‹å‚æ•°çš„å¯ç©ºæ€§"><a href="#6-1-10-ç±»å‹å‚æ•°çš„å¯ç©ºæ€§" class="headerlink" title="6.1.10 ç±»å‹å‚æ•°çš„å¯ç©ºæ€§"></a>6.1.10 ç±»å‹å‚æ•°çš„å¯ç©ºæ€§</h3><p>Kotlin ä¸­<strong>æ‰€æœ‰æ³›å‹ç±»å’Œæ³›å‹å‡½æ•°çš„ç±»å‹å‚æ•°é»˜è®¤</strong>éƒ½æ˜¯å¯ç©ºçš„ã€‚</p><p>ä»»ä½•ç±»å‹ï¼ŒåŒ…æ‹¬å¯ç©ºç±»å‹åœ¨å†…ï¼Œéƒ½å¯ä»¥æ›¿æ¢ç±»å‹å‚æ•°ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œä½¿ç”¨ç±»å‹å‚æ•°ä½œä¸ºç±»å‹çš„å£°æ˜éƒ½å…è®¸ä¸ºnullï¼Œå°½ç®¡ç±»å‹å‚æ•°Tå¹¶æ²¡æœ‰ç”¨é—®å·ç»“å°¾ã€‚</p><p>ä¾‹å­ï¼š</p><pre><code class="kotlin">/*    å¤„ç†å¯ç©ºçš„ç±»å‹å‚æ•°    */fun &lt;T&gt; printHashCode(t:T){    println(t?.hashCode())    //å› ä¸ºâ€Tâ€œ å¯èƒ½ä¸ºnullï¼Œæ‰€ä»¥å¿…é¡»ä½¿ç”¨å®‰å…¨è°ƒç”¨}&gt;&gt;&gt; printHashCode(null)    //â€Tâ€œè¢«æ¨å¯¼ä¸ºâ€Any?â€œnull</code></pre><p>åœ¨printHashCodeè°ƒç”¨ä¸­ï¼Œç±»å‹å‚æ•°Tæ¨å¯¼å‡ºçš„ç±»å‹æ˜¯å¯ç©ºç±»å‹Any?ã€‚    å› æ­¤ï¼Œå°½ç®¡æ²¡æœ‰ç”¨é—®å·ç»“å°¾ï¼Œå®å‚tä¾ç„¶å…è®¸æŒæœ‰nullã€‚</p><p><strong>è¦ä½¿ç±»å‹å‚æ•°éç©ºï¼ˆä¸ä¸ºç©ºï¼‰å¿…é¡»è¦ä¸ºå®ƒæŒ‡å®šä¸€ä¸ªéç©ºçš„ä¸Šç•Œï¼Œé‚£æ ·æ³›å‹å°±ä¼šæ‹’ç»å¯ç©ºå€¼ä½œä¸ºå®å‚ã€‚</strong></p><pre><code class="kotlin">/*    ä¸ºç±»å‹å‚æ•°å£°æ˜éç©ºä¸‰ç•Œ    */fun &lt;T:Any&gt; printHashCode(t:T){    //ç°åœ¨â€Tâ€œå°±ä¸æ˜¯å¯ç©ºçš„    println(t.hashCode())}&gt;&gt;&gt; printHashCode(null)    //è¿™æ®µä»£ç æ˜¯æ— æ³•ç¼–è¯‘çš„ï¼šä½ ä¸èƒ½ä¼ é€’nullï¼Œå› ä¸ºæœŸæœ›å€¼æ˜¯éç©ºå€¼ã€‚Error:Type paramater bound for &#39;T&#39; is not asthisfied&gt;&gt;&gt; printHashCode(42)42</code></pre><p>æ³¨æ„å¿…é¡»ä½¿ç”¨é—®å·ç»“å°¾æ¥æ ‡è®°ç±»å‹ä¸ºå¯ç©ºçš„ï¼Œæ²¡æœ‰é—®å·å°±æ˜¯éç©ºçš„ã€‚ç±»å‹å‚æ•°æ˜¯è¿™ä¸ªè§„åˆ™å”¯ä¸€çš„ä¾‹å¤–ã€‚ï¼ˆåœ¨ä½¿ç”¨ä¸‰ç•Œåï¼Œæƒ³ä½¿ç”¨å¯ç©ºç±»å‹å°±è¦åŠ é—®å·æ¥æ ‡è®°å¯ç©ºã€‚ï¼‰</p><h3 id="6-1-11-å¯ç©ºæ€§å’ŒJava"><a href="#6-1-11-å¯ç©ºæ€§å’ŒJava" class="headerlink" title="6.1.11 å¯ç©ºæ€§å’ŒJava"></a>6.1.11 å¯ç©ºæ€§å’ŒJava</h3><p>Kotlin å¼•ä»¥ä¸ºå‚²çš„æ˜¯å’ŒJavaçš„äº’æ“ä½œæ€§ï¼Œè€Œä½ çŸ¥é“Javaç±»å‹ç³»ç»Ÿæ˜¯ä¸æ”¯æŒå¯ç©ºæ€§çš„ã€‚åœ¨ä½ æ··åˆä½¿ç”¨Kotlinå’ŒJavaæ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿä¼šä¸ä¼šå¤±å»æ‰€æœ‰çš„å®‰å…¨æ€§ï¼Ÿæˆ–è€…æ¯ä¸ªå€¼éƒ½å¿…é¡»æ£€æŸ¥æ˜¯å¦ä¸ºnullï¼Ÿ</p><blockquote><p>æœ‰äº›æ—¶å€™Javaä»£ç åŒ…å«äº†å¯ç©ºæ€§çš„ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯ç”¨æ³¨è§£æ¥è¡¨è¾¾ã€‚</p><p><strong>å½“ä»£ç ä¸­å‡ºç°äº†è¿™äº›ä¿¡æ¯æ—¶ï¼ŒKotlinå°±ä¼šä½¿ç”¨ã€‚å› æ­¤Javaä¸­@Nullable string è¢«Kotlinå½“ä½œString?(å¯ç©ºç±»å‹)ï¼Œè€Œ@NotNull Stringå°±æ˜¯String(ä¸ä¸ºç©ºç±»å‹)</strong></p></blockquote><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20210419170543.png" alt="æ ¹æ®Javaç±»å‹è¯†åˆ«çš„æ³¨è§£ï¼ŒJavaç±»å‹å›åœ¨Kotlinä¸­è¡¨ç¤ºä¸ºå¯ç©ºç±»å‹å’Œéç©ºç±»å‹"></p><p>Kotlin å¯ä»¥è¯†åˆ«å¤šç§ä¸åŒé£æ ¼çš„å¯ç©ºæ€§æ³¨è§£ï¼ŒåŒ…æ‹¬JSR-305æ ‡å‡†çš„æ³¨è§£ï¼ˆåœ¨javax.annotationåŒ…ä¹‹ä¸­ï¼‰ã€Androidçš„æ³¨è§£ï¼ˆandroid.support.annotationåŒ…ä¹‹ä¸­ï¼‰å’ŒJetBrainså·¥å…·æ”¯æŒçš„æ³¨è§£ï¼ˆorg.jetbrains.annotationï¼‰ã€‚</p><p><strong>å¦‚æœè¿™äº›æ³¨è§£ä¸å­˜åœ¨ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</strong></p><p><strong>Java ç±»å‹ä¼šå˜æˆKotlinä¸­çš„å¹³å°ç±»å‹</strong></p><p><strong>å¹³å°ç±»å‹</strong></p><blockquote><p><strong>å¹³å°ç±»å‹æœ¬è´¨ä¸Šå°±æ˜¯Kotlinä¸çŸ¥é“å¯ç©ºæ€§ä¿¡æ¯çš„ç±»å‹</strong>ã€‚<strong>å³å¯ä»¥æŠŠå®ƒå½“ä½œå¯ç©ºç±»å‹å¤„ç†ï¼Œä¹Ÿå¯ä»¥å½“ä½œä¼šç©ºç±»å‹å¤„ç†</strong>ã€‚</p></blockquote><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20210420145256.png" alt="Javaç±»å‹åœ¨Kotlinä¸­è¡¨ç¤ºä¸ºå¹³å°ç±»å‹ï¼Œæ—¢å¯ä»¥æŠŠå®ƒå½“ä½œå¯ç©ºç±»å‹ä¹Ÿå¯ä»¥å½“ä½œä¼šç©ºç±»å‹æ¥å¤„ç†"></p><blockquote><p>è¿™æ„å‘³ç€ï¼Œä½ è¦åƒåœ¨Javaä¸­æ„ä¹‰ï¼Œå¯¹ä½ åœ¨è¿™ä¸ªç±»å‹ä¸Šåšçš„æ“ä½œè´Ÿå…¨éƒ¨è´£ä»»ã€‚ç¼–è¯‘å™¨å°†ä¼šå…è®¸æ‰€æœ‰çš„æ“ä½œï¼Œå®ƒä¸ä¼šæŠŠå¯¹è¿™äº›å­—çš„ç©ºå®‰å…¨æ“ä½œé«˜äº®å¤šä½™çš„ï¼Œä½†å®ƒå¹³æ—¶ç¡®å®è¿™æ ·å¯¹å¾…ä¼šç©ºç±»å‹å€¼ä¸Šçš„ç©ºå®‰å…¨æ“ä½œã€‚<strong>å¦‚æœä½ è®¤ä¸ºè¿™ä¸ªå­—ä¸ºnullï¼Œåœ¨ä½¿ç”¨å®ƒä¹‹å‰å¯ä»¥ç”¨å®ƒå’Œnullè¿›è¡Œæ¯”è¾ƒã€‚å¦‚æœä½ è®¤ä½å®ƒä¸ä¸ºnullï¼Œå°±ç›´æ¥ä½¿ç”¨å®ƒã€‚å°±åƒåœ¨Javaä¸­ä¸€æ ·ï¼Œå¦‚æœä½ é”™è¯¯åœ°ç†è§£äº†è¿™ä¸ªå€¼ï¼Œä½¿ç”¨çš„æ—¶å€™å°±ä¼šé‡åˆ°NullPointerExceptionã€‚</strong></p></blockquote><p><strong>ä¾‹å­</strong></p><pre><code class="java">/*    æ²¡æœ‰å¯ç©ºæ€§æ³¨è§£çš„Javaç±»    */public class Person{    private final String name;    public Person(String name){        this.name = name    }    public String getName(){        return name    }}</code></pre><blockquote><p>getNameèƒ½ä¸èƒ½è¿”å›null?è¿™ç§æƒ…å†µä¸‹Kotlinç¼–è¯‘å™¨å®Œå…¨ä¸çŸ¥é“Stringç±»å‹çš„å¯ç©ºæ€§ï¼Œæ‰€ä»¥ä½ å¿…é¡»å¤„ç†å®ƒã€‚<strong>å¦‚æœä½ ç¡®å®šnameä¸ä¸ºnullï¼Œå°±å¯ä»¥åƒJavaä¸­ä¸€æ ·æŒ‰ç…§é€šå¸¸çš„æ–¹å¼å¯¹å®ƒè§£å¼•ç”¨ï¼Œä¸éœ€è¦é¢å¤–çš„æ£€æŸ¥ã€‚ä½†æ˜¯è¿™ç§æƒ…å†µä¸‹è¯·å‡†å¤‡å¥½æ¥å—å¼‚å¸¸ã€‚</strong></p></blockquote><pre><code class="kotlin">/*    ä¸ä½¿ç”¨nullæ£€æŸ¥è®¿é—®Javaç±»    */fun yellAt(person:Person){    println(person.name.toUpperCase()+ &quot;!!!&quot; )    //toUpperCase()è°ƒç”¨çš„å‡½æ•°æ¥æ”¶è€…person.nameä¸ºnullï¼Œæ‰€ä»¥è¿™é‡Œä¼šæŠ›å‡ºå¼‚å¸¸}&gt;&gt;&gt; yellAt(Person(null))java.lang.IllegalArgumentException:Paramater specified as non-null is null: method toUpperCase, parameter $receiver</code></pre><blockquote><p>æ³¨æ„ï¼Œè¿™é‡Œä½ çœ‹åˆ°çš„ä¸æ˜¯ä¸€ä¸ªNullPointerExceptionï¼Œè€Œæ˜¯ä¸€æ¡æ›´è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯ï¼Œå‘Šè¯‰ä½ æ–¹æ³•toUpperCaseä¸èƒ½åœ¨nullçš„æ¥æ”¶è€…ä¸Šè°ƒç”¨ã€‚</p><p><strong>å¯¹äºå…¬æœ‰çš„Kotlinå‡½æ•°ï¼Œç¼–è¯‘å™¨ç”Ÿæˆå¯¹æ¯ä¸ªéç©ºç±»å‹çš„å‚æ•°ï¼ˆå’Œæ¥æ”¶è€…ï¼‰çš„æ£€æŸ¥å’Œï¼Œæ‰€ä»¥ä½¿ç”¨ä¸æ­£ç¡®çš„å‚æ•°çš„è°ƒç”¨å°è¯•éƒ½ç«‹å³è¢«æŠ¥å‘Šä¸ºå¼‚å¸¸ã€‚ï¼ˆåœ¨ä½¿ç”¨å‚æ•°å‰ä¼šæ£€æŸ¥éç©ºçš„å‚æ•°ã€‚ï¼‰</strong></p><p>è¿™ç§å€¼æ£€æŸ¥åœ¨å‡½æ•°è°ƒç”¨çš„æ—¶å€™å°±æ‰§è¡Œï¼Œè€Œä¸æ˜¯ç­‰åˆ°è¿™äº›å‚æ•°è¢«ä½¿ç”¨çš„æ—¶å€™ã€‚è¿™ç¡®ä¿äº†ä¸æ­£ç¡®çš„è°ƒç”¨ä¼šè¢«å°½æ—©çš„å‘ç°ï¼Œé‚£äº›ç”±äºnullå€¼è¢«ä¼ ç»™ä»£ç ä¸åŒå±‚æ¬¡çš„å¤šä¸ªå‡½æ•°ä¹‹åï¼Œå¹¶è¢«è¿™äº›å‡½æ•°è®¿é—®æ—¶è€Œäº§ç”Ÿçš„éš¾ä»¥ç†è§£çš„å¼‚å¸¸å°±èƒ½è¢«é¿å…ã€‚</p></blockquote><p>æŠŠgetName()çš„è¿”å›ç±»å‹è§£é‡Šä¸ºå¯ç©ºçš„å¹¶å®‰å…¨çš„è®¿é—®å®ƒã€‚</p><pre><code>/*    ä½¿ç”¨nullæ£€æŸ¥æ¥è®¿é—®çš„Javaç±»    */fun yellAtSafe(person:Person){    println((person.name?:&quot;Anyone&quot;).toUpperCase()+&quot;!!!&quot;)}&gt;&gt;&gt; yellAtSafe(null)ANYONE!!!</code></pre><blockquote><p>Java API ä¸­å¤§éƒ¨åˆ†åº“æ²¡æœ‰ï¼ˆå¯ç©ºæ€§ï¼‰æ³¨è§£ï¼Œæ‰€ä»¥å¯ä»¥æŠŠæ‰€æœ‰ç±»å‹éƒ½è§£é‡Šä¸ºéç©ºï¼Œä½†æ˜¯ä¼šå¯¼è‡´é”™è¯¯ã€‚ä¸ºäº†é¿å…é”™è¯¯ï¼Œä½ åº”è¯¥é˜…è¯»Javaæ–¹æ³•çš„æ–‡æ¡£ï¼ˆå¿…è¦æ—¶è¿˜è¦æŸ¥çœ‹å®ƒçš„å®ç°ï¼‰ï¼Œå¹¶çŸ¥é“å®ƒä¸Šé¢æ—¶å€™è¿”å›nullï¼Œå¹¶ç»™é‚£äº›è¿”å›åŠ ä¸Šæ£€æŸ¥ã€‚</p><blockquote><p>ä¸ºä»€ä¹ˆéœ€è¦å¹³å°ç±»å‹ï¼Ÿ</p><p>å¯¹ Kotlin æ¥è¯´ï¼ŒæŠŠæ¥è‡ªJavaçš„æ‰€æœ‰å€¼éƒ½å½“æˆå¯ç©ºçš„æ˜¯ä¸æ˜¯æ›´å®‰å…¨ï¼Ÿè¿™ç§è®¾è®¡ä¹Ÿè®¸å¯è¡Œï¼Œä½†æ˜¯è¿™éœ€è¦å¯¹æ°¸è¿œä¸ä¸ºç©ºçš„å€¼åšå¤§é‡å†—ä½™çš„nullæ£€æŸ¥ï¼Œå› ä¸ºKotlinç¼–è¯‘å™¨æ— æ³•äº†è§£åˆ°è¿™æ ·çš„ä¿¡æ¯ã€‚</p><p>æ¶‰åŠæ³›å‹çš„è¯è¿™ç§æ–°æ¬¾å°±æ›´åŠ ç³Ÿç³•äº†ã€‚ä¾‹å¦‚ï¼Œåœ¨Kotlinä¸­ï¼Œæ¯æ¬¡æ¥è‡ªJavaçš„ArrayList<String>éƒ½è¢«å½“ä½œArrayList&lt;String?&gt;?ï¼Œæ¯æ¬¡è®¿é—®æˆ–è€…è½¬æ¢ç±»å‹éƒ½éœ€è¦æ£€æŸ¥è¿™äº›å€¼æ˜¯å¦ä¸ºnullï¼Œè¿™æ ·æŠµæ¶ˆæ‰å®‰å…¨æ€§å¸¦æ¥çš„å¥½å¤„ã€‚ç¼–å†™è¿™æ ·çš„æ£€æŸ¥éå¸¸ä»¤äººåŒçƒ¦ï¼Œæ‰€ä»¥Kotlinçš„è®¾è®¡è€…åšå‡ºäº†æ›´å®ç”¨çš„é€‰æ‹©ï¼Œè®©å¼€å‘è€…è´Ÿè´£æ­£ç¡®å¤„ç†æ¥è‡ªJavaçš„å€¼</p></blockquote></blockquote><p>åœ¨<strong>Kotilnä¸­ä¸èƒ½å£°æ˜ä¸€ä¸ªå¹³å°ç±»å‹ï¼ˆä¸çŸ¥é“å¯ç©ºä¿¡æ¯çš„ï¼‰çš„å˜é‡</strong>ï¼Œè¿™äº›ä¿¡æ¯åªèƒ½æ¥è‡ªJavaä»£ç ï¼Œä½†ä½ å¯èƒ½ä¼šåœ¨IDEçš„é”™è¯¯ä¿¡æ¯ä¸­è§åˆ°å®ƒä»¬ã€‚</p><pre><code class="kotlin">&gt;&gt;&gt; val i:Ine = person.nameERROR:Type mismatch: inferred type is String! but Int was expected</code></pre><blockquote><p>String! è¡¨ç¤ºæ³•è¢«Kotlinç¼–è¯‘å™¨ç”¨æ¥è¡¨ç¤ºæ¥è‡ª<strong>Javaä»£ç çš„å¹³å°ç±»å‹</strong>ã€‚ä½ ä¸èƒ½åœ¨è‡ªå·±çš„ä»£ç ä¸­ä½¿ç”¨è¿™ç§è¯­æ³•ã€‚è€Œä¸”æ„Ÿå¹å·é€šå¸¸ä¸é—®é¢˜çš„æ¥æºæ— å…³ï¼Œæ‰€ä»¥é€šå¸¸å¯ä»¥å¿½ç•¥å®ƒã€‚<strong>è¿™åªæ˜¯åœ¨å¼ºè°ƒç±»å‹çš„å¯ç©ºæ€§æ˜¯æœªçŸ¥çš„ã€‚</strong></p></blockquote><p><strong>ä½ å¯ä»¥ç”¨ä½ å–œæ¬¢çš„æ–¹å¼æ¥è§£é‡Šå¹³å°ç±»å‹ï¼Œæ—¢å¯ä»¥æ˜¯å¯æ§çš„ä¹Ÿå¯ä»¥æ˜¯éç©ºçš„ã€‚</strong></p><pre><code class="kotlin">&gt;&gt;&gt; val s:String?=person.name    //å¯ç©º&gt;&gt;&gt; val s1:String = person.name    //éç©º</code></pre><p><strong>å¦‚æœä½ ç”¨æ¥è‡ªJavaçš„nullå€¼ç»™ä¸€ä¸ªéç©ºçš„Kotlinå˜é‡èµ‹å€¼ï¼Œåœ¨èµ‹å€¼çš„ç¬é—´ä½ å°±ä¼šå¾—åˆ°å¼‚å¸¸ã€‚</strong>ä½ éœ€è¦æ­£ç¡®çš„ç†è§£å¯ç©ºæ€§ã€‚</p><p><strong>ç»§æ‰¿</strong></p><p>Kotlin é‡å†™Javaçš„æ–¹æ³•æ—¶ï¼Œ<strong>å¯ä»¥é€‰æ‹©æŠŠå‚æ•°å’Œè¿”å›ç±»å‹å®šä¹‰æˆå¯ç©ºçš„ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©æŠŠå®ƒä»¬å®šä¹‰æˆéç©ºçš„ã€‚</strong></p><p><strong>ä¾‹å­</strong></p><pre><code class="java">/*    Javaä¸­çš„StringProcessoræ¥å£    */interfece StringProcessor{    void process(String value);}</code></pre><p>Kotlin ä¸­ä¸‹é¢çš„ä¸¤ç§å®ç°ç¼–è¯‘å™¨éƒ½å¯ä»¥æ¥æ”¶ã€‚</p><pre><code class="kotlin">/*    å®ç°Javaæ¥å£æ—¶ä½¿ç”¨ä¸åŒçš„å‚æ•°å¯ç©ºæ€§    */class StringPrinter:StringProcessor{    override fun process(value:String){        pritlin(value)    }}class NullableStringPrinter:StringProcessor{    override fun process(value:String?){    // å‚æ•°å¯ç©º        if(value != null){            println(value)        }    }}</code></pre><blockquote><p>åœ¨å®ç°Javaç±»æˆ–è€…æ¥å£çš„æ–¹æ³•æ—¶ä¸€å®šè¦ææ¸…æ¥šå®ƒçš„å¯ç©ºæ€§ã€‚<strong>å› ä¸ºæ–¹æ³•å®ç°å¯åœ¨éKotlinçš„ä»£ç ä¸­è¢«è°ƒç”¨ï¼ŒKotlinç¼–è¯‘å™¨ä¼šä¸ºä½ å£°æ˜çš„æ¯ä¸ªéç©ºçš„å‚æ•°ç”Ÿæˆéç©ºæ–­è¨€ã€‚</strong>å¦‚æœJavaä»£ç ä¼ ç»™è¿™ä¸ªæ–¹æ³•ä¸€ä¸ªnullå€¼ï¼Œæ–­è¨€å°±ä¼šè§¦å‘ï¼Œä½ å°±ä¼šå¾—åˆ°ä¸€ä¸ªå¼‚å¸¸ï¼Œå³ä¾¿ä½ ä»æ¥æ²¡æœ‰åœ¨ä½ çš„å®ç°ä¸­è®¿é—®è¿‡è¿™ä¸ªå‚æ•°çš„å€¼ã€‚</p></blockquote><h2 id="6-2-åŸºæœ¬æ•°æ®ç±»å‹å’Œå…¶ä»–åŸºæœ¬ç±»å‹"><a href="#6-2-åŸºæœ¬æ•°æ®ç±»å‹å’Œå…¶ä»–åŸºæœ¬ç±»å‹" class="headerlink" title="6.2 åŸºæœ¬æ•°æ®ç±»å‹å’Œå…¶ä»–åŸºæœ¬ç±»å‹"></a>6.2 åŸºæœ¬æ•°æ®ç±»å‹å’Œå…¶ä»–åŸºæœ¬ç±»å‹</h2><p>æè¿°ç¨‹åºä¸­çš„åŸºæœ¬æ•°æ®ç±»å‹ï¼Œä¾‹å¦‚Intã€Booleanå’ŒAnyã€‚</p><p>ä¸Javaä¸åŒï¼ŒKotlinå¹¶ä¸åŒºåˆ†åŸºæœ¬æ•°æ®ç±»å‹å’Œå®ƒä»¬çš„åŒ…è£…ç±»ã€‚</p><h3 id="6-2-1-åŸºæœ¬æ•°æ®ç±»å‹ï¼šIntã€BooleanåŠå…¶ä»–"><a href="#6-2-1-åŸºæœ¬æ•°æ®ç±»å‹ï¼šIntã€BooleanåŠå…¶ä»–" class="headerlink" title="6.2.1 åŸºæœ¬æ•°æ®ç±»å‹ï¼šIntã€BooleanåŠå…¶ä»–"></a>6.2.1 åŸºæœ¬æ•°æ®ç±»å‹ï¼šIntã€BooleanåŠå…¶ä»–</h3><blockquote><p><strong>JavaæŠŠåŸºæœ¬æ•°æ®ç±»å‹å’Œå¼•ç”¨ç±»å‹åšäº†åŒºåˆ†ã€‚</strong></p><p>ä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹ï¼ˆå¦‚intï¼‰çš„å˜é‡ç›´æ¥å­˜å‚¨äº†å®ƒçš„å€¼ï¼Œè€Œä¸€ä¸ªå¼•ç”¨ç±»å‹ï¼ˆå¦‚Stringï¼‰çš„å˜é‡å­˜å‚¨çš„æ—¶æŒ‡å‘åŒ…å«è¯¥å¯¹è±¡çš„å†…å­˜åœ°å€çš„å¼•ç”¨ã€‚</p></blockquote><blockquote><p>åŸºæœ¬æ•°æ®ç±»å‹çš„åªèƒ½å¤Ÿæ›´é«˜æ•ˆåœ°å­˜å‚¨å’Œä¼ é€’ï¼Œä½†ä½ ä¸èƒ½å¯¹è¿™äº›å€¼è°ƒç”¨æ–¹æ³•ï¼Œæˆ–æ˜¯å®ƒä»¬å­˜æ”¾åœ¨é›†åˆä¸­ã€‚</p><p><strong>Javaæä¾›äº†ç‰¹æ®Šçš„åŒ…è£…ç±»å‹ï¼ˆæ¯”å¦‚java.lang.Integer),åœ¨ä½ éœ€è¦å¯¹è±¡çš„æ˜¯å¦å¯¹åŸºæœ¬æ•°æ®ç±»å‹è¿›è¡Œå°è£…ã€‚å› æ­¤ï¼Œä½ ä¸èƒ½ç”¨Collection<int>æ¥å®šä¹‰ä¸€ä¸ªæ•´æ•°çš„é›†åˆï¼Œè€Œå¿…é¡»ç”¨Collection<integer>æ¥å®šä¹‰ã€‚</strong></p></blockquote><blockquote><p><strong>Kotlin å¹¶ä¸åŒºåˆ†åŸºæœ¬æ•°æ®ç±»å‹å’ŒåŒ…è£…ç±»å‹ï¼Œ</strong>æ°¸è¿œæ˜¯åŒä¸€ä¸ªç±»å‹ï¼ˆæ¯”å¦‚intï¼‰</p><pre><code class="kotlin">val i:Int = 1val list:List&lt;Int&gt; = listOf(1,2,3)</code></pre><p>åŒæ—¶è¿˜èƒ½å¯¹æ•°å­—ç±»å‹çš„å€¼è°ƒç”¨æ–¹æ³•ã€‚</p><pre><code class="kotlin">/*    ä½¿ç”¨æ ‡å‡†åº“çš„å‡½æ•°coerceInæ¥æŠŠå€¼é™åˆ¶åœ¨ç‰¹å®šèŒƒå›´å†…    */fun showProgress(progress:Int){    val percent = progress.coerceIn(0,100)    println(&quot;We&#39;re ${percent}% done!&quot;)}&gt;&gt;&gt; showProgress(146)We&#39;re 100% done!</code></pre><p>è™½ç„¶æ²¡æœ‰åŒºåˆ†åŸºæœ¬æ•°æ®ç±»å‹å’ŒåŒ…è£…ç±»å‹ï¼Œä½†æ˜¯è¿™ä¸æ„å‘³ç€Kotlinä½¿ç”¨å¯¹è±¡æ¥è¡¨ç¤ºæ‰€æœ‰æ•°ç»„ï¼</p><p><strong>åœ¨è¿è¡Œæ—¶ï¼Œæ•°å­—ç±»å‹ä¼šå°½å¯èƒ½åœ°ä½¿ç”¨æœ€é«˜æ•ˆçš„æ–¹å¼æ¥è¡¨ç¤ºã€‚å¤§å¤šæ•°å½¢å†µä¸‹â€”â€”å¯¹äºå˜é‡ã€å±æ€§ã€å‚æ•°å’Œè¿”å›ç±»å‹â€”â€”Kotlinçš„Intç±»å‹ä¼šè¢«ç¼–è¯‘æˆJavaåŸºæœ¬ç±»å‹intã€‚å”¯ä¸€ä¸å¯è¡Œçš„ä¾‹å¤–æ˜¯æ³›å‹ç±»ï¼Œä¾‹å¦‚é›†åˆã€‚ç”¨ä½œæ³›å‹å‚æ•°çš„åŸºæœ¬æ•°æ®ç±»å‹ä¼šè¢«ç¼–è¯‘æˆå¯¹åº”çš„åŒ…è£…ç±»ã€‚ä¾‹å¦‚ï¼ŒIntç±»è¢«ç”¨ä½œé›†åˆç±»å‹çš„ç±»å‹å‚æ•°æ—¶ï¼Œé›†åˆç±»å°†ä¼šä¿å­˜å¯¹åº”åŒ…æ¢ç±»å‹java.lang.Integerçš„å®ä¾‹ã€‚</strong></p></blockquote><p><strong>JavaåŸºæœ¬æ•°æ®ç±»å‹å®Œæ•´åˆ—è¡¨</strong></p><ul><li>æ•´æ•°ç±»å‹â€”â€”Byteã€Shortã€Intã€Long</li><li>æµ®ç‚¹æ•´æ•°ç±»å‹â€”â€”Floatã€Double</li><li>å­—ç¬¦ç±»å‹â€”â€”Char</li><li>å¸ƒå°”ç±»å‹â€”â€”Boolean</li></ul><p><strong>å°±åƒInt è¿™æ ·çš„Kotlinç±»å‹åœ¨åº•å±‚å¯ä»¥è½»æ˜“çš„ç¼–è¯‘æˆå¯¹åº”çš„JavaåŸºæœ¬ç±»å‹ï¼Œå› ä¸ºä¸¤ç§ç±»å‹éƒ½ä¸èƒ½å­˜å‚¨nullå¼•ç”¨ã€‚å½“ä½ åœ¨Kotlinä¸­ä½¿ç”¨Javaå£°æ˜æ—¶ï¼ŒJavaåŸºæœ¬æ•°æ®ç±»å‹å°±ä¼šå˜æˆéç©ºç±»å‹ï¼ˆè€Œä¸æ˜¯å¹³å°ç±»å‹ï¼‰ï¼Œå› ä¸ºå®ƒä»¬ä¸èƒ½æŒæœ‰nullå€¼ã€‚</strong></p><h3 id="6-2-2-å¯ç©ºåŸºæœ¬æ•°æ®ç±»å‹ï¼šInt-ã€Booleanï¼ŸåŠå…¶ä»–"><a href="#6-2-2-å¯ç©ºåŸºæœ¬æ•°æ®ç±»å‹ï¼šInt-ã€Booleanï¼ŸåŠå…¶ä»–" class="headerlink" title="6.2.2 å¯ç©ºåŸºæœ¬æ•°æ®ç±»å‹ï¼šInt?ã€Booleanï¼ŸåŠå…¶ä»–"></a>6.2.2 å¯ç©ºåŸºæœ¬æ•°æ®ç±»å‹ï¼šInt?ã€Booleanï¼ŸåŠå…¶ä»–</h3><blockquote><p>Kotlinä¸­çš„å¯ç©ºç±»å‹ä¸èƒ½ç”¨Javaçš„åŸºæœ¬æ•°æ®ç±»å‹è¡¨ç¤ºï¼Œå› ä¸ºnullåªèƒ½è¢«å­˜å‚¨åœ¨Javaçš„å¼•ç”¨ç±»å‹çš„å˜é‡ä¸­ã€‚è¿™æ„å‘³ç€ä»»ä½•æ—¶å€™ä½¿ç”¨äº†åŸºæœ¬æ•°æ®ç±»å‹çš„å¯ç©ºç‰ˆæœ¬ï¼Œå®ƒå°±ä¼šè¢«ç¼–è¯‘æˆå¯¹åº”çš„åŒ…è£…ç±»ã€‚</p></blockquote><pre><code class="kotlin">/*    åå­—æ°¸è¿œå·²çŸ¥çš„Personç±»ï¼Œä½†æ˜¯å¹´é¾„å¯èƒ½æœªçŸ¥æˆ–è€…æœªæŒ‡å®šã€‚æ·»åŠ å‡½æ•°æ£€æŸ¥ä¸€ä¸ªäººæ˜¯å¦æ¯”å¦ä¸€ä¸ªäººå¹´é•¿    */class Person(val name:String,val age:Int ?= null){        fun isOlderThan(other:Person):Boolean?{            if(age == null ||other.age == null)                return null            return age &gt; other.age        }}&gt;&gt;&gt; println(Person(&quot;Sam&quot;,35).isOlderThan(Person(&quot;Amy&quot;,42)))false&gt;&gt;&gt; println(Person(&quot;Sam&quot;,34).isOlderThan(Person(&quot;Jane&quot;)))null</code></pre><p><strong>æ³¨æ„ï¼Œæ™®é€šçš„å¯ç©ºæ€§è§„åˆ™å¦‚ä½•åœ¨è¿™é‡Œå¼•ç”¨ã€‚</strong>ä½ ä¸èƒ½å°±è¿™æ ·æ¯”è¾ƒä¸¤ä¸ªå€¼ï¼Œå› ä¸ºå®ƒä»¬å½“ä¸­ä»»ä½•ä¸€ä¸ªéƒ½å¯èƒ½ä¸ºnullã€‚ä½ å¿…é¡»æ£€æŸ¥ä¸¤ä¸ªå€¼éƒ½ä¸ä¸ºnullã€‚</p><p>Personç±»å£°æ˜çš„ageå±æ€§çš„å€¼è¢«å½“ä½œjava.lang.Integerå­˜å‚¨ï¼ˆåŒ…è£…ç±»ï¼‰ã€‚ä½†æ˜¯åªæœ‰åœ¨ä½ ä½¿ç”¨æ¥è‡ªJavaçš„ç±»æ—¶è¿™äº›ç»†èŠ‚æ‰æœ‰æ„ä¹‰ã€‚ä¸ºäº†åœ¨Kotlinä¸­é€‰å‡ºæ­£ç¡®çš„ç±»å‹ï¼Œä½ åªéœ€è¦è€ƒè™‘å¯¹å˜é‡æˆ–è€…å±æ€§æ¥è¯´ï¼Œnullæ˜¯å¦æ˜¯å®ƒä»¬å¯èƒ½çš„å€¼ã€‚</p><p><strong>æ³›å‹ç±»ï¼ˆArrayList<Integer>)æ˜¯åŒ…è£…ç±»å‹åº”ç”¨çš„å¦ä¸€ç§æƒ…å†µã€‚å¦‚æœä½ ç”¨åŸºæœ¬æ•°æ®ç±»å‹ä½œä¸ºæ³›å‹ç±»çš„å‚æ•°ç±»å‹ï¼Œé‚£ä¹ˆKotlinä¼šä½¿ç”¨è¯¥ç±»å‹çš„åŒ…è£…å½¢å¼ï¼ˆInt ==&gt; Integerï¼‰</strong></p><p>åˆ›å»ºä¸€ä¸ªIntegeråŒ…è£…ç±»çš„åˆ—è¡¨ï¼Œ<strong>å°½ç®¡æ²¡æœ‰æŒ‡å®šè¿‡å¯ç©ºç±»å‹æˆ–è€…ç”¨è¿‡nullå€¼</strong></p><pre><code class="kotlin">val listOfInts = listOf(1,2,3)</code></pre><p>è¿™æ˜¯ç”±Javaè™šæ‹Ÿæœºå®ç°æ³›å‹çš„æ–¹å¼å†³å®šçš„ã€‚JVMä¸æ”¯æŒç”¨åŸºæœ¬æ•°æ®ç±»å‹ä½œä¸ºç±»å‹å‚æ•°ï¼Œæ‰€ä»¥æ³›å‹ç±»ï¼ˆJavaå’ŒKotlinä¸€æ ·ï¼‰å¿…é¡»å§‹ç»ˆä½¿ç”¨ç±»å‹çš„åŒ…è£…è¡¨ç¤ºã€‚<strong>å› æ­¤ï¼Œä½ è¦é«˜æ•ˆçš„å­˜å‚¨åŸºæœ¬æ•°æ®ç±»å‹å…ƒç´ çš„å¤§å‹é›†åˆï¼Œè¦ä¹ˆä½¿ç”¨æ”¯æŒè¿™ç§é›†åˆçš„ç¬¬ä¸‰æ–¹åº“ï¼ˆå¦‚Trove4Jï¼‰è¦ä¹ˆä½¿ç”¨æ•°ç»„æ¥å­˜å‚¨ã€‚</strong></p><h3 id="6-2-3-æ•°å­—è½¬æ¢"><a href="#6-2-3-æ•°å­—è½¬æ¢" class="headerlink" title="6.2.3 æ•°å­—è½¬æ¢"></a>6.2.3 æ•°å­—è½¬æ¢</h3><p>Kotlinå’ŒJava<strong>ä¹‹é—´ä¸€æ¡é‡è¦çš„åŒºåˆ«å°±æ˜¯å¤„ç†æ•°å­—è½¬æ¢çš„æ–¹å¼ã€‚</strong>Kotlinä¸ä¼šè‡ªåŠ¨çš„æŠŠæ•°å­—ä»ä¸€ç§ç±»å‹è½¬æ¢æˆå¦ä¸€ç§ï¼Œå³ä¾¿æ˜¯è½¬æ¢èŒƒå›´æ›´å¤§çš„ç±»å‹ã€‚</p><pre><code class="kotlin">val i = 1val i : Long = i    //é”™è¯¯ï¼šç±»å‹ä¸åŒ¹é…</code></pre><p>æ­£ç¡®çš„è½¬æ¢</p><pre><code class="kotlin">val i = 1val l:Long = i.toLang()</code></pre><blockquote><p>åŸºæœ¬æ•°æ®ç±»å‹ç±»å‹ï¼ˆBooleané™¤å¤–ï¼‰éƒ½å®šä¹‰æœ‰è½¬æ¢å‡½æ•°ï¼štoByte()ã€toShort()ã€toChar()ç­‰ã€‚è¿™äº›å‡½æ•°æ”¯æŒåŒå‘è½¬æ¢ï¼šæ—¢å¯ä»¥æŠŠ å°èŒƒå›´çš„ç±»å‹æ‰©å±•åˆ°å¤§èŒƒå›´ï¼Œæ¯”å¦‚Int.toLong(),ä¹Ÿå¯ä»¥æŠŠå¤§èŒƒå›´çš„ç±»å‹æˆªå–åˆ°å°èŒƒå›´ï¼Œæ¯”å¦‚Long.toInt()ã€‚</p><p>Kotlin è¦æ±‚è½¬æ¢å¿…é¡»æ˜¯æ˜¾å¼çš„ï¼Œå°¤å…¶æ˜¯åœ¨æ¯”è¾ƒ<strong>è£…ç®±å€¼</strong>çš„æ—¶å€™ã€‚æ¯”è¾ƒä¸¤ä¸ªè£…ç®±å€¼çš„equalsæ–¹æ³•ä¸ä»…ä¼šæ£€æŸ¥å®ƒä»¬å­˜å‚¨çš„å€¼ï¼Œè¿˜ä¼šæ¯”è¾ƒè£…ç®±ç±»å‹ã€‚æ‰€ä»¥ï¼Œåœ¨Javaä¸­new Integer(42).equals(new Long(42)) ä¼šè¿”å›falseã€‚</p><blockquote><p>Javaä¸­çš„è£…ç®±å’Œæ‹†ç®±</p><p><strong>è£…ç®±å’Œæ‹†ç®±æ˜¯ä»Java1.5å¼€å§‹å¼•å…¥çš„ï¼Œå®ƒçš„ç›®çš„æ˜¯å°†åŸå§‹ç±»å‹å€¼è‡ªåŠ¨åœ°è½¬æ¢æˆå¯¹åº”çš„å¯¹è±¡ã€‚</strong>è‡ªåŠ¨è£…ç®±æœºåˆ¶å¯ä»¥è®©æˆ‘ä»¬åœ¨Javaçš„å˜é‡èµ‹å€¼æˆ–è€…å…¶ä»–æ–¹æ³•è°ƒç”¨ç­‰æƒ…å†µä¸‹ä½¿ç”¨åŸå§‹ç±»å‹æˆ–è€…å¯¹è±¡ç±»å‹æ›´åŠ ç®€å•ç›´æ¥ã€‚</p></blockquote></blockquote><p>å‡å¦‚ Kotlin æ”¯æŒéšå¼è½¬æ¢ï¼Œ</p><pre><code class="kotlin">val x = 1    // Intå˜é‡val list = listOf(1L,2L,3L)    //Longå€¼åˆ—è¡¨x in list //å‡å¦‚æ”¯æŒéšå¼è½¬æ¢å®ƒä»ç„¶æ˜¯ false</code></pre><blockquote><p>å› æ­¤ï¼Œä¸Šåˆ—ä¸­ x in list æ ¹æœ¬ä¸ä¼šç¼–è¯‘ã€‚Kotlinè¦æ±‚ä½ æ˜¾å¼çš„è½¬æ¢ç±»å‹ï¼Œè¿™æ ·åªæœ‰ç±»å‹ç›¸åŒçš„å€¼æ‰æ¯”è¾ƒï¼š</p><pre><code class="kotlin">&gt;&gt;&gt; val x = 1&gt;&gt;&gt; println(x.toLong() in listOf(1L,2L,3L))true</code></pre><p>åœ¨ä»£ç ä¸­ç”¨åˆ°ä¸åŒçš„æ•°æ®ç±»å‹ï¼Œä½ å¿…é¡»æ˜¾å¼çš„è½¬æ¢è¿™äº›å˜é‡ï¼Œæ¥é¿å…æ„æƒ³ä¸åˆ°çš„ç»“æœã€‚</p></blockquote><blockquote><p><strong>åŸºæœ¬æ•°æ®ç±»å‹å­—é¢å€¼</strong></p><ul><li>ä½¿ç”¨åæˆ³Lè¡¨ç¤ºLongç±»å‹(é•¿æ•´å‹)å­—é¢å€¼:123L.</li><li>ä½¿ç”¨æ ‡å‡†æµ®ç‚¹æ•°è¡¨ç¤ºDouble(åŒæµ®ç‚¹ç²¾åº¦)å­—é¢å€¼:0.12ã€2.0ã€1.2e10ã€1.2e-10ã€‚</li><li>ä½¿ç”¨Fè¡¨ç¤ºFloatç±»å‹ï¼ˆæµ®ç‚¹æ•°ï¼‰å­—é¢å€¼ï¼š123.4fã€.345Fã€1e3fã€‚</li><li>ä½¿ç”¨å‰æˆ³0xæˆ–è€…0Xè¡¨ç¤ºåå…­è¿›åˆ¶å­—é¢å€¼ï¼š0xCAFEBABEæˆ–è€…0xbcdLã€‚</li><li>ä½¿ç”¨å‰æˆ³0bæˆ–è€…0Bè¡¨ç¤ºäºŒè¿›åˆ¶å­—é¢å€¼ï¼š0b000000101.</li></ul><p>åœ¨Kotlin1.1æ‰å¼€å§‹æ”¯æŒæ•°å­—å­—é¢å€¼ä¸­çš„ä¸‹åˆ’çº¿ã€‚å¯¹å­—ç¬¦å­—é¢å€¼æ¥è¯´ï¼Œå¯ä»¥ä½¿ç”¨å’ŒJavaå‡ ä¹ä¸€æ ·çš„è¯­æ³•ã€‚æŠŠå­—ç¬¦å¸è½½å•å¼•å·ä¸­ï¼Œå¿…è¦æ—¶è¿˜å¯ä»¥ä½¿ç”¨è½¬ä¹‰åºåˆ—ã€‚æœ‰æ•ˆçš„Kotlinå­—ç¬¦å­—é¢å€¼ï¼šâ€˜1â€™ã€â€˜/tâ€™ï¼ˆåˆ¶è¡¨ç¬¦ï¼‰ã€â€˜\u0009â€™ï¼ˆä½¿ç”¨Unicodeè½¬ä¹‰åºåˆ—è¡¨ç¤ºçš„åˆ¶è¡¨ç¬¦ï¼‰ã€‚</p></blockquote><blockquote><p>å½“ä½ åœ¨ä¹¦å†™æ•°å­—å­—é¢å€¼çš„æ—¶å€™ï¼Œä¸€èˆ¬ä¸éœ€è¦ä½¿ç”¨è½¬æ¢å‡½æ•°ã€‚è¿™ç§ï¼ˆå­—é¢å€¼ï¼‰ç‰¹æ®Šçš„è¯­æ³•æ¥æ˜¾ç¤ºåœ°æ ‡è®°å¸¸é‡ç±»å‹ï¼Œä¾‹å¦‚42Læˆ–è€…42.0fã€‚å³ä½¿ä½ æ²¡æœ‰ä½¿ç”¨è¿™ç§è¯­æ³•ï¼Œæ•°å­—å­—é¢å€¼å»åˆå§‹åŒ–ä¸€ä¸ªç±»å‹å·²çŸ¥çš„å˜é‡æ˜¯ï¼ˆIne ç±»å‹å·²çŸ¥ï¼Œåˆå§‹åŒ–ä¸ºLongï¼‰ï¼Œåˆæˆ–æ˜¯æŠŠå­—é¢å€¼å½“ä½œå®å‚ä¼ é€’ç»™å‡½æ•°æ—¶ï¼Œå¿…è¦çš„è½¬æ¢ä¼šè‡ªåŠ¨å‘ç”Ÿã€‚  ç®—æ•°è¿ç®—ç¬¦ä¹Ÿä¼šè¢«é‡è½½ï¼Œå®ƒä»¬å¯ä»¥æ¥æ”¶æ‰€æœ‰é€‚å½“çš„æ•°å­—ç±»å‹ã€‚</p><pre><code class="kotlin">/*    å¦‚ä¸‹çš„ä»£ç å¹¶æ²¡æœ‰ä»»ä½•æ˜¾å¼çš„è½¬æ¢å´å¯ä»¥æ­£å¸¸å·¥ä½œè¿‡    */fun foo(l:Long) = println(l)&gt;&gt;&gt; val b:Byte = 1    //å¸¸é‡æœ‰æ­£ç¡®çš„ç±»å‹&gt;&gt;&gt; val l = b+1L    //+å¯ä»¥è¿›è¡Œç›´æ¥ç±»å‹å’Œé•¿æ•´å‹å‚æ•°çš„è®¡ç®—&gt;&gt;&gt; foo(42)    // ç¼–è¯‘å™¨è®¤ä¸º42æ˜¯ä¸€ä¸ªé•¿æ•´å‹42</code></pre><blockquote><p>Koylinç®—æœ¯è¿ç®—ç¬¦å…³äºæ•°å€¼èŒƒå›´æº¢å‡ºçš„è¡Œä¸ºå’ŒJavaå®Œå…¨ä¸€ç›´ï¼›Kotlinå¹¶æ²¡æœ‰å¼•å…¥ç”±æº¢å‡ºæ£€æŸ¥å¸¦æ¥çš„é¢å¤–å¼€é”€ã€‚</p></blockquote></blockquote><p><strong>å­—ç¬¦ä¸²è½¬æ¢</strong></p><blockquote><p>Kotlin æ ‡å‡†åº“æä¾›äº†ä¸€å¥—ç›¸ä¼¼çš„æ‰©å±•æ–¹æ³•ï¼Œç”¨æ¥æŠŠå­—ç¬¦ä¸²è½¬æ¢æˆåŸºæœ¬æ•°æ®ç±»å‹ï¼ˆtoIntã€toByteã€toBooleanã€ç­‰ï¼‰ã€‚</p><pre><code class="kotlin">&gt;&gt;&gt; println(&quot;42&quot;.toInt())42</code></pre><p>å‡½æ•°ä¼šå°è¯•æŠŠå­—ç¬¦ä¸²çš„å†…å®¹è§£ææˆå¯¹åº”çš„å‡½æ•°ï¼Œå¦‚æœè§£æå¤±è´¥æŠ›å‡ºNumberFormatExceptionã€‚</p></blockquote><h3 id="6-2-4-â€œAnyâ€å’Œâ€œAntï¼Ÿâ€ï¼šæ ¹ç±»å‹"><a href="#6-2-4-â€œAnyâ€å’Œâ€œAntï¼Ÿâ€ï¼šæ ¹ç±»å‹" class="headerlink" title="6.2.4 â€œAnyâ€å’Œâ€œAntï¼Ÿâ€ï¼šæ ¹ç±»å‹"></a>6.2.4 â€œAnyâ€å’Œâ€œAntï¼Ÿâ€ï¼šæ ¹ç±»å‹</h3><blockquote><p><strong>å’ŒOjbectä½œä¸ºJavaç±»å±‚çº§ç»“æ„çš„æ ¹å·®ä¸å¤šï¼ŒAnyç±»å‹æ˜¯Kotlinæ‰€æœ‰éç©ºç±»å‹çš„è¶…ç±»å‹ï¼ˆéç©ºç±»å‹çš„æ ¹ï¼‰ã€‚</strong>è€Œåœ¨Javaä¸­ï¼ŒObjectåªæ˜¯æ‰€æœ‰åº”ç”¨ç±»å‹çš„è¶…ç±»å‹ï¼ˆå¼•ç”¨ç±»å‹çš„çš„æ ¹ï¼‰ï¼Œè€ŒåŸºæœ¬æ•°æ®ç±»å‹å¹¶ä¸æ˜¯ç±»å±‚çº§ç»“æ„çš„ä¸€éƒ¨åˆ†ã€‚è¿™æ„å‘³ç€å½“ä½ éœ€è¦Objectçš„æ—¶å€™ï¼Œä¸å¾—ä¸ä½¿ç”¨java.long.Integerè¿™æ ·çš„åŒ…è£…ç±»å‹æ¥è¡¨ç¤ºåŸºæœ¬æ•°æ®ç±»å‹çš„å€¼ã€‚<strong>è€Œåœ¨Kotlinä¸­ï¼ŒAnyæ˜¯æ‰€æœ‰ç±»å‹çš„è¶…ç±»å‹ï¼ˆæ‰€æœ‰ç±»å‹çš„æ ¹ï¼‰ï¼ŒåŒ…æ‹¬åƒIntè¿™æ ·çš„åŸºæœ¬æ•°æ®ç±»å‹ã€‚</strong></p></blockquote><p>åŸºæœ¬æ•°æ®ç±»å‹çš„å€¼èµ‹ç»™Anyç±»å‹çš„å˜é‡æ—¶ä¼šè‡ªåŠ¨è£…ç®±ï¼š</p><pre><code class="kotlin">val answer:Any = 42    \\Anyæ˜¯å¼•ç”¨ç±»å‹ï¼Œæ‰€ä»¥å€¼42ä¼šè¢«è£…ç®±</code></pre><p><strong>Anyæ˜¯éç©ºç±»å‹ï¼Œæ‰€ä»¥Anyç±»å‹çš„å˜é‡ä¸å¯ä»¥æŒæœ‰nullå€¼ã€‚Kotlinä¸­æƒ³è¦æŒæœ‰ä»»ä½•å¯èƒ½çš„å˜é‡ï¼ŒåŒ…æ‹¬nullåœ¨å†…ï¼Œå¿…é¡»ä½¿ç”¨Any?ç±»å‹ã€‚</strong></p><blockquote><p>åœ¨åº•å±‚ï¼ŒAnyç±»å‹å¯¹åº”java.lang.Objectã€‚KotlinæŠŠJavaæ–¹æ³•å‚æ•°å’Œè¿”å›ç±»å‹ä¸­ç”¨åˆ°çš„Objectç±»å‹çœ‹ä½œAnyï¼ˆæ›´ç¡®åˆ‡çš„è¯´æ˜¯å½“ä½œå¹³å°ç±»å‹ï¼Œå› ä¸ºå…¶å¯ç©ºæ€§æ˜¯ä½ç½®çš„ï¼‰ã€‚å½“Kotlinå‡½æ•°ä½¿ç”¨Anyæ—¶ï¼Œå®ƒä¼šè¢«ç¼–è¯‘æˆJavaå­—èŠ‚ç ä¸­çš„Objectã€‚</p></blockquote><h3 id="6-2-5-Unit-ç±»å‹ï¼šKotlinçš„â€œvoidâ€"><a href="#6-2-5-Unit-ç±»å‹ï¼šKotlinçš„â€œvoidâ€" class="headerlink" title="6.2.5 Unit ç±»å‹ï¼šKotlinçš„â€œvoidâ€"></a>6.2.5 Unit ç±»å‹ï¼šKotlinçš„â€œvoidâ€</h3><p><strong>Kotlinä¸­çš„Unitç±»å‹å’ŒJavaä¸­voidæ˜¯ä¸€æ ·çš„åŠŸèƒ½</strong>ã€‚åœ¨å‡½æ•°æ²¡æœ‰ä»€ä¹ˆéœ€è¦è¿”å›çš„æ—¶å€™ï¼ŒUnitå¯ä»¥ç”¨ä½œå‡½æ•°çš„è¿”å›ç±»å‹ï¼š</p><pre><code class="kotlin">fun f(): Unit{...}fun f(){...}    //çœç•¥Unitå£°æ˜</code></pre><p>ä¸¤ä¸ªä»£ç å—çš„ç»“æœæ˜¯ç›¸åŒçš„ã€‚</p><p>å¤§å¤šæ•°æƒ…å†µä¸‹ä½ ä¸ä¼šç•™æ„åˆ°voidå’ŒUnitä¹‹é—´çš„åŒºåˆ«ã€‚<strong>å¦‚æœä½ çš„Kotlinå‡½æ•°ä½¿ç”¨Unitä½œä¸ºè¿”å›ç±»å‹å¹¶ä¸”æ²¡æœ‰é‡å†™æ³›å‹å‡½æ•°ï¼Œåœ¨åº•å±‚å®ƒä¼šè¢«ç¼–è¯‘æˆæ—§çš„voidå‡½æ•°ã€‚å¦‚æœä½ è¦åœ¨Javaä¸­é‡å†™è¿™ä¸ªå‡½æ•°ï¼Œæ–°çš„Javaå‡½æ•°éœ€è¦è¿”å›voidã€‚</strong></p><p><strong>Kotlinä¸­çš„Unitå’ŒJavaä¸­çš„voidåˆ°åº•æœ‰é‚£äº›ä¸åŒï¼Ÿ</strong></p><blockquote><p>Unitæ˜¯ä¸€ä¸ªå®Œæ•´çš„ç±»å‹ï¼Œå¯ä»¥ä½œä¸ºç±»å‹å‚æ•°ï¼Œè€Œvoidå´ä¸è¡Œã€‚åªå­˜åœ¨å€¼æ˜¯Unitç±»å‹ï¼Œè¿™ä¸ªå€¼ä¹Ÿå«Unitï¼Œå¹¶ä¸”ä¼šè¢«éšå¼åœ°è¿”å›ã€‚å½“ä½ åœ¨é‡å†™è¿”å›æ³›å‹å‚æ•°çš„å‡½æ•°</p><p>æ—¶ä¼šéå¸¸æœ‰ç”¨åªéœ€è¦è®©æ–¹æ³•è¿”å›Unitç±»å‹çš„å€¼ï¼š</p><pre><code class="kotlin">interface Processor&lt;T&gt;{    fun process():T}class NoResultProcessor:Processor&lt;Unit&gt;{    override fun process(){    // è¿”å› Unit ï¼Œè¿™é‡Œå¯ä»¥çœç•¥ç±»å‹è¯´æ˜        // do stuff    }    // è¿™é‡Œä¸éœ€è¦æ˜¾å¼çš„return}</code></pre><p>æ¥å£ç­¾åè¦æ±‚processå‡½æ•°è¿”å›ä¸€ä¸ªå€¼ï¼›è€Œä¸”ï¼Œå› ä¸ºUnitç±»å‹ç¡®å®æœ‰å€¼ï¼Œæ‰€ä»¥ä»æ–¹æ³•ä¸­è¿”å›å®ƒå¹¶æ²¡æœ‰é—®é¢˜ã€‚ç„¶è€Œä½ ä¸éœ€è¦åœ¨NoResultProcessor.processå‡½æ•°ä¸­å†™ä¸Šæ˜¾å¼çš„returnè¯­å¥ï¼Œå› ä¸ºç¼–è¯‘å™¨ä¼šéšå¼åœ°åŠ ä¸Šreturn Unit.</p></blockquote><p>åœ¨ä¸Javaå¯¹æ¯”ä¸­ï¼ŒJavaä¸­ä¸ºäº†è§£å†³ä½¿ç”¨â€œæ²¡æœ‰å€¼â€ä½œä¸ºç±»å‹å‚æ•°çš„ä»»ä½•ä¸€ä¸ªå¯èƒ½è§£æ³•ï¼Œéƒ½æ²¡æœ‰Kotlinå¥½ç”¨ã€‚ä¸€ç§æ˜¯åˆ†å¼€æ¥å£å®šä¹‰æ¥è¡¨ç¤ºéœ€è¦å’Œä¸éœ€è¦è¿”å›å€¼çš„æ¥å£ï¼ˆå¦‚Callableå’ŒRunnableï¼‰ã€‚å¦ä¸€ç§ä½¿ç”¨ç‰¹æ®Šçš„java.lang.Voidç±»å‹ä½œä¸ºç±»å‹å‚æ•°ã€‚å³ä¾¿ä½ ä½¿ç”¨äº†åé¢è¿™ç§æ–¹æ³•ï¼Œä½ è¿˜æ˜¯éœ€è¦åŠ å…¥return nullï¼›è¯­å¥æ¥è¿”å›å”¯ä¸€èƒ½åŒ¹é…è¿™ä¸ªç±»å‹çš„å€¼ï¼Œå› ä¸ºåªè¦è¿”å›ç±»å‹ä¸æ˜¯voidï¼Œä½ å°±å¿…é¡»å§‹ç»ˆæœ‰æ˜¾å¼çš„returnè¯­å¥ã€‚</p><p>åœ¨å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€ä¸­ï¼ŒUnitè¿™ä¸ªåå­—ä¹ æƒ¯ä¸Šè¢«ç”¨æ¥è¡¨ç¤ºâ€œåªæœ‰ä¸€ä¸ªå®ä¾‹â€ï¼Œè¿™æ­£æ˜¯Kotlinå’ŒJavaçš„voidçš„åŒºåˆ«ã€‚</p><h3 id="6-2-6-Nothingç±»å‹ï¼šâ€œè¿™ä¸ªå‡½æ•°æ°¸ä¸è¿”å›â€"><a href="#6-2-6-Nothingç±»å‹ï¼šâ€œè¿™ä¸ªå‡½æ•°æ°¸ä¸è¿”å›â€" class="headerlink" title="6.2.6 Nothingç±»å‹ï¼šâ€œè¿™ä¸ªå‡½æ•°æ°¸ä¸è¿”å›â€"></a>6.2.6 Nothingç±»å‹ï¼šâ€œè¿™ä¸ªå‡½æ•°æ°¸ä¸è¿”å›â€</h3><p><strong>è§£é‡Šäº†ä¸ºä»€ä¹ˆè¦åˆ›å»ºNothingç±»å‹</strong></p><blockquote><p>å¯¹äºæŸäº›Kotlinå‡½æ•°æ¥è¯´ï¼Œâ€œè¿”å›ç±»å‹çš„æ¦‚å¿µæ²¡æœ‰ä»»ä½•æ„ä¹‰ï¼Œå› ä¸ºå®ƒä»æ¥ä¸ä¼šæˆåŠŸåœ°ç»“æŸã€‚ä¾‹å¦‚ï¼Œè®¸å¤šæµ‹è¯•åº“éƒ½æœ‰ä¸€ä¸ªå«failçš„å‡½æ•°ï¼Œå®ƒé€šè¿‡æŠ›å‡ºå¸¦æœ‰ç‰¹å®šä¿¡æ¯çš„å¼‚å¸¸æ¥è®©å½“å‰æµ‹è¯•å¤±è´¥ã€‚ä¸€ä¸ªåŒ…å«æ— é™å¾ªç¯çš„å‡½æ•°ä¹Ÿæ°¸è¿œä¸ä¼šæˆåŠŸåœ°ç»“æŸã€‚</p></blockquote><p>åˆ†æè°ƒç”¨å‡½æ•°ä»£ç æ—¶ï¼ŒçŸ¥é“å‡½æ•°æ°¸è¿œä¸ä¼šæ­£å¸¸ç»“æŸæ˜¯å¾ˆæœ‰å¸®åŠ©çš„ã€‚Kotlin ä½¿ç”¨Nothingè¿™ç§ç‰¹æ®Šçš„è¿”å›ç±»å‹æ¥è¡¨ç¤º:</p><pre><code class="kotlin">fun fail(message:String):Nothing{    throw IllegalStateException(message)}&gt;&gt;&gt; fail(&quot;Error occurred&quot;)java.lang.IllegalStateException:Error occurred</code></pre><p>Nothing ç±»å‹æ²¡æœ‰ä»»ä½•å€¼ï¼Œåªæœ‰è¢«å½“ä½œå‡½æ•°è¿”å›å€¼ä½¿ç”¨ï¼Œæˆ–è€…è¢«å½“ä½œæ³›å‹å‡½æ•°è¿”å›å€¼çš„ç±»å‹å‚æ•°ä½¿ç”¨æ‰ä¼šæœ‰æ„ä¹‰ã€‚åœ¨å…¶ä»–æƒ…å†µä¸‹ï¼Œå£°æ˜ä¸€ä¸ªä¸èƒ½å­˜å‚¨ä»»ä½•å€¼çš„å˜é‡æ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚</p><p>Nothingå‡½æ•°å¯ä»¥æ”¾åœ¨Elvisè¿ç®—ç¬¦çš„å³è¾¹æ¥åšå…ˆå†³æ¡ä»¶æ£€æŸ¥ï¼š</p><pre><code class="kotlin">val address = company.address?:fail(&quot;No address&quot;)println(address.city)</code></pre><p><strong>ç¼–è¯‘å™¨çŸ¥é“è¿™ç§è¿”å›ç±»å‹çš„å‡½æ•°ä»ä¸ç»ˆæ­¢ï¼Œç„¶ååœ¨åˆ†æè°ƒç”¨è¿™äº›å‡½æ•°çš„ä»£ç æ—¶åˆ©ç”¨è¿™ä¸ªä¿¡æ¯ã€‚</strong>ä¸Šä¾‹ï¼Œç¼–è¯‘å™¨ä¼šæŠŠaddressçš„ç±»å‹æ¨æ–­æˆéç©ºï¼Œå› ä¸ºå®ƒä¸ºnullæ—¶çš„åˆ†æ”¯å¤„ç†ä¼šå§‹ç»ˆæŠ›å‡ºå¼‚å¸¸ã€‚</p><h2 id="6-3-é›†åˆä¸æ•°ç»„"><a href="#6-3-é›†åˆä¸æ•°ç»„" class="headerlink" title="6.3 é›†åˆä¸æ•°ç»„"></a>6.3 é›†åˆä¸æ•°ç»„</h2><p>Kotlinä»¥Javaé›†åˆåº“ä¸ºåŸºç¡€æ„å»ºï¼Œå¹¶é€šè¿‡æ‰©å±•å‡½æ•°å¢åŠ çš„ç‰¹æ€§æ¥å¢å¼ºå®ƒã€‚</p><h3 id="6-3-1-å¯ç©ºæ€§å’Œé›†åˆ"><a href="#6-3-1-å¯ç©ºæ€§å’Œé›†åˆ" class="headerlink" title="6.3.1 å¯ç©ºæ€§å’Œé›†åˆ"></a>6.3.1 å¯ç©ºæ€§å’Œé›†åˆ</h3><p>æˆ‘ä»¬è®¨è®ºäº†å¯ç©ºç±»å‹çš„æ¦‚å¿µï¼Œä½†ä»…ä»…ç®€ç•¥çš„è°ˆåˆ°ç±»å‹å‚æ•°çš„å¯ç©ºæ€§ã€‚å¯¹å‰åä¸€è‡´çš„ç±»å‹ç³»ç»Ÿæ¥è¯´ååˆ†å…³é”®<strong>ï¼šçŸ¥é“é›†åˆæ˜¯å¦å¯ä»¥æŒæœ‰nullå…ƒç´ ï¼Œå’ŒçŸ¥é“å˜é‡å€¼æ˜¯å¦å¯ä»¥ä¸ºnullåŒç­‰é‡è¦ã€‚Kotlinå®Œå…¨æ”¯æŒç±»å‹å‚æ•°çš„å¯ç©ºæ€§ã€‚å°±åƒå˜é‡çš„ç±»å‹å¯ä»¥åŠ ä¸Šï¼Ÿå­—ç¬¦æ¥è¡¨ç¤ºå˜é‡å¯ä»¥æŒæœ‰nullä¸€æ ·ï¼Œç±»å‹åœ¨è¢«å½“ä½œç±»å‹å‚æ•°æ—¶ä¹Ÿå¯ä»¥ç”¨åŒæ ·çš„æ–¹å¼æ ‡è®°ã€‚</strong></p><p>è¿™ä¸ªå‡½æ•°ä»ä¸€ä¸ªæ–‡ä»¶ä¸­è¯»å–æ–‡æœ¬è¡Œçš„åˆ—è¡¨ï¼Œå¹¶å°è¯•æŠŠæ¯ä¸€è¡Œæ–‡æœ¬è§£ææˆæ•°å­—ã€‚</p><pre><code class="kotlin">/*    åˆ›å»ºä¸€ä¸ªå¯ä»¥åŒ…å«å¯ç©ºå€¼çš„é›†åˆ    */fun readNumbers(reader: BufferedReader): List&lt;Int?&gt;{    var result = ArratList&lt;Int?&gt;()    //åˆ›å»ºåŒ…å«å¯ç©ºIntå€¼çš„åˆ—è¡¨    for (line in reader.lineSequence()){        try{            val number = line.toInt()            result.add(number)    // å‘åˆ—è¡¨ä¸­æ·»åŠ æ•´æ•°ï¼ˆéç©ºï¼‰        }        catch(e: NumberFormatException){            result.add(null)    //å‘åˆ—è¡¨æ·»åŠ  nullï¼Œå› ä¸ºå½“å‰è¡Œä¸èƒ½è¢«è§£ææˆæ•´æ•°ã€‚        }    }    return result}</code></pre><blockquote><p><strong>å¦‚æœè¿™ä¸€è¡Œæ–‡æœ¬è¢«è§£æï¼Œé‚£ä¹ˆå°±å‘resultåˆ—è¡¨ä¸­æ·»åŠ ä¸€ä¸ªæ•´æ•°ï¼Œå¦åˆ™æ·»åŠ nullã€‚List&lt;Int?&gt;æ˜¯èƒ½æŒæœ‰Int?ç±»å‹å€¼çš„åˆ—è¡¨ï¼šæ¢å¥è¯è¯´ï¼Œå¯ä»¥æŒæœ‰Intæˆ–è€…nullã€‚ï¼ˆé›†åˆä¸­å¯ä»¥å­˜æ”¾nullå€¼ï¼‰ã€‚ä»Kotlin1.1ä¸­ï¼Œå¯ä»¥ä½¿ç”¨å‡½æ•°String.toIntOrNullæ¥ç®€åŒ–ä¾‹å­ï¼Œå­—ç¬¦ä¸²ä¸èƒ½è¢«è§£æçš„æ—¶å€™ä¼šè¿”å›nullã€‚</strong></p></blockquote><p><strong>å˜é‡è‡ªå·±çš„å¯ç©ºæ€§</strong>å’Œç”¨<strong>ä½œç±»å‹å‚æ•°çš„ç±»å‹çš„å¯ç©ºæ€§æ˜¯æœ‰åŒºåˆ«çš„ã€‚</strong>åŒ…å«<strong>å¯ç©ºInt</strong>çš„åˆ—è¡¨å’Œ<strong>åŒ…å«Intçš„å¯ç©ºåˆ—è¡¨</strong>ä¹‹é—´æ˜¯æœ‰åŒºåˆ«çš„ã€‚å¦‚ä¸‹ï¼š</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20210426224838.png" alt="è¦å°å¿ƒå†³å®šä»€ä¹ˆæ˜¯å¯ç©ºçš„ï¼šé›†åˆçš„å…ƒç´ è¿˜æ˜¯é›†åˆæœ¬èº«ï¼Ÿ"></p><p>ç¬¬ä¸€ç§æƒ…å†µï¼Œåˆ—è¡¨æœ¬èº«å§‹ç»ˆä¸ä¸ºnullï¼Œåˆ—è¡¨ä¸­çš„æ¯ä¸ªå€¼éƒ½å¯ä»¥ä¸ºnullã€‚ç¬¬äºŒç§ç±»å‹çš„å˜é‡å¯èƒ½åŒ…å«ç©ºå¼•ç”¨è€Œä¸æ˜¯åˆ—è¡¨å®ä¾‹ï¼Œ<strong>ä½†åˆ—è¡¨ä¸­çš„å…ƒç´ å§‹ç»ˆä¿æŒéç©ºçš„ã€‚</strong></p><p>åœ¨å¦ä¸€ç§ä¸Šä¸‹æ–‡ä¸­ï¼Œ<strong>ä½ å¯èƒ½éœ€è¦å£°æ˜ä¸€ä¸ªæŒæœ‰å¯ç©ºçš„åˆ—è¡¨ï¼Œå¹¶ä¸”åŒ…å«å¯ç©ºçš„æ•°å­—ã€‚</strong>Kotlinä¸­çš„å†™æ³•æ˜¯List&lt;Int?&gt;?ï¼Œæœ‰ä¸¤ä¸ªé—®å·ã€‚åœ¨ä½¿ç”¨å˜é‡è‡ªå·±å€¼çš„æ—¶å€™ï¼Œ<strong>ä»¥åŠä½¿ç”¨åˆ—è¡¨ä¸­æ¯ä¸ªå…ƒç´ çš„æ—¶å€™ï¼Œéœ€è¦ä½¿ç”¨nullæ£€æŸ¥ã€‚ï¼ˆå› ä¸ºå†…å®¹å¯èƒ½ä¸ºç©ºï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨æ—¶éœ€è¦åšnullæ£€æŸ¥ï¼‰</strong></p><p><strong>å¦‚ä½•ä½¿ç”¨å¯ç©ºå€¼çš„åˆ—è¡¨ï¼Œ</strong>å¦‚ä¸‹å‡½æ•°è®¡ç®—åˆ—è¡¨ä¸­æœ‰æ•ˆæ•°å­—ä¹‹å’Œï¼Œå¹¶å•ç‹¬çš„å¯¹æ— æ•ˆæ•°å­—è®¡æ•°ã€‚</p><pre><code class="kotlin">/*    ä½¿ç”¨å¯ç©ºå€¼é›†åˆ    */fun addValidNumbers(numbers:List&lt;Int?&gt;){    var sumOfValidNumbers = 0    var invalidNumbers = 0    for (number in numbers){    //ä»åˆ—è¡¨ä¸­è¯»å–å¯ç©ºå€¼        if (number != null){    //æ£€æŸ¥å€¼æ˜¯å¦ä¸ºnull            sumOfValidNumbers +=number        }else {            invalidNumbers++        }    }    println(&quot;Sum of valid numbers: $sumOfValidNumbers&quot;)    println(&quot;Invalid numbers: $invalidNumbers&quot;)} &gt;&gt;&gt; val reader = BufferedReader(StringReader(&quot;1\nabc\n42&quot;)) &gt;&gt;&gt; val numbers = readNumber(reader) &gt;&gt;&gt; addValidNumbers(numbers) Sum of valid numbers: 43 Invalid numbers:1</code></pre><p>å½“ä½ è®¿é—®ä¸€ä¸ªåˆ—è¡¨ä¸­çš„å…ƒç´ æ—¶ï¼Œä½ å¾—åˆ°çš„æ˜¯ä¸€ä¸ªç±»å‹ä¸ºInt?çš„å€¼ï¼Œå¹¶ä¸”è¦åœ¨ç”¨å®ƒè¿›è¡Œç®—æ•°è¿ç®—ä¹‹å‰æ£€æŸ¥å®ƒæ˜¯å¦ä¸ºnullã€‚</p><p><strong>Kotlin æä¾›äº†æ ‡å‡†åº“å‡½æ•°filterNotNullå‡½æ•°ï¼Œç”¨æ¥éå†ä¸€ä¸ªåŒ…å«å¯ç©ºå€¼çš„é›†åˆå¹¶è¿‡æ»¤æ‰nullçš„æ“ä½œã€‚</strong></p><pre><code class="kotlin">fun addValidNumbers(numbers:List&lt;Int?&gt;){    val validNumbers = numbers.filterNotNull()    println(&quot;Sum of valid numbers:${validNumbers.sum()}&quot;)    println(&quot;Invalid numbers:${numbers.size - validNUmbers.size}&quot;)}</code></pre><p>è¿‡æ»¤å½±å“äº†é›†åˆçš„ç±»å‹ã€‚validNumbersçš„ç±»å‹æ˜¯List<Int>ï¼Œå› æ­¤è¿‡æ»¤ä¿è¯äº†é›†åˆä¸ä¼šå†åŒ…å«ä»»ä½•ä¸ºnullçš„å…ƒç´ ã€‚</p><h3 id="6-3-2-åªè¯»é›†åˆä¸å¯å˜é›†åˆ"><a href="#6-3-2-åªè¯»é›†åˆä¸å¯å˜é›†åˆ" class="headerlink" title="6.3.2 åªè¯»é›†åˆä¸å¯å˜é›†åˆ"></a>6.3.2 åªè¯»é›†åˆä¸å¯å˜é›†åˆ</h3><p><strong>é›†åˆåˆ†ä¸ºä¸¤ç§ï¼šåªè¯»é›†åˆå’Œå¯å˜é›†åˆ</strong></p><p>Kotlin çš„é›†åˆè®¾è®¡å’ŒJavaä¸åŒçš„å¦ä¸€ä¸ªé‡è¦ç‰¹è´¨æ˜¯ï¼Œ<strong>å®ƒæŠŠè®¿é—®é›†åˆæ•°æ®çš„æ¥å£å’Œä¿®æ”¹é›†åˆæ•°æ®çš„æ¥å£åˆ†å¼€äº†ã€‚</strong>è¿™ç§åŒºåˆ«å­˜åœ¨äºæœ€åŸºç¡€çš„ä½¿ç”¨é›†åˆä¹‹ä¸­ï¼škotlin.collection.Collectionã€‚ä½¿ç”¨è¿™ä¸ªæ¥å£ï¼Œå¯ä»¥éå†é›†åˆä¸­çš„å…ƒç´ ã€è·å¾—é›†åˆçš„å¤§å°ã€åˆ¤æ–­é›†åˆä¸­æ˜¯å¦åŒ…å«æŸä¸ªå…ƒç´ ï¼Œä»¥åŠæ‰§è¡Œå…¶ä»–ä»é›†åˆä¸­è¯»å–æ•°æ®çš„æ“ä½œã€‚<strong>ä½†è¿™ä¸ªæ¥å£æ²¡æœ‰ä»»ä½•æ·»åŠ æˆ–ç§»é™¤å…ƒç´ çš„è¿”å›</strong>ã€‚</p><p><strong>ä½¿ç”¨kotlin.collection.MutableCollectionæ¥å£å¯ä»¥ä¿®æ”¹æ¥å£ä¸­çš„æ•°æ®ã€‚</strong>å®ƒç»§æ‰¿äº†æ™®é€šçš„kotlin.collections.Collectionæ¥å£ï¼Œå¹¶æä¾›äº†æ–¹æ³•æ¥æ·»åŠ å’Œç§»é™¤ã€æ¸…ç©ºé›†åˆç­‰ã€‚</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20210510115136.png" alt="MutableCollectionç»§æ‰¿äº†Collectionå¹¶å¢åŠ äº†ä¿®æ”¹é›†åˆå†…å®¹çš„æ–¹æ³•ã€‚"></p><p>é€šå¸¸è§„åˆ™æ˜¯åœ¨ä»£ç çš„ä»»ä½•åœ°æ–¹éƒ½åº”è¯¥ä½¿ç”¨åªè¯»æ¥å£ï¼Œåªåœ¨ä»£ç éœ€è¦ä¿®æ”¹é›†åˆçš„åœ°æ–¹ä½¿ç”¨å¯å˜æ¥å£çš„å˜ä½“ã€‚</p><p>å°±åƒ val å’Œ var ä¹‹é—´çš„åˆ†ç¦»ä¸€æ ·ï¼Œåªè¯»é›†åˆæ¥å£å’Œå¯å˜é›†åˆæ¥å£çš„åˆ†ç¦»èƒ½è®©ç¨‹åºä¸­çš„æ•°æ®å‘ç”Ÿçš„äº‹æƒ…æ›´å®¹æ˜“ç†è§£ã€‚å¦‚æœå‡½æ•°æ¥æ”¶Collectionè€Œä¸æ˜¯MutableCollectionä½œä¸ºå½¢å‚ï¼Œä½ å°±çŸ¥é“å®ƒä¸ä¼šä¿®æ”¹é›†åˆï¼Œè€Œåªæ˜¯è¯»å–é›†åˆä¸­çš„æ•°æ®ã€‚å¦‚æœå‡½æ•°è¦æ±‚ä½ ä¼ é€’ç»™å®ƒMutableCollectionï¼Œå¯ä»¥è®¤ä¸ºå®ƒå°†ä¼šä¿®æ”¹æ•°æ®ã€‚å¦‚æœä½ ä½¿ç”¨äº†é›†åˆä½œä¸ºç»„ä»¶éƒ¨çŠ¶æ€çš„ä¸€éƒ¨åˆ†ï¼Œå¯èƒ½éœ€è¦æŠŠé›†åˆå…ˆæ‹·è´ä¸€ä»½ä¼ é€’ç»™è¿™ä¸ªå‡½æ•°ï¼ˆè¿™ç§æ¨¡å¼é€šå¸¸ç§°ä¸º <strong>é˜²å¾¡å¼æ‹·è´</strong>ï¼‰ã€‚</p><pre><code class="kotlin">/*    ä½¿ç”¨åªè¯»é›†åˆæ¥å£ä¸å¯å˜é›†åˆæ¥å£    */fun &lt;T&gt; copyElemets(source: Collection&lt;T&gt;,                    target: MutableCollection&lt;T&gt;){    for (item in source){    // åœ¨sourceé›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ ä¸­å¾ªç¯        target.add(item)    // å‘å¯å˜çš„targeté›†åˆä¸­æ·»åŠ å…ƒç´     }}&gt;&gt;&gt; val source:Collection&lt;Int&gt; = arrayListOf(3,5,7)&gt;&gt;&gt; val target:MutableCollection&lt;Int&gt; = arratListOf(1)&gt;&gt;&gt; copyElements(source,target)&gt;&gt;&gt; println(target)[1,3,5,7]</code></pre><p><strong>åªè¯»é›†åˆç±»å‹ä¸èƒ½ä½œä¸ºå¯å˜é›†åˆçš„å‚æ•°ã€‚</strong>ä¸èƒ½æŠŠåªè¯»é›†åˆç±»å‹çš„å˜é‡ä½œä¸ºtargetå‚æ•°ä¼ ç»™å‡½æ•°ï¼Œå³ä¾¿å®ƒçš„å€¼æ˜¯ä¸€ä¸ªå¯å˜é›†åˆï¼š</p><pre><code class="kotlin">&gt;&gt;&gt; val source:Collection&lt;Int&gt; = arrayListOf(3,5,7)&gt;&gt;&gt; val target:Collection&lt;Int&gt; = arratListOf(1)&gt;&gt;&gt; copyElements(source,target)Error: Type mismatch:inferred type is Collection&lt;Int&gt;    but MutableCollection&lt;Int&gt; was expected</code></pre><p>ä½¿ç”¨é›†åˆæ¥å£æ—¶éœ€è¦ç‰¢è®°çš„å…³é”®ç‚¹æ˜¯ <strong>åªè¯»é›†åˆæ˜¯ä¸ä¸€å®šå¯å˜çš„ã€‚</strong>å¦‚æœä½ ä½¿ç”¨çš„å˜é‡åªæœ‰ä¸€ä¸ªåªè¯»æ¥å£ç±»å‹ï¼Œå®ƒå¯èƒ½åªæ˜¯åŒä¸€ä¸ªé›†åˆçš„ä¼—å¤šå¼•ç”¨ä¸­çš„ä¸€ä¸ªã€‚ä»»ä½•å…¶ä»–çš„å¼•ç”¨éƒ½å¯èƒ½æ‹¥æœ‰ä¸€ä¸ªå¯å˜æ¥å£ç±»å‹ã€‚</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20210516151639.png" alt="ä¸¤ç§ä¸åŒçš„å¼•ç”¨ï¼Œä¸€ä¸ªåªè¯»ï¼Œå¦ä¸€ä¸ªå¯å˜ï¼ŒæŒ‡å‘åŒä¸€ä¸ªé›†åˆå¯¹è±¡"></p><p>å¦‚æœä½ è°ƒç”¨äº†è¿™æ ·çš„ä»£ç ï¼Œå®ƒ<strong>æŒæœ‰å…¶ä»–æŒ‡å‘ä½ é›†åˆçš„å¼•ç”¨</strong>ï¼Œæˆ–è€…å¹¶è¡Œçš„è¿è¡Œäº†è¿™æ ·çš„ä»£ç ã€‚ä½ ä¾ç„¶ä¼šé‡åˆ°è¿™ç§çŠ¶å†µï¼Œä½ æ­£åœ¨ä½¿ç”¨é›†åˆçš„æ—¶å€™å®ƒè¢«å…¶ä»–ä»£ç ä¿®æ”¹äº†ï¼Œåˆ™ä¼šå¯¼è‡´concurrentModificationExceptioné”™è¯¯å’Œå…¶ä»–ä¸€äº›é—®é¢˜ã€‚å› æ­¤ï¼Œ<strong>å¿…é¡»äº†è§£åªè¯»é›†åˆå¹¶ä¸æ€»æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚å¦‚æœä½ åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹å¤„ç†æ•°æ®ï¼Œä½ éœ€è¦ä¿è¯ä»£ç æ­£ç¡®çš„åŒæ­¥çš„å¯¹æ•°æ®çš„è®¿é—®ï¼Œæˆ–è€…ä½¿ç”¨æ”¯æŒå¹¶å‘è®¿é—®çš„æ•°æ®ç»“æ„ã€‚</strong></p><h3 id="6-3-3-Kotliné›†åˆå’ŒJava"><a href="#6-3-3-Kotliné›†åˆå’ŒJava" class="headerlink" title="6.3.3 Kotliné›†åˆå’ŒJava"></a>6.3.3 Kotliné›†åˆå’ŒJava</h3><p><strong>Kotlinæ¥å£æ˜¯Javaæ¥å£çš„å®ä¾‹</strong>ã€‚æ¯ä¸€ä¸ªKotlinæ¥å£éƒ½æ˜¯å…¶å¯¹åº”Javaé›†åˆæ¥å£çš„ä¸€ä¸ªå®ä¾‹ã€‚åœ¨Kotlinå’ŒJavaä¹‹é—´è½¬ç§»å¹¶ä¸éœ€è¦è½¬æ¢ï¼›ä¸éœ€è¦åŒ…è£…å™¨ä¹Ÿä¸éœ€è¦æ‹·è´æ•°æ®ã€‚ä½†æ¯ä¸ªKotlinä¸­éƒ½æœ‰ä¸¤ç§è¡¨ç¤ºï¼šä¸€ç§æ˜¯åªè¯»ä¸€ç§æ˜¯å¯å˜çš„ã€‚</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20210516154303.png" alt="Kotliné›†åˆæ¥å£çš„å±‚çº§ç»“æ„ï¼ŒJavaç±»ArrayListå’ŒHashSetéƒ½ç»§æ‰¿äº†Kotlinå¯å˜æ¥å£"></p><p>Kotlinä¸­åªè¯»æ¥å£å’Œå¯å˜æ¥å£çš„åŸºæœ¬æ„é€ ä¸ Java.utilä¸­çš„Javaé›†åˆæ¥å£çš„æ„é€ æ˜¯å¹³è¡Œçš„ã€‚å¯å˜æ¥å£ç›´æ¥å¯¹åº”java.utilä¸­çš„æ¥å£ï¼Œè€Œå®ƒä»¬çš„åªè¯»ç‰ˆæœ¬ç¼ºå°‘äº†æ‰€æœ‰äº§ç”Ÿæ”¹å˜çš„æ–¹æ³•ã€‚</p><p>Kotlinä¸­Mapç±»ï¼ˆå¹¶æ²¡æœ‰ç»§æ‰¿Collectionæˆ–æ˜¯Interableï¼‰ä¹Ÿè¢«è¡¨ç¤ºæˆäº†ä¸¤ç§ä¸åŒçš„ç‰ˆæœ¬ï¼šMapå’ŒMutableMapã€‚è¡¨ä¸­å±•ç¤ºäº†ä¸åŒé›†åˆçš„å‡½æ•°ã€‚</p><table><thead><tr><th>é›†åˆç±»å‹</th><th>åªè¯»</th><th>å¯å˜</th></tr></thead><tbody><tr><td><strong>List</strong></td><td>listOf</td><td>mutableListOfã€arrayListOf</td></tr><tr><td><strong>Set</strong></td><td>setOf</td><td>mutableSetã€hashSetOfã€linkedSetOfã€sortedSetOf</td></tr><tr><td><strong>Map</strong></td><td>mapOf</td><td>mutableMapOfã€hashMapOfã€linkedMapOfã€sortedMapOf</td></tr></tbody></table><p><strong>æ³¨æ„ï¼ŒsetOf()å’ŒmapOf()è¿”å›çš„æ˜¯Javaæ ‡å‡†åº“ä¸­ç±»çš„å®ä¾‹ï¼ˆè‡³å°‘åœ¨Kotlin1.0ç‰ˆæœ¬ä¸­æ˜¯è¿™æ ·ï¼‰ï¼Œåœ¨åº•å±‚å®ƒä»¬éƒ½æ˜¯å¯å˜çš„ã€‚ä½†ä½ ä¸èƒ½å®Œå…¨ä¿¡èµ–è¿™ä¸€ç‚¹ï¼šKotlinçš„æœªæ¥ç‰ˆæœ¬å¯èƒ½ä¼šä½¿ç”¨çœŸæ­£ä¸å¯å˜çš„å®ç°ç±»ä½œä¸ºsetOfå’ŒmapOfçš„è¿”å›å€¼ã€‚</strong></p><p><strong>å½“ä½ éœ€è¦è°ƒç”¨Javaæ–¹æ³•å¹¶æŠŠé›†åˆä½œä¸ºå‚æ•°æ—¶ã€‚ä¾‹å¦‚ï¼šä½¿ç”¨java.util.Collectionåšä¸ºå½¢å‚ï¼Œä½ å¯ä»¥ä½¿ç”¨Collectionæˆ–MutableCollectionï¼ˆåªè¯»é›†åˆæˆ–å¯å˜é›†åˆï¼‰çš„å€¼ä½œä¸ºå®å‚ä¼ é€’ç»™å½¢å‚ã€‚</strong></p><p><strong>è¿™æ—¶çš„æ“ä½œå¯¹å¯å˜æ€§æœ‰é‡è¦å½±å“ã€‚å› ä¸ºJavaå¹¶ä¸ä¼šåŒºåˆ†åªè¯»é›†åˆä¸å¯å˜é›†åˆï¼Œå³ä½¿Kotlinä¸­æŠŠé›†åˆå£°æ˜æˆåªè¯»çš„ï¼ŒJavaä»£ç ä¹Ÿå¯ä»¥ä¿®æ”¹è¿™ä¸ªé›†åˆã€‚Kotlinç¼–è¯‘å™¨ä¸èƒ½å®Œå…¨çš„åˆ†æJavaä»£ç åˆ°åº•å¯¹é›†åˆåšäº†ä»€ä¹ˆï¼Œå› æ­¤Kotlinæ— æ³•æ‹’ç»å‘å¯ä»¥ä¿®æ”¹é›†åˆçš„Javaä»£ç ä¼ é€’åªè¯»Collecitonã€‚</strong>ä¾‹å¦‚ï¼Œå¦‚ä¸‹ä»£ç ç»„æˆäº†ä¸€ä¸ªå¤šè¯­è¨€å…¼å®¹çš„Kotlin/Javaç¨‹åºï¼š</p><pre><code class="java">/*    Java    *///    ColletionUtils.Javapublic class ColletionUtils{    public static List&lt;String&gt; uppercaseAll(List&lt;String&gt; items){        for(int i = 0 ;i &lt; items.size(); i++){            items.set(i,items.get(i).toUpperCase());        }        return items    }}</code></pre><pre><code class="kotlin">/*    Kotlin    */// collections.ktfun printInUppercase(list:List&lt;String&gt;){    // å£°æ˜åªè¯»çš„å‚æ•°    println(CollectionUtils.uppercaseAll(list))    //è°ƒç”¨å¯ä»¥ä¿®æ”¹é›†åˆçš„Javaå‡½æ•°    println(list.first())    //æ‰“å°è¢«ä¿®æ”¹è¿‡çš„é›†åˆ}&gt;&gt;&gt; val list = listOf(&quot;a&quot;,&quot;b&quot;,&quot;c&quot;)&gt;&gt;&gt; printInUpppercase(list)[A,B,C]A</code></pre><p><strong>å¦‚æœä½ å†™äº†Kotlinå‡½æ•°ï¼Œä½¿ç”¨é›†åˆå¹¶ä¼ é€’ç»™äº†Javaï¼Œè¿™æ—¶ä½ è¦ç¡®è®¤ä½¿ç”¨äº†æ­£ç¡®çš„å‚æ•°ç±»å‹ï¼ŒåŒæ—¶å–å†³äºä½ è°ƒç”¨çš„Javaä»£ç æ˜¯å¦ä¼šä¿®æ”¹é›†åˆã€‚</strong></p><p>æ³¨æ„ï¼Œ<strong>è¿™äº›ä¹Ÿé€‚ç”¨äºåŒ…å«éç©ºç±»å‹å…ƒç´ çš„é›†åˆç±»ã€‚</strong>å¦‚æœä½ å‘Javaæ–¹æ³•ä¼ é€’äº†è¿™æ ·çš„é›†åˆï¼Œè¯¥æ–¹æ³•å°±å¯èƒ½åœ¨å…¶ä¸­å†™å…¥nullå€¼ï¼›Kotlinæ²¡æœ‰åŠæ³•å†ä¸å½±å“æ€§èƒ½çš„æƒ…å†µä¸‹ï¼Œç¦æ­¢å®ƒçš„å‘ç”Ÿï¼Œæˆ–è€…å¯Ÿè§‰åˆ°å·²ç»å‘ç”Ÿçš„æ”¹å˜ã€‚å› æ­¤ï¼Œå½“ä½ å‘å¯ä»¥ä¿®æ”¹é›†åˆçš„Javaä»£ç ä¼ é€’é›†åˆçš„æ—¶ï¼Œä½ éœ€è¦é‡‡å–ç‰¹åˆ«çš„é¢„é˜²æªæ–½ï¼Œæ¥ç¡®ä¿Kotlinç±»å‹æ­£ç¡®çš„åæ˜ å‡ºé›†åˆä¸Šæ‰€æœ‰å¯èƒ½çš„ä¿®æ”¹ã€‚</p><h3 id="6-3-4-ä½œä¸ºå¹³å°ç±»å‹çš„é›†åˆ"><a href="#6-3-4-ä½œä¸ºå¹³å°ç±»å‹çš„é›†åˆ" class="headerlink" title="6.3.4 ä½œä¸ºå¹³å°ç±»å‹çš„é›†åˆ"></a>6.3.4 ä½œä¸ºå¹³å°ç±»å‹çš„é›†åˆ</h3><p><strong>Kotliné›†åˆä½œä¸ºå¹³å°ç±»å‹çš„é›†åˆ</strong></p><p><strong>å¹³å°ç±»å‹ä¸ä¼šç†ä¼šå¯ç©ºæˆ–è€…éç©ºï¼Œæ‰€ä»¥åœ¨Kotliné‡å†™æˆ–å®ç°å¹³å°ç±»å‹æ—¶éœ€è¦é€‰æ‹©é›†åˆæ˜¯å¦å¯ç©ºã€‚</strong></p><p><strong>Kotlin æŠŠå®šä¹‰åœ¨javaä»£ç ä¸­çš„ç±»å‹çœ‹æˆå¹³å°ç±»å‹ã€‚</strong>Kotlinæ²¡æœ‰ä»»ä½•å…³äºå¹³å°ç±»å‹çš„å¯ç©ºæ€§ä¿¡æ¯ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨å…è®¸Kotlinä»£ç å°†å…¶è§†ä¸ºå¯ç©ºæˆ–è€…éç©ºçš„ã€‚åŒæ ·ï¼ŒJavaä¸­å£°æ˜çš„é›†åˆç±»å‹çš„å˜é‡ä¹Ÿè¢«è§†ä¸ºå¹³å°ç±»å‹ã€‚<strong>ä¸€ä¸ªå¹³å°ç±»å‹é›†åˆæœ¬è´¨ä¸Šå°±æ˜¯å¯å˜æ€§æœªçŸ¥çš„é›†åˆâ€”â€”Kotlinä»£ç å°†å…¶è§†ä¸ºåªè¯»çš„æˆ–è€…å¯å˜çš„ã€‚</strong>å®é™…ä¸Šä½ æƒ³è¦æ‰§è¡Œçš„æ‰€æœ‰æ“ä½œéƒ½ä¸å—å½±å“ã€‚</p><p><strong>å½“ä½ é‡å†™æˆ–è€…å®ç°ç­¾åä¸­æœ‰é›†åˆç±»å‹çš„Javaæ–¹æ³•æ—¶è¿™ç§å·®å¼‚æ‰å˜çš„é‡è¦ã€‚</strong>è¿™é‡Œåƒå¹³å°ç±»å‹çš„å¯ç©ºæ€§ä¸€æ ·ï¼Œä½ éœ€è¦å†³å®šä½¿ç”¨é‚£ç§ <strong>Kotlinç±»å‹ *<em>æ¥è¡¨ç¤ºè¿™ä¸ªJavaç±»å‹ï¼Œ *</em>å®ƒæ¥è‡ªä½ è¦é‡å†™æˆ–å®ç°çš„æ–¹æ³•ã€‚</strong></p><p>åœ¨é‡å†™æˆ–è€…å®ç°æ—¶ï¼Œä½ è¦åšå‡ºå¤šç§é€‰æ‹©ï¼Œ<strong>å®ƒä»¬éƒ½ä¼šåæ˜ åœ¨äº§ç”Ÿçš„Kotlinä»£ç ç±»å‹ä¸­:</strong></p><ul><li>é›†åˆæ˜¯å¦å¯ç©ºï¼Ÿ</li><li>é›†åˆçš„å…ƒç´ æ˜¯å¦å¯ç©ºï¼Ÿ</li><li>ä½ çš„æ–¹æ³•ä¼šä¸ä¼šä¿®æ”¹é›†åˆï¼Ÿ</li></ul><p>ä»£ç ä¸­ç›´è§‚çš„è¡¨ç¤ºã€‚ä¸€ä¸ªJavaæ¥å£è¡¨ç¤ºä¸€ä¸ªèƒ½å¤„ç†æ–‡ä»¶ä¸­çš„æ–‡æœ¬å¯¹è±¡ã€‚</p><pre><code class="java">/*    ä½¿ç”¨é›†åˆå‚æ•°çš„Javaæ¥å£    */interface FileContentProcessor{    void processContents(File path,        byte[] binaryContents,        List&lt;String&gt; textContents);}</code></pre><p>è¿™ä¸ªæ¥å£çš„Kotlinå®ç°éœ€è¦åšå‡ºå¦‚ä¸‹é€‰æ‹©ï¼š</p><ul><li>åˆ—è¡¨å°†æ˜¯å¯ç©ºçš„ï¼Œå› ä¸ºæœ‰äº›æ–‡ä»¶æ˜¯äºŒè¿›åˆ¶æ ¼å¼ï¼Œå®ƒä»¬çš„å†…å®¹ä¸èƒ½è¢«è¡¨ç¤ºæˆæ–‡æœ¬ã€‚</li><li>åˆ—è¡¨ä¸­çš„å…ƒç´ å°†ä¼šæ˜¯éç©ºçš„ï¼Œå› ä¸ºæ–‡ä»¶ä¸­æ¯ä¸€è¡Œéƒ½æ°¸è¿œä¸ä¸ºnullã€‚</li><li>åˆ—è¡¨å°†æ˜¯å¯è¯»çš„ï¼Œå› ä¸ºå®ƒè¡¨ç¤ºçš„æ–‡æœ¬å†…å®¹ï¼Œè€Œä¸”è¿™äº›å†…å®¹ä¸ä¼šè¢«ä¿®æ”¹ã€‚</li></ul><p>å®ç°çš„æ ·å­</p><pre><code class="kotlin">/*    FileContentProcessor çš„Kotlinå®ç°    */class FileIndexer:FileContentProcessor{    override fun processContents(path:File,        binaryContents:ByteArray?,        textContents:List&lt;String&gt;?){            ....        }}</code></pre><p>ä¸å¦ä¸€ä¸ªæ¥å£å¯¹æ¯”ã€‚è¿™é‡Œæ¥å£çš„å®ç°ä»æ–‡æœ¬è¡¨å•ä¸­è§£æå‡ºçš„æ•°æ®å¹¶æ”¾å¤§ä¸€ä¸ªå¯¹è±¡åˆ—è¡¨ä¸­ï¼Œå†æŠŠè¿™äº›å¯¹è±¡é™„åŠ åˆ°è¾“å‡ºåˆ—è¡¨ä¸­ã€‚å½“å‘ç°è§£æå¤±è´¥æ—¶ï¼Œå°±æŠŠé”™è¯¯ä¿¡æ¯æ·»åŠ åˆ°å¦ä¸€ä¸ªå•ç‹¬çš„åˆ—è¡¨ä¸­ï¼Œä½œä¸ºé”™è¯¯æ—¥å¿—ã€‚</p><pre><code class="java">/*    å¦ä¸€ä¸ªé›†åˆå‚æ•°çš„Javaæ¥å£    Java*/interface DataParser&lt;T&gt;{    void parseData(String input,        List&lt;T&gt; output,        List&lt;String&gt; errors);}</code></pre><p>è¿™ç§æƒ…å†µä¸‹çš„é€‰æ‹©ï¼š</p><ul><li>List<String> å°†æ˜¯éç©ºçš„ï¼Œå› ä¸ºè°ƒç”¨è€…æ€»æ˜¯éœ€è¦æ¥æ”¶é”™è¯¯çš„ä¿¡æ¯ã€‚</li><li>åˆ—è¡¨çš„å…ƒç´ å°†æ˜¯å¯ç©ºçš„ï¼Œå› ä¸ºä¸æ˜¯æ¯ä¸ªè¾“å‡ºåˆ—è¡¨ä¸­çš„æ¡ç›®éƒ½æœ‰å…³è”çš„é”™è¯¯ä¿¡æ¯ã€‚</li><li>List<String> å°†æ˜¯å¯å˜çš„ï¼Œå› ä¸ºä»£ç å®ç°éœ€è¦å‘å…¶ä¸­æ·»åŠ å…ƒç´ ã€‚</li></ul><p>å®ç°è¿™ä¸ªæ¥å£</p><pre><code class="kotlin">/*    DataParserçš„Kotlinå®ç°    */class PersonParser: DataParser&lt;Person&gt;{    override fun parseData(input:String,        output:MutableList&lt;Person&gt;,        error:MutableList&lt;String?&gt;){            //...        }}</code></pre><p>æ³¨æ„ï¼ŒåŒæ ·ä¸ºJavaç±»å‹â€”â€”List<String>â€”â€”å¦‚ä½•è¡¨ç¤ºæˆäº†ä¸¤ç§ä¸åŒçš„Kotlinç±»å‹ï¼šä¸€ç§æ˜¯List<String>?ï¼ˆåŒ…å«å­—ç¬¦ä¸²çš„å¯ç©ºåˆ—è¡¨ï¼‰ï¼Œå¦ä¸€ä¸ªæ˜¯MutableList&lt;String?&gt;ï¼ˆåŒ…å«å¯ç©ºå­—ç¬¦ä¸²çš„å¯å˜åˆ—è¡¨ï¼‰ã€‚ä½ å¿…é¡»çŸ¥é“Javaæ¥å£æˆ–ç±»å¿…é¡»éµå®ˆçš„ç¡®åˆ‡å¥‘çº¦ã€‚åŸºäºä½ çš„å®ç°è¦åšçš„äº‹æƒ…é€šå¸¸å¾ˆå®¹æ˜“ç†è§£ã€‚</p><h3 id="6-3-5-å¯¹è±¡å’ŒåŸºæœ¬æ•°æ®ç±»å‹çš„æ•°ç»„"><a href="#6-3-5-å¯¹è±¡å’ŒåŸºæœ¬æ•°æ®ç±»å‹çš„æ•°ç»„" class="headerlink" title="6.3.5 å¯¹è±¡å’ŒåŸºæœ¬æ•°æ®ç±»å‹çš„æ•°ç»„"></a>6.3.5 å¯¹è±¡å’ŒåŸºæœ¬æ•°æ®ç±»å‹çš„æ•°ç»„</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œä½ åº”è¯¥ä¼˜å…ˆä½¿ç”¨é›†åˆè€Œä¸æ˜¯æ•°ç»„ã€‚ä½†æ˜¯å› ä¸ºæœ‰å¤§é‡JavaAPIä»ç„¶åœ¨ä½¿ç”¨æ•°ç»„ï¼Œæ‰€ä»¥æ¥ä»‹ç»å®ƒä»¬åœ¨Kotlinä¸­å¦‚ä½•ä½¿ç”¨ã€‚</p><p>Kotlin æ•°ç»„çš„è¯­æ³•å‡ºç°åœ¨äº†æ¯ä¸ªä¾‹å­ä¸­ï¼Œ <strong>å› ä¸ºæ•°ç»„æ˜¯ Java main å‡½æ•°æ ‡å‡†ç­¾åçš„ä¸€éƒ¨åˆ†ã€‚</strong></p><blockquote><p>æ–¹æ³•ç­¾åï¼š</p><p>æ–¹æ³•ç­¾åç”±æ–¹æ³•å+å½¢å‚åˆ—è¡¨ç»„æˆï¼Œç›®çš„æ˜¯è®©æ­¤æ–¹æ³•ç¡®å®šä¸ºå”¯ä¸€çš„ã€‚</p></blockquote><pre><code class="kotlin">/*    ä½¿ç”¨æ•°ç»„    */fun main(args:Array[String]){    for (i in args.indices){    // ä½¿æ‰©å±•å±æ€§array.indecesåœ¨ä¸‹æ ‡çš„è®¿é—®å†…è¿­ä»£        pritnl(&quot;Argument $i is :${args[i]}&quot;)    //é€šè¿‡ä¸‹æ ‡ä½¿ç”¨ array[index] è®¿é—®å…ƒç´     }}</code></pre><p> Kotlinä¸­çš„æ•°ç»„æ˜¯ä¸€ä¸ªå¸¦æœ‰ç±»å‹å‚æ•°çš„ç±»ï¼Œå…¶å…ƒç´ ç±»å‹è¢«æŒ‡å®šä¸ºç›¸åº”çš„ç±»å‹å‚æ•°ã€‚</p><p><strong>è¦åœ¨Kotlinä¸­åˆ›å»ºæ•°ç»„ï¼Œå¦‚ä¸‹æ–¹æ³•ä¾›ä½ é€‰æ‹©</strong></p><blockquote><ul><li>arrayOfå‡½æ•°åˆ›å»ºæ•°ç»„ï¼Œå®ƒåŒ…å«å…ƒç´ æ˜¯æŒ‡å®šä¸ºè¯¥å‡½æ•°çš„å®å‚ã€‚</li><li>arrayOfNullsåˆ›å»ºä¸€ä¸ªç»™å®šå¤§å°çš„æ•°ç»„ï¼ŒåŒ…å«ä¸ºnullå…ƒç´ ã€‚å½“ç„¶ï¼Œå®ƒåªèƒ½ç”¨æ¥åˆ›å»ºåŒ…å«å…ƒç´ ç±»å‹çš„å¯ç©ºæ•°ç»„ã€‚</li><li>Arrayæ„é€ æ–¹æ³•æ¥æ”¶æ•°ç»„å¤§å°å’Œä¸€ä¸ªlambdaè¡¨è¾¾å¼ï¼Œä½¿ç”¨lambdaè¡¨è¾¾å¼æ¥åˆ›å»ºæ¯ä¸€ä¸ªæ•°ç»„å…ƒç´ ã€‚è¿™å°±æ˜¯ä½¿ç”¨å…ƒç´ ç±»å‹æ¥åˆå§‹åŒ–æ•°ç»„ï¼Œå½“ä¸ç”¨æ˜¾å¼åœ°ä¼ é€’æ¯ä¸ªå…ƒç´ çš„æ–¹å¼ã€‚</li></ul></blockquote><p>å±•ç¤ºå¦‚ä½•ä½¿ç”¨Arrayå‡½æ•°æ¥åˆ›å»ºâ€œaâ€åˆ°â€zâ€çš„å­—ç¬¦ä¸²æ•°ç»„ã€‚</p><pre><code class="kotlin">/*    åˆ›å»ºå­—ç¬¦æ•°ç»„    */&gt;&gt;&gt; val letters = Array&lt;String&gt;(26){i-&gt;(&#39;a&#39;+i).toString()}&gt;&gt;&gt; pritnln(letters.joinToString(&quot;&quot;))abcdefghijklmnoprstuvwxyz</code></pre><p>ä¸ºäº†æ¸…æ¥šèµ·è§ï¼Œè¿™é‡Œæ˜¾ç¤ºäº†æ•°ç»„å…ƒç´ çš„ç±»å‹ï¼Œä½†åœ¨çœŸå®çš„ä»£ç ä¸­å¯ä»¥çœç•¥ã€‚å› ä¸ºç¼–è¯‘å™¨ä¼šæ¨å¯¼å‡ºå®ƒçš„ç±»å‹ã€‚</p><blockquote><p>Kotlin <strong>ä»£ç ä¸­æœ€å¸¸è§çš„åˆ›å»ºæ•°ç»„çš„æƒ…å†µä¹‹ä¸€æ˜¯éœ€è¦è°ƒç”¨å‚æ•°ä¸ºæ•°ç»„çš„Javaæ–¹æ³•</strong>ï¼Œæˆ–æ˜¯åœ¨è°ƒç”¨å¸¦æœ‰varargå‚æ•°çš„Kotlinå‡½æ•°æ—¶ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œé€šå¸¸å·²ç»å°†æ•°æ®å­˜å‚¨åœ¨é›†åˆä¸­ï¼Œåªéœ€è¦å°†å…¶è½¬æ¢ä¸ºæ•°ç»„å³å¯ã€‚å¯ä»¥ä½¿ç”¨toTypedArrayæ–¹æ³•æ¥æ‰§è¡Œæ­¤æ“ä½œã€‚</p><pre><code class="kotlin">/*    å‘varargæ–¹æ³•ä¼ é€’é›†åˆ    */&gt;&gt;&gt; val string = listOf(&quot;a&quot;,&quot;b&quot;,&quot;c&quot;)&gt;&gt;&gt; pritnln(&quot;%s/%s/%s&quot;.format(*strings.toTypedArray()))    // æœŸæœ›varargå‚æ•°æ—¶ä½¿ç”¨å±•å¼€è¿ç®—ç¬¦(*)ä¼ é€’æ•°ç»„a/b/c</code></pre></blockquote><blockquote><p>æ•°ç»„ç±»å‹çš„ç±»å‹å‚æ•°å§‹ç»ˆä¼šå˜æˆå¯¹è±¡ç±»å‹ã€‚<strong>å› æ­¤ï¼Œå¦‚æœä½ å£°æ˜äº†ä¸€ä¸ªArray<Int>,å®ƒå°†ä¼šæ˜¯ä¸€ä¸ªåŒ…å«è£…ç®±æ•´å‹çš„æ•°ç»„ï¼ˆå®ƒçš„Javaç±»å‹å°†æ˜¯java.lang.Integer[])ã€‚å¦‚æœä½ éœ€è¦åˆ›å»ºæ²¡æœ‰è£…ç®±çš„åŸºæœ¬æ•°æ®ç±»å‹çš„æ•°ç»„ï¼Œå¿…é¡»ä½¿ç”¨ä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹æ•°ç»„çš„ç‰¹æ®Šç±»ã€‚</strong></p></blockquote><p>ä¸ºè¡¨ç¤ºåŸºæœ¬æ•°æ®ç±»å‹çš„æ•°ç»„ï¼ŒKotlinæä¾›äº†è‹¥å¹²ç‹¬ç«‹çš„ç±»ï¼Œæ¯ä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹éƒ½å¯¹åº”ä¸€ä¸ªã€‚ä¾‹å¦‚ï¼ŒIntç±»å‹å€¼çš„æ•°ç»„å«åšIntArrayã€‚</p><p>è¦åˆ›å»ºä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹çš„æ•°ç»„ï¼Œä½ æœ‰å¦‚ä¸‹é€‰æ‹©ï¼š</p><ul><li><strong>è¯¥ç±»å‹çš„æ„é€ æ–¹æ³•æ¥æ”¶sizeå‚æ•°å¹¶è¿”å›ä¸€ä¸ªä½¿ç”¨å¯¹åº”åŸºæœ¬æ•°æ®ç±»å‹é»˜è®¤å€¼ï¼ˆé€šå¸¸æ˜¯0ï¼‰åˆå§‹åŒ–å¥½æ»´æ•°ç»„ã€‚</strong></li><li><strong>å·¥å‚å‡½æ•°ï¼ˆIntArrayçš„intArrayOfï¼Œä»¥åŠå…¶ä»–æ•°ç»„ç±»å‹çš„å‡½æ•°ï¼‰æ¥æ”¶è¾¹é•¿å‚æ•°çš„å€¼å¹¶åˆ›å»ºå­˜å‚¨è¿™äº›çš„æ•°ç»„ã€‚</strong></li><li><strong>å¦ä¸€ä¸ªæ„é€ æ–¹æ³•ï¼Œæ¥å—ä¸€ä¸ªå¤§å°å’Œä¸€ä¸ªç”¨æ¥åˆå§‹åŒ–å…ƒç´ çš„lambda</strong></li></ul><p>ä¾‹å­</p><pre><code class="kotlin">/*    ä¸‹é¢åˆ›å»ºå­˜å‚¨äº†5ä¸ª0çš„æ•´å½¢æ•°ç»„çš„ä¸¤ç§é€‰æ‹©    */&gt;&gt;&gt; val fiveZeros = IntArray(5)    //é»˜è®¤å€¼ 0&gt;&gt;&gt; val fiveZerosToo = intArrayOf(0,0,0,0,0)</code></pre><pre><code class="kotlin">/*    ä¸‹é¢æ¥æ”¶lambdaçš„æ„é€ æ–¹æ³•çš„ä¾‹å­    */&gt;&gt;&gt; val squares = IntArray(5){i-&gt;(i+1)*(i+1)}&gt;&gt;&gt; println(squares.joinToString())1,4,9,16,25</code></pre><blockquote><p><strong>å‡å¦‚ä½ æœ‰ä¸€ä¸ªæŒæœ‰åŸºæœ¬æ•°æ®ç±»å‹è£…ç®±åçš„å€¼çš„æ•°ç»„æˆ–è€…é›†åˆï¼Œ</strong>å¯ä»¥ä½¿ç”¨å¯¹åº”çš„è½¬æ¢å‡½æ•°æŠŠå®ƒä»¬è½¬æ¢æˆåŸºæœ¬æ•°æ®ç±»å‹çš„æ•°ç»„ï¼Œä¾‹å¦‚toIntArrayã€‚</p></blockquote><blockquote><p><strong>æˆ‘ä»¬æ¥çœ‹çœ‹ä½ å¯æ˜¯å¯¹æ•°ç»„åšçš„äº‹æƒ…ã€‚</strong>å¤„ç†åŸºæœ¬æ“ä½œå¤–ï¼ˆè·å¾—æ•°ç»„é•¿åº¦ï¼Œè·å–æˆ–è€…è®¾ç½®å…ƒç´ ï¼‰ï¼ŒKotlinæ ‡å‡†åº“æ”¯æŒä¸€å¥—å’Œé›†åˆç›¸åŒçš„ç”¨äºæ•°ç»„çš„æ‰©å±•å‡½æ•°ã€‚å…¶ä¸­ï¼ˆfilterï¼Œmapç­‰ï¼‰ä¹Ÿé€‚ç”¨äºæ•°ç»„ï¼ŒåŒ…æ‹¬åŸºæœ¬æ•°æ®ç±»å‹çš„æ•°ç»„ï¼ˆæ³¨æ„è¿™äº›è¿”å›å€¼è¿”å›çš„æ˜¯åˆ—è¡¨ä¸æ˜¯æ•°ç»„ï¼‰ã€‚</p><pre><code class="kotlin">/*    ä½¿ç”¨forEachIndexedå‡½æ•°åŠ ä¸Šlambdaæ¥é‡å†™â€ä½¿ç”¨æ•°ç»„â€œä¾‹å­    */fun main(args:Array&lt;String&gt;){    atgs.forEachIndexed{index,elemnt -&gt;        println(&quot;Argument $index is: $element&quot;)}}</code></pre></blockquote><h3 id="6-4-å°ç»“"><a href="#6-4-å°ç»“" class="headerlink" title="6.4 å°ç»“"></a>6.4 å°ç»“</h3><ul><li></li></ul><h1 id="8-é«˜é˜¶å‡½æ•°ï¼šLambdaä½œä¸ºå½¢å‚å’Œè¿”å›å€¼"><a href="#8-é«˜é˜¶å‡½æ•°ï¼šLambdaä½œä¸ºå½¢å‚å’Œè¿”å›å€¼" class="headerlink" title="8 é«˜é˜¶å‡½æ•°ï¼šLambdaä½œä¸ºå½¢å‚å’Œè¿”å›å€¼"></a>8 é«˜é˜¶å‡½æ•°ï¼šLambdaä½œä¸ºå½¢å‚å’Œè¿”å›å€¼</h1><p><strong>å†…è”å‡½æ•°ä½œç”¨</strong></p><p>èƒ½å¤Ÿæ¶ˆé™¤lambdaå¸¦æ¥çš„æ€§èƒ½å¼€é”€ï¼Œè¿˜èƒ½å¤Ÿä½¿lambdaå†…çš„æ§åˆ¶æµæ›´åŠ çµæ´»ã€‚</p><h2 id="8-1-å£°æ˜é«˜é˜¶å‡½æ•°"><a href="#8-1-å£°æ˜é«˜é˜¶å‡½æ•°" class="headerlink" title="8.1 å£°æ˜é«˜é˜¶å‡½æ•°"></a>8.1 å£°æ˜é«˜é˜¶å‡½æ•°</h2><p>å®šä¹‰</p><blockquote><p>é«˜é˜¶å‡½æ•°å°±æ˜¯ä»¥å¦ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°æˆ–è€…è¿”å›å€¼çš„å‡½æ•°ã€‚åœ¨kotlinä¸­ï¼Œå‡½æ•°å¯ä»¥ç”¨lambdaæˆ–è€…å‡½æ•°å¼•ç”¨æ¥è¡¨ç¤ºã€‚å› æ­¤ï¼Œ<strong>ä»»ä½•ä»¥lambdaæˆ–è€…å‡½æ•°å¼•ç”¨ä½œä¸ºå‚æ•°çš„å‡½æ•°ï¼Œæˆ–è€…è¿”å›å€¼ä¸ºlambdaæˆ–å‡½æ•°å¼•ç”¨çš„å‡½æ•°</strong>ï¼Œæˆ–è€…ä¸¤è€…éƒ½æœ‰æ»¡è¶³çš„å‡½æ•°éƒ½æ˜¯é«˜é˜¶å‡½æ•°ã€‚</p></blockquote><p>æ ‡å‡†åº“ä¸­çš„filterå‡½æ•°å°†ä¸€ä¸ªåˆ¤æ–­å¼å‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå› æ­¤å®ƒæ˜¯ä¸€ä¸ªé«˜é˜¶å‡½æ•°ï¼š</p><pre><code class="kotlin">list.filter{x&gt;0}</code></pre><h3 id="8-1-1-å‡½æ•°ç±»å‹"><a href="#8-1-1-å‡½æ•°ç±»å‹" class="headerlink" title="8.1.1 å‡½æ•°ç±»å‹"></a>8.1.1 å‡½æ•°ç±»å‹</h3><p>åœ¨å˜é‡ä¸­æˆ‘ä»¬æœ‰<strong>Intç±»å‹</strong>ï¼Œ<strong>Stringç±»å‹</strong>ç­‰é‚£ä¹ˆä¹Ÿæœ‰å±äºå‡½æ•°çš„<strong>å‡½æ•°ç±»å‹</strong>ã€‚</p><p>å£°æ˜ä¸€ä¸ªlambdaä½œä¸ºå®å‚çš„å‡½æ•°ï¼Œä½ éœ€è¦çŸ¥é“å¦‚ä½•å£°æ˜å¯¹åº”å½¢å‚çš„ç±»å‹ã€‚åœ¨é‚£ä¹‹å‰ï¼Œçœ‹æ¥ä¸‹æ¥çš„ä¾‹å­ï¼ŒæŠŠ lambda è¡¨è¾¾å¼ä¿å­˜åœ¨å±€éƒ¨å˜é‡ä¸­ã€‚åœ¨ä¸å£°æ˜ç±»å‹çš„æƒ…å†µä¸‹ï¼Œè¿™äº›å°±ä¾èµ–äºKotlinçš„ç±»å‹æ¨å¯¼ã€‚</p><pre><code class="kotlin">val sum = {x:Int,y:Int -&gt; x+y}val action = {println(42)}</code></pre><p>ç¼–è¯‘å™¨æ¨å¯¼å‡ºsumå’Œactionä¸¤ä¸ªå˜é‡å…·æœ‰<strong>å‡½æ•°ç±»å‹</strong>ã€‚</p><p>æ˜¾å¼å£°æ˜<strong>å‡½æ•°ç±»å‹çš„å˜é‡</strong></p><pre><code class="kotlin">val sum:(Int ,Int) -&gt; Int = {x,y-&gt;x+y}    // æœ‰ä¸¤ä¸ªIntç±»å‹å‚æ•°å’ŒIntç±»å‹è¿”å›å€¼val action:() - &gt; Unit = { println(42) }    //æ²¡æœ‰å‚æ•°å’Œè¿”å›å€¼</code></pre><p>å£°æ˜å‡½æ•°ç±»å‹ï¼Œéœ€è¦å°†å‡½æ•°å‚æ•°ç±»å‹æ”¾åœ¨æ‹¬å·ä¸­ï¼Œç´§æ¥ç€æ˜¯ä¸€ä¸ªç®­å¤´å’Œå‡½æ•°çš„è¿”å›å€¼ç±»å‹ã€‚</p><pre><code class="kotlin">(Int,String) -&gt; Unit// â†‘å‚æ•°ç±»å‹    â†‘è¿”å›ç±»å‹</code></pre><p>åœ¨å£°æ˜å‡½æ•°ç±»å‹æ—¶Unitæ˜¯ä¸èƒ½çœç•¥çš„ï¼Œå…¶ä»–æƒ…å†µä¸‹å¯ä»¥ã€‚</p><p>å‡½æ•°ç±»å‹çš„è¿”å›å€¼æ ‡è®°ä¸ºå¯ç©ºç±»å‹ï¼š</p><pre><code class="kotlin">val canReturnNull: (Int,Int) -&gt; Int?={null}</code></pre><p>å®šä¹‰å‡½æ•°ç±»å‹çš„å¯ç©ºå˜é‡ã€‚</p><blockquote><p>ä¸ºäº†æ˜ç¡®è¡¨ç¤ºæ˜¯å˜é‡æœ¬èº«å¯ç©ºï¼Œè€Œä¸æ˜¯å‡½æ•°ç±»å‹çš„è¿”å›ç±»å‹å¯ç©ºï¼Œä½ éœ€è¦å°†æ•´ä¸ªå‡½æ•°ç±»å‹çš„å®šä¹‰åŒ…å«åœ¨æ‹¬å·å†…å¹¶åœ¨æ‹¬å·åæ·»åŠ é—®å·ã€‚</p><pre><code class="kotlin">val funOrNull:((Int,Int) -&gt; Int) ?= null</code></pre></blockquote><h3 id="8-1-2-è°ƒç”¨ä½œä¸ºå‚æ•°çš„å‡½æ•°"><a href="#8-1-2-è°ƒç”¨ä½œä¸ºå‚æ•°çš„å‡½æ•°" class="headerlink" title="8.1.2 è°ƒç”¨ä½œä¸ºå‚æ•°çš„å‡½æ•°"></a>8.1.2 è°ƒç”¨ä½œä¸ºå‚æ•°çš„å‡½æ•°</h3><p>å®ç°ä¸€ä¸ªé«˜é˜¶å‡½æ•°ã€‚</p><p>å®ç°2ï¼Œ3ä¸¤ä¸ªæ•°å­—çš„ä»»æ„æ“ä½œã€‚</p><blockquote><p>å‡½æ•°ç±»å‹ä½œä¸ºå‚æ•°ï¼Œå½¢å‚å’Œå®å‚æ›´åƒæ˜¯æ¥å£ï¼Œå½¢å‚æ˜¯æ¥å£å®å‚åˆ™ç”¨æ¥å…·ä½“çš„å®ç°ã€‚</p></blockquote><p>å®šä¹‰ä¸€ä¸ªç®€å•çš„é«˜é˜¶å‡½æ•°</p><pre><code class="kotlin">//    å®šä¹‰ä¸€ä¸ªå‡½æ•°ç±»å‹çš„å‚æ•°fun twoAndThree(operation: (Int,Int) -&gt; Int){    val result = opration(2,3)    // è°ƒç”¨å‚æ•°ï¼ˆå‡½æ•°ç±»å‹ï¼‰    println(&quot;The result is $result&quot;)}&gt;&gt;&gt; twoAndThree{a,b -&gt; a+b}The result is 5&gt;&gt;&gt; twoAndThree(a,b -&gt; a*b)The result is 6</code></pre><p>å®ç°æœ€å¸¸ç”¨çš„æ ‡å‡†åº“å‡½æ•°ï¼šfilterå‡½æ•°ã€‚ä¸ºäº†æ›´è®©äº‹æƒ…æ›´ç®€å•ä¸€äº›ï¼Œå°†å®ç°åŸºäºStringç±»å‹çš„filterå‡½æ•°ï¼Œä½†å’Œä½œç”¨äºæ³›å‹çš„ç‰ˆæœ¬åŸç†æ˜¯æ˜¾ç¤ºçš„ã€‚</p><pre><code class="kotlin">/* &quot;String&quot;:æ¥æ”¶è€…ç±»å‹ã€‚    â€œpredicateâ€ï¼šå‚æ•°ç±»å‹    â€œ(Char) -&gt; Booleanâ€ï¼šå‡½æ•°ç±»å‹å‚æ•°    â€œCharâ€:å‡½æ•°ç±»å‹å‚æ•°çš„å‚æ•°ç±»å‹    â€œBooleanâ€ï¼šå‡½æ•°ç±»å‹çš„å‚æ•°è¿”å›ç±»å‹    */fun String.filter(predicate:(Char) -&gt; Boolean):String</code></pre><blockquote><p>filter å‡½æ•°çš„å£°æ˜ï¼Œä»¥ä¸€ä¸ªåˆ¤æ–­å¼ä½œä¸ºå‚æ•°</p></blockquote><p>åˆ¤æ–­å¼çš„ç±»å‹æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä»¥å­—ç¬¦ä½œä¸ºå‚æ•°å¹¶è¿”å›booleanç±»å‹çš„å€¼ã€‚å¦‚æœè¦è®©ä¼ é€’ç»™åˆ¤æ–­å¼çš„å­—ç¬¦å‡ºç°åœ¨æœ€ç»ˆè¿”å›çš„å­—ç¬¦ä¸²ä¸­ï¼Œåˆ¤æ–­å¼éœ€è¦è¿”å›tureï¼Œåä¹‹falseã€‚</p><pre><code class="kotlin">//    å®ç°ä¸€ä¸ªç®€å•ç‰ˆæœ¬çš„filerå‡½æ•°fun String.filter(predicate: (Char) -&gt; Boolean):String{    val sb = StringBuilder()    for (index in 0 until length){        val element = get(index)        if (predicate(element)) sb.append(element)    // è°ƒç”¨å¼•ç”¨çš„Stringç±»å‹å‚æ•°ç»™predicateå‡½æ•°è¿›è¡Œåˆ¤æ–­    }    return sb.toString()}&gt;&gt;&gt; println(&quot;ab1c&quot;.filter{it in &#39;a&#39;..&#39;z&#39;})    //ä¼ é€’ lambda ä½œä¸º &#39;predicate&#39;å‚æ•°abc</code></pre><blockquote><p>filter å‡½æ•°çš„å®ç°éå¸¸ç®€å•æ˜äº†ã€‚å®ƒæ£€æŸ¥æ¯ä¸ªå­—ç¬¦æ—¶å€™æ»¡è¶³åˆ¤æ–­å¼ï¼Œå¦‚æœæ»¡è¶³å°±å°†å­—ç¬¦æ·»åŠ åˆ°åŒ…å«ç»“æœçš„StringBuilderä¸­ã€‚</p></blockquote><h3 id="8-1-3-åœ¨Javaä¸­ä½¿ç”¨å‡½æ•°ç±»"><a href="#8-1-3-åœ¨Javaä¸­ä½¿ç”¨å‡½æ•°ç±»" class="headerlink" title="8.1.3 åœ¨Javaä¸­ä½¿ç”¨å‡½æ•°ç±»"></a>8.1.3 åœ¨Javaä¸­ä½¿ç”¨å‡½æ•°ç±»</h3><p><strong>åŸç†</strong></p><blockquote><p>å‡½æ•°ç±»å‹è¢«å£°æ˜ä¸ºæ™®é€šçš„æ¥å£ï¼šä¸€ä¸ªå‡½æ•°ç±»å‹çš„å˜é‡æ˜¯<strong>FunctionNæ¥å£çš„å®ç°</strong>ã€‚</p><p>Kotlin æ ‡å‡†åº“å®šä¹‰äº†ä¸€ç³»åˆ—çš„æ¥å£ï¼Œè¿™äº›æ¥å£å¯¹åº”äºä¸åŒçš„å‚æ•°æ•°é‡çš„å‡½æ•°ï¼š<strong>Function0<R>(æ²¡æœ‰å‚æ•°çš„å‡½æ•°)ã€Function&lt;P1,R&gt;(ä¸€ä¸ªå‚æ•°çš„å‡½æ•°)</strong>ã€‚</p><p>æ¯ä¸ªæ¥å£å®šä¹‰äº†ä¸€ä¸ª invoke æ–¹æ³•ï¼Œè°ƒç”¨è¿™ä¸ªæ–¹æ³•å°±ä¼šæ‰§è¡Œå‡½æ•°ã€‚</p><p>ä¸€ä¸ªå‡½æ•°ç±»å‹çš„å˜é‡å°±æ˜¯å®ç°äº†å¯¹åº”çš„Functionæ¥å£çš„å®ç°ç±»çš„å®åŠ›ï¼Œå®ç°ç±»çš„invokeæ–¹æ³•åŒ…å«äº†lambdaå‡½æ•°ä½“ã€‚</p></blockquote><p><strong>åœ¨ Java ä¸­è°ƒç”¨ä½¿ç”¨äº†å‡½æ•°ç±»å‹çš„ Kotlin å‡½æ•°ã€‚</strong></p><pre><code class="kotlin">/*    kotlinå£°æ˜    */fun processTheAnswer(f:(Int) -&gt;){    println(f(42))}</code></pre><pre><code class="kotlin">/*    Java    */&gt;&gt;&gt; processTheAnswe(number -&gt; number+1);43</code></pre><p>åœ¨æ—§ç‰ˆ Java ä¸­ï¼Œå¯ä»¥ä¼ é€’ä¸€ä¸ªå®ç°äº†å‡½æ•°æ¥å£ä¸­ invoke æ–¹æ³•çš„åŒ¿åç±»çš„å®ä¾‹ï¼š</p><pre><code class="java">/*    Java    */&gt;&gt;&gt; processTheAnswer(...        new Function1&lt;Integer,Integer&gt;(){    // åœ¨Java 8 ä»¥å‰ä½¿ç”¨å‡½æ•°ç±»å‹...            @Override...            public Integer invoke(Integer number){...                System.out.println(number);...                return number+1;...                }...        });43</code></pre><p>åœ¨ Java ä¸­ä½¿ç”¨å‡½æ•°ç±»å‹å¿…é¡»æ˜¾ç¤ºåœ°ä¼ é€’ä¸€ä¸ªæ¥æ”¶è€…å¯¹è±¡ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ã€‚</p><p>åœ¨Javaä¸­å¯ä»¥å¾ˆå®¹æ˜“åœ°ä½¿ç”¨ Kotlin æ ‡å‡†åº“ä¸­ä»¥lambdaä½œä¸ºå‚æ•°çš„æ‰©å±•å‡½æ•°ã€‚</p><pre><code class="java">/*    Java    */&gt;&gt;&gt; List&lt;String&gt; strings = new ArrayList()ï¼›&gt;&gt;&gt; strings.add(&quot;42&quot;)&gt;&gt;&gt; CollectionKt.forEach(strings, s -&gt;{    //å¯ä»¥åœ¨Javaä¸­ä½¿ç”¨Kotlinæ ‡å‡†åº“ä¸­çš„å‡½æ•°...        System.out.println(a);...        return unit.INSTANCE;    // å¿…é¡»æ˜¾ç¤ºçš„è¿”å›ä¸€ä¸ªUnitç±»å‹çš„å€¼ã€‚...})</code></pre><blockquote><p>åœ¨ Java ä¸­ ï¼Œå‡½æ•°æˆ–è®¸lambdaå¯ä»¥è¿”å›Unitã€‚å› ä¸ºåœ¨ Kotlin ä¸­ Unit ç±»å‹æ˜¯æœ‰å€¼çš„ï¼Œæ‰€ä»¥éœ€è¦æ˜¾ç¤ºçš„è¿”å›å®ƒã€‚</p><p>ä¸€ä¸ªè¿”å› void çš„lambda ä¸èƒ½ä½œä¸ºè¿”å› Unit çš„å‡½æ•°ç±»å‹çš„å®å‚ï¼Œå°±åƒä¹‹å‰çš„ä¾‹å­ä¸­çš„(String) -&gt;Unit.</p></blockquote><h3 id="8-1-4-å‡½æ•°ç±»å‹çš„å‚æ•°é»˜è®¤å€¼å’Œnullå€¼"><a href="#8-1-4-å‡½æ•°ç±»å‹çš„å‚æ•°é»˜è®¤å€¼å’Œnullå€¼" class="headerlink" title="8.1.4 å‡½æ•°ç±»å‹çš„å‚æ•°é»˜è®¤å€¼å’Œnullå€¼"></a>8.1.4 å‡½æ•°ç±»å‹çš„å‚æ•°é»˜è®¤å€¼å’Œnullå€¼</h3><p>å£°æ˜å‡½æ•°ç±»å‹çš„å‚æ•°æ—¶å¯ä»¥æŒ‡å®šå‚æ•°çš„é»˜è®¤å€¼ã€‚</p><p><strong>ç”¨æ¥ç†è§£å‚æ•°é»˜è®¤å€¼çš„å…³é”®ä½œç”¨</strong></p><pre><code class="kotlin">/*    ä½¿ç”¨äº†ç¡¬ç¼–ç toStringè½¬æ¢çš„joinToStringå‡½æ•°    */fun &lt;T&gt; Collection&lt;T&gt;.joinToString(        separator: String = &quot;,&quot;,        prefix: String = &quot;&quot;,        postfix: String = &quot;&quot;): String{        val result = StringBuilder(prefix)        for ((index,element) in this.withIndex()){            if(index &gt;0) result.append(separator)            result.append(element)    // ä½¿ç”¨é»˜è®¤toStringæ–¹æ³•å°†å¯¹è±¡è½¬æ¢æˆå­—ç¬¦ä¸²        }        result.append(postfix)        return result.toString()}</code></pre><blockquote><p>è¿™é‡Œçš„å®ç°å¾ˆçµæ´»ä½†æ˜¯å¹¶æ²¡æœ‰è®©ä½ æ§åˆ¶è½¬æ¢çš„å…³é”®ç‚¹ï¼š é›†åˆä¸­çš„åŸå§‹æ˜¯å¦‚ä½•è½¬æ¢æˆå­—ç¬¦ä¸²çš„ã€‚</p></blockquote><blockquote><p>è¿™é‡Œä½¿ç”¨ StringBuilder.append(o:Any?) (result.append(element)),ä»–æ€»æ˜¯ä½¿ç”¨toStringæ–¹æ³•å°†å¯¹è±¡è½¬æ¢æˆå­—ç¬¦ä¸²ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹è¿™æ ·æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯ä¸æ€»æ˜¯è¿™æ ·ã€‚</p></blockquote><blockquote><p>ç°åœ¨å¯ä»¥ä¼ é€’ä¸€ä¸ªlambdaå»æŒ‡å®šå¦‚ä½•å°†å¯¹è±¡è½¬æ¢æˆå­—ç¬¦ä¸²ã€‚</p></blockquote><blockquote><p>ä½†æ˜¯è¦æ±‚æ‰€æœ‰è°ƒç”¨è€…éƒ½ä¼ é€’lambdaæ˜¯æ¯”è¾ƒçƒ¦äººçš„ï¼Œå› ä¸ºå¤§éƒ¨åˆ†è°ƒç”¨è€…ä½¿ç”¨é»˜è®¤çš„è¡Œä¸ºå°±å¯ä»¥äº†ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥å®šä¹‰ä¸€ä¸ªå‡½æ•°ç±»å‹çš„å‚æ•°å¹¶ç”¨ä¸€ä¸ªlambdaä½œä¸ºå®ƒçš„é»˜è®¤å€¼ã€‚</p></blockquote><pre><code class="kotlin">/*    ç»™å‡½æ•°ç±»å‹çš„å‚æ•°æŒ‡å®šé»˜è®¤å€¼    */fun &lt;T&gt; Collection&lt;T&gt;.joinToString(        separator: String = &quot;,&quot;,        prefix: String = &quot;&quot;,        postfix: String = &quot;&quot;,        transform: (T) -&gt; String = {it.toString()}    //å£°æ˜ä¸€ä¸ªlambdaä¸ºé»˜è®¤å€¼çš„å‡½æ•°ç±»å‹çš„å‚æ•°): String {        val result = StringBuilder(prefix)        for ((index,element) in this.withIndex()){            if(index &gt; 0 ) result.append(separator)            result.append(transform(element))    // è°ƒç”¨ä½œä¸ºå®å‚çš„elementä¼ é€’ç»™ â€œtransformâ€å½¢å‚çš„å‡½æ•°        }        result.append(postfix)        return result.toString()}&gt;&gt;&gt; val letters = listOf(&quot;Alpha&quot;,&quot;Beta&quot;)&gt;&gt;&gt;  println(letters.joinToString())    // ä½¿ç”¨é»˜è®¤çš„è½¬æ¢å‡½æ•°Alpha, Beta&gt;&gt;&gt; println(letters.joinToString{it.toLowerCase()})    // ä¼ é€’ä¸€ä¸ª lambda ä½œä¸ºå‚æ•°alpha,beta&gt;&gt;&gt; println(letters.joinToString(separator = &quot;!&quot;,postifx = &quot;!&quot;, transform = {it.ToUpperCase()}))    // ä½¿ç”¨å‘½åå‚æ•°å‚æ•°è¯­æ³•å‡ ä¸ªå‚æ•°ï¼ŒåŒ…æ‹¬lambdaã€‚ALPHA,BETA</code></pre><blockquote><p>è¿™ä¸ªå¸¦é»˜è®¤å€¼çš„å‡½æ•°ç±»å‹æ˜¯ä¸€ä¸ªæ³›å‹å‚æ•°Tè¡¨ç¤ºé›†åˆä¸­çš„å…ƒç´ ç±»å‹ã€‚ Lambda transform å°†æ¥æ”¶è¿™ä¸ªç±»å‹çš„å‚æ•°ã€‚</p></blockquote><blockquote><p>å£°æ˜å‡½æ•°ç±»å‹çš„é»˜è®¤å€¼å¹¶ä¸éœ€è¦ç‰¹æ®Šçš„è¯­æ³•ï¼Œåªéœ€è¦æŠŠ lambda ä½œä¸ºå€¼æ”¾åœ¨ = å·åã€‚ä¸Šè¿°ä¾‹å­å±•ç¤ºäº†å¤šç§æ–¹å¼è°ƒç”¨å‡½æ•°ç±»å‹ã€‚</p></blockquote><p><strong>å£°æ˜å‡½æ•°ç±»å‹å…¶å‚æ•°æ˜¯å¯ç©ºçš„</strong></p><pre><code class="kotlin">/*    æ¡ˆä¾‹1    ä¸€èˆ¬æƒ…å†µ*/fun foo(callback: (() -&gt;Unit)?){    if(callback != null){        callback()    }}</code></pre><blockquote><p>è¿™é‡Œä¸èƒ½ç›´æ¥è°ƒç”¨ä½œä¸ºå‚æ•°ä¼ é€’è¿›è¡Œçš„å‡½æ•°ï¼šKotlin ä¼šå› ä¸ºæ£€æŸ¥åˆ°æ½œåœ¨çš„ç©ºæŒ‡é’ˆå¼‚å¸¸è€Œå¯¼è‡´ç¼–è¯‘å¤±è´¥ã€‚<strong>è¿™é‡Œå¯é€‰çš„åŠæ³•æ˜¯æ˜¾å¼åœ°æ£€æŸ¥null</strong>ã€‚</p></blockquote><pre><code class="kotlin">/*    ä½¿ç”¨å‡½æ•°ç±»å‹çš„å¯ç©ºå‚æ•°    */fun &lt;T&gt; Collection&lt;T&gt;.joinToString(        separator: String = &quot;,&quot;,        prefix: String = &quot;&quot;,        postfix: String = &quot;&quot;,        transform:    ((T) -&gt; String ) ?=null    // å£°æ˜ä¸€ä¸ªå‡½æ•°ç±»å‹çš„å¯ç©ºå‚æ•°): String{    val result = StringBuilder(prefix)    for ((index,element) in this.withIndex()){        if (index &gt; 0) result.append(separator)        val str = transform?.invoke(element)    // ä½¿ç”¨å®‰å…¨è°ƒç”¨è¯­æ³•ï¼Œè°ƒç”¨å‡½æ•°            ?: element.toString()    //ä½¿ç”¨ Elvis è¿ç®—ç¬¦å¤„ç†å›è°ƒæ²¡æœ‰è¢«æŒ‡å®šçš„æƒ…å†µ        result.append(str)    }    result.append(postfix)    return result.toString()}</code></pre><blockquote><p>è¿™æ˜¯ä¸€ä¸ªæ›´ç®€å•çš„ç‰ˆæœ¬ï¼Œå®ƒåˆ©ç”¨äº†ä¸€ä¸ªäº‹å® ï¼Œå‡½æ•°ç±»å‹æ˜¯åŒ…å« invoke æ–¹æ³•çš„æ¥å£å…·ä½“å®ç°ã€‚ä½œä¸ºä¸€ä¸ªæ™®é€šæ–¹æ³•ï¼Œinvokeå¯ä»¥é€šè¿‡å®‰å…¨è°ƒç”¨è¯­æ³•è¢«è°ƒç”¨ï¼šcallback?.invoke()æ–¹æ³•</p></blockquote><h3 id="8-1-5-è¿”å›å‡½æ•°çš„å‡½æ•°"><a href="#8-1-5-è¿”å›å‡½æ•°çš„å‡½æ•°" class="headerlink" title="8.1.5 è¿”å›å‡½æ•°çš„å‡½æ•°"></a>8.1.5 è¿”å›å‡½æ•°çš„å‡½æ•°</h3><pre><code class="kotlin">/*    å®šä¹‰ä¸€ä¸ªè¿”å›å‡½æ•°çš„å‡½æ•°    */enum class Delivery {STANDARD, EXPEDITED}class Order(val itemCount:Int)fun getShippingCostCalculator(delivery:Delivery):(Order)-&gt;Double{    // å£°æ˜è¿”å›å‡½æ•°çš„å‡½æ•°    if (delivery == Delivery.EXPEDITEM){    // è¿”å› lambda        return {order -&gt; 6+2.1 * order.itemCount}    }    return {order -&gt;1.2*order.itemCount}}&gt;&gt;&gt; val calculator = getShippingCostCalculator(Delivery.EXPEDITEM)    // å°†è¿”å›çš„å‡½æ•°ä¿å­˜åœ¨å˜é‡ä¸­&gt;&gt;&gt; println(&quot;Shapping costs ${calculator(Order(3))}&quot;)    // è°ƒç”¨è¿”å›çš„å‡½æ•°Shipping costs 12.3</code></pre><blockquote><p><strong>ä½¿ç”¨åœºæ™¯</strong></p><p>ä¾‹å¦‚ï¼Œè¿è¾“è´¹ç”¨çš„è®¡ç®—ä¾èµ–äºé€‰æ‹©æ°å½“çš„é€»è¾‘å˜ä½“å¹¶å°†å®ƒä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°è¿”å›ã€‚<strong>å£°æ˜ä¸€ä¸ª è¿”å›å¦ä¸€ä¸ªå‡½æ•°çš„å‡½æ•°ï¼Œéœ€è¦æŒ‡å®šä¸€ä¸ªå‡½æ•°ç±»å‹ä½œä¸ºè¿”å›ç±»å‹ã€‚</strong></p><p>å‡½æ•° getShippingCostCalculatorè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä»¥Orderæœ€ä¸ºå‚æ•°å¹¶è¿”å›ä¸€ä¸ªDoubleç±»å‹çš„å€¼ã€‚</p><p><strong>è¦è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œéœ€è¦å†™ä¸€ä¸ªreturnè¡¨è¾¾å¼ï¼Œè·Ÿä¸Šä¸€ä¸ªlambdaã€ä¸€ä¸ªæˆå‘˜å¼•ç”¨ï¼Œæˆ–è€…å…¶ä»–çš„å‡½æ•°ç±»å‹çš„è¡¨è¾¾å¼ï¼Œæ¯”å¦‚ä¸€ä¸ªå‡½æ•°çš„å±€éƒ¨å˜é‡ã€‚</strong></p></blockquote><p><strong>å¦ä¸€ä¸ªè¿”å›å‡½æ•°çš„ä¾‹å­</strong></p><blockquote><p>ä¾‹å¦‚ï¼Œä½ å¯ä»¥åœ¨ UI ä¸Šè¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç„¶ååªæ˜¾ç¤ºé‚£äº›åå­—ä»¥è¿™ä¸ªå­—ç¬¦ä¸²å¼€å¤´çš„è”ç³»äººï¼›è¿˜å¯ä»¥éšè—æ²¡æœ‰ç”µè¯å·ç çš„è”ç³»äººã€‚ç”¨ContactListFiltersè¿™ä¸ªç±»æ¥ä¿å­˜è¿™ä¸ªé€‰é¡¹çš„çŠ¶æ€ã€‚</p></blockquote><pre><code class="kotlin">class ContactListFilters{    var prefix: String = &quot;&quot;    var onlyWithPhoneNumber: Boolean = false}</code></pre><blockquote><p>å½“ç”¨æˆ·è¾“å…¥ D æ¥æŸ¥çœ‹å§“æˆ–è€…åä»¥ D å¼€å¤´çš„è”ç³»äººæ—¶ï¼Œprefixçš„å€¼ä¼šè¢«æ›´æ–°ã€‚</p></blockquote><pre><code class="kotlin">/*    åœ¨UIä»£ç ä¸­å®šä¹‰ä¸€ä¸ªè¿”å›å‡½æ•°çš„å‡½æ•°    */data class Persion(    val firstName:String,    val lastName:String,    val phoneNumber:String?)class ContactListFilters{    val prefix:String = &quot;&quot;    val onlyWithPhoneNumber: Boolean = false    fun getPredicate():(Person) -&gt; Boolean{    //å£°æ˜ä¸€ä¸ªè¿”å›å‡½æ•°çš„å‡½æ•°        val    startWithPrefix  = {p:Persion -&gt; p.firstName.startsWith(prefix) || p.lastName.startsWith(prefix)        }        if (!onlyWithPhoneNumber){            return startWithPrefix    // è¿”å›ä¸€ä¸ªå‡½æ•°ç±»å‹çš„å˜é‡        }        return { startsWithPrefix(it)&amp;&amp;it.phoneNumber != null }    //ä»å‡½æ•°è¿”å›ä¸€ä¸ªlambda    }}&gt;&gt;&gt; val contacts = listOf(Persion(&quot;Dmitry&quot;,&quot;Jemeroy&quot;,&quot;123-4567&quot;),...                          Persion(&quot;Svetlane&quot;,&quot;Isakova&quot;,null))&gt;&gt;&gt; val contactListFilters = ContactListFilters()&gt;&gt;&gt; with (contactListFilters){&gt;&gt;&gt;        prefix = &quot;Dm&quot;&gt;&gt;&gt;     onlyWithPhoneNumber = true&gt;&gt;&gt; }&gt;&gt;&gt; println(contacts.filter(...        contactListFilters.getPredicate()))        // å°† getPredicate è¿”å›çš„å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™ â€œfilterâ€ å‡½æ•°[Persion (firstName = Dmitry,lastName = Jemetov,phoneNumber = 123-4567)]</code></pre><blockquote><p>ä¸ºäº†è®©å±•ç¤ºè”ç³»äººåˆ—è¡¨çš„é€»è¾‘ä»£ç å’Œè¾“å…¥çš„è¿‡æ»¤æ¡ä»¶çš„UIæ¡ä»¶è§£è€¦ï¼Œå¯ä»¥å®šä¹‰ä¸€ä¸ªå‡½æ•°æ¥åˆ›å»ºä¸€ä¸ªåˆ¤æ–­å¼ï¼Œç”¨æ¥è¿‡æ»¤è”ç³»äººåˆ—è¡¨ã€‚åˆ¤æ–­å¼æ£€æŸ¥å‰æˆ³ï¼Œå¦‚æœæœ‰éœ€è¦ä¹Ÿæ£€æŸ¥ç”µè¯å·ç æ—¶å€™å­˜åœ¨ã€‚</p></blockquote><blockquote><p>getPredicate å‡½æ•°è¿”å›ä¸€ä¸ªå‡½æ•°ï¼ˆç±»å‹ï¼‰çš„å€¼ï¼Œè¿™ä¸ªå€¼è¢«ä¼ é€’ç»™filterä½œä¸ºå‚æ•°ã€‚</p></blockquote><h3 id="8-1-6-é€šè¿‡lambda-å»é™¤é‡å¤ä»£ç "><a href="#8-1-6-é€šè¿‡lambda-å»é™¤é‡å¤ä»£ç " class="headerlink" title="8.1.6 é€šè¿‡lambda å»é™¤é‡å¤ä»£ç "></a>8.1.6 é€šè¿‡lambda å»é™¤é‡å¤ä»£ç </h3><p>ä¾‹å­</p><blockquote><p>è¿™æ˜¯ä¸€ä¸ªåˆ†æç½‘ç«™è®¿é—®çš„ä¾‹å­ã€‚SiteVisitç±»ç”¨æ¥ä¿å­˜æ¯æ¬¡è®¿é—®çš„è·¯å¾„ã€æŒç»­æ—¶é—´å’Œç”¨æˆ·çš„æ“ä½œç³»ç»Ÿã€‚ä¸åŒçš„æ“ä½œç³»ç»Ÿä½¿ç”¨æšä¸¾æ¥è¡¨ç¤ºã€‚</p></blockquote><pre><code class="kotlin">/*    å®šä¹‰ç«™ç‚¹è®¿é—®æ•°æ®    */data calss SiteVisit(    val path: String,    val dutation: Double,    val os: OS    )enum class OS{ WINDOWS,LINUX,MAC,IOS,ANDROID}val log = listOf(    SiteVisit(&quot;/&quot;,34.0,OS.WINDOWS),    SiteVisit(&quot;/&quot;,22.0,OS.MAC),    SiteVisit(&quot;/login&quot;,12.0,OS.WINDOWS),    SiteVisit(&quot;/signup&quot;,8.0,OS.IOS),    SiteVisit(&quot;/&quot;,16.3.OS.ANDROID))</code></pre><blockquote><p>éœ€è¦æ˜¾ç¤ºæ¥è‡ª Windows çš„å¹³å‡è®¿é—®æ—¶é—´ï¼Œå¯ä»¥ä½¿ç”¨ average å‡½æ•°æ¥å®Œæˆè¿™ä¸ªä»»åŠ¡ã€‚</p></blockquote><pre><code class="kotlin">/*    ä½¿ç”¨ç¡¬ç¼–ç çš„è¿‡æ»¤å™¨åˆ†æç«™ç‚¹è®¿é—®æ•°æ®    */val averageWindowsDutation = log    .filter {it.os == OS.WINDOWS}    .map(SiteVisit::dutation)    .avaerage()&gt;&gt;&gt;println(averageWindowsDutaion)23.0</code></pre><blockquote><p>æ˜¾ç¤ºæ¥è‡ªäºWindowsæœºå™¨çš„å¹³å‡è®¿é—®æ—¶é—´ï¼Œç”¨ average å‡½æ•°æ¥å®Œæˆä»»åŠ¡ã€‚</p></blockquote><pre><code class="kotlin">/*    ä½¿ç”¨æ™®é€šçš„æ–¹æ³•å»é™¤é‡å¤ä»£ç     */fun List&lt;SiteVisit&gt;.averageDurationFor(os:OS) = filter{it.os == os}.map(SiteVisit::dutation).average()    // å°†é‡å¤ä»£ç æŠ½å–åˆ°å‡½æ•°ä¸­&gt;&gt;&gt; println(log.averageDurationFor(OS.WINDOWS))23.0&gt;&gt;&gt; println(log.averageDurationFor(OS.MAC))22.0</code></pre><blockquote><p>ç°åœ¨ä½ è¦è®¡ç®—ä¸€ä¸ªæ¥è‡ªMACç”¨æˆ·çš„ç›¸åŒæ•°æ®ï¼Œä¸ºäº†é¿å…é‡å¤ï¼Œå¯ä»¥å°†å¹³å°ç±»å‹æŠ½è±¡æˆä¸€ä¸ªå‚æ•°.</p><p>æ³¨æ„è¿™ä¸ªå‡½æ•°ä½œä¸ºæ‰©å±•å‡½æ•°å¢å¼ºäº†å¯è¯»æ€§ã€‚å¦‚æœå®ƒå€¼åœ¨å±€éƒ¨çš„ä¸Šä¸‹æ–‡ä¸­æœ‰ç”¨ï¼Œä½ ç”šè‡³å¯ä»¥å°†è¿™ä¸ªå‡½æ•°å£°æ˜ä¸ºå±€éƒ¨çš„æ‰©å±•å‡½æ•°ã€‚</p></blockquote><pre><code class="kotlin">/*    ç”¨ä¸€ä¸ªé‡å¤çš„ç¡¬ç¼–ç å‡½æ•°åˆ†æç«™ç‚¹è®¿é—®æ•°æ®    */val averageMobileDutation = log    .filter{it.os == setOf(OS.IOS,OS.ANDROID)}    .map(SiteVisit::duration)    .average()&gt;&gt;&gt; println(averageMobileDuration)12.15</code></pre><blockquote><p>å¦‚æœä½ å¯¹ç§»åŠ¨å¹³å°çš„è®¿é—®çš„å¹³å‡æ—¶é—´æ„Ÿå…´è¶£ã€‚</p><p>è¿™æ—¶å·²ç»ä¸èƒ½å†å†ç”¨ç®€å•çš„å‚æ•°è¡¨ç¤ºä¸åŒçš„å¹³å°äº†ã€‚å¯èƒ½è¿˜éœ€è¦ä½¿ç”¨æ›´åŠ å¤æ‚çš„æ¡ä»¶æŸ¥è¯¢æ—¥å¿—ï¼Œæ¯”å¦‚ï¼Œâ€œæ¥è‡ªIOSå¹³å°å¯¹æ³¨å†Œé¡µé¢çš„è®¿é—®å¹³å‡æ—¶é—´æ˜¯å¤šå°‘ï¼Ÿâ€</p><p><strong>å¯ä»¥ä½¿ç”¨å‡½æ•°ç±»å‹å°†éœ€è¦çš„æ¡ä»¶æŠ½è±¡åˆ°ä¸€ä¸ªå‚æ•°ä¸­</strong></p></blockquote><pre><code class="kotlin">/*    ç”¨é«˜é˜¶å‡½æ•°å»é™¤é‡å¤ä»£ç     */fun List&lt;SiteVisit&gt;.averageDutationFor(predicate:(SiteVisit) -&gt; Boolean) = filter(predicate).map(SiteVisit::duration).average()&gt;&gt;&gt; println(log.averageDurationFor{...        it.os in setOf(OS.ANDROID,OS.IOS)})12.15&gt;&gt;&gt; println(log.averageDurationFor{...        it.os == OS.IOS &amp;&amp; it.path == &quot;/signup&quot;    // æ»¡è¶³ç³»ç»Ÿä¸ºIOSï¼Œè®¿é—®åœ°å€ä¸º æ³¨å†Œç•Œé¢çš„æ¡ä»¶})8.0</code></pre><blockquote><p>å‡½æ•°ç±»å‹å¯ä»¥å¸®åŠ©å»é™¤é‡å¤ä»£ç ã€‚ä½¿ç”¨lambdaï¼Œä¸ä»…å¯ä»¥å»é™¤é‡å¤çš„æ•°æ®ï¼Œä¹Ÿå¯ä»¥å»é™¤é‡å¤çš„è¡Œä¸ºã€‚</p></blockquote><h2 id="8-2-å†…è”å‡½æ•°ï¼šæ¶ˆé™¤lambdaå¸¦æ¥çš„è¿è¡Œæ—¶å¼€é”€"><a href="#8-2-å†…è”å‡½æ•°ï¼šæ¶ˆé™¤lambdaå¸¦æ¥çš„è¿è¡Œæ—¶å¼€é”€" class="headerlink" title="8.2 å†…è”å‡½æ•°ï¼šæ¶ˆé™¤lambdaå¸¦æ¥çš„è¿è¡Œæ—¶å¼€é”€"></a>8.2 å†…è”å‡½æ•°ï¼šæ¶ˆé™¤lambdaå¸¦æ¥çš„è¿è¡Œæ—¶å¼€é”€</h2><blockquote><p>Kotlin ä¸­ä¼ é€’ lambda ä½œä¸ºå‡½æ•°å‚æ•°çš„ç®€æ˜è¯­æ³•ä¸æ™®é€šçš„è¡¨è¾¾å¼è¯­æ³•å¾ˆç›¸ä¼¼ã€‚</p><p><strong>lambda è¡¨è¾¾å¼ä¼šè¢«æ­£å¸¸åœ°ç¼–è¯‘æˆåŒ¿åç±»ã€‚è¿™è¡¨ç¤ºæ¯è°ƒç”¨ä¸€æ¬¡ lambda è¡¨è¾¾å¼ï¼Œå°±ä¼šé¢å¤–çš„åˆ›å»ºä¸€ä¸ªç±»ã€‚å¹¶ä¸”å¦‚æœ lambda æ•æ‰äº†æŸä¸ªå˜é‡ï¼Œé‚£ä¹ˆæ¯æ¬¡è°ƒç”¨çš„æ—¶å€™éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚è¿™ä¼šå¸¦æ¥è¿è¡Œæ—¶çš„é¢å¤–å¼€é”€ï¼Œå¯¼è‡´ä½¿ç”¨ lambda æ¯”ä½¿ç”¨ä¸€ä¸ªç›´æ¥æ‰§è¡Œç›¸åŒä»£ç çš„å‡½æ•°æ•ˆç‡æ›´ä½ã€‚</strong></p><p>æœ‰æ²¡æœ‰å¯èƒ½è®©ç¼–è¯‘å™¨ç”Ÿæˆè·Ÿ Java è¯­å¥ç›¸åŒé«˜æ•ˆçš„ä»£ç ï¼Œä½†è¿˜æ˜¯èƒ½æŠŠé‡å¤çš„é€»è¾‘æŠ½å–åˆ°åº“å‡½æ•°ä¸­å‘¢ï¼Ÿï¼ˆä½œç”¨ï¼‰</p><p>å¦‚æœä½¿ç”¨ <strong>inline</strong> ä¿®é¥°ç¬¦æ ‡è®°ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨å‡½æ•°è¢«ä½¿ç”¨çš„æ—¶å€™ç¼–è¯‘å™¨å¹¶ä¸ä¼šç”Ÿæˆå‡½æ•°è°ƒç”¨çš„ä»£ç ï¼Œè€Œæ˜¯ä½¿ç”¨å‡½æ•°å®ç°çš„çœŸå®ä»£ç æ›¿æ¢æ¯ä¸€æ¬¡çš„å‡½æ•°è°ƒç”¨ã€‚</p></blockquote><p><strong>å†…è”å‡½æ•°ç®€ä»‹</strong></p><blockquote><p>åœ¨<a href="https://baike.baidu.com/item/è®¡ç®—æœºç§‘å­¦" target="_blank" rel="noopener">è®¡ç®—æœºç§‘å­¦</a>ä¸­ï¼Œ<strong>å†…è”å‡½æ•°</strong>ï¼ˆæœ‰æ—¶ç§°ä½œ<strong>åœ¨çº¿å‡½æ•°</strong>æˆ–<strong>ç¼–è¯‘æ—¶æœŸå±•å¼€å‡½æ•°</strong>ï¼‰æ˜¯ä¸€ç§<a href="https://baike.baidu.com/item/ç¼–ç¨‹è¯­è¨€" target="_blank" rel="noopener">ç¼–ç¨‹è¯­è¨€</a>ç»“æ„ï¼Œç”¨æ¥å»ºè®®<a href="https://baike.baidu.com/item/ç¼–è¯‘å™¨" target="_blank" rel="noopener">ç¼–è¯‘å™¨</a>å¯¹ä¸€äº›ç‰¹æ®Š<a href="https://baike.baidu.com/item/å‡½æ•°" target="_blank" rel="noopener">å‡½æ•°</a>è¿›è¡Œå†…è”æ‰©å±•ï¼ˆæœ‰æ—¶ç§°ä½œ<strong>åœ¨çº¿æ‰©å±•</strong>ï¼‰ï¼›ä¹Ÿå°±æ˜¯è¯´å»ºè®®ç¼–è¯‘å™¨å°†æŒ‡å®šçš„å‡½æ•°ä½“æ’å…¥å¹¶å–ä»£æ¯ä¸€å¤„è°ƒç”¨è¯¥å‡½æ•°çš„åœ°æ–¹ï¼ˆ<a href="https://baike.baidu.com/item/ä¸Šä¸‹æ–‡" target="_blank" rel="noopener">ä¸Šä¸‹æ–‡</a>ï¼‰ï¼Œä»è€ŒèŠ‚çœäº†æ¯æ¬¡è°ƒç”¨å‡½æ•°å¸¦æ¥çš„é¢å¤–æ—¶é—´å¼€æ”¯ã€‚ä½†åœ¨é€‰æ‹©ä½¿ç”¨å†…è”å‡½æ•°æ—¶ï¼Œå¿…é¡»åœ¨ç¨‹åºå ç”¨ç©ºé—´å’Œç¨‹åºæ‰§è¡Œæ•ˆç‡ä¹‹é—´è¿›è¡Œæƒè¡¡ï¼Œå› ä¸ºè¿‡å¤šçš„æ¯”è¾ƒå¤æ‚çš„å‡½æ•°è¿›è¡Œå†…è”æ‰©å±•å°†å¸¦æ¥å¾ˆå¤§çš„å­˜å‚¨èµ„æºå¼€æ”¯ã€‚å¦å¤–è¿˜éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯å¯¹<a href="https://baike.baidu.com/item/é€’å½’å‡½æ•°" target="_blank" rel="noopener">é€’å½’å‡½æ•°</a>çš„å†…è”æ‰©å±•å¯èƒ½å¼•èµ·éƒ¨åˆ†ç¼–è¯‘å™¨çš„æ— ç©·ç¼–è¯‘ã€‚</p></blockquote><h3 id="8-2-1-å†…è”å‡½æ•°å¦‚ä½•è¿ä½œ"><a href="#8-2-1-å†…è”å‡½æ•°å¦‚ä½•è¿ä½œ" class="headerlink" title="8.2.1 å†…è”å‡½æ•°å¦‚ä½•è¿ä½œ"></a>8.2.1 å†…è”å‡½æ•°å¦‚ä½•è¿ä½œ</h3><blockquote><p><strong>å†…è”å‡½æ•°ï¼</strong></p><p>å½“ä¸€ä¸ªå‡½æ•°è¢«å£°æ˜ä¸º inline æ—¶ï¼Œå®ƒçš„å‡½æ•°ä½“æ˜¯å†…è”çš„â€“æ¢å¥è¯è¯´ï¼Œå‡½æ•°ä½“ä¼šè¢«ç›´æ¥æ›¿æ¢åˆ°å‡½æ•°è¢«è°ƒç”¨çš„åœ°æ–¹ï¼Œè€Œä¸æ˜¯è¢«æ­£å¸¸è°ƒç”¨ã€‚</p></blockquote><pre><code class="kotlin">/*    å®šä¹‰ä¸€ä¸ªå†…è”å‡½æ•°    */inline fun &lt;T&gt; sysnchronized(lock:Lock,action : () -&gt; T):T{    lock.lock()    try{        return action()    }    finally    {        lock.unlock()    }}val l = Lock()synchronized(1){    //...}</code></pre><blockquote><p>å‡½æ•°ç”¨äºç¡®ä¿ä¸€ä¸ªå…±äº«èµ„æºä¸ä¼šå¹¶å‘åœ°è¢«å¤šä¸ªçº¿ç¨‹è®¿é—®ã€‚å‡½æ•°é”ä½ä¸€ä¸ªLockå¯¹è±¡ï¼Œæ‰§è¡Œä»£ç å—ã€‚</p></blockquote><blockquote><p>è°ƒç”¨è¿™ä¸ªå‡½æ•°çš„è¯­æ³•è·ŸJavaä¸­ä½¿ç”¨ synchronized è¯­æ³•å®Œå…¨ä¸€ç›´ã€‚<strong>åŒºåˆ«</strong>ï¼ŒJava çš„ synchronized è¯­æ³•å¯ä»¥ç”¨äº<strong>ä»»ä½•å¯¹è±¡</strong>ï¼Œè¿™ä¸ªå‡½æ•°åˆ™è¦æ±‚ä¼ å…¥ä¸€ä¸ªLockå®ä¾‹ã€‚</p><p>åŒæ—¶ï¼ŒKotlin æ ‡å‡†åº“ä¸­å®šä¹‰äº†ä¸€ä¸ªå¯ä»¥æ¥å—<strong>ä»»ä½•å¯¹è±¡</strong>ä½œä¸ºå‚æ•°çš„ synchronized å‡½æ•°ç‰ˆæœ¬ã€‚</p><p>è¿™é‡Œä½¿ç”¨åŒæ­¥æ“ä½œæ—¶æ˜¾å¼çš„å¯¹è±¡é”èƒ½å¤Ÿæå‡ä»£ç çš„å¯è¯»æ€§å’Œç»´æŠ¤æ€§ã€‚</p></blockquote><blockquote><p><strong>ä½¿ç”¨ inline çš„æ•ˆæœï¼</strong></p><p>å› ä¸ºå·²ç»å°† synchronized å‡½æ•°å£°æ˜ä¸º inlineï¼Œæ‰€ä»¥æ¯æ¬¡è°ƒç”¨å®ƒæ‰€ç”Ÿæˆçš„ä»£ç è·Ÿ Java çš„synchronized è¯­å¥éƒ½æ˜¯ä¸€æ ·çš„ã€‚</p></blockquote><p><strong>ä½¿ç”¨ synchronized çš„ä¾‹å­ã€‚</strong></p><pre><code class="kotlin">fun foo(l:Lock){    println(&quot;Before sync&quot;)    synchronized(1){        println(&quot;Action&quot;)    //å†…è”å‡½æ•°    }    println(&quot;After sync&quot;)}</code></pre><pre><code class="kotlin">/*    ç¼–è¯‘åçš„ foo å‡½æ•°    */fun _foo_(l:Lock){    println(&quot;Before sync&quot;)    //è¿™æ˜¯è°ƒç”¨è€… foo çš„ä»£ç     l.lock()    // è¿™æ˜¯è¢«å†…è”çš„ synchronized å‡½æ•°ä»£ç     try(        println(&quot;Action&quot;)    //è¢«å†…è”çš„lmabdaé¢˜ä»£ç     )finally{        l.unlock()        //è¿™æ˜¯è°ƒç”¨è€… foo çš„ä»£ç     }    println(&quot;After sync&quot;)    //è¿™æ˜¯è°ƒç”¨è€… foo çš„ä»£ç }</code></pre><blockquote><p>å±•ç¤ºçš„æ˜¯ä½œç”¨ç›¸åŒçš„ä»£ç ï¼Œå°†ä¼šè¢«ç¼–è¯‘æˆåŒæ ·çš„å­—èŠ‚ç ã€‚</p></blockquote><blockquote><p>è¿™é‡Œ lambda è¡¨è¾¾å¼ å’Œ synchronized å‡½æ•°å®ç°äº†å†…è”ã€‚</p><p>ç”±äºlambda ç”Ÿæˆçš„å­—èŠ‚ç æˆä¸ºäº†å‡½æ•°è°ƒç”¨è¿™å®šä¹‰çš„éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯è¢«åŒ…å«åœ¨ä¸€ä¸ªå®ç°äº†å‡½æ•°æ¥å£çš„åŒ¿åç±»ä¸­</p></blockquote><pre><code class="kotlin">/*    è°ƒç”¨å†…è”å‡½æ•°çš„æ—¶å€™å¯ä»¥ä¼ é€’å‡½æ•°ç±»å‹çš„å˜é‡ä½œä¸ºå‚æ•°    */class LockOwner(val lock:Lock){    fun runUnderLock(body:() -&gt; Unit){        synchronized(lock,body)    //ä½œä¸ºå‡½æ•°ç±»å‹çš„å˜é‡ä½œä¸ºå‚æ•°ï¼Œè€Œä¸æ˜¯lambda    }}</code></pre><blockquote><p>ä½¿ç”¨å‡½æ•°ç±»å‹çš„å˜é‡ä½œä¸ºå‚æ•°ï¼Œä¸ä¼šè¢«å†…è”ã€‚</p></blockquote><blockquote><p>åªæœ‰synchronized å‡½æ•°ä½“è¢«å†…è”äº†ï¼Œlambda æ‰ä¼šè¢«æ­£ç¡®è°ƒç”¨ã€‚</p></blockquote><pre><code>/*    runUnderLock çš„å‡½æ•°å­—èŠ‚ç     */class LockOwner(val lock:Lock){    fun runUnderLock(body:() -&gt; Unit){    //å‡½æ•°ç±»ä¼¼äºçœŸæ­£çš„runUnberLockè¢«ç¼–è¯‘æˆçš„å­—èŠ‚ç         lock.lock()        try{            body() // body æ²¡æœ‰è¢«å†…è”ï¼Œå› ä¸ºåœ¨è°ƒç”¨åˆ°åœ°æ–¹æ¢æ²¡æœ‰ lambda        }finally{            lock.unlock()        }    }}</code></pre><h3 id="8-2-2-å†…è”å‡½æ•°çš„é™åˆ¶"><a href="#8-2-2-å†…è”å‡½æ•°çš„é™åˆ¶" class="headerlink" title="8.2.2 å†…è”å‡½æ•°çš„é™åˆ¶"></a>8.2.2 å†…è”å‡½æ•°çš„é™åˆ¶</h3><blockquote><p>é‰´äºå†…è”çš„è¿ä½œæ–¹å¼ï¼Œä¸æ˜¯æ‰€æœ‰ä½¿ç”¨lambdaçš„å‡½æ•°éƒ½å¯ä»¥è¢«å†…è”çš„ã€‚</p></blockquote><blockquote><p>å½“å‡½æ•°è¢«å†…è”çš„æ—¶å€™ï¼Œä½œä¸ºå‚æ•°çš„lambdaè¡¨è¾¾å¼å‡½æ•°ä½“ä¼šè¢«ç›´æ¥æ›¿æ¢æˆæœ€ç»ˆç”Ÿæˆçš„ä»£ç ä¸­ã€‚è¿™ä¼šé™åˆ¶å‡½æ•°ä½“ä¸­å¯¹åº”çš„ï¼ˆlambdaï¼‰å‚æ•°ä½¿ç”¨ã€‚å¦‚æœï¼ˆlambdaï¼‰å‚æ•°è¢«è°ƒç”¨ï¼Œè¿™æ ·çš„ä»£ç èƒ½è¢«å®¹æ˜“çš„å†…è”ã€‚<strong>ä½†æ˜¯å¦‚æœï¼ˆlambdaï¼‰å‚æ•°åœ¨æŸä¸ªåœ°æ–¹è¢«ä¿å­˜èµ·æ¥ï¼Œä¸€éåè¾¹å¯ä»¥ç»§ç»­ä½¿ç”¨ï¼Œlambdaè¡¨è¾¾å¼çš„ä»£ç å°†ä¸èƒ½è¢«å†…è”ï¼Œå› ä¸ºå¿…é¡»è¦æœ‰ä¸€ä¸ªåŒ…å«è¿™äº›ä»£ç çš„å¯¹è±¡å­˜åœ¨ã€‚</strong></p></blockquote><blockquote><p>ä¸€èˆ¬æ¥è¯´ï¼Œå‚æ•°å¦‚æœè¢«ç›´æ¥è°ƒç”¨æˆ–è€…ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦å¤–ä¸€ä¸ªinlineå‡½æ•°ï¼Œå®ƒæ˜¯å¯ä»¥è¢«å†…è”çš„ã€‚å¦åˆ™ï¼Œç¼–è¯‘å™¨ä¼šç¦æ­¢å‚æ•°è¢«å†…è”å¹¶ç»™å‡ºé”™è¯¯ä¿¡æ¯â€œIlleal usage of inline-parameterâ€</p></blockquote><blockquote><p>ä¾‹å¦‚ï¼Œè®¸å¤šä½œç”¨åŸŸåºåˆ—çš„å‡½æ•°ä¼šè¿”å›ä¸€äº›ç±»çš„å®ä¾‹ï¼Œè¿™äº›ç±»ä»£è¡¨å¯¹åº”çš„åºåˆ—æ“ä½œå¹¶æ¥å—lambdaä½œä¸ºæ„é€ å‚æ•°ã€‚ è¿™æ˜¯ Sequence.mapå‡½æ•°çš„å®šä¹‰ï¼š</p></blockquote><pre><code class="kotlin">fun &lt;T,R&gt; Sequence&lt;T&gt;.map(transform:(T) -&gt; R):Sequence&lt;R&gt;{    return TransformingSequence(this,transform)}</code></pre><blockquote><p>map å‡½æ•°æ²¡æœ‰ç›´æ¥è°ƒç”¨ä½œä¸º transformå‚æ•°ä¼ é€’è¿›æ¥çš„å‡½æ•°ã€‚è€Œæ˜¯å°†è¿™ä¸ªå‡½æ•°ä¼ é€’ç»™ç±»çš„æ„é€ æ–¹æ³•ï¼Œæ„é€ æ–¹æ³•å°†å®ƒä¿å­˜åœ¨ä¸€ä¸ªå±æ€§ä¸­ã€‚</p><p>è¿™æ—¶ä¸ºäº†æ”¯æŒè¿™ä¸€ç‚¹ï¼Œä½œä¸ºtransformå‚æ•°ä¼ é€’çš„lambdaéœ€è¦è¢«ç¼–è¯‘æˆæ ‡å‡†çš„éå†…è”çš„è¡¨è¾¾å¼ï¼Œå³å®ç°äº†ä¸€ä¸ªå‡½æ•°æ¥å£çš„åŒ¿åç±»ã€‚</p></blockquote><blockquote><p> å½“å‡½æ•°æœŸæœ›ä¸¤ä¸ªæˆ–å¤šä¸ª lambda å‚æ•°ï¼Œå¯ä»¥é€‰æ‹©åªå†…è”å…¶ä¸­ä¸€äº›å‚æ•°ã€‚è¿™æ˜¯æœ‰é“ç†çš„ï¼Œå› ä¸ºä¸€ä¸ªlambdaå¯èƒ½ä¼šåŒ…å«å¾ˆå¤šä»£ç æˆ–è€…ä¸å…è®¸å†…è”çš„æ–¹å¼ä½¿ç”¨ã€‚æ¥å—è¿™æ ·çš„éå†…è”lambdaçš„å‚æ•°ï¼Œå¯ä»¥ç”¨ noinline ä¿®é¥°ç¬¦æ¥æ ‡è®°å®ƒï¼š</p><pre><code class="kotlin">inline fun foo(inlined:() -&gt; Unit,noinlune notInlined:() -&gt; Unit){    //...}</code></pre></blockquote><h3 id="8-2-3-å†…è”é›†åˆæ“ä½œ"><a href="#8-2-3-å†…è”é›†åˆæ“ä½œ" class="headerlink" title="8.2.3 å†…è”é›†åˆæ“ä½œ"></a>8.2.3 å†…è”é›†åˆæ“ä½œ</h3><p>Kotlin æ ‡å‡†åº“ä¸­æ“ä½œé›†åˆå‡½æ•°çš„æ€§èƒ½ã€‚å¤§éƒ¨åˆ†æ ‡å‡†åº“ä¸­çš„é›†åˆå‡½æ•°éƒ½å¸¦æœ‰lambdaå‚æ•°ã€‚<strong>ä¸ç®¡ä½¿ç”¨æ ‡å‡†åº“å‡½æ•°ï¼Œè¿˜æ˜¯ç›´æ¥å®ç°è¿™äº›æ“ä½œæ•ˆç‡éƒ½æ˜¯ä¸€æ ·çš„ã€‚</strong></p><p>æˆ‘ä»¬æ¥æ¯”è¾ƒä¸€ä¸‹ã€‚</p><pre><code class="kotlin">/*    ä½¿ç”¨lambdaè¿‡æ»¤ä¸€ä¸ªé›†åˆ    */data class Person(val name:String,val age:Int)val people = listOf(Persion(&quot;Alice&quot;,29),Person(&quot;Bob&quot;,31))&gt;&gt;&gt; println(people.filter(it.age&lt;30))[Person(name = Alice,age = 29)]</code></pre><pre><code class="kotlin">/*    æ‰‹åŠ¨è¿‡æ»¤ä¸€ä¸ªé›†åˆ ä¸ç”¨lambdaè¡¨è¾¾å¼æ¥å®ç°*/&gt;&gt;&gt; val result = mutableListOf&lt;Person&gt;()&gt;&gt;&gt; for (person in people){&gt;&gt;&gt;         if(person.age &lt; 30) result.add(person)&gt;&gt;&gt;}&gt;&gt;&gt; println(result)[Person(name = &quot;Alice&quot;, age = 29)]</code></pre><blockquote><p>Kotlin å¯¹å†…è”å‡½æ•°çš„æ”¯æŒè®©ä½ ä¸å¿…æ‹…å¿ƒæ€§èƒ½é—®é¢˜ã€‚</p></blockquote><blockquote><p>åœ¨Kotlinä¸­ï¼Œfilter å‡½æ•°è¢«å£°æ˜ä¸ºå†…è”å‡½æ•°ã€‚è¿™æ„å‘³ç€ filter å‡½æ•°ï¼Œä»¥åŠä¼ é€’ç»™å®ƒçš„lambdaçš„å­—èŠ‚ç ä¼šè¢«ä¸€èµ·å†…è”åˆ°filterè¢«è°ƒç”¨çš„åœ°æ–¹ã€‚æœ€ç»ˆï¼Œç¬¬ä¸€ç§å®ç°æ‰€äº§ç”Ÿçš„å­—èŠ‚ç å’Œç¬¬äºŒç§å®ç°æ‰€äº§ç”Ÿçš„å­—èŠ‚ç å¤§è‡´æ˜¯ä¸€æ ·çš„ã€‚ä½ å¯ä»¥å¾ˆå®‰å…¨åœ°ä½¿ç”¨ç¬¦åˆè¯­è¨€ä¹ æƒ¯çš„é›†åˆæ“ä½œã€‚</p></blockquote><blockquote><p>ç°è±¡ä½ åœ¨è¿ç»­ä½¿ç”¨ filter å’Œ map ä¸¤ä¸ªæ“ä½œã€‚</p><pre><code class="kotlin">&gt;&gt;&gt; println(people.filter{it.age &gt; 30}...                .map (Persion::name))[Bob]</code></pre><p><strong>è¿™ä¸ªä¾‹å­ä½¿ç”¨äº† lambda è¡¨è¾¾å¼å’Œä¸€ä¸ªæˆå‘˜å¼•ç”¨ã€‚</strong></p><p>è¿™é‡Œ filter å’Œ map éƒ½è¢«å£°æ˜ä¸ºäº† inline å‡½æ•°ï¼Œæ‰€ä»¥ä»–ä»¬çš„å‡½æ•°ä½“ä¼šè¢«å†…è”ï¼Œå› æ­¤ä¸ä¼šäº§ç”Ÿé¢å¤–çš„ç±»å’Œå¯¹è±¡ã€‚ä¸Šè¿°çš„ä»£ç å´åˆ›å»ºäº†ä¸€ä¸ªä¸­é—´é›†åˆæ¥æŠŠå¶å‡ºæ¥åˆ—è¡¨è¿‡æ»¤çš„ç»“æœï¼Œç”± filter å‡½æ•°ç”Ÿæˆçš„ä»£ç ä¼šå‘è¿™ä¸ªé›†åˆç§æ·»åŠ å…ƒç´ ï¼Œè€Œç”± map å‡½æ•°ç”Ÿæˆçš„ä»£ç ä¼šè¯»å–è¿™ä¸ªå‡ ä¸ªã€‚</p><p><strong>å¦‚æœæœ‰å¤§é‡çš„å…ƒç´ éœ€è¦å¤„ç†ï¼Œä¸­é—´é›†åˆçš„è¿è¡Œå¼€é”€å°†æˆä¸ºä¸å¯å¿½è§†çš„é—®é¢˜ï¼Œè¿™æ—¶å¯ä»¥åœ¨è°ƒç”¨é“¾ååŠ ä¸Šä¸€ä¸ªasSequenceè°ƒç”¨ï¼Œç”¨åºåˆ—ä»£æ›¿é›†åˆã€‚</strong></p><p>åŒæ—¶å¦‚åŒä¸Šä¸€èŠ‚çœ‹åˆ°çš„ä¸€æ ·ï¼Œç”¨äºå¤„ç†åºåˆ—çš„ lambda ä¸èƒ½å¤Ÿè¢«å†…è”ï¼Œæ¯ä¸ªä¸­é—´åºåˆ—è¢«è¡¨ç¤ºæˆlambdaä¿å­˜åœ¨å…¶å­—æ®µä¸­çš„å¯¹è±¡ï¼Œ<strong>è€Œæœ«ç«¯æ“ä½œä¼šå¯¼è‡´ç”±æ¯ä¸ªä¸­é—´åºåˆ—è°ƒç”¨ç»„æˆçš„é“¾è¢«æ‰§è¡Œ</strong>ã€‚å› æ­¤ï¼Œå³ä¾¿åºåˆ—ä¸Šçš„æ“ä½œæ˜¯æƒ°æ€§çš„ï¼Œä½ ä¸åº”è¯¥æ€»æ˜¯è¯•å›¾åœ¨é›†åˆæ“ä½œçš„é“¾å<strong>asSequence</strong>ã€‚åªæœ‰åœ¨å¤„ç†å¤§é‡æ•°æ®æ—¶æœ‰ç”¨ï¼Œå°çš„é›†åˆå¯ä»¥ç”¨æ™®é€šé›†åˆå¤„ç†ã€‚</p></blockquote><h3 id="8-2-4-å†³å®šä½•æ—¶å°†å‡½æ•°å£°æ˜æˆå†…è”"><a href="#8-2-4-å†³å®šä½•æ—¶å°†å‡½æ•°å£°æ˜æˆå†…è”" class="headerlink" title="8.2.4 å†³å®šä½•æ—¶å°†å‡½æ•°å£°æ˜æˆå†…è”"></a>8.2.4 å†³å®šä½•æ—¶å°†å‡½æ•°å£°æ˜æˆå†…è”</h3><p>ä½¿ç”¨ inline å…³é”®è¯åªèƒ½æé«˜ lambda å‚æ•°çš„å‡½æ•°æ€§èƒ½ï¼Œå…¶ä»–æƒ…å†µéœ€è¦é¢å¤–çš„åº¦é‡å’Œç ”ç©¶ã€‚</p><p><strong>å°†å¸¦æœ‰ lambda å‚æ•°çš„å‡½æ•°å†…è”èƒ½å¤Ÿå¸¦æ¥ä»€ä¹ˆå¥½å¤„ã€‚</strong></p><blockquote><p>é¦–å…ˆï¼Œ é€šè¿‡å†…è”é¿å…è¿è¡Œæ—¶å¼€é”€æ›´åŠ æ˜æ˜¾äº†ã€‚æ¯•ç«ŸèŠ‚çº¦äº†å‡½æ•°è¿è¡Œæ—¶çš„å¼€é”€ï¼Œè€Œä¸”èŠ‚çº¦äº† lambda åˆ›å»ºåŒ¿åç±»ï¼Œä»¥åŠåˆ›å»º lambda å®ä¾‹å¯¹è±¡çš„å¼€é”€ã€‚å…¶æ¬¡ï¼ŒJVM è¿˜æ²¡æœ‰èªæ˜åˆ°æ€»æ˜¯èƒ½å°†å‡½æ•°è°ƒç”¨å†…è”ã€‚å†…è”å¯ä»¥ä½¿ç”¨ä¸€äº›ä¸å¯èƒ½è¢«æ™®é€š lambda ä½¿ç”¨çš„ç‰¹å¾ï¼Œæ¯”å¦‚éå±€éƒ¨è¿”å›ã€‚</p></blockquote><p><strong>æ³¨æ„</strong></p><blockquote><p><strong>åœ¨ä½¿ç”¨ inline å…³é”®å­—çš„æ—¶å€™ï¼Œä½ è¿˜æ˜¯åº”è¯¥æ³¨æ„ä»£ç çš„é•¿åº¦ã€‚å¦‚æœä½ è¦å†…è”çš„å‡½æ•°ä¸å¤§ï¼Œå°†å®ƒçš„å­—èŠ‚ç æ‹·è´åˆ°æ¯ä¸€ä¸ªè°ƒç”¨ç‚¹å°†ä¼šæå¤§åœ°å¢åŠ å­—èŠ‚ç çš„é•¿åº¦ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ åº”è¯¥å°†é‚£äº›ä¸ lambda å‚æ•°æ— å…³çš„ä»£ç æŠ½å–åˆ°ä¸€ä¸ªç‹¬ç«‹çš„éå†…è”å‡½æ•°ä¸­ã€‚åœ¨ Kotlin ä¸­å†…è”å‡½æ•°æ€»æ˜¯å¾ˆå°çš„ã€‚</strong></p></blockquote><h3 id="8-2-5-ä½¿ç”¨-å†…è”-lambda-ç®¡ç†èµ„æº"><a href="#8-2-5-ä½¿ç”¨-å†…è”-lambda-ç®¡ç†èµ„æº" class="headerlink" title="8.2.5  ä½¿ç”¨ å†…è” lambda ç®¡ç†èµ„æº"></a>8.2.5  ä½¿ç”¨ å†…è” lambda ç®¡ç†èµ„æº</h3><p><strong>Lambda å¯ä»¥å»é™¤é‡å¤ä»£ç çš„ä¸€ä¸ªå¸¸è§æ¨¡å¼æ˜¯èµ„æºæ¨¡å¼</strong></p><blockquote><p>å…ˆè·å–èµ„æºï¼Œå®Œæˆä¸€ä¸ªæ“ä½œï¼Œé‡Šæ”¾èµ„æºã€‚</p><p>è¿™é‡Œèµ„æºè¡¨ç¤ºå¤šç§ä¸åŒçš„ä¸œè¥¿ï¼šä¸€ä¸ªæ–‡ä»¶ã€ä¸€ä¸ªé”ã€ä¸€ä¸ªæ•°æ®åº“äº‹åŠ¡ç­‰ã€‚</p><p>å®ç°è¿™ä¸ªæ¨¡å¼çš„æ ‡å‡†åšæ³•æ˜¯ä½¿ç”¨ try/finally è¯­å¥ã€‚èµ„æºåœ¨ try ä»£ç å—ä¹‹å‰è¢«è·å–ï¼Œåœ¨ finally ä»£ç å—ä¸­é‡Šæ”¾ã€‚</p></blockquote><p><strong>synchronization</strong></p><blockquote><p>å‰éƒ¨åˆ†è®²åˆ°å°† try/finallyçš„é€»è¾‘å°è£…åœ¨ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œç„¶åå°†ä½¿ç”¨èµ„æºçš„ä»£ç ä½œä¸º lambda ä¼ é€’ç»™è¿™ä¸ªæ–¹æ³•ã€‚</p><p>synchronizationå°†ä¸€ä¸ªé”å¯¹è±¡ä½œä¸ºå‚æ•°ã€‚</p></blockquote><p>ä»£æ›¿ <strong>synchronization</strong></p><blockquote><p>Kotlin æ ‡å‡†åº“å®šä¹‰äº†ä¸€ä¸ªå« withLockçš„å‡½æ•°ï¼Œå®ƒæä¾›äº†å®ç°åŒæ ·åŠŸèƒ½çš„æ›´ç¬¦åˆè¯­è¨€ä¹ æƒ¯çš„APIï¼šå®ƒæ˜¯ Lock æ¥å£çš„æ‰©å±•å‡½æ•°ã€‚</p><p>å¦‚ä½•ä½¿ç”¨ã€‚</p><pre><code class="kotlin">val l:Lock = ...l.withLock{    // access the resource protected by this lock åœ¨åŠ é”çš„æƒ…å†µä¸‹æ‰§è¡ŒæŒ‡å®šçš„æ“ä½œã€‚}/*    åœ¨Kotlinæ ‡å‡†åº“ä¸­çš„å®šä¹‰    */fun &lt;T&gt; Lock.withLock(action : () -&gt; T):T{    //éœ€è¦åŠ é”çš„ä»£ç è¢«æŠ½å–åˆ°ä¸€ä¸ªç‹¬ç«‹çš„æ–¹æ³•ä¸­    lock()    try{        return action()    } finally{        unlock()    }}</code></pre></blockquote><p><strong>æ–‡ä»¶æ˜¯å¦ä¸€ç§å¯ä»¥ä½¿ç”¨è¿™ç§æ¨¡å¼çš„å¸¸è§èµ„æºç±»å‹ã€‚ï¼ˆæ–‡ä»¶ä½¿ç”¨ èµ„æºæ¨¡å¼ï¼‰</strong></p><blockquote><p>Java 7 ä¸ºè¿™ç§æ¨¡å¼å¼•å…¥äº†ç‰¹æ®Šçš„è¯­æ³•ï¼štry-with-resource è¯­å¥ã€‚</p><pre><code class="kotlin">/*    ä¸‹è¿°ä»£ç æ¥è¯»å–æ–‡ä»¶çš„ç¬¬ä¸€è¡ŒJavaæ–¹æ³•    *//*    åœ¨Javaä¸­ä½¿ç”¨try-with-resourceè¯­å¥    */static String readFirstLineFromFile(String path) throws IOException{    try(BufferedReader br = new BufferedReader(new FileReader(path))){        return br.readLine();    }}</code></pre><p>Kotlin ä¸­å¹¶æ²¡æœ‰ç­‰ä»·çš„è¯­æ³•ï¼Œå› ä¸ºé€šè¿‡ä½¿ç”¨ä¸€ä¸ªå¸¦æœ‰å‡½æ•°ç±»å‹å‚æ•°çš„å‡½æ•°å¯ä»¥æ— ç¼åœ°å®Œæˆç›¸åŒçš„äº‹æƒ…ã€‚è¿™ä¸ªå‡½æ•°å«use()</p><p><strong>ä½¿ç”¨ use å‡½æ•° é‡å†™ä¸Šè¿°ä»£ç </strong></p><pre><code class="kotlin">/*    ä½¿ç”¨useå‡½æ•°ä½œä¸ºèµ„æºç®¡ç†    */fun readFirstLineFromFile (path:String):String{    BufferedReader(FileReader(path)).use{    // æ„æˆ BufferedReaderï¼Œè°ƒç”¨ â€œuseâ€ å‡½æ•°ï¼Œä¼ é€’ä¸€ä¸ªlambdaæ‰§è¡Œæ–‡ä»¶æ“ä½œ        br -&gt; return br.readLine()    // ä»å‡½æ•°ä¸­è¿”å›æ–‡ä»¶çš„ä¸€è¡Œ    }}</code></pre><p>use å‡½æ•°æ˜¯ä¸€ä¸ªæ‰©å±•å‡½æ•°ï¼Œè¢«ç”¨æ¥æ“ä½œå¯å…³é—­çš„èµ„æºï¼Œå®ƒæ¥å—ä¸€ä¸ªlambdaä½œä¸ºå‚æ•°ã€‚è¿™ä¸ªè¿”å›è°ƒç”¨lambdaå¹¶ä¸”ç¡®ä¿èµ„æºè¢«å…³é—­ï¼Œæ— è®ºlambdaæ­£å¸¸æ‰§è¡Œé¥­æ˜¯æŠ›å‡ºäº†å¼‚å¸¸ã€‚å½“ç„¶ä½¿ç”¨useå‡½æ•°æ˜¯å†…è”å‡½æ•°ï¼Œæ‰€ä»¥ä½¿ç”¨å®ƒå¹¶ä¸ä¼šå¼•å‘ä»»ä½•æ€§èƒ½å¼€é”€ã€‚</p></blockquote><h2 id="8-3-é«˜é˜¶å‡½æ•°ä¸­çš„æ§åˆ¶æµ"><a href="#8-3-é«˜é˜¶å‡½æ•°ä¸­çš„æ§åˆ¶æµ" class="headerlink" title="8.3 é«˜é˜¶å‡½æ•°ä¸­çš„æ§åˆ¶æµ"></a>8.3 é«˜é˜¶å‡½æ•°ä¸­çš„æ§åˆ¶æµ</h2><p>æŠŠ return è¯­å¥æ”¾åœ¨å¾ªç¯çš„ä¸­é—´æ˜¯å¾ˆç®€å•çš„äº‹æƒ…ï¼Œä½†æ˜¯å¦‚æœå°†å¾ªç¯è½¬æ¢æˆä¸€ä¸ªç±»ä¼¼äº <strong>filter ï¼ˆfilter æ˜¯å†…è”å‡½æ•°ï¼‰</strong> çš„å‡½æ•°å‘¢ï¼Ÿè¿™ç§æƒ…å†µä¸‹ return ä¼šå¦‚ä½•å·¥ä½œã€‚</p><h3 id="8-3-1-lambda-ä¸­çš„è¿”å›è¯­å¥ï¼šä»ä¸€ä¸ªå°é—­çš„å‡½æ•°è¿”å›"><a href="#8-3-1-lambda-ä¸­çš„è¿”å›è¯­å¥ï¼šä»ä¸€ä¸ªå°é—­çš„å‡½æ•°è¿”å›" class="headerlink" title="8.3.1 lambda ä¸­çš„è¿”å›è¯­å¥ï¼šä»ä¸€ä¸ªå°é—­çš„å‡½æ•°è¿”å›"></a>8.3.1 lambda ä¸­çš„è¿”å›è¯­å¥ï¼šä»ä¸€ä¸ªå°é—­çš„å‡½æ•°è¿”å›</h3><p>æ¯”è¾ƒä¸¤ç§ä¸åŒçš„ éå†é›†åˆçš„è¿”å›ï¼š åœ¨ä¸‹é¢çš„ä»£ç æ¸…å•ä¸­ï¼Œå¦‚æœä¸€ä¸ªäººçš„åå­—æ˜¯ â€œAliceâ€ ï¼Œå°±åº”è¯¥ä»å‡½æ•°lookForAlice è¿”å›ã€‚</p><pre><code class="kotlin">/*    åœ¨ä¸€ä¸ªæ™®é€šå¾ªç¯ä¸­ä½¿ç”¨return    */data class Person(val neme:String, val age:Int)val people = listOf(Person (&quot;Alice&quot;,29),Person(&quot;Bob&quot;,11))fun lookForAlice(people:List&lt;Person&gt;){    for (person in people){        if (person.name == &quot;Alice&quot;){            println(&quot;Found!&quot;)            return        }    }    println(&quot;Alice is not found&quot;)     //å¦‚æœâ€œpeopleâ€ä¸­æ²¡ç”¨Aliceï¼Œè¿™ä¸€è¡Œå°±ä¼šè¢«æ‰“å°å‡ºæ¥}&gt;&gt;&gt; lookForAlice(people)Found!</code></pre><blockquote><p>ä½¿ç”¨ forEachè¿­ä»£é‡å†™è¿™æ®µä»£ç å®‰å…¨å—ï¼Ÿ</p><pre><code class="kotlin">/*    åœ¨ä¼ é€’ç»™ forEach çš„lambda ä¸­ä½¿ç”¨ return    */fun lookForAlice(people:List&lt;Person&gt;){    people.forEach{        if (it.name == &quot;Alice&quot;){            println(&quot;Found!&quot;)            return        }    }    println(&quot;Alice is not found&quot;)    //å’Œä¸Šä¸€ä¸ªä»£ç æ¸…å•ä¸­çš„æ•ˆæœæ˜¯ä¸€æ ·çš„}</code></pre><p>è¿™æ˜¯å®‰å…¨çš„</p></blockquote><blockquote><p>å½“ä½ åœ¨ lambda ä¸­ä½¿ç”¨ return å…³é”®å­—ï¼Œå®ƒä¼šä»è°ƒç”¨ lambda çš„å‡½æ•°ä¸­è¿”å›ï¼Œå¹¶ä¸æ˜¯ä» lambda ä¸­è¿”å›ã€‚è¿™ä¸ªå«åš<strong>éå±€éƒ¨è¿”å›</strong>ã€‚<strong>å› ä¸ºå®ƒä»ä¸€ä¸ªæ¯”åŒ…å« return çš„ä»£ç å—æ›´å¤§çš„ä»£ç å—ä¸­è¿”å›äº†ã€‚</strong></p></blockquote><blockquote><p>ä¸ºäº†ç†è§£è¿™æ¡è§„åˆ™èƒŒåçš„é€»è¾‘ï¼Œä»Javaå‡½æ•°ä¸­åœ¨forå¾ªç¯æˆ–è€…synchronized ä»£ç å—ä¸­ä½¿ç”¨ return å…³é”®å­—ã€‚æ˜¾ç„¶è¿™ä¼šä»å‡½æ•°ä¸­è¿”å›ï¼Œè€Œä¸æ˜¯ä»å¾ªç¯æˆ–è€…ä»£ç å—ä¸­è¿”å›ã€‚ä½¿ç”¨ä»¥ lambda ä½œä¸ºå‚æ•°çš„å‡½æ•°çš„æ—¶å€™ kotlin ä¿ç•™äº†åŒæ ·çš„è¡Œä¸ºã€‚</p></blockquote><blockquote><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<strong><em>åªæœ‰åœ¨ä»¥ lambda ä½œä¸ºå‚æ•°çš„å‡½æ•°æ˜¯å†…è”å‡½æ•°çš„æ—¶å€™æ‰èƒ½ä»è·Ÿå¤–å±‚çš„å‡½æ•°è¿”å›ã€‚</em></strong>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼ŒforEach çš„å‡½æ•°ä½“å’Œlambdaçš„å‡½æ•°ä½“ä¸€èµ·è¢«å†…è”äº†ï¼Œæ‰€ä»¥åœ¨ç¼–è¯‘çš„æ—¶å€™èƒ½å¾ˆå®¹æ˜“åšåˆ°ä»åŒ…å«å®ƒçš„å‡½æ•°ä¸­è¿”å›ã€‚åœ¨ éå†…è”å‡½æ•°çš„lambda ä¸­ä½¿ç”¨ return è¡¨è¾¾å¼æ˜¯ä¸å…è®¸çš„ã€‚ä¸€ä¸ªéå†…è”å‡½æ•°å¯ä»¥æŠŠä¼ ç»™å®ƒçš„lambdaä¿å­˜åœ¨å˜é‡ä¸­ï¼Œä»¥ä¾¿åœ¨å‡½æ•°è¿”å›ä»¥åå¯ä»¥ç»§ç»­ä½¿ç”¨ï¼Œè¿™ä¸ªæ—¶å€™lambdaå…ˆå»å½±å“å‡½æ•°çš„è¿”å›å·²ç»å¤ªæ™šäº†ã€‚</p></blockquote><h3 id="8-3-2-ä»-lambda-è¿”å›ï¼šä½¿ç”¨æ ‡ç­¾è¿”å›"><a href="#8-3-2-ä»-lambda-è¿”å›ï¼šä½¿ç”¨æ ‡ç­¾è¿”å›" class="headerlink" title="8.3.2 ä» lambda è¿”å›ï¼šä½¿ç”¨æ ‡ç­¾è¿”å›"></a>8.3.2 ä» lambda è¿”å›ï¼šä½¿ç”¨æ ‡ç­¾è¿”å›</h3><p><strong>æ ‡ç­¾è¿”å›</strong></p><blockquote><p>å¯ä»¥åœ¨lambdaè¡¨è¾¾å¼æ€»ä½¿ç”¨<strong>å±€éƒ¨è¿”å›</strong>ã€‚</p><p>lambda ä¸­çš„å±€éƒ¨è¿”å›è·Ÿ for å¾ªç¯ä¸­çš„ break è¡¨è¾¾å¼æ˜¾ç¤ºã€‚å®ƒä¼šç»ˆæ­¢ lambda çš„æ‰§è¡Œï¼Œå¹¶æ¥ç€ä»è°ƒç”¨ lambda çš„ä»£ç å¤„æ‰§è¡Œã€‚</p></blockquote><p><strong>åŒºåˆ† å±€éƒ¨è¿”å›å’Œéå±€éƒ¨è¿”å›</strong></p><blockquote><p>è¦åŒºåˆ†å±€éƒ¨è¿”å›å’Œéå±€éƒ¨è¿”å›ï¼Œè¦ç”¨åˆ°<strong>æ ‡ç­¾</strong>ã€‚</p><p><strong>å¦‚ä½•åŒºåˆ†ã€‚</strong></p><p>æƒ³ä» lambda è¡¨è¾¾å¼å¤„è¿”å›ä½ å¯ä»¥æ ‡è®°å®ƒï¼Œç„¶ååœ¨ return å…³é”®å­—åé¢å¼•ç”¨è¿™ä¸ªæ ‡ç­¾ã€‚</p></blockquote><pre><code class="kotlin">/*    ç”¨ä¸€ä¸ªæ ‡ç­¾å®ç°å±€éƒ¨è¿”å›    */fun lookForAlice(people:List&lt;Person&gt;){    people.forEach lable@{    // â†ç»™lambdaè¡¨è¾¾å¼åŠ ä¸Šæ ‡ç­¾        if (it.name == &quot;Alice&quot;) return@label    //â† return@label å¼•ç”¨äº†è¿™ä¸ªæ ‡ç­¾    }    println(&quot;Alice might be somewhere&quot;)    //è¿™é‡Œæ€»è¢«æ‰“å°}&gt;&gt;&gt; lookForAlice(people)Alice might be somewhere!</code></pre><blockquote><p><strong>å¦‚ä½•ä½¿ç”¨æ ‡ç­¾</strong></p><p>è¦æ ‡è®°ä¸€ä¸ªlambdaè¡¨è¾¾å¼ï¼Œåœ¨ lambda çš„èŠ±æ‹¬å·ä¹‹å‰æ”¾ä¸€ä¸ªæ ‡ç­¾åï¼Œæ¥ç€æ”¾ä¸€ä¸ª @ ç¬¦å·ã€‚ï¼ˆæ ‡ç­¾åå¯ä»¥æ˜¯ä»»æ„çš„ï¼‰ã€</p><p>è¦ä»ä¸€ä¸ªlambdaè¿”å›ï¼Œåœ¨returnå…³é”®è¯åæ”¾ä¸€ä¸ª@ç¬¦å·ï¼Œæ¥ç€æ”¾æ ‡ç­¾åã€‚</p><pre><code class="kotlin">// â€œlabel@â€ lambdaæ ‡ç­¾people.forEach label@{    if (it.name == &quot;Alice&quot;) return@label //è¿”å›è¡¨è¾¾å¼æ ‡ç­¾}/*    ç”¨ â€œ@â€ ç¬¦å·æ ‡è®°ä¸€ä¸ªæ ‡ç­¾ä»ä¸€ä¸ªlambdaè¿”å›    */</code></pre></blockquote><blockquote><p><strong>å¦ä¸€ç§æ–¹å¼ï¼Œä½¿ç”¨ lambda ä½œä¸ºå‚æ•°çš„å‡½æ•°çš„å‡½æ•°åå¯ä»¥ä½œä¸ºæ ‡ç­¾</strong></p><pre><code class="kotlin">/*    ç”¨å‡½æ•°å return æ ‡ç­¾    */fun lookForAlice(people:List&lt;Person&gt;) {    people.forEach{        if(it.name == &quot;Alice&quot;)    return@forEach    // â†return@forEachä» lambda è¡¨è¾¾å¼è¿”å›    }    println(&quot;Alice might be somewhere&quot;)}</code></pre><p>å½“é‡Œæ˜¾å¼çš„<strong>æŒ‡å®šäº† lambda è¡¨è¾¾å¼çš„æ ‡ç­¾</strong>ï¼Œå†ä½¿ç”¨å‡½æ•°åä½œä¸ºæ ‡ç­¾æ²¡æœ‰ä»»ä½•æ•ˆæœã€‚</p><p>ä¸€ä¸ª lambda è¡¨è¾¾å¼çš„æ ‡ç­¾æ•°é‡ä¸èƒ½å¤šäºä¸€ä¸ªã€‚</p></blockquote><blockquote><p><strong>å¸¦æ ‡ç­¾çš„ â€œthisâ€ è¡¨è¾¾å¼</strong></p><p>åŒæ ·çš„è§„åˆ™ä¹Ÿé€‚ç”¨äºthisè¡¨è¾¾å¼ã€‚åœ¨å¸¦æ¥æ”¶è€…çš„lambdaä¸­â€“åŒ…å«ä¸€ä¸ªéšå¼ä¸Šä¸‹æ–‡å¯¹è±¡çš„lamdbaä¹Ÿæœ‰é€šè¿‡ä¸€ä¸ªthiså»è®¿é—®ã€‚</p><p>å¦‚æœä½ ç»™å¸¦æ¥æ”¶è€… lambda æŒ‡å®šæ ‡ç­¾ï¼Œå°±å¯ä»¥é€šè¿‡å¯¹åº”çš„å¸¦æœ‰æ ‡ç­¾çš„thisè¡¨è¾¾å¼è®¿é—®å®ƒçš„éšå¼æ¥æ”¶è€…ã€‚</p><pre><code class="kotlin">&gt;&gt;&gt; println(StringBuilder().apply sb@{    // è¿™ä¸ª lambda éšå¼æ¥æ”¶è€…å¯ä»¥é€šè¿‡ this@sb è®¿é—®...        listOf(1,2,3).apply{    // â€thisâ€æŒ‡å®šä½œç”¨åŸŸå†…æœ€è¿‘çš„éšå¼æ¥æ”¶è€…...            this@sb.append(this.toString())    // æ‰€ä»¥éšå¼æ¥æ”¶è€…éƒ½å¯ä»¥è¢«è®¿é—®ï¼Œå¤–å±‚çš„æ¥æ”¶è€…é€šè¿‡æ˜¾å¼çš„æ ‡ç­¾è®¿é—®...        }...    })     [1,2,3]</code></pre><p>å±€éƒ¨è¿”å›çš„è¯­æ³•ç›¸å½“å†—é•¿ï¼Œå¦‚æœä¸€ä¸ª lambda åŒ…å«å¤šä¸ªè¿”å›è¯­å¥ä¼šå˜å¾—æ›´åŠ ç¬¨é‡ã€‚æ‰€ä»¥è¿™é‡Œå¯ä»¥ä½¿ç”¨ <strong>åŒ¿åå‡½æ•°ã€‚</strong></p></blockquote><h1 id="9-æ³›å‹"><a href="#9-æ³›å‹" class="headerlink" title="9 æ³›å‹"></a>9 æ³›å‹</h1><p><strong>Kotlinä¸­å¼•å…¥äº†æ–°çš„æ¦‚å¿µï¼Œä¾‹å¦‚å®åŒ–ç±»å‹å‚æ•°å’Œå£°æ˜ç‚¹å˜å‹ã€‚</strong></p><p><strong>å®åŒ–ç±»å‹å‚æ•°å…è®¸ä½ åœ¨è¿è¡Œæ—¶çš„å†…è”å‡½æ•°è°ƒç”¨ä¸­å¼•ç”¨ä½œä¸ºç±»å‹å®å‚çš„å…·ä½“ç±»å‹ï¼ˆå¯¹æ™®é€šçš„ç±»å’Œå‡½æ•°æ¥è¯´ï¼Œè¿™æ ·è¡Œä¸é€šï¼Œå› ä¸ºç±»å‹å®å‚åœ¨è¿è¡Œæ—¶ä¼šè¢«æ¶ˆé™¤ï¼‰</strong></p><p><strong>å£°æ˜ç‚¹å˜å‹å¯ä»¥è¯´æ˜ä¸€ä¸ªå¸¦ç±»å‹å‚æ•°çš„æ³›å‹ç±»å‹ï¼Œæ˜¯å¦æ˜¯å¦ä¸€ä¸ªæ³›å‹ç±»å‹çš„ä¹‹ç±»æˆ–è€…è¶…ç±»å‹ï¼Œå®ƒä»¬çš„åŸºç¡€ç±»å‹ç›¸åŒä½†ç±»å‹å‚æ•°ä¸åŒã€‚</strong>ä¾‹å¦‚å®ƒå¯ä»¥è°ƒèŠ‚æ˜¯å¦å¯ä»¥æŠŠList<Int>ç±»å‹çš„å‚æ•°ä¼ ç»™æœŸæœ›List<Any>çš„å‡½æ•°ã€‚<strong>ä½¿ç”¨ç‚¹å˜å‹åœ¨å…·ä½“ä½¿ç”¨ä¸€ä¸ªæ³›å‹æ—¶åšåŒæ ·çš„äº‹ï¼Œè¾¾åˆ°å’ŒJavaé€šé…ç¬¦ä¸€æ ·çš„æ•ˆæœã€‚</strong></p><blockquote><p>ç±»å‹å‚æ•°ï¼š</p><p>åœ¨è®¡ç®—æœºç¼–ç¨‹è¯­è¨€ä¸­ï¼ŒTypeParameteræ˜¯ç”¨äºæ³›å‹ç¼–ç¨‹çš„é€šç”¨æ ‡ç­¾ï¼Œç”¨äºå¼•ç”¨æœªçŸ¥çš„æ•°æ®ç±»å‹ï¼Œæ•°æ®ç»“æ„æˆ–ç±»ã€‚TypeParameteræœ€å¸¸ç”¨äºC ++æ¨¡æ¿å’ŒJavaæ³›å‹ã€‚TypeParameterä¸å…ƒè¯­æ³•å˜é‡ç›¸ä¼¼ï¼Œä½†æœ‰æ‰€ä¸åŒã€‚</p><p>å¼•ç”¨ï¼šç»´åŸºç™¾ç§‘</p></blockquote><h2 id="9-1-æ³›å‹ç±»å‹å‚æ•°"><a href="#9-1-æ³›å‹ç±»å‹å‚æ•°" class="headerlink" title="9.1 æ³›å‹ç±»å‹å‚æ•°"></a>9.1 æ³›å‹ç±»å‹å‚æ•°</h2><blockquote><p>æ³›å‹å…è®¸ä½ å®šä¹‰å¸¦ç±»å‹å½¢å‚çš„ç±»å‹ã€‚å½“è¿™ç§ç±»å‹çš„å®ä¾‹è¢«åˆ›å»ºå‡ºæ¥çš„æ—¶å€™ï¼Œç±»å‹å½¢å‚è¢«æ›¿æ¢æˆç§°ä¸ºç±»å‹å®å‚çš„å…·ä½“ç±»å‹ã€‚</p><p>ç±»å‹å½¢å‚ï¼šå£°æ˜å®šä¹‰æ—¶çš„å‚æ•°ï¼Œä½œç”¨åŸŸä»…æœ¬èº«ã€‚</p></blockquote><p><strong>Kotlinç¼–è¯‘å™¨èƒ½æ¨å¯¼å‡ºç±»å‹å®å‚ï¼š</strong></p><pre><code class="kotlin">val authors = listOf(&quot;Dmitry&quot;,&quot;Svetlane&quot;)</code></pre><p>å› ä¸ºä¼ ç»™listOfå‡½æ•°çš„ä¸¤ä¸ªå€¼éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œç¼–è¯‘å™¨æ¨å¯¼å‡ºä½ æ­£åœ¨åˆ›å»ºä¸€ä¸ªList<String>ã€‚å¦ä¸€æ–¹é¢ï¼Œå¦‚æœä½ æƒ³åˆ›å»ºä¸€ä¸ªç©ºçš„åˆ—è¡¨ï¼Œè¿™æ ·å°±æ²¡æœ‰ä»»ä½•å¯ä»¥æ¨å¯¼å¤„ç±»å‹å®å‚çš„çº¿ç´¢ï¼Œä½ å°±å¾—æ˜¾å¼æŒ‡å®šå®ƒï¼ˆç±»å‹å½¢å‚ï¼‰ã€‚å°±åˆ›å»ºåˆ—è¡¨æ¥è¯´ï¼Œå³å¯ä»¥é€‰æ‹©åœ¨å˜é‡å£°æ˜ä¸­è¯´æ˜æ³›å‹çš„ç±»å‹ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©åœ¨åˆ›å»ºåˆ—è¡¨çš„å‡½æ•°ä¸­è¯´æ˜ç±»å‹å®å‚ã€‚ä¾‹å­ï¼š</p><pre><code class="kotlin">val readers :MutableList&lt;String&gt; = mutableListOf()val reader = mutableListOf&lt;String&gt;()</code></pre><h3 id="9-1-1-æ³›å‹å‡½æ•°å’Œå±æ€§"><a href="#9-1-1-æ³›å‹å‡½æ•°å’Œå±æ€§" class="headerlink" title="9.1.1 æ³›å‹å‡½æ•°å’Œå±æ€§"></a>9.1.1 æ³›å‹å‡½æ•°å’Œå±æ€§</h3><p>å¦‚æœä½ åœ¨ç¼–å†™ä¸€ä¸ªä½¿ç”¨åˆ—è¡¨çš„å‡½æ•°ï¼Œå¸Œæœ›å®ƒå¯ä»¥åœ¨ä»»ä½•åˆ—è¡¨ä¸Šä½¿ç”¨ï¼Œè€Œä¸æ˜¯æŸä¸ªå…·ä½“ç±»å‹çš„å…ƒç´ åˆ—è¡¨ï¼Œé‚£ä¹ˆç¼–å†™ä¸€ä¸ª <strong>æ³›å‹å‡½æ•°</strong>ã€‚</p><blockquote><p>æ³›å‹å‡½æ•°æœ‰å®ƒè‡ªå·±çš„ç±»å‹å½¢å‚ã€‚ç±»å‹å½¢å‚åœ¨æ¯æ¬¡å‡½æ•°è°ƒç”¨æ—¶éƒ½å¿…é¡»æ›¿æ¢æˆå…·ä½“çš„ç±»å‹å®å‚ã€‚</p></blockquote><p>å¤§éƒ¨åˆ†ä½¿ç”¨é›†åˆçš„åº“å‡½æ•°éƒ½æ˜¯æ³›å‹çš„ã€‚ä¸‹é¢è¿™ä¸ªå‡½æ•°å°±è¿”å›ä¸€ä¸ªåªåŒ…å«åœ¨æŒ‡å®šä¸‹æ ‡åŒºé—´å†…çš„å…ƒç´ ã€‚</p><pre><code class="kotlin">fun &lt;T&gt; List&lt;T&gt;.slice(indeces: IntRange):List&lt;T&gt;    //æ¥æ”¶è€…å’Œè¿”å›ç±»å‹ä½¿ç”¨äº†ç±»å‹å½¢å‚// &lt;T&gt;:ç±»å‹å½¢å‚å£°æ˜</code></pre><p>æ¥æ”¶è€…å’Œè¿”å›ç±»å‹ç”¨åˆ°äº†å‡½æ•°çš„ç±»å‹å½¢å‚Tï¼Œå®ƒä»¬çš„ç±»å‹éƒ½æ˜¯List<T>ã€‚å½“ä½ åœ¨ä¸€ä¸ªå…·ä½“çš„åˆ—è¡¨ä¸Šè°ƒç”¨è¿™ä¸ªå‡½æ•°æ—¶ï¼Œå¯ä»¥æ˜¾å¼åœ°æŒ‡å®šç±»å‹å®å‚ã€‚</p><blockquote><p>å¤šæ•°æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨ä¼šæ¨å¯¼å‡ºç±»å‹ã€‚</p></blockquote><pre><code class="kotlin">//è°ƒç”¨æ³›å‹å‡½æ•°&gt;&gt;&gt; val letter = (&#39;a&#39;..&#39;z&#39;).toList()&gt;&gt;&gt; println(letter.slice&lt;Char&gt;(0..2))    //æ˜¾å¼åœ°æŒ‡å®šç±»å‹å®å‚[a, b, c]&gt;&gt;&gt; println(letter.slice&lt;Char&gt;(10..13))    [k, l, m, n]</code></pre><p>è°ƒç”¨çš„ç»“æœéƒ½æ˜¯List<Char>ã€‚ç¼–è¯‘å™¨æŠŠå‡½æ•°è¿”å›ç±»å‹List<T>æ€»çš„Tæ›¿æ¢æˆæ¨å¯¼å‡ºæ¥çš„ç±»å‹Char</p><h3 id="9-1-2-å£°æ˜æ³›å‹ç±»"><a href="#9-1-2-å£°æ˜æ³›å‹ç±»" class="headerlink" title="9.1.2 å£°æ˜æ³›å‹ç±»"></a>9.1.2 å£°æ˜æ³›å‹ç±»</h3><blockquote><p><strong>å’ŒJavaä¸€æ ·ï¼ŒKotliné€šè¿‡åœ¨å†…åç§°ååŠ ä¸Šä¸€å¯¹å°–æ‹¬å·ï¼Œå¹¶æŠŠç±»å‹å‚æ•°æ”¾åœ¨å°–æ‹¬å·å†…æ¥å£°æ˜æ³›å‹ç±»åŠæ¥å£ã€‚</strong></p><p>ä¸€æ—¦å£°æ˜ä»¥åï¼Œå°±å¯ä»¥åœ¨ç±»çš„ä¸»ä½“å†…åƒå…¶ä»–ç±»å‹ä¸€æ ·ä½¿ç”¨ç±»å‹å‚æ•°ã€‚</p></blockquote><pre><code class="kotlin">interface List&lt;T&gt;{    //List æ¥å£é¡¶ç±»ç±»å‹å‚æ•°T    operator fun get(index:Int):T    //åœ¨æ¥å£æˆ–ç±»çš„å†…éƒ¨ï¼ŒTå¯ä»¥å½“ä½œæ™®é€šç±»å‹ä½¿ç”¨ã€‚}</code></pre><blockquote><p><strong>å¦‚æœä½ çš„ç±»ç»§æ‰¿äº†æ³›å‹ç±»ï¼ˆæˆ–è€…å®ç°äº†æ³›å‹æ¥å£ï¼‰ï¼Œä½ å°±å¾—ä¸º<em>åŸºç¡€ç±»å‹</em>çš„æ³›å‹å½¢å‚æä¾›ä¸€ä¸ªç±»å‹å®å‚ã€‚å®ƒå¯ä»¥æ˜¯å…·ä½“ç±»å‹æˆ–ä¸€ä¸ªç±»å‹å½¢å‚ï¼š</strong></p><pre><code class="kotlin">class StringList(override val size: Int) : List&lt;String&gt; {   //è¿™ä¸ªç±»å®ç°äº†Listï¼Œæä¾›äº†å…·ä½“ç±»å‹å®å‚ï¼šString override fun get(index: Int): String {  //æ³¨æ„Tè¢«Stringæ›¿ä»£     TODO(&quot;Not yet implemented&quot;) }}class ArratList&lt;T&gt; : List&lt;T&gt; {  // ç°åœ¨ArrayListæ³›å‹ç±»å‹å½¢å‚Tå°±æ˜¯Listçš„ç±»å‹å®å‚ã€‚ override fun get(index: Int): T {     TODO(&quot;Not yet implemented&quot;) }}</code></pre><p>StringListç±»è¢«å£°æ˜æˆåªèƒ½ <strong>åªèƒ½åŒ…å«Stringå…ƒç´ ï¼Œæ‰€ä»¥å®ƒä½¿ç”¨Stringä½œä¸ºåŸºç¡€ç±»å‹çš„ç±»å‹å®å‚ã€‚</strong>ä¹‹ç±»ä¸­çš„ä»»ä½•å‡½æ•°éƒ½è¦ç”¨è¿™ä¸ªæ­£ç¡®çš„ç±»å‹æ¢æ‰Tï¼Œæ‰€ä»¥åœ¨StringListä¸­ä½ ä¼šå¾—åˆ°å‡½æ•°ç­¾åget(Int):String ï¼Œè€Œä¸æ˜¯fun get(Int):Tã€‚</p><p><strong>è€Œç±»ArrayListå®šä¹‰äº†å®ƒè‡ªå·±çš„ç±»å‹å‚æ•°Tå¹¶æŠŠå®ƒæŒ‡å®šä¸ºçˆ¶ç±»çš„ç±»å‹å®å‚ã€‚</strong>æ³¨æ„ArrayList<T>ä¸­çš„Tå’ŒLIst<T>ä¸­çš„Tä¸ä¸€æ ·ï¼Œå®ƒæ˜¯å…¨æ–°çš„ç±»å‹å½¢å‚ï¼Œä¸å¿…ä¿ç•™ä¸€æ ·çš„åç§°ã€‚</p><p><strong>ä¸€ä¸ªç±»ç”šè‡³å¯ä»¥æŠŠå®ƒè‡ªå·±ä½œä¸ºç±»å‹å®å‚åº”ç”¨ã€‚</strong>å®ç°Comparableæ¥å£çš„ç±»å°±æ˜¯è¿™ç§æ¨¡å¼çš„ç»å…¸ä¾‹å­ã€‚ä»»ä½•å¯ä»¥æ¯”è¾ƒçš„å…ƒç´ éƒ½å¿…é¡»å®šä¹‰å®ƒå¦‚ä½•ä¸åŒæ ·ç±»å‹çš„å¯¹è±¡è¿›è¡Œæ¯”è¾ƒï¼š</p><pre><code class="kotlin">interface Comparable&lt;T&gt; { fun comparableTo(other: T): Int}class String : Comparable&lt;String&gt; { override fun comparableTo(other: String): Int {     TODO(&quot;Not yet implemented&quot;) }}</code></pre><p>String å®ç°äº†Comparableæ¥å£çš„æ³›å‹æ¥å£ï¼Œæä¾›ç±»å‹Stringç»™ç±»å‹å®å‚Tã€‚</p></blockquote><h3 id="9-1-3-ç±»å‹å‚æ•°çº¦æŸ"><a href="#9-1-3-ç±»å‹å‚æ•°çº¦æŸ" class="headerlink" title="9.1.3 ç±»å‹å‚æ•°çº¦æŸ"></a>9.1.3 ç±»å‹å‚æ•°çº¦æŸ</h3><blockquote><p><strong>ç±»å‹å‚æ•°çº¦æŸå¯ä»¥é™åˆ¶ä½œä¸ºç±»å’Œå‡½æ•°çš„ç±»å‹å®å‚çš„ç±»å‹ã€‚</strong> ä»¥è®¡ç®—åˆ—è¡¨å…ƒç´ ä¹‹å’Œçš„å‡½æ•°ä¸ºä¾‹ã€‚å®ƒä»¬å¯ä»¥åœ¨List<Int>å’ŒList<Double>ä¸Šï¼Œå½“ä¸å¯ä»¥ç”¨åœ¨LIst<String>è¿™æ ·çš„åˆ—è¡¨ä¸Šã€‚å¯ä»¥å®šä¹‰ä¸€ä¸ªç±»å‹å‚æ•°çš„çº¦æŸï¼Œè¯´æ˜sumçš„ç±»å‹å½¢å‚å¿…é¡»æ˜¯æ•°å­—ï¼Œæ¥è¡¨è¾¾è¿™ä¸ªé™åˆ¶ã€‚</p></blockquote><blockquote><p><strong>å¦‚æœä½ æŠŠä¸€ä¸ªç±»å‹æŒ‡å®šä¸ºæ³›å‹ç±»å‹å½¢å‚çš„ä¸Šè¡—çº¦æŸ</strong>ï¼Œåœ¨æ³›å‹ç±»å‹å…·ä½“çš„åˆå§‹åŒ–ä¸­ï¼Œå…¶å¯¹åº”çš„ç±»å‹å®å‚å°±å¿…é¡»è¿™ä¸ªå…·ä½“ç±»å‹æˆ–å®ƒçš„å­ç±»å‹ï¼ˆæš‚æ—¶å­ç±»å‹å’Œå­ç±»çš„ä¸€æ ·ç›¸åŒï¼‰ã€‚</p></blockquote><blockquote><p><strong>ä½ æ˜¯è¿™æ ·å®šä¹‰çº¦æŸçš„ï¼ŒæŠŠå†’å·æ”¾åˆ°ç±»å‹å‚æ•°åç§°ä¹‹åï¼Œä½œä¸ºç±»å‹å½¢å‚ä¸Šç•Œçš„ç±»å‹ç´§è·Ÿå…¶åï¼Œåœ¨Javaä¸­ï¼Œç”¨çš„å…³é”®è¯extendsæ¥è¡¨è¾¾ä¸€æ ·çš„æ¦‚å¿µï¼š<T extends Number> T sum(List<T> list)ã€‚</strong></p><pre><code class="kotlin">// &lt;T: ç±»å‹å‚æ•°// Number&gt; ï¼šä¸Šç•Œfun &lt;T:Number&gt; List&lt;T&gt;.sum():T</code></pre></blockquote><blockquote><p><strong>ä¸€æ—¦æŒ‡å®šäº†ç±»å‹å½¢å‚Tçš„ä¸Šç•Œï¼Œä½ å°±å¯ä»¥æŠŠç±»å‹Tçš„å€¼ä½œä¸ºå®ƒçš„ä¸Šç•Œï¼ˆç±»å‹ï¼‰çš„å€¼ä½¿ç”¨ã€‚</strong></p><pre><code class="kotlin">fun &lt;T : Number&gt; oneHalf(value: T): Double {    //æŒ‡å®šNumberä¸ºç±»å‹å½¢å‚ä¸Šç•Œ return value.toDouble() / 2.0}&gt;&gt;&gt; println(oneHalf(3))1.5</code></pre></blockquote><blockquote><pre><code class="kotlin">// å£°æ˜å¸¦ç±»å‹å‚æ•°çº¦æŸçš„å‡½æ•°fun &lt;T : Comparable&lt;T&gt;&gt; max(first: T, second: T): T {   //è¿™ä¸ªå‡½æ•°çš„å®å‚å¿…é¡»æ˜¯å¯æ¯”è¾ƒå…ƒç´  return if (first &gt; second) first else second}&gt;&gt;&gt; println(max(&quot;kotlin&quot;, &quot;java&quot;)) // å­—ç¬¦ä¸²æŒ‰ç…§å­—æ¯è¡¨é¡ºåºæ¯”è¾ƒ</code></pre><p><strong>Tçš„ä¸Šç•Œæ˜¯æ³›å‹ç±»å‹Comparable<T> ã€‚å‰é¢å·²ç»çœ‹åˆ°äº†ï¼ŒStringç´¯ç»§æ‰¿äº†Comparable<String> è¿™æ ·ä½¿å¾—Stringå˜æˆäº†maxå‡½æ•°çš„æœ‰æ•ˆç±»å‹å®å‚ã€‚</strong></p><p>è®°ä½ï¼Œfirst&gt;secondçš„ç®€å†™å½¢å¼ä¼šæ ¹æ®Kotlinçš„è¿ç®—ç¬¦çº¦å®šè¢«ç¼–è¯‘æˆfirst.compareTo(second) &gt; 0ã€‚è¿™ç§æ¯”è¾ƒä¹‹æ‰€ä»¥å¯è¡Œï¼Œæ˜¯å› ä¸ºfirstçš„ç±»å‹Tç»§æ‰¿è‡ªComparable<T>,è¿™æ ·ä½ å°±å¯ä»¥æ¯”è¾ƒfirstå’Œå¦å¤–ä¸€ä¸ªç±»å‹Tçš„å…ƒç´ ã€‚</p><p><strong>æå°‘æ•°æƒ…å†µä¸‹ï¼Œéœ€è¦åœ¨ç±»å‹å‚æ•°ä¸ŠæŒ‡å®šå¤šä¸ªçº¦æŸ</strong>ã€‚ä¾‹å¦‚ä¸‹é¢è¿™ä¸ªä»£ç æ¸…å•ç”¨æ³›å‹çš„é¥­æ˜¯ä¿è¯ç»™å®šçš„CharSequenceä»¥å¥å·ç»“å°¾ã€‚</p><pre><code class="kotlin">//ä¸ºä¸€ä¸ªç±»å‹å‚æ•°æŒ‡å®šå¤šä¸ªçº¦æŸfun &lt;T&gt; ensureTrailingPeriod(seq: T) where T : CharSequence, T : Appendable {    //ç±»å‹å‚æ•°çº¦æŸçš„åˆ—è¡¨ if (!seq.endsWith(&quot;.&quot;)) {    //è°ƒç”¨ä¸ºCharSequenceæ¥å£å®šä¹‰çš„æ‰©å±•å‡½æ•°     seq.append(&quot;.&quot;)    //è°ƒç”¨Appendableæ¥å£çš„æ–¹æ³• }}&gt;&gt;&gt; val helloWorld = StringBuilder(&quot;Hello World&quot;)&gt;&gt;&gt; ensureTrailingPeriod(helloWorld)&gt;&gt;&gt; println(helloWorld)</code></pre><p>è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥è¯´æ˜ä½œä¸ºç±»å‹å®å‚çš„ç±»å‹å¿…é¡»å®ç°CharSequenceå’ŒAppendableæ¥å£ã€‚è¿™æ„å‘³ç€è¯¥ç±»å‹çš„å€¼å¯ä»¥ä½¿ç”¨è®¿é—®æ•°æ®(endsWith)å’Œä¿®æ”¹æ•°æ®(append) ä¸¤ç§æ“ä½œã€‚</p></blockquote><h3 id="9-1-4-è®©ç±»å‹å½¢å‚éç©º"><a href="#9-1-4-è®©ç±»å‹å½¢å‚éç©º" class="headerlink" title="9.1.4 è®©ç±»å‹å½¢å‚éç©º"></a>9.1.4 è®©ç±»å‹å½¢å‚éç©º</h3><blockquote><pre><code class="kotlin">class Processor&lt;T&gt;{    fun process(value:T){        value?.hashCode()    //â€œvalueâ€œæ˜¯å¯ç©ºçš„ï¼Œæ‰€ä»¥è¦å®‰å…¨è°ƒç”¨    }}</code></pre><p>å¦‚æœä½ å£°æ˜çš„æ˜¯æ³›å‹ç±»æˆ–è€…æ³›å‹å‡½æ•°ï¼Œä»»ä½•ç±»å‹å®å‚ï¼ŒåŒ…æ‹¬å“ªäº›å¯ç©ºçš„ç±»å‹å®å‚ï¼Œéƒ½å¯ä»¥æ›¿æ¢å®ƒçš„ç±»å‹å½¢å‚ã€‚<strong>æ²¡æœ‰æŒ‡å®šä¸Šç•Œçš„ç±»å‹å½¢å‚å°†ä¼šä½¿ç”¨Any?è¿™ä¸ªé»˜è®¤ä¸Šç•Œã€‚</strong></p><p>processå‡½æ•°ä¸­ï¼Œå‚æ•°valueæ˜¯å¯ç©ºçš„ï¼Œå°½ç®¡Tå¹¶æ²¡æœ‰ä½¿ç”¨é—®å¥½æ ‡è®°ã€‚ä¸‹é¢è¿™ç§æƒ…å†µæ˜¯å› ä¸ºProcessorç±»å…·ä½“åˆå§‹åŒ–Tèƒ½ä½¿ç”¨å¯ç©ºç±»å‹ã€‚</p></blockquote><blockquote><pre><code class="kotlin">val nullableStringProcessor = Processor&lt;String?&gt;()    //å¯ç©ºç±»å‹æ›¿æ¢ä¸ºString?è¢«ç”¨æ¥æ›¿æ¢TnullableStringProcessor.process(null)    //ä½¿ç”¨â€œnullâ€ä½œä¸ºâ€œvalueâ€å®å‚çš„ä»£ç å¯ä»¥ç¼–è¯‘</code></pre><p>å¦‚æœä½ æƒ³ä¿è¯æ›¿æ¢ç±»å‹å½¢å‚çš„å§‹ç»ˆæ˜¯éç©ºç±»å‹ï¼Œå¯ä»¥é€šè¿‡æŒ‡å®šä¸€ä¸ªçº¦å®šæ¥å®ç°ã€‚å¦‚æœä½ é™¤å•¦å¯ç©ºæ€§ä¹‹å¤–æ²¡æœ‰ä»»ä½•é™åˆ¶ï¼Œå¯ä»¥ä½¿ç”¨Anyä»£æ›¿é»˜è®¤çš„Any?ä½œä¸ºä¸Šç•Œï¼š</p><pre><code class="kotlin">class Processor&lt;T:Any&gt;{    //æŒ‡å®šéç©ºä¸Šç•Œã€‚    fun process(value:T){        value.hashCode()    //ç±»å‹Tçš„å€¼ç°åœ¨æ˜¯éâ€œç©ºâ€çš„ã€‚    }}</code></pre><p><strong>çº¦æŸ&lt;T:Any&gt;ç¡®ä¿äº†ç±»å‹Tæ°¸è¿œéƒ½æ˜¯éç©ºç±»å‹ã€‚ç¼–è¯‘å™¨ä¸ä¼šæ¥æ”¶ä»£ç Processor&lt;String?&gt;,å› ä¸ºç±»å‹å®å‚String?ä¸æ˜¯Anyçš„å­ç±»å‹ã€‚ï¼ˆå®ƒæ˜¯ Any? çš„å­ç±»å‹ï¼‰</strong></p><p>å¯ä»¥é€šè¿‡æŒ‡å®šä»»æ„éç©ºç±»å‹ä½œä¸ºä¸Šç•Œï¼Œæ¥è®©ç±»å‹å‚æ•°éç©ºï¼Œä¸å…‰æ˜¯ç±»å‹Anyã€‚</p></blockquote><h2 id="9-2-è¿è¡Œæ—¶çš„æ³›å‹ï¼šæ“¦é™¤å’Œå®ä¾‹åŒ–å‚æ•°"><a href="#9-2-è¿è¡Œæ—¶çš„æ³›å‹ï¼šæ“¦é™¤å’Œå®ä¾‹åŒ–å‚æ•°" class="headerlink" title="9.2 è¿è¡Œæ—¶çš„æ³›å‹ï¼šæ“¦é™¤å’Œå®ä¾‹åŒ–å‚æ•°"></a>9.2 è¿è¡Œæ—¶çš„æ³›å‹ï¼šæ“¦é™¤å’Œå®ä¾‹åŒ–å‚æ•°</h2><p>JVMä¸Šçš„æ³›å‹ä¸€èˆ¬æ˜¯é€šè¿‡<strong>ç±»å‹æ“¦é™¤</strong>å®ç°ï¼Œå°±æ˜¯è¯´æ³›å‹ç±»å®ä¾‹çš„ç±»å‹å®å‚åœ¨è¿è¡Œæ—¶æ˜¯ä¸ä¿ç•™çš„ã€‚å¯ä»¥å£°æ˜ä¸€ä¸ªinlineå‡½æ•°ï¼Œä½¿å…¶ç±»å‹å®å‚ä¸è¢«æ“¦é™¤ï¼ˆæˆ–è€…ï¼ŒKotlinæœ¯è¯­ç§°ä¸ºå®åŒ–ï¼‰ã€‚</p><h3 id="9-2-1-è¿è¡Œæ—¶çš„æ³›å‹ï¼šç±»å‹æ£€æŸ¥å’Œè½¬æ¢"><a href="#9-2-1-è¿è¡Œæ—¶çš„æ³›å‹ï¼šç±»å‹æ£€æŸ¥å’Œè½¬æ¢" class="headerlink" title="9.2.1 è¿è¡Œæ—¶çš„æ³›å‹ï¼šç±»å‹æ£€æŸ¥å’Œè½¬æ¢"></a>9.2.1 è¿è¡Œæ—¶çš„æ³›å‹ï¼šç±»å‹æ£€æŸ¥å’Œè½¬æ¢</h3><p>å’ŒJavaä¸€æ ·ï¼ŒKotlinçš„æ³›å‹åœ¨è¿è¡Œæ—¶ä¹Ÿè¢« <strong>æ“¦é™¤</strong> äº†ã€‚è¿™æ„å‘³ç€æ³›å‹ç±»å®ä¾‹ä¸ä¼šæºå¸¦ç”¨äºåˆ›å»ºå®ƒçš„ç±»å‹å®å‚çš„ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ åˆ›å»ºäº†ä¸€ä¸ªList<String>å¹¶å°†ä¸€å †å­—ç¬¦ä¸²æ”¾åˆ°å…¶ä¸­ï¼Œåœ¨è¿è¡Œæ—¶ä½ åªèƒ½çœ‹åˆ°å®ƒæ˜¯ä¸€ä¸ªListï¼Œä¸èƒ½è¯†åˆ«å‡ºåˆ—è¡¨æœ¬æ‰“ç®—åŒ…å«çš„æ˜¯é‚£ç§ç±»å‹å…ƒç´ ï¼ˆå½“ç„¶ï¼Œä½ å¯ä»¥è·å–ä¸€ä¸ªå…ƒç´ ç„¶åæ£€æŸ¥å®ƒçš„ç±»å‹ï¼Œä½†å³ä¾¿æ£€æŸ¥é€šè¿‡äº†ä¹Ÿä¸ä¼šæœ‰ä»»ä½•ä¿è¯ï¼Œå› ä¸ºå…¶ä»–å…ƒç´ å¯èƒ½æ‹¥æœ‰ä¸åŒç±»å‹ï¼‰ã€‚</p><pre><code class="kotlin">val list1:List&lt;String&gt; = listOf(&quot;a&quot;,&quot;b&quot;)val list2:List&lt;Int&gt; = listOf(1,2,3)</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20210905153004.png" alt="åœ¨è¿è¡Œæ—¶ï¼Œä½ ä¸ä¼šçŸ¥é“list1å’Œlist2æ—¶å€™å£°æ˜æˆå­—ç¬¦ä¸²æˆ–è€…æ•´æ•°åˆ—è¡¨ã€‚å®ƒä»¬æ¯ä¸ªéƒ½åªæ˜¯List    "></p><p>å³ä½¿ç¼–è¯‘å™¨çœ‹åˆ°çš„æ˜¯ä¸¤ç§å®Œå…¨ä¸åŒç±»å‹çš„åˆ—è¡¨ï¼Œåœ¨æ‰§è¡Œçš„æ—¶å€™å®ƒä»¬çœ‹èµ·æ¥å´å®Œå…¨ä¸€æ ·ã€‚å³ä¾¿å¦‚æ­¤ï¼Œä½ é€šå¸¸å¯ä»¥ç¡®ä¿¡List<String>åœ¨åŒ…å«å­—ç¬¦ä¸²ï¼Œè€ŒList<Int>åªåŒ…å«æ•´æ•°ã€‚å› ä¸ºç¼–è¯‘å™¨çŸ¥é“ç±»å‹å®å‚ï¼Œå¹¶ç¡®ä¿æ¯ä¸ªåˆ—è¡¨åªå­˜å‚¨æ­£ç¡®çš„å…ƒç´ ã€‚</p><p><strong>å› ä¸ºç±»å‹å®å‚æ²¡æœ‰è¢«ä¿ç•™ä¸‹æ¥ï¼Œä½ ä¸èƒ½æ£€æŸ¥å®ƒä»¬ã€‚</strong>ä¾‹å¦‚ï¼Œä½ ä¸èƒ½åˆ¤æ–­ä¸€ä¸ªåˆ—è¡¨æ˜¯åªåŒ…å«å­—ç¬¦ä¸²çš„åˆ—è¡¨è¿˜æ˜¯åŒ…å«å…¶å®ƒå¯¹è±¡çš„åˆ—è¡¨ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œåœ¨isæ£€æŸ¥ä¸­ä¸å¯èƒ½ä½¿ç”¨ç±»å‹å®å‚ä¸­çš„ç±»å‹ã€‚</p><pre><code class="kotlin">&gt;&gt;&gt; if (value is List&lt;String&gt;){...}ERROR:Cannot check for instance of erased type</code></pre><p><strong>ä¸ºä»€ä¹ˆæ“¦é™¤äº†æ³›å‹ç±»å‹ä¿¡æ¯ï¼Ÿ</strong></p><p>å°½ç®¡åœ¨è¿è¡Œæ—¶å¯ä»¥å®Œå…¨æ–­å®šè¿™ä¸ªå€¼æ˜¯ä¸€ä¸ªListï¼Œä½†ä½ ä¾ç„¶æ— æ³•åˆ¤æ–­å®ƒæ˜¯ä¸€ä¸ªå«æœ‰å­—ç¬¦ä¸²çš„åˆ—è¡¨ï¼Œè¿˜æ˜¯å«æœ‰äººï¼Œæˆ–è€…å«æœ‰å…¶ä»–ä»€ä¹ˆï¼šè¿™äº›ä¿¡æ¯è¢«æ“¦é™¤äº†ã€‚<strong>æ³¨æ„æ“¦é™¤æ³›å‹ç±»å‹ä¿¡æ¯æ˜¯æœ‰å¥½å¤„çš„ï¼šåº”ç”¨ç¨‹åºä½¿ç”¨çš„å†…å­˜æ€»é‡è¾ƒå°ï¼Œå› ä¸ºè¦ä¿å­˜åœ¨å†…å­˜ä¸­çš„ç±»å‹ä¿¡æ¯æ›´å°‘ã€‚</strong></p><p><strong>æ£€æŸ¥ç±»å‹æ˜¯å¦æ˜¯ä¸ªåˆ—è¡¨ï¼Ÿ</strong></p><p>è·¯ä¸Šæ‰€è¿°ï¼ŒKotlinä¸å…è®¸ä½¿ç”¨æ²¡æœ‰æŒ‡å®šç±»å‹å®å‚çš„æ³›å‹ç±»å‹ã€‚é‚£ä¹ˆä½ å¯èƒ½æƒ³çŸ¥é“å¦‚ä½•æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦æ˜¯åˆ—è¡¨ï¼Œè€Œä¸æ˜¯setæˆ–è€…å…¶ä»–å¯¹è±¡ã€‚å¯ä»¥ä½¿ç”¨ç‰¹æ®Šçš„<strong>æ˜Ÿå·æŠ•å½±</strong>è¯­æ³•æ¥åšè¿™ç§æ£€æŸ¥ï¼š</p><pre><code class="kotlin">if (value is List&lt;*&gt;){... ...}</code></pre><p>è¿™é‡Œæ£€æŸ¥äº†valueæ˜¯å¦æ˜¯ä¸€ä¸ªListï¼Œè€Œä¸”å¹¶æ²¡æœ‰å¾—åˆ°å…³äºå®ƒçš„ä»»ä½•ä¿¡æ¯ã€‚</p><blockquote><p>æ³¨æ„ï¼Œåœ¨as å’Œ as? è½¬æ¢ä¸­ä»ç„¶å¯ä»¥ä½¿ç”¨ä¸€èˆ¬çš„æ³›å‹ç±»å‹ã€‚ä½†å¦‚æœè¯¥ç±»æœ‰æ­£ç¡®çš„<strong>åŸºç¡€ç±»å‹</strong>ä½†<strong>ç±»å‹å®å‚</strong>æ˜¯é”™è¯¯çš„ï¼Œè½¬æ¢ä¹Ÿä¸ä¼šå¤±è´¥ï¼Œå› ä¸ºåœ¨è¿è¡Œæ—¶è½¬æ¢å‘ç”Ÿçš„æ—¶å€™ç±»å‹å®å‚æ˜¯æœªçŸ¥çš„ã€‚å› æ­¤è¿™æ ·çš„è½¬æ¢ä¼šå¯¼è‡´ç¼–è¯‘å™¨å‘å‡ºâ€œunchecked castâ€ï¼ˆæœªå—æ£€è½¬æ¢ï¼‰çš„è­¦å‘Šã€‚è¿™ä»…ä»…æ˜¯ä¸ªè­¦å‘Šï¼Œä½ ä»ç„¶å¯ä»¥ç»§ç»­ä½¿ç”¨è¿™ä¸ªå€¼ï¼Œä½†å®ƒæ‹¥æœ‰å¿…è¦çš„ç±»å‹ã€‚</p><pre><code class="kotlin"> // å¯¹æ³›å‹ç±»å‹åšç±»å‹è½¬æ¢fun printSum(c: Collection&lt;*&gt;) { val initList = c as? List&lt;Int&gt;     ?: throw IllegalArgumentException(&quot;List is expected&quot;)    //è¿™é‡Œè­¦å‘Šã€‚Unchecked cast:List&lt;*&gt;to List&lt;Int&gt; println(initList.sum())}&gt;&gt;&gt; printSum(listOf(1, 2, 3))6</code></pre><p>ç¼–è¯‘ä¸€åˆ‡æ­£å¸¸ï¼šç¼–è¯‘å™¨åªæ˜¯å‘å‡ºäº†ä¸€ä¸ªè­¦å‘Šï¼Œè¿™æ„å‘³ç€ä»£ç æ˜¯åˆæ³•çš„ã€‚å¦‚æœä¸€ä¸ªæ•´å‹çš„åˆ—è¡¨æˆ–è€…setä¸Šè°ƒç”¨printSumå‡½æ•°ï¼Œä¸€åˆ‡éƒ½ä¼šå¦‚é¢„æœŸå‘ç”Ÿï¼šä¸€ç§æƒ…å†µä¼šæ‰“å°å‡ºå…ƒç´ ä¹‹å’Œï¼Œè€Œç¬¬äºŒç§æƒ…å†µåˆ™ä¼šIllegalArgumentExceptionã€‚ä½†å¦‚æœä½ ä¼ é€’äº†ä¸€ä¸ªé”™è¯¯ç±»å‹çš„å€¼ï¼Œè¿è¡Œæ—¶ä¼šå¾—åˆ°ä¸€ä¸ªClassCastExceptionï¼š</p><pre><code class="kotlin">&gt;&gt;&gt; printSum(setOf(1,2,3))    //Setä¸æ˜¯åˆ—è¡¨æ‰€ä»¥æŠ›å‡ºäº†å¼‚å¸¸IllegalArgumentException:List is expected&gt;&gt;&gt; printSum(listOf(&quot;a&quot;,&quot;b&quot;,&quot;c&quot;))    //ç±»å‹è½¬æ¢æˆåŠŸï¼Œä½†åé¢æŠ›å‡ºäº†å¦å¤–çš„å¼‚å¸¸ClassCastException:String cannot be cast to Number    </code></pre><p>æˆ‘ä»¬æ¥è®¨è®ºä¸€ä¸‹å­—ç¬¦ä¸²åˆ—è¡¨ä¸Šè°ƒç”¨printSumå‡½æ•°æ—¶æŠ›å‡ºçš„å¼‚å¸¸ã€‚ä½ å¾—åˆ°çš„å¹¶ä¸æ˜¯IllegalArgumentExceptionï¼Œå› ä¸ºä½ æ²¡æœ‰åŠæ³•åˆ¤æ–­å®å‚æ˜¯ä¸æ˜¯ä¸€ä¸ªList<Int>ã€‚å› æ­¤ç±»å‹è½¬æ¢æˆåŠŸï¼Œæ— è®ºå¦‚ä½•å‡½æ•°suméƒ½ä¼šåœ¨è¿™ä¸ªåˆ—è¡¨ä¸Šè°ƒç”¨ã€‚åœ¨è¿™ä¸ªå‡½æ•°æ‰§è¡ŒæœŸé—´ï¼Œå¼‚å¸¸æŠ›å‡ºäº†ã€‚è¿™æ˜¯å› ä¸ºsumå‡½æ•°è¯•ç€ä»åˆ—è¡¨ä¸­è¯»å–Numberå€¼ç„¶åæŠŠå®ƒä»¬åŠ åœ¨ä¸€èµ·ã€‚æŠŠStringä½†Numberç”¨çš„å°è¯•ä¼šå¯¼è‡´è¿è¡Œæ—¶ClassCastExceptionã€‚</p></blockquote><blockquote><pre><code class="kotlin">/*    å¯¹å·²çŸ¥ç±»å‹å®å‚åšç±»å‹è½¬æ¢    */fun printSum(c: Collection&lt;Int&gt;) { if (c is List&lt;Int&gt;) {     println(c.sum())    //è¿™æ¬¡æ£€æŸ¥æ˜¯åˆæ³•çš„ }}&gt;&gt;&gt; printSum(listOf(1, 2, 3))6</code></pre><p>c æ—¶å€™æ‹¥æœ‰ç±»å‹List<Int>çš„æ£€æŸ¥æ˜¯å¦å¯è¡Œï¼Œå› ä¸ºåœ¨ç¼–è¯‘æœŸå°±ç¡®å®šäº†é›†åˆï¼ˆä¸ç®¡å®ƒæ˜¯åˆ—è¡¨è¿˜æ˜¯å…¶ä»–ç±»å‹çš„é›†åˆï¼‰åŒ…å«çš„éƒ½æ˜¯æ•´å‹æ•°å­—ã€‚</p><p>Kotlinæœ‰ç‰¹æ®Šçš„è¯­æ³•ç»“æ„å¯ä»¥å…è®¸ä½ åœ¨å‡½æ•°ä½“ä¸­ä½¿ç”¨å…·ä½“çš„ç±»å‹å®å‚ï¼Œä½†æ˜¯åˆinlineå‡½æ•°å¯ä»¥ã€‚</p></blockquote><h3 id="9-2-2-å£°æ˜å¸¦å®åŒ–ç±»å‹å‚æ•°çš„å‡½æ•°"><a href="#9-2-2-å£°æ˜å¸¦å®åŒ–ç±»å‹å‚æ•°çš„å‡½æ•°" class="headerlink" title="9.2.2 å£°æ˜å¸¦å®åŒ–ç±»å‹å‚æ•°çš„å‡½æ•°"></a>9.2.2 å£°æ˜å¸¦å®åŒ–ç±»å‹å‚æ•°çš„å‡½æ•°</h3><blockquote><p>Kotlinæ³›å‹åœ¨è¿è¡Œæ—¶ä¼šè¢«æ“¦é™¤ï¼Œè¿™æ„å‘³ç€å¦‚æœä½ æœ‰ä¸€ä¸ªæ³›å‹ç±»çš„å®ä¾‹ï¼Œä½ æ— æ³•å¼„æ¸…æ¥šåœ¨è¿™ä¸ªå®ä¾‹åˆ›å»ºæ—¶ä½ ç©¶ç«Ÿç”¨çš„æ˜¯é‚£ä¸ªç±»å‹çš„å®å‚ã€‚æ³›å‹ç±»å‹çš„ç±»å‹å®å‚ä¹Ÿæ˜¯è¿™æ ·ã€‚åœ¨è°ƒç”¨æ³›å‹å‡½æ•°çš„æ—¶å€™ï¼Œåœ¨å‡½æ•°ä½“ä¸­ä½ ä¸èƒ½å†³å®šå‡½æ•°è°ƒç”¨å®ƒç”¨çš„ç±»å‹å®å‚ï¼š</p><pre><code class="kotlin">&gt;&gt;&gt; fun &lt;T&gt; isA(value:Any)=value is T    //è¡¨è¾¾å¼Error:Cannot check for instance of erased type:T</code></pre><p>è¿™ç§æƒ…å†µä¸‹åªæœ‰<strong>å†…è”å‡½æ•°</strong>èƒ½å¤Ÿä½¿ç”¨ï¼Œå†…è”å‡½æ•°çš„ç±»å‹å½¢å‚èƒ½å¤Ÿè¢«å®åŒ–ï¼Œæ„å‘³ç€ä½ å¯ä»¥åœ¨è¿è¡Œæ—¶åº”ç”¨å®é™…çš„ç±»å‹å®å‚ã€‚</p><p><strong>å¦‚æœä½¿ç”¨inlineå‡½æ•°æ ‡è®°å‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šæŠŠæ¯æ¬¡å‡½æ•°è°ƒç”¨éƒ½æ¢æˆå‡½æ•°å®é™…çš„ä»£ç å®ç°ã€‚ä½¿ç”¨å†…è”å‡½æ•°è¿˜å¯ä»¥æå‡æ€§èƒ½ï¼Œå¦‚æœè¯¥å‡½æ•°ä½¿ç”¨äº†lambdaå®å‚ï¼šlambdaçš„ä»£ç ä¼šè¢«å†…æ•›ï¼Œæ‰€ä»¥ä¸ä¼šåˆ›å»ºä»»ä½•åŒ¿åç±»ã€‚</strong>  <strong>inlineå‡½æ•°ä½¿ç”¨æ—¶çš„å¦ä¸€ç§åœºæ™¯ï¼šå®ƒä»¬çš„ç±»å‹å‚æ•°å¯ä»¥è¢«å®åŒ–ã€‚</strong></p><p>æŠŠå‰é¢åˆ—å­ä¸­çš„isAå‡½æ•°å£°æ˜æˆinlieå¹¶ä¸”ç”¨reifiedæ ‡è®°ç±»å‹å‚æ•°ï¼Œä½ èƒ½å¤Ÿç”¨è¯¥å‡½æ•°æ£€æŸ¥valueæ˜¯ä¸æ˜¯Tçš„å®ä¾‹ã€‚</p><pre><code class="kotlin">/*  å£°æ˜å¸¦å®åŒ–ç±»å‹å‚æ•°çš„å‡½æ•°   */inline fun &lt;reified T&gt; isA(value: Any) = value is T&gt;&gt;&gt; println(isA&lt;String&gt;(&quot;abc&quot;))true&gt;&gt;&gt; println(isA&lt;String&gt;(123))false</code></pre></blockquote><blockquote><p>ä¸€ä¸ªå®åŒ–ç±»å‹å‚æ•°èƒ½å¤Ÿå‘æŒ¥ä½œç”¨æœ€ç®€å•çš„ä¾‹å­å°±æ˜¯æ ‡å‡†åº“å‡½æ•°filterIsInstanceã€‚<strong>è¿™ä¸ªå‡½æ•°æ¥æ”¶ä¸€ä¸ªé›†åˆï¼Œé€‰æ‹©å…¶ä¸­å“ªäº›æŒ‡å®šç±»çš„å®ä¾‹ï¼Œç„¶åè¿”å›è¿™äº›è¢«é€‰ä¸­çš„å®ä¾‹ã€‚</strong></p><pre><code class="kotlin">/*  ä½¿ç”¨æ ‡å‡†åº“å‡½æ•°filterIsInstance */&gt;&gt;&gt; val items = listOf(&quot;one&quot;, 2, &quot;three&quot;)&gt;&gt;&gt; println(items.filterIsInstance&lt;String&gt;())[one,three]</code></pre><p>é€šè¿‡æŒ‡å®š<String>ä½œä¸ºå‡½æ•°çš„ç±»å‹å‚æ•°ï¼Œä½ è¡¨æ˜æ„Ÿå…´è¶£çš„åªæ˜¯å­—ç¬¦ä¸²ã€‚<strong>å› æ­¤å‡½æ•°çš„è¿”å›ç±»å‹æ—¶List<String>ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œ<em>ç±»å‹å®å‚åœ¨è¿è¡Œæ—¶æ˜¯å·²çŸ¥çš„</em>å‡½æ•°filterIsInstanceä½¿ç”¨å®ƒæ¥æ£€æŸ¥åˆ—è¡¨ä¸­çš„å€¼æ˜¯ä¸æ˜¯æŒ‡å®šä¸ºè¯¥ç±»å‹å®å‚çš„ç±»çš„å®ä¾‹ã€‚</strong></p><pre><code class="kotlin">/*  filterIsTanceå£°æ˜çš„ç®€åŒ–ç‰ˆæœ¬    */inline fun &lt;reified T&gt; Iterable&lt;*&gt;.filterIsTance(): List&lt;T&gt; {    //â€œreifiedâ€å£°æ˜äº†ç±»å‹å‚æ•°ä¸ä¼šåœ¨è¿è¡Œæ—¶è¢«æ“¦é™¤ val destination = mutableListOf&lt;T&gt;() for (element in this) {     if (element is T) {        //å¯ä»¥æ£€æŸ¥å…ƒç´ æ˜¯ä¸æ˜¯æŒ‡å®šä¸ºç±»å‹å®å‚çš„ç±»çš„å®ä¾‹         destination.add(element)     } } return destination}</code></pre></blockquote><p><strong>ä¸ºä»€ä¹ˆå®åŒ–åªå¯¹å†…è”å‡½æ•°æœ‰æ•ˆï¼Ÿ</strong></p><p>ä¸ºä»€ä¹ˆåœ¨inlineå‡½æ•°ä¸­å…è®¸è¿™æ ·å†™ element is T ï¼Œè€Œæ™®é€šçš„ç±»æˆ–è€…å‡½æ•°å´ä¸è¡Œï¼Ÿ</p><p>ç¼–è¯‘å™¨æŠŠå®ç°å†…è”å‡½æ•°çš„å­—èŠ‚ç æ’å…¥æ¯ä¸€æ¬¡è°ƒç”¨å‘ç”Ÿçš„åœ°æ–¹ã€‚æ¯æ¬¡ä½ è°ƒç”¨å¸¦å®åŒ–ç±»å‹å‚æ•°çš„å‡½æ•°æ—¶ï¼Œç¼–è¯‘å™¨éƒ½çŸ¥é“è¿™æ¬¡ç‰¹å®šè°ƒç”¨ä¸­ç”¨ä½œå®å‚çš„ç¡®åˆ‡ç±»å‹ã€‚å› æ­¤ï¼Œç¼–è¯‘å™¨å¯ä»¥ç”Ÿæˆåº”ç”¨ä½œä¸ºç±»å‹å®å‚çš„å…·ä½“ç±»çš„å­—èŠ‚ç ã€‚ä¸Šè¿° filterIsInstance<String>è°ƒç”¨æ¥è¯´ï¼Œç”Ÿæˆçš„ä»£ç å’Œä¸‹é¢è¿™æ®µä»£ç æ˜¯ç­‰ä»·çš„ï¼š</p><pre><code class="kotlin">for (element in this){    if(element is String){    //å¼•ç”¨å…·ä½“ç±»        destination.add(element)    }}</code></pre><p>å› ä¸ºç”Ÿæˆçš„å­—èŠ‚ç å¼•ç”¨äº†å…·ä½“ç±»å‹ï¼Œè€Œä¸æ˜¯ç±»å‹å‚æ•°ï¼Œå®ƒä¸ä¼šè¢«è¿è¡Œæ—¶å‘ç”Ÿçš„ç±»å‹å‚æ•°æ“¦é™¤å½±å“ã€‚</p><p><strong>æ³¨æ„reifiedç±»å‹å‚æ•°çš„inlineå‡½æ•°ä¸èƒ½åœ¨javaä¸­è°ƒç”¨ã€‚</strong>æ™®é€šçš„å†…è”å‡½æ•°å¯ä»¥åƒå¸¸è§„å‡½æ•°é‚£æ ·åœ¨Javaä¸­è°ƒç”¨â€“å®ƒä»¬å¯ä»¥è¢«è°ƒç”¨è€Œä¸èƒ½è¢«å†…è”ã€‚å¸¦å®åŒ–ç±»å‹å‚æ•°çš„å‡½æ•°éœ€è¦é¢å¤–çš„å¤„ç†ï¼Œæ¥å§ç±»å‹å®å‚çš„å€¼æ›¿æ¢åˆ°å­—èŠ‚ç ä¸­ï¼Œæ‰€ä»¥å®ƒä»¬å¿…é¡»æ°¸è¿œæ˜¯å†…è”çš„ã€‚æ‰€ä»¥ä¸èƒ½åœ¨javaä¸­è°ƒç”¨ã€‚</p><p><strong>å†…è”å‡½æ•°åœ¨ä»€ä¹ˆæƒ…å†µä¸‹æ€§èƒ½æœ‰åŠ¿æœ€æœ‰æ•ˆï¼Ÿ</strong></p><p><strong>ä¸€ä¸ªå†…è”å‡½æ•°å¯ä»¥æœ‰å¤šä¸ªå®åŒ–ç±»å‹å‚æ•°ï¼Œä¹Ÿå¯ä»¥åŒæ—¶æ‹¥æœ‰é£å®åŒ–ç±»å‹å‚æ•°å’Œå®åŒ–ç±»å‹å‚æ•°ã€‚æ³¨æ„ï¼ŒfilterIsInstanceå‡½æ•°è™½ç„¶è¢«æ ‡è®°æˆäº†inlineï¼Œè€Œä»–å¹¶ä¸æœŸæœ›lamdbaä½œä¸ºå®å‚ã€‚ï¼ˆå†³å®šä½•æ—¶å°†å‡½æ•°å£°æ˜ä¸ºå†…è”å‡½æ•°ï¼‰ä¸­ï¼Œæˆ‘ä»¬æåˆ°å‡½æ•°æŠŠå‡½æ•°æ ‡è®°æˆå†…è”åªæœ‰åœ¨ä¸€ç§æƒ…å†µä¸‹æœ‰æ€§èƒ½ä¼˜åŠ¿ï¼Œå³å‡½æ•°æ‹¥æœ‰å‡½æ•°ç±»å‹çš„å½¢å‚å¹¶ä¸”å…¶å¯¹åº”çš„å®å‚â€“lambdaâ€“å’Œå‡½æ•°ä¸€èµ·è¢«å†…è”çš„å®åŒ–ã€‚</strong></p><p>ä¸ºäº†ä¿è¯è‰¯å¥½çš„æ€§èƒ½ï¼Œä½ ä»ç„¶éœ€è¦è¿½è¸ªäº†è§£æ ‡è®°ä¸ºinlineçš„å‡½æ•°çš„å¤§å°ã€‚å¦‚æœå‡½æ•°å˜çš„åºå¤§ï¼Œæœ€å¥½æŠŠä¸ä¾èµ–å®åŒ–ç±»å‹å‚æ•°çš„ä»£ç æŠ½å–åˆ°éå†…è”å‡½æ•°ä¸­ã€‚</p><h3 id="9-2-3-ä½¿ç”¨å®åŒ–ç±»å‹å‚æ•°ä»£æ›¿ç±»å¼•ç”¨"><a href="#9-2-3-ä½¿ç”¨å®åŒ–ç±»å‹å‚æ•°ä»£æ›¿ç±»å¼•ç”¨" class="headerlink" title="9.2.3 ä½¿ç”¨å®åŒ–ç±»å‹å‚æ•°ä»£æ›¿ç±»å¼•ç”¨"></a>9.2.3 ä½¿ç”¨å®åŒ–ç±»å‹å‚æ•°ä»£æ›¿ç±»å¼•ç”¨</h3><p>å®åŒ–ç±»å‹å‚æ•°çš„å¸¸è§ä½¿ç”¨åœºæ™¯æ˜¯ä¸ºæ¥æ”¶java.lang.Class ç±»å‹å‚æ•°çš„APIæ„é€ é€‚é…å™¨ã€‚è¿™ä¸ªAPIçš„ä¾‹å­æ˜¯JDKä¸­ServiceLoaderï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªä»£è¡¨æ¥å£æˆ–æŠ½è±¡ç±»çš„java.long.Classï¼Œå¹¶è¿”å›å®ç°äº†è¯¥æ¥å£ï¼ˆæˆ–ç»§æ‰¿äº†è¯¥æŠ½è±¡ç±»ï¼‰java.lang.Classï¼Œå¹¶è¿”å›å®ç°äº†è¯¥æ¥å£ï¼ˆæˆ–ç»§æ‰¿äº†è¯¥æŠ½è±¡ç±»ï¼‰çš„ç±»çš„å®ä¾‹ã€‚å¦‚ä½•åˆ©ç”¨å®åŒ–ç±»å‹å‚æ•°æ›´å®¹æ˜“åœ°è°ƒç”¨è¿™äº›APIã€‚</p><pre><code class="kotlin">/*    é€šè¿‡ç±»å¼•ç”¨ åŠ è½½ServiceLoader    */val serviceImpl = ServiceLoader.load(Service::class.java)</code></pre><p>::class.java çš„è¯­æ³•å±•ç¤ºäº†å¦‚ä½•è·å–java.lang.Classå¯¹åº”çš„Kotlinç±»ã€‚</p><p>è¿™å’ŒJavaä¸­çš„Service.classæ˜¯å®Œå…¨ç­‰åŒçš„ã€‚</p><p><strong>ä½¿ç”¨å®åŒ–ç±»å‹å‚æ•°çš„å‡½æ•°é‡å†™è¿™ä¸ªä¾‹å­ï¼š</strong></p><pre><code class="kotlin">val serviceImpl = loadService&lt;Service&gt;()</code></pre><p>ä»£ç çŸ­äº†è®¸å¤šã€‚</p><p><strong>é‚£ä¹ˆå¦‚ä½•å®šä¹‰å®åŒ–å‡½æ•°ï¼Ÿ</strong></p><p>è¦åŠ è½½çš„æœåŠ¡ç±»ç°åœ¨è¢«æŒ‡å®šæˆäº†loadServiceå‡½æ•°çš„ç±»å‹å®å‚ã€‚æŠŠä¸€ä¸ªç±»è¦æŒ‡å®šæˆç±»å‹å®å‚è¦å®¹æ˜“ç†è§£çš„å¤šï¼Œå› ä¸ºå®ƒçš„ä»£ç æ¯”ä½¿ç”¨::class.javaè¯­æ³•æ›´çŸ­ã€‚</p><p>çœ‹çœ‹loadServiceå‡½æ•°æ˜¯å¦‚ä½•å®šä¹‰çš„ï¼š</p><pre><code class="kotlin">inline fun &lt;reified T&gt; loadService(){    //ç±»å‹å‚æ•°æ ‡è®°æˆäº†â€œreifiedâ€    return ServiceLoader.load(T::Class.java)    //æŠŠT::Classå½“æˆç±»å‹å½¢å‚çš„ç±»è®¿é—®ã€‚}</code></pre><p>è¿™ç§ç”¨åœ¨ç±»å‹ä¸Šçš„::Class.javaè¯­æ³•ä¹Ÿå¯ä»¥ç”¨åœ¨å®åŒ–ç±»å‹å‚æ•°ä¸Šã€‚ä½¿ç”¨è¿™ç§è¯­æ³•ä¼šäº§ç”Ÿå¯¹åº”åˆ°æŒ‡å®šä¸ºç±»å‹å‚æ•°çš„ç±»çš„java.lang.Class,ä½ å¯ä»¥æ­£å¸¸ä½¿ç”¨å®ƒã€‚</p><p><strong>ç®€åŒ– Androidä¸Šçš„startActivity å‡½æ•°</strong></p><p>å¦‚æœä½ æ˜¯Androidå¼€å‘è€…ï¼Œå¯ä»¥ä½¿ç”¨å®åŒ–ç±»å‹å‚æ•°ç®€åŒ–startActivityå‡½æ•°ã€‚å®åŒ–ç±»å‹å‚æ•°ç”¨æ¥ä»£æ›¿ä¼ é€’ä½œä¸ºjava.lang.Classçš„Activityç±»ã€‚</p><pre><code class="kotlin">inline fun &lt;reified T: Activity&gt; Context.startActivity(){    //ç±»å‹å‚æ•°æ ‡è®°ä¸ºâ€œreifiedâ€    val intent = Intent(this,T::Class.java)    //æŠŠT::Classå½“æˆç±»å‹å‚æ•°çš„ç±»è®¿é—®    startActivity(intent)}startActivity(intent)    //è°ƒç”¨æ–¹æ³•æ˜¾å¼Activity</code></pre><h3 id="9-2-4-å®åŒ–ç±»å‹å‚æ•°çš„é™åˆ¶"><a href="#9-2-4-å®åŒ–ç±»å‹å‚æ•°çš„é™åˆ¶" class="headerlink" title="9.2.4 å®åŒ–ç±»å‹å‚æ•°çš„é™åˆ¶"></a>9.2.4 å®åŒ–ç±»å‹å‚æ•°çš„é™åˆ¶</h3><p>å®åŒ–ç±»å‹å‚æ•°æ˜¯æœ‰ä¸€äº›é™åˆ¶çš„ã€‚æœ‰ä¸€äº›å®åŒ–æ˜¯ä¸ç”Ÿä¿±æ¥çš„ï¼Œå¦ä¸€äº›æ˜¯ç°æœ‰çš„å®ç°å†³å®šçš„ï¼Œè€Œä¸”å¯èƒ½åœ¨æœªæ¥çš„Kotlinç‰ˆæœ¬ä¸­æ”¾å¼€è¿™äº›é™åˆ¶ã€‚</p><p><strong>å¯ä»¥æŒ‰ä¸‹é¢çš„æ–¹å¼ä½¿ç”¨å®åŒ–ç±»å‹å‚æ•°ï¼š</strong></p><ul><li>ç”¨åœ¨ç±»å‹æ£€æŸ¥å’Œç±»å‹è½¬æ¢ä¸­(isã€!isã€asã€as?)</li><li>ä½¿ç”¨Kotlinåå°„APIï¼ˆ::Class)</li><li>è·å–ç›¸åº”çš„java.lang.Classï¼ˆ::Class.java)</li><li>ä½œä¸ºè°ƒç”¨å…¶ä»–å‡½æ•°çš„ç±»å‹å®å‚</li></ul><p><strong>ä¸èƒ½åšçš„äº‹æƒ…ï¼š</strong></p><ul><li>åˆ›å»ºæŒ‡å®šä¸ºç±»å‹å‚æ•°çš„ç±»çš„å®ä¾‹</li><li>è°ƒç”¨ç±»å‹å‚æ•°ç±»çš„ä¼´ç”Ÿå¯¹è±¡çš„æ–¹æ³•</li><li>è°ƒç”¨å¸¦å®åŒ–ç±»å‹å‚æ•°å‡½æ•°çš„æ—¶å€™ä½¿ç”¨ <strong>éå®åŒ–ç±»å‹å½¢å‚ä½œä¸ºå®å‚</strong></li><li><em>æŠŠç±»ã€å±æ€§æˆ–è€…éå†…è”å‡½æ•°çš„ç±»å‹å‚æ•°æ ‡è®°</em>æˆreified</li></ul><p><strong>æœ€åä¸€æ¡é™åˆ¶çš„åæœï¼šå› ä¸ºå®åŒ–ç±»å‹å‚æ•°åªèƒ½ç”¨äºåœ¨å†…è”å‡½æ•°ä¸Šï¼Œä½¿ç”¨å®åŒ–ç±»å‹å‚æ•°æ„å‘³ç€å‡½æ•°å’Œæ‰€æœ‰ç»™å®ƒçš„lambdaéƒ½ä¼šè¢«å†…è”ã€‚å¦‚æœå†…è”å‡½æ•°ä½¿ç”¨lambdaçš„æ–¹å¼å¯¼è‡´lambdaä¸èƒ½è¢«å†…è”ï¼Œæˆ–è€…ä½ ä¸æƒ³lambdaå› ä¸ºæ€§èƒ½çš„å…³ç³»è¢«å†…è”ï¼Œ<em>å¯ä»¥ä½¿ç”¨noinlineä¿®é¥°ç¬¦æŠŠå®ƒä»¬æ ‡è®°æˆéå†…è”çš„ã€‚</em></strong></p><h2 id="9-3-å˜å‹ï¼šæ³›å‹å’Œå­ç±»å‹åŒ–"><a href="#9-3-å˜å‹ï¼šæ³›å‹å’Œå­ç±»å‹åŒ–" class="headerlink" title="9.3 å˜å‹ï¼šæ³›å‹å’Œå­ç±»å‹åŒ–"></a>9.3 å˜å‹ï¼šæ³›å‹å’Œå­ç±»å‹åŒ–</h2><p><strong>å˜å‹çš„æ¦‚å¿µæè¿°äº†æ‹¥æœ‰ç›¸åŒåŸºç¡€ç±»å‹å’Œä¸åŒ<em>ç±»å‹å®å‚</em>çš„ï¼ˆæ³›å‹ï¼‰ç±»å‹ä¹‹é—´æ˜¯å¦‚ä½•å…³è”çš„ã€‚</strong>ä¾‹å¦‚ï¼šList<String>å’ŒList<Any>ä¹‹é—´å¦‚ä½•å…³è”ã€‚å½“ç¼–å†™è‡ªå·±çš„æ³›å‹ç±»æˆ–è€…æ³›å‹å‡½æ•°æ—¶ï¼Œç†è§£å˜å‹çš„æ¦‚å¿µååˆ†é‡è¦ï¼šå®ƒæœ‰åŠ©äºä½ åˆ›å»ºå‡ºï¼Œæ—¢ä¸ä¼šä»¥ä¸æ–¹ä¾¿çš„æ–¹å¼é™åˆ¶ç”¨æˆ·ï¼Œä¹Ÿä¸ä¼šç ´åç”¨æˆ·æ‰€æœŸæœ›çš„ç±»å‹å®‰å…¨ã€‚</p><h3 id="9-3-1-ä¸ºä»€ä¹ˆå­˜åœ¨å˜å‹ï¼šç»™å‡½æ•°ä¼ é€’å®å‚"><a href="#9-3-1-ä¸ºä»€ä¹ˆå­˜åœ¨å˜å‹ï¼šç»™å‡½æ•°ä¼ é€’å®å‚" class="headerlink" title="9.3.1 ä¸ºä»€ä¹ˆå­˜åœ¨å˜å‹ï¼šç»™å‡½æ•°ä¼ é€’å®å‚"></a>9.3.1 ä¸ºä»€ä¹ˆå­˜åœ¨å˜å‹ï¼šç»™å‡½æ•°ä¼ é€’å®å‚</h3><p><strong>å‡å¦‚ä½ æœ‰ä¸€ä¸ªæ¥æ”¶List<Any>ä½œä¸ºå®å‚çš„å‡½æ•°ã€‚</strong>æŠŠList<String>ç±»å‹çš„å˜é‡ä¼ ç»™è¿™ä¸ªå‡½æ•°æ˜¯å¦å®‰å…¨ï¼ŸæŠŠä¸€ä¸ªå­—ç¬¦ä¸²ä¼ ç»™ä¸€ä¸ªæœŸæœ›Anyçš„å‡½æ•°æ˜¯å®‰å…¨çš„ï¼Œå› ä¸ºStringç±»å‹ç»§æ‰¿è‡ªAnyã€‚<em>ä½†æ˜¯å½“Stringå’ŒAnyå˜æˆListæ¥å£çš„ç±»å‹å®å‚åï¼Œæƒ…å†µå°±æ²¡æœ‰è¿™ä¹ˆç®€å•äº†ã€‚</em></p><p><strong>è€ƒè™‘ä¸€ä¸ªæ‰“å°å‡ºåˆ—è¡¨å†…å®¹çš„å‡½æ•°ã€‚</strong></p><pre><code class="kotlin">fun printContents(list: List&lt;Any&gt;) {    println(list.joinToString())}&gt;&gt;&gt; printContents(listOf(&quot;aaa&quot;, &quot;bbb&quot;))aaa,bbb</code></pre><p>çœ‹èµ·æ¥è¿™äº›å­—ç¬¦ä¸²åˆ—è¡¨å¯ä»¥æ­£å¸¸å·¥ä½œã€‚å‡½æ•°æŠŠæ¯ä¸ªå…ƒç´ éƒ½å½“æˆAnyå¯¹å¾…ï¼Œè€Œä¸”å› ä¸ºæ¯ä¸ªå­—ç¬¦ä¸²éƒ½æ˜¯Anyï¼Œè¿™å®Œå…¨æ˜¯å®‰å…¨çš„ã€‚</p><p><strong>æ¥çœ‹å¦ä¸€ä¸ªå‡½æ•°å®ƒä¼šä¿®æ”¹åˆ—è¡¨ï¼ˆå› æ­¤å®ƒæ¥æ”¶ä¸€ä¸ªMutableListä½œä¸ºå‚æ•°ï¼‰ï¼š</strong></p><pre><code class="kotlin">fun addAnswer(list: MutableList&lt;Any&gt;) {    list.add(42)}&gt;&gt;&gt; val strings = mutableListOf(&quot;abc&quot;, &quot;bac&quot;)&gt;&gt;&gt; addAnswer(strings)  //å¦‚æœè¿™ä¸€è¡Œç¼–è¯‘é€šè¿‡äº†&gt;&gt;&gt; println(strings.maxBy { it.length })    //è¿è¡Œæ—¶å°±ä¼šäº§ç”Ÿå¼‚å¸¸ClassCaseException:Integer connot be cast to String</code></pre><p>ä½ å£°æ˜äº†ä¸€ä¸ªç±»å‹ä¸ºMutableList<String>çš„å˜é‡Stringsï¼Œç„¶åå°è¯•æŠŠå®ƒä¼ é€’ç»™è¿™ä¸ªå‡½æ•°ã€‚å‡å¦‚ç¼–è¯‘å™¨æ¥æ”¶äº†ï¼Œä½ å°±èƒ½åœ¨å­—ç¬¦ä¸²ä¸­æ·»åŠ ä¸€ä¸ªæ•´æ•°ï¼Œè¿™ä¼šå¯¼è‡´ä½ åœ¨è¿è¡Œæ—¶å°è¯•è®¿é—®åˆ—è¡¨ä¸­çš„å­—ç¬¦ä¸²çš„æ—¶å€™å‡ºç°å¼‚å¸¸ã€‚æ­£å› å¦‚æ­¤ï¼Œè¿™æ¬¡è°ƒç”¨ä¸ä¼šé€šè¿‡ç¼–è¯‘ã€‚è¿™ä¸ªä¾‹å­å±•ç¤ºäº†å½“æœŸæœ›çš„æ˜¯MutableList<Any>çš„æ—¶å€™æŠŠä¸€ä¸ªMutableList<String>å½“ä½œå®å‚æ˜¯ä¸å®‰å…¨çš„ï¼ŒKotlinç¼–è¯‘æ—¶é˜»æ­¢æ‹‰å®ƒã€‚</p><blockquote><p>ç°åœ¨å¯ä»¥å›ç­”ï¼ŒæŠŠä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨ä¼ ç»™æœŸæœ›Anyå¯¹è±¡åˆ—è¡¨çš„å‡½æ•°æ˜¯å¦å®‰å…¨ã€‚å¦‚æœ<strong>å‡½æ•°æ·»åŠ æˆ–è€…æ›´æ¢äº†åˆ—è¡¨ä¸­çš„å…ƒç´ å°±æ˜¯ä¸å®‰å…¨çš„ï¼Œå› ä¸ºè¿™æ ·ä¼šäº§ç”Ÿç±»å‹ä¸ä¸€è‡´çš„å¯èƒ½æ€§ã€‚å¦åˆ™å®ƒå°±æ˜¯å®‰å…¨çš„ã€‚</strong>å¯ä»¥é€šè¿‡æ˜¯å¦å¯å˜é€‰æ‹©åˆé€‚çš„æ¥å£æ¥è½»æ˜“çš„æ§åˆ¶ã€‚å¦‚æœå‡½æ•°æ¥æ”¶çš„æ˜¯å¯è¯»åˆ—è¡¨ï¼Œå¯ä»¥ä¼ é€’å…·æœ‰æ›´å…·ä½“çš„å…ƒç´ ç±»å‹çš„åˆ—è¡¨ã€‚å¦‚æœåˆ—è¡¨æ˜¯å¯å˜çš„ï¼Œä¸èƒ½è¿™æ ·åšã€‚</p></blockquote><blockquote><p>è¿™äº›é—®é¢˜å¯ä»¥æ¨å¹¿åˆ°ä»»ä½•æ³›å‹ç±»ï¼Œè€Œä¸ä»…ä»…æ˜¯Listã€‚æ¥ä¸‹æ¥ä¼šçœ‹åˆ°ä¸ºä»€ä¹ˆä¸¤ç§æ¥å£Listå’ŒMutableListä¼šå› ä¸ºå®ƒä»¬çš„ç±»å‹å‚æ•°äº§ç”Ÿå·®å¼‚ã€‚</p></blockquote><h3 id="9-3-2-ç±»ã€ç±»å‹å’Œå­ç±»å‹"><a href="#9-3-2-ç±»ã€ç±»å‹å’Œå­ç±»å‹" class="headerlink" title="9.3.2 ç±»ã€ç±»å‹å’Œå­ç±»å‹"></a>9.3.2 ç±»ã€ç±»å‹å’Œå­ç±»å‹</h3><p>å˜é‡çš„ç±»å‹è§„å®šäº†è¯¥å˜é‡çš„å¯èƒ½å€¼ã€‚æœ‰æ—¶å€™æˆ‘ä»¬ä¼šæŠŠç±»å‹å’Œç±»å½“æˆç›¸åŒçš„æ¦‚å¿µä½¿ç”¨ï¼Œå½“å®ƒä»¬ä¸ä¸€æ ·ï¼Œç°åœ¨æ¥çœ‹çœ‹å®ƒä»¬çš„åŒºåˆ«ã€‚</p><blockquote><p>ä¾‹å­éæ³›å‹ç±»ï¼Œ<strong>ç±»</strong>çš„åç§°å¯ä»¥å½“ä½œ<strong>ç±»å‹</strong>ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ è¿™æ ·äº› var x : Stringï¼Œå°±æ˜¯å£°æ˜ä¸€ä¸ªå¯ä»¥ä¿å­˜Stringç±»çš„å®ä¾‹çš„å˜é‡ã€‚ä½†æ˜¯æ³¨æ„ï¼ŒåŒæ ·çš„ç±»åç§°ä¹Ÿå¯ä»¥ç”¨æ¥å£°æ˜å¯ç©ºç±»å‹ï¼švar x:String?ã€‚è¿™æ„å‘³ç€æ¯ä¸ªKotlinç±»éƒ½å¯ä»¥ç”¨äºæ„é€ è‡³å°‘ä¸¤ç§ç±»å‹ã€‚</p></blockquote><p>æ³›å‹ç±»çš„æƒ…å†µå°±å˜å¾—æ›´åŠ å¤æ‚äº†ã€‚è¦å¾—åˆ°ä¸€ä¸ªåˆæ³•çš„ç±»å‹ï¼Œ<strong>éœ€è¦ç”¨ä¸€ä¸ªä½œä¸ºç±»å‹å®å‚çš„å…·ä½“ç±»å‹æ›¿æ¢ï¼ˆæ³›å‹ï¼‰ç±»çš„ç±»å‹å½¢å‚ã€‚</strong>Listä¸æ˜¯ä¸€ä¸ªç±»å‹ï¼ˆå®ƒæ˜¯ä¸€ä¸ªç±»ï¼‰ï¼Œä½†æ˜¯ä¸‹é¢åˆ—ä¸¾å‡ºæ‰€æœ‰çš„æ›¿ä»£å“éƒ½æ˜¯åˆæ³•ç±»å‹ï¼šList<Int>ã€List<String>ã€List&lt;List<String>&gt;ç­‰ã€‚æ¯ä¸ªæ³›å‹ç±»éƒ½å¯èƒ½ç”Ÿæˆæ½œåœ¨æ— é™æ•°é‡çš„ç±»å‹ã€‚</p><p><strong>å­ç±»å‹</strong></p><blockquote><p>ä¸ºäº†è®¨è®ºç±»å‹ä¹‹é—´çš„å…³ç³»ï¼Œéœ€è¦ç†Ÿæ‚‰å­ç±»å‹è¿™ä¸ªæœ¯è¯­ã€‚ä»»ä½•æ—¶å€™å¦‚æœéœ€è¦çš„æ˜¯ç±»å‹Açš„å€¼ï¼Œä½ éƒ½èƒ½ä½¿ç”¨ç±»å‹Bçš„å€¼ï¼ˆå½“ä½œAçš„å€¼ï¼‰ï¼Œç±»å‹Bå°±ç§°ä¸ºç±»å‹Açš„å­ç±»å‹ã€‚</p></blockquote><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20210914222218.png" alt="å¦‚æœæœŸæœ›Açš„æ—¶å€™å¯ä»¥ä½¿ç”¨Bï¼ŒBå°±æ˜¯Açš„å­ç±»å‹"></p><p><strong>è¶…ç±»å‹</strong>æ˜¯å­ç±»å‹çš„åä¹‰è¯ã€‚å¦‚æœBæ˜¯Açš„å­ç±»å‹ï¼Œé‚£Aå°±æ˜¯Bçš„è¶…ç±»å‹ã€‚</p><p><strong>ç±»å‹æ˜¯å¦æ˜¯å¦ä¸€ä¸ªå­ç±»å‹çš„å­ç±»å‹ä¸ºä»€ä¹ˆå¦‚æ­¤é‡è¦ï¼Ÿ</strong></p><pre><code class="kotlin">/*    æ£€æŸ¥ä¸€ä¸ªç±»å‹æ˜¯å¦æ˜¯å¦ä¸€ä¸ªçš„å­ç±»å‹    */fun test(i: Int) {    val n: Number = i   //ç¼–è¯‘é€šè¿‡ï¼Œå› ä¸ºIntæ˜¯Numberçš„å­ç±»å‹    fun f(s: String) {        /*...*/    }    f(i)    //ä¸èƒ½ç¼–è¯‘ï¼Œå› ä¸ºIntä¸æ˜¯Stringçš„å­ç±»å‹}</code></pre><p><strong>åªæœ‰å€¼çš„ç±»å‹æ˜¯å˜é‡ç±»å‹çš„å­ç±»å‹æ—¶ï¼Œæ‰å…è®¸å˜é‡å­˜å‚¨è¯¥å€¼ã€‚</strong></p><p><strong>ç®€å•æƒ…å†µä¸‹ï¼Œå­ç±»å‹å’Œå­ç±»æœ¬è´¨ä¸Šæ„å‘³ç€ä¸€æ ·çš„äº‹åŠ¡ã€‚</strong>ä¾‹å¦‚ï¼ŒIntç±»å‹æ˜¯Numberçš„å­ç±»ï¼Œå› æ­¤Intç±»å‹æ˜¯Numberç±»å‹çš„å­ç±»å‹ã€‚å¦‚æœä¸€ä¸ªç±»å®ç°äº†ä¸€ä¸ªæ¥å£ï¼Œå®ƒçš„ç±»å‹å°±æ˜¯è¯¥æ¥å£ç±»å‹çš„å­ç±»å‹ï¼šStringæ˜¯CharSequenceçš„å­ç±»å‹ã€‚</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20210914234123.png" alt="éç©ºç±»å‹Aæ˜¯å¯ç©ºçš„A?çš„å­ç±»å‹ï¼Œåè¿‡æ¥å´ä¸æ˜¯"></p><p>è¿™ä¸ªä¾‹å­è¯´æ˜ï¼Œå­ç±»å‹å’Œå­ç±»ä¸æ˜¯åŒä¸€äº‹åŠ¡ã€‚</p><p><strong>ä¸€ä¸ªéç©ºç±»å‹æ˜¯å®ƒçš„å¯ç©ºç±»å‹çš„å­ç±»å‹ï¼Œå½“å®ƒä»¬éƒ½å¯¹åº”è¿™åŒä¸€ä¸ªç±»ã€‚</strong>ä½ å§‹ç»ˆèƒ½åœ¨å¯ç©ºç±»å‹çš„å˜é‡ä¸­å­˜å‚¨éç©ºç±»å‹çš„å€¼ï¼Œå½“åè¿‡æ¥å´ä¸è¡Œï¼ˆnullä¸æ˜¯éç©ºç±»å‹å˜é‡æ¥æ”¶çš„å€¼ï¼‰ï¼š</p><pre><code class="kotlin">val s:String = &quot;abc&quot;val t:String ? = s    //è¿™æ¬¡èµ‹å€¼æ˜¯åˆæ³•çš„ï¼Œå› ä¸ºStringæ˜¯String?çš„å­ç±»å‹</code></pre><p><strong>æ³›å‹ç±»</strong></p><p>å½“æ¶‰åŠåˆ°æ³›å‹ç±»æ—¶ï¼Œå­ç±»å‹å’Œå­ç±»ä¹‹é—´çš„å·®å¼‚æ˜¾çš„æ ¼å¤–é‡è¦ã€‚å‰é¢çš„å‡ ä¸ªé—®é¢˜ï¼ŒæŠŠList<String>ç±»å‹çš„å˜é‡ä¼ ç»™æœŸæœ›List<Any>çš„å‡½æ•°æ˜¯å¦å®‰å…¨ï¼Œç°åœ¨å¯ä»¥ä½¿ç”¨å­ç±»å‹è¯æœ¯è¯­æ¥é‡æ–°ç»„ç»‡ï¼šList<String>æ˜¯List<Any>çš„å­ç±»å‹å—ï¼Ÿä½ å·²ç»äº†è§£äº†ä¸ºä»€ä¹ˆæŠŠMutableList<String>å½“æˆMutableList<Any>çš„å­ç±»å‹å¯¹å¾…æ˜¯ä¸å®‰å…¨çš„ã€‚æ˜¾ç„¶åè¿‡æ¥ä¹Ÿæ˜¯ä¸æˆç«‹çš„ï¼šMutableList<Any>è‚¯å®šä¸æ˜¯MutableList<String>çš„å­ç±»å‹ã€‚</p><p><strong>ä¸€ä¸ªæ³›å‹ç±»â€“ä¾‹å¦‚ï¼ŒMutableListâ€“å¦‚æœå¯¹ä»»æ„ä¸¤ç§ç±»å‹Aå’ŒBï¼ŒMutableList&lt; A &gt;æ—¢ä¸æ˜¯MutableList&lt; B &gt;çš„å­ç±»å‹ä¹Ÿä¸æ˜¯å®ƒçš„è¶…ç±»å‹ï¼Œå®ƒå°±è¢«ç§°ä¸ºåœ¨è¯¥ç±»å‹å‚æ•°ä¸Šæ˜¯ <em>ä¸å˜å‹</em>ã€‚</strong>    </p><p><strong>ä»€ä¹ˆæ˜¯åå˜ã€‚</strong></p><blockquote><p>å¯¹äºè¿™æ ·ä¸€ä¸ªç±»ï¼ŒListï¼Œå¯¹å®ƒæ¥è¯´ï¼Œå­ç±»å‹åŒ–è§„åˆ™ä¸ä¸€æ ·ã€‚Kotlinä¸­çš„Listæ¥å£è¡¨ç¤ºçš„æ˜¯åªè¯»é›†åˆã€‚å¦‚æœAæ˜¯Bçš„å­ç±»å‹ï¼Œé‚£ä¹ˆList&lt; A &gt;å°±æ˜¯List&lt; B &gt;çš„å­ç±»å‹ã€‚è¿™æ ·çš„ç±»æˆ–è€…æ¥å£è¢«ç§°ä¸º <strong>åå˜</strong>ã€‚</p></blockquote><h3 id="9-3-3-åå˜ï¼šä¿ç•™å­ç±»å‹åŒ–å…³ç³»"><a href="#9-3-3-åå˜ï¼šä¿ç•™å­ç±»å‹åŒ–å…³ç³»" class="headerlink" title="9.3.3 åå˜ï¼šä¿ç•™å­ç±»å‹åŒ–å…³ç³»"></a>9.3.3 åå˜ï¼šä¿ç•™å­ç±»å‹åŒ–å…³ç³»</h3><p><strong>åå˜</strong></p><blockquote><p>ä¸€ä¸ªåå˜ç±»æ˜¯æ³›å‹ç±»ï¼Œå¯¹è¿™ä¸ªç±»æ¥è¯´ï¼Œä¸‹é¢çš„æè¿°æ˜¯æˆç«‹çš„ï¼šå¦‚æœAæ˜¯Bçš„å­ç±»ï¼Œé‚£ä¹ˆProducer&lt; A &gt;å°±æ˜¯Producer&lt; B &gt;çš„å­ç±»ã€‚<strong>æˆ‘ä»¬è¯´å­ç±»å‹åŒ–è¢«ä¿ç•™äº†ã€‚</strong>ä¾‹å¦‚ï¼ŒProducer&lt; Cat &gt;æ˜¯Producer&lt; Animal &gt;çš„å­ç±»å‹ï¼Œå› ä¸ºCatæ˜¯Animalçš„å­ç±»å‹ã€‚</p></blockquote><p><strong>åœ¨å£°æ˜ç±»æ—¶å¦‚ä½•è¯´æ˜æŸä¸ªç±»å‹å‚æ•°æ˜¯å¯ä»¥åå˜çš„ï¼</strong></p><blockquote><p>ä½ éœ€è¦åœ¨è¯¥ç±»å‹å‚æ•°ä¸ŠåŠ ä¸Š out å…³é”®è¯ï¼š</p><pre><code>interface Producer&lt;out T&gt;{    //ç±»è¢«å£°æ˜åœ¨Tä¸Šçš„åå˜    fun producer():T}</code></pre><p>å°†ä¸€ä¸ªç±»çš„ç±»å‹å‚æ•°æ ‡è®°ä¸ºåå˜çš„ï¼Œ<strong>åœ¨è¯¥ç±»å‹å®å‚æ²¡æœ‰ç²¾ç¡®åŒ¹é…åˆ°å‡½æ•°ä¸­å®šäºçš„ç±»å‹å½¢å‚æ—¶ï¼Œå¯ä»¥è®©è¯¥ç±»çš„å€¼ä½œä¸ºè¿™ä¸ªå‡½æ•°çš„å®é™…å‚æ•°ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºè¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼ã€‚</strong></p></blockquote><p><strong>ä¸ä½¿ç”¨åå˜çš„ä¾‹å­ä¼šå‡ºç°çš„é—®é¢˜ï¼š</strong></p><blockquote><p>å‡½æ•° feedAll ç”¨æ¥è´Ÿè´£å–‚å…»ç”¨ç±»Herdä»£è¡¨çš„ä¸€ç¾¤åŠ¨ç‰©ï¼ŒHerdç±»çš„ç±»å‹å‚æ•°ç¡®å®šäº†ç•œç¾¤ä¸­åŠ¨ç‰©çš„ç±»ã€‚</p><pre><code class="kotlin">/*    å®šä¹‰ä¸€ä¸ªä¸å˜å‹çš„ç±»ä¼¼é›†åˆçš„ç±»    */open class Animal { fun feed() {     /**/ }}class Herd&lt;T : Animal&gt; {   // ç±»å‹å‚æ•°æ²¡æœ‰å£°æ˜ä¸ºåå˜çš„ã€‚ val size: Int     get() =         operator fun get(i: Int): T {     /*...*/ }}fun feedAll(animals: Herd&lt;Animal&gt;) { for (i in 0 until animals.size) {     animals[i].feed }}</code></pre><p>ç°åœ¨éœ€è¦æ·»åŠ ä¸€ç¾¤çŒ«ç…§é¡¾ã€‚</p><pre><code class="kotlin">/*  ä½¿ç”¨ä¸€ä¸ªä¸å˜å‹çš„ç±»ä¼¼é›†åˆçš„ç±»  */class Cat : Animal() { //Catæ˜¯ä¸€ä¸ªAnimal fun cleanLitter() {     ... }}fun takeCareOfCats(cats: Herd&lt;Cat&gt;) { for (i in 0 until cats.size) {     cats[i].cleanLitter()   //     //feedAll(cats }}</code></pre><p>è¿™æ—¶ä¼šå‡ºç°é—®é¢˜ï¼Œå¦‚æœä½ å°è¯•æŠŠCatçŒ«ç¾¤ç±»ä¼ ç»™feedAllå‡½æ•°ï¼Œåœ¨ç¼–è¯‘å™¨ä½ å°±ä¼šå¾—åˆ°ç±»å‹ä¸åŒ¹é…çš„é”™è¯¯ã€‚å› ä¸ºHerdç±»ä¸­çš„ç±»å‹å‚æ•°Tæ²¡æœ‰ç”¨ä»»ä½•å˜å½¢ä¿®é¥°ç¬¦ï¼ŒçŒ«ç¾¤ä¸æ˜¯ç•œç¾¤çš„å­ç±»ï¼ˆå­ç±»å‹åŒ–æ²¡æœ‰è¢«ä¿ç•™ï¼‰ã€‚å¯ä»¥ä½¿ç”¨æ˜¾å¼çš„ç±»å‹è½¬åŒ–æ¥ç»•è¿‡è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯è¿™ç§å‡½æ•°å•°å—¦ï¼Œæ˜“å‡ºé”™ï¼Œè€Œä¸”ä»æ¥ä¸æ˜¯è§£å†³ç±»å‹ä¸åŒ¹é…é—®é¢˜çš„æ­£ç¡®æ–¹æ³•ã€‚</p><p>Herdç±»ä¸­æœ‰ä¸€ç±»ä¼¼Listçš„APIï¼Œå¹¶ä¸”ä¸å…è®¸å®ƒçš„è°ƒç”¨è€…æ·»åŠ å’Œä¿®æ”¹ç•œç¾¤ä¸­çš„åŠ¨ç‰©ï¼Œå¯ä»¥æŠŠå®ƒå˜æˆåå˜çš„å¹¶ç›¸åº”ä¿®æ”¹å¸¦ç”¨ä»£ç ã€‚</p><pre><code class="kotlin">/*ä½¿ç”¨ä¸€ä¸ªåå˜çš„ç±»ä¼¼é›†åˆçš„ç±»*/class Herd&lt;out T : Animal&gt; {//}fun takeCaraOfCats(cats: Herd&lt;Cat&gt;) { for (i in 0 until cats.size) {     cats[i].cleanLitter() } feedALl(cats)   //ä¸éœ€è¦è½¬æ¢}</code></pre></blockquote><p>ä½ ä¸èƒ½æŠŠä»»ä½•ç±»éƒ½å˜æˆåå˜çš„ï¼šè¿™æ ·ä¸å®‰å…¨ã€‚è®©ç±»åœ¨æŸä¸ªç±»å‹å‚æ•°å˜ä¸ºåå˜ï¼Œé™åˆ¶äº†è¯¥ç±»ä¸­å¯¹è¯¥ç±»å‚æ•°ä½¿ç”¨çš„å¯èƒ½æ€§ã€‚è¦ä¿è¯ç±»å‹å®‰å…¨ï¼Œå®ƒåªèƒ½ç”¨åœ¨outä½ç½®ï¼Œæ„å‘³ç€è¿™ä¸ªç±»åªèƒ½ç”Ÿäº§ï¼ˆè¿”å›ï¼‰T çš„å€¼è€Œä¸èƒ½æ¶ˆè´¹ï¼ˆï¼‰</p><blockquote><p>åœ¨ç±»æˆå‘˜çš„å£°æ˜ä¸­ç±»å‹å‚æ•°çš„ä½¿ç”¨å¯ä»¥åˆ†ä¸ºinä½ç½®å’Œoutä½ç½®ã€‚<strong>è€ƒè™‘æ€æ ·ä¸€ä¸ªç±»ï¼Œå®ƒå£°æ˜ä¸€ä¸ªç±»å‹å‚æ•°Tå¹¶åŒ…å«äº†ä¸€ä¸ªä½¿ç”¨Tçš„å‡½æ•°ã€‚</strong>å¦‚æœå‡½æ•°æŠŠTå½“æˆè¿”å›ç±»å‹ï¼Œæˆ‘ä»¬è¯´å®ƒåœ¨outä½ç½®ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œè¯¥å‡½æ•°ç”Ÿäº§ç±»å‹ä¸ºTçš„å€¼ã€‚å¦‚æœTç”¨ä½œå‡½æ•°å‚æ•°çš„ç±»å‹ï¼Œå®ƒå°±åœ¨inä½ç½®ã€‚è¿™æ ·çš„å‡½æ•°æ¶ˆè´¹ç±»å‹ä¸ºTçš„å€¼ã€‚</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20211009171605.png" alt="å‡½æ•°å‚æ•°çš„ç±»å‹å«åšinæ–‡å­—ï¼Œå‡½æ•°è¿”å›ç±»å‹å«ä½œoutä½ç½®"></p></blockquote><p><strong>çº¦æŸä½¿ç”¨Tçš„ä½ç½®</strong></p><p>ç±»çš„ç±»å‹å‚æ•°å‰çš„outå…³é”®å­—è¦æ±‚æ‰€æœ‰ä½¿ç”¨Tçš„æ–¹æ³•åªèƒ½æŠŠTæ”¾åœ¨outä½ç½®è€Œä¸èƒ½æ”¾åœ¨inä½ç½®ã€‚è¿™ä¸ªå…³é”®å­—çº¦æŸäº†ä½¿ç”¨Tçš„å¯èƒ½æ€§ï¼Œè¿™ä¿è¯äº†å¯¹åº”å­ç±»å‹å…³ç³»çš„å®‰å…¨æ€§ã€‚</p><blockquote><p>ä¾‹å­</p><p>ä»¥Herdç±»ä¸ºä¾‹ï¼Œå®ƒåªèƒ½åœ¨ä¸€ä¸ªåœ°æ–¹ä½¿ç”¨ç±»å‹å‚æ•°T:getæ–¹æ³•çš„è¿”å›å€¼ã€‚</p><pre><code class="kotlin">class Herd(out T: Animal) { val size: Int     get() =         operator fun get(i: Int): T {}//æŠŠTä½œä¸ºè¿”å›ç±»å‹ä½¿ç”¨}</code></pre><p>è¿™æ˜¯ä¸€ä¸ªoutä½ç½®ï¼Œå¯ä»¥å®‰å…¨çš„æŠŠç±»å£°æ˜æˆåå˜çš„ã€‚å¦‚æœHerd<Animal>ç±»çš„getæ–¹æ³•è¿”å›çš„æ˜¯Catï¼Œä»»ä½•è°ƒç”¨è¯¥æ–¹æ³•çš„ä»£ç éƒ½å¯ä»¥æ­£å¸¸å·¥ä½œï¼Œå› ä¸ºCatæ˜¯Animalçš„å­ç±»å‹ã€‚</p><p>ç±»å‹å‚æ•°Tä¸Šçš„å…³é”®å­—outæœ‰ä¸¤å±‚å«ä¹‰ï¼š</p><ul><li>å­ç±»å‹åŒ–ä¼šè¢«ä¿ç•™ï¼ˆProducer<Cat>æ˜¯Producer<Animal>çš„å­ç±»å‹ï¼‰</li><li>Tåªèƒ½ç”¨åœ¨outä½ç½®</li></ul></blockquote><p><strong>ç±»å‹å½¢å‚å¯ä»¥ä½œä¸ºå¦ä¸€ä¸ªç±»çš„ç±»å‹å®å‚</strong></p><p>ä¾‹</p><p>çœ‹è¿™ä¸ªList<Interface>æ¥å£ã€‚Kotlinä¸­Listæ˜¯åªè¯»çš„ï¼Œæ‰€ä»¥å®ƒåªæœ‰ä¸€ä¸ªè¿”å›ç±»å‹ä¸ºTçš„å…ƒç´ çš„æ–¹æ³•getï¼Œè€Œæ²¡æœ‰å®šä¹‰ä»»ä½•ä¸€ä¸ªæŠŠç±»å‹ä¸ºTçš„å…ƒç´ å­˜å‚¨åˆ°åˆ—è¡¨ä¸­çš„æ–¹æ³•ã€‚å› æ­¤å®ƒæ˜¯åå˜çš„ã€‚</p><pre><code class="kotlin">interface List&lt;Out T&gt;:Collection&lt;T&gt;{    operator fun get(index: Int):T    //åªè¯»æ¥å£è‡ªå®šä¹‰äº†è¿”å›Tçš„æ–¹æ³•ï¼ˆæ‰€ä»¥Tåœ¨outçš„ä½ç½®ï¼‰}</code></pre><p>ç±»å‹å½¢å‚ä¸å…‰å¯ä»¥ç›´æ¥å½“ä½œå‚æ•°ç±»å‹æˆ–è€…è¿”å›ç±»å‹ä½¿ç”¨ï¼Œ<strong>è¿˜å¯ä»¥å½“ä½œå¦ä¸€ä¸ªç±»å‹çš„ç±»å‹å®å‚</strong>ã€‚ä¾‹ï¼ŒListæ¥å£åŒ…å«äº†ä¸€ä¸ªè¿”å›List<T>çš„subListæ–¹æ³•ã€‚</p><pre><code class="kotlin">interface List&lt;Out T&gt;:Collection&lt;T&gt;{    fun subList(fromIndex: Int, toIndex: Int): List&lt;T&gt;   //è¿™é‡Œçš„Tåœ¨outçš„ä½ç½®}</code></pre><p>å‡½æ•°subListä¸­çš„Tä¹Ÿç”¨åœ¨outä½ç½®ã€‚</p><p><strong>Mutableä¸èƒ½åœ¨ç±»å‹å‚æ•°ä¸Šå£°æ˜æˆåå˜çš„</strong></p><p>å› ä¸ºå³å«æœ‰æ¥å—ç±»å‹ä¸ºTçš„å€¼ä½œä¸ºå‚æ•°çš„æ–¹æ³•ï¼Œä¹Ÿå«æœ‰è¿”å›è¿™ç§å€¼çš„æ–¹æ³•ï¼ˆå› æ­¤ï¼ŒTå‡ºç°åœ¨inå’Œoutä¸¤ç§ä½ç½®ä¸Šï¼‰ã€‚</p><pre><code class="kotlin">interface MutableList&lt;T&gt; : List&lt;T&gt;, MutableCollection&lt;T&gt; {  //MutableListä¸èƒ½åœ¨Tä¸Šå£°æ˜æˆåå˜çš„...    override fun add(element: T): Boolean {//...å› ä¸ºTç”¨åœ¨äº†â€œinâ€ä½ç½®        TODO(&quot;Not yet implemented&quot;)    }}</code></pre><p>ç¼–è¯‘å™¨å¼ºåˆ¶é™åˆ¶äº†è¿™æ¬¡åå˜ã€‚å¦‚æœè¿™ä¸ªç±»è¢«å£°æ˜æˆäº†åå˜ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥å‘Šé”™è¯¯:Type parameter T is declared as â€˜outâ€™ but occurs in â€˜inâ€™ positionï¼ˆç±»å‹å‚æ•°Tå£°æ˜ä¸ºâ€œoutâ€ä½†å‡ºç°åœ¨â€œinâ€ä½ç½®ï¼‰ã€‚</p><p><strong>æ„é€ æ–¹æ³•</strong></p><p>æ³¨æ„ï¼Œæ„é€ æ–¹æ³•çš„å‚æ•°æ—¢ä¸åœ¨inä½ç½®ï¼Œä¹Ÿä¸åœ¨outä½ç½®ã€‚å³ä½¿ç±»å‹å‚æ•°å£°æ˜æˆäº†outï¼Œä»ç„¶å¯ä»¥åœ¨æ„é€ æ–¹æ³•å‚æ•°çš„å£°æ˜ä¸­ä½¿ç”¨å®ƒï¼š</p><pre><code class="kotlin">class Herd&lt;Out T:Animal&gt;(vararg animals:T){    ...}</code></pre><p>å¦‚æœ æŠŠç±»çš„å®ä¾‹å½“æˆä¸€ä¸ªç±»æ³›åŒ–çš„ç±»å‹çš„å®ä¾‹ä½¿ç”¨ï¼Œå˜å‹ä¼šé˜²æ­¢è¯¥å®ä¾‹è¢«è¯¯ç”¨ï¼šä¸èƒ½è°ƒç”¨å­˜åœ¨æ½œåœ¨å±é™©çš„æ–¹æ³•ã€‚<strong>æ„é€ æ–¹æ³•åœ¨å®ä¾‹åˆ›å»ºåä¸ä¼šè¢«è°ƒç”¨ï¼Œå› æ­¤å°±ä¸ä¼šæœ‰å±é™©ã€‚</strong></p><p>ç„¶è€Œï¼Œå¦‚æœä½ åœ¨æ„é€ æ–¹æ³•çš„å‚æ•°ä¸Šä½¿ç”¨äº†å…³é”®å­—valå’Œvarï¼ŒåŒæ—¶å°±ä¼šå£°æ˜ä¸€ä¸ªgetterå’Œsetterï¼ˆå¦‚æœå±æ€§æ˜¯å¯å˜çš„ï¼‰ã€‚<strong>å› æ­¤å¯¹åªè¯»å±æ€§æ¥è¯´ï¼Œç±»å‹å‚æ•°ç”¨åœ¨äº†outä½ç½®ï¼Œ å¯å˜å±æ€§åœ¨outä½ç½®çš„inä½ç½®éƒ½æ˜¯ç”¨å®ƒï¼š</strong></p><pre><code class="kotlin">class Herd&lt;T:Animal&gt;(var leadAnimal:T,vararg animals:T){...}</code></pre><p>è¿™é‡Œ Tä¸èƒ½ç”¨outæ ‡è®°ï¼Œå› ä¸ºç±»åŒ…è£…å±æ€§leadAnimalçš„setterï¼Œå®ƒåœ¨inä½ç½®ç”¨åˆ°äº†Tã€‚</p><p><strong>å…³äºè®¾ç½®ä¿®é¥°ç¬¦</strong></p><p>è¿™é‡Œä½ç½®è§„åˆ™åªè¦†ç›–äº†ç±»å¤–éƒ¨å¯è§çš„ï¼ˆpublicã€protectedã€å’Œinternalï¼‰APIã€‚ç§æœ‰æ–¹æ³•çš„å‚æ•°æ—¢ä¸åœ¨inä½ç½®ä¹Ÿä¸åœ¨outä½ç½®ã€‚å˜å½¢è§„åˆ™åªä¼šé˜²æ­¢å¤–éƒ¨ä½¿ç”¨è€…å¯¹ç±»çš„è¯¯ç”¨ä½†ä¸ä¼šå¯¹ç±»è‡ªå·±çš„å®ç°èµ·ä½œç”¨ï¼š</p><pre><code class="kotlin">class Herd&lt;out T:Animal&gt;(private var leadAnimal:T,vararg animals:T){...}</code></pre><p><strong>ç°åœ¨å¯ä»¥å®‰å…¨åœ°è®©Herdåœ¨Tä¸Šåå˜ï¼Œå› ä¸ºå±æ€§leadAnimalå˜æˆäº†ç§æœ‰çš„ã€‚</strong></p><p>å¦‚æœç±»å‹å‚æ•°åœ¨inçš„ä½ç½®ä½¿ç”¨ï¼Œç±»å’Œæ¥å£ä¼šæ€æ ·ã€‚è¿™æ˜¯å°±è¦æœ‰é€†å˜å…³ç³»æˆç«‹ã€‚</p><h3 id="9-3-4-é€†å˜ï¼šåè½¬å­ç±»å‹åŒ–çš„å…³ç³»"><a href="#9-3-4-é€†å˜ï¼šåè½¬å­ç±»å‹åŒ–çš„å…³ç³»" class="headerlink" title="9.3.4 é€†å˜ï¼šåè½¬å­ç±»å‹åŒ–çš„å…³ç³»"></a>9.3.4 é€†å˜ï¼šåè½¬å­ç±»å‹åŒ–çš„å…³ç³»</h3><p><strong>æ¦‚å¿µ</strong></p><p>é€†å˜çš„æ¦‚å¿µå¯ä»¥è¢«çœ‹ä½œæ˜¯åå˜çš„é•œåƒï¼šå¯¹ä¸€ä¸ªé€†å˜ç±»æ¥è¯´ï¼Œå®ƒçš„å­ç±»å‹åŒ–å…³ç³»ä¸ç”¨ä½œç±»å‹å®å‚çš„ç±»çš„å­ç±»å‹åŒ–å…³ç³»æ˜¯ç›¸åçš„ã€‚</p><p><strong>é€†å˜ä¾‹å­</strong></p><blockquote><p>æˆ‘ä»¬ä»Comparatoræ¥å£çš„ä¾‹å­å¼€å§‹ï¼Œè¿™ä¸ªæ¥å£å®šä¹‰äº†ä¸€ä¸ªæ–¹æ³•compareç±»ï¼Œç”¨äºæ¯”è¾ƒä¸¤ä¸ªç»™å®šçš„å¯¹è±¡ï¼š</p><pre><code class="kotlin">interface Comparator&lt;in T&gt; { fun compare(e1: T, e2: T): Int {    //åœ¨inä½ç½®ä½¿ç”¨T }}</code></pre><p>è¿™ä¸ªæ¥å£æ–¹æ³•åªæ˜¯æ¶ˆè´¹ç±»å‹ä¸ºTçš„å€¼ã€‚è¿™è¯´æ˜Tåªåœ¨inä½ç½®ä½¿ç”¨ï¼Œå› æ­¤å®ƒçš„å£°æ˜ä¹‹å‰ç”¨äº†inå…³é”®å­—ã€‚ä¸€ä¸ªä¸ºç‰¹å®šç±»å‹çš„å€¼å®šä¹‰çš„æ¯”è¾ƒå™¨æ˜¾ç„¶å¯ä»¥æ¯”è¾ƒè¯¥ç±»å‹ä»»æ„å­ç±»å‹çš„å€¼ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæœ‰ä¸€ä¸ªComparator<Any>ï¼Œ<strong>å¯ä»¥ç”¨å®ƒæ¯”è¾ƒä»»æ„å…·ä½“ç±»å‹çš„å€¼ã€‚</strong></p><pre><code class="kotlin">&gt;&gt;&gt; val anyComparator = Comparator&lt;Any&gt; { e1, e2 -&gt; e1.hashCode() - e2.hashCode()}&gt;&gt;&gt; val strings: List&lt;String&gt;=...&gt;&gt;&gt; strings.sortedWith(anyConparator)   // å¯ä»¥ç”¨ä»»æ„å¯¹è±¡çš„æ¯”è¾ƒå™¨æ¯”è¾ƒå…·ä½“å¯¹è±¡ï¼Œæ¯”å¦‚å­—ç¬¦ä¸²</code></pre><p>sortedWithå‡½æ•°æœŸæœ›ä¸€ä¸ªComparator&lt; String &gt;(ä¸€ä¸ªå¯ä»¥æ¯”è¾ƒå­—ç¬¦ä¸²çš„æ¯”è¾ƒå™¨)ï¼Œä¼ ç»™å®ƒä¸€ä¸ªèƒ½æ¯”è¾ƒè·Ÿä¸€èˆ¬çš„ç±»å‹çš„æ¯”è¾ƒå™¨æ˜¯å®‰å…¨çš„ã€‚å¦‚æœä½ åœ¨ç‰¹å®šç±»å‹çš„å¯¹è±¡ä¸Šæ‰§è¡Œæ¯”è¾ƒï¼Œ<strong>å¯ä»¥ä½¿ç”¨èƒ½å¤„ç†è¯¥ç±»å‹æˆ–è€…å®ƒçš„è¶…ç±»å‹çš„æ¯”è¾ƒå™¨ã€‚è¿™è¯´æ˜Comparator&lt; Any &gt;æ˜¯Comparator&lt; String &gt;çš„å­ç±»å‹ï¼Œå…¶ä¸­Anyæ˜¯Stringçš„è¶…ç±»å‹ã€‚</strong>ä¸åŒç±»å‹ä¹‹é—´çš„å­ç±»å‹å…³ç³»å’Œè¿™äº›ç±»å‹çš„æ¯”è¾ƒå™¨ä¹‹é—´çš„å­ç±»å‹åŒ–å…³ç³»æˆªç„¶ç›¸åã€‚</p></blockquote><p><strong>æè¿°ä¸€ä¸ªé€†å˜ç±»</strong></p><blockquote><p>åœ¨ <strong>ç±»å‹å‚æ•°</strong> ä¸Šé€†å˜çš„ç±»æ˜¯è¿™æ ·çš„ä¸€ä¸ªæ³›å‹ç±»ï¼ˆæˆ‘ä»¬ä»¥Consumber&lt; T &gt;ä¸ºä¾‹ï¼‰ï¼Œå¯¹è¿™ä¸ªç±»æ¥è¯´ï¼Œä¸‹è¾¹çš„æè¿°æ˜¯æˆç«‹çš„ï¼š</p><p><strong>å¦‚æœBæ˜¯Açš„å­ç±»å‹ï¼Œé‚£ä¹ˆConsumer&lt; A &gt;å°±æ˜¯Consumer&lt; B &gt;çš„å­ç±»å‹ã€‚ç±»å‹å‚æ•°Aå’ŒBäº¤æ¢äº†ä½ç½®ï¼Œæ‰€ä»¥æˆ‘ä»¬è¯´å­ç±»å‹åŒ–è¢«åè½¬äº†ã€‚ä¾‹å¦‚ï¼ŒConsumer&lt; Animal &gt;å°±æ˜¯Consumer&lt; Cat &gt;çš„å­ç±»å‹ã€‚</strong></p></blockquote><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20211011233756.png" alt="å¯¹åå˜ç±»å‹Producer&lt;T&gt;æ¥è¯´ï¼Œå­ç±»å‹åŒ–ä¿ç•™äº†ï¼Œä½†å¯¹é€†å˜ç±»å‹æ¥è¯´ï¼Œå­ç±»å‹åŒ–åè½¬äº†"></p><p>å±•ç¤ºäº†ç±»å‹å‚æ•°ä¸Šåå˜å’Œé€†å˜çš„ç±»ä¹‹é—´å­ç±»å‹åŒ–å…³ç³»çš„å·®å¼‚ã€‚å¯ä»¥çœ‹åˆ°å¯¹Producerç±»æ¥è¯´ï¼Œå­ç±»å‹åŒ–å…³ç³»å¤åˆ¶äº†å®ƒçš„ç±»å‹å®å‚çš„å­ç±»å‹åŒ–å…³ç³»ï¼Œè€Œå¯¹Consumerç±»æ¥è¯´ï¼Œå…³ç³»åè½¬äº†ã€‚</p><p><strong>in å…³é”®å­—å£°æ˜é€†å˜</strong></p><p>in å…³é”®å­—çš„æ„æ€æ˜¯ï¼Œå¯¹åº”ç±»å‹çš„å€¼æ˜¯ä¼ é€’è¿›æ¥ç»™è¿™ä¸ªç±»çš„æ–¹æ³•çš„ï¼Œå¹¶ä¸”è¢«è¿™äº›æ–¹æ³•æ¶ˆè´¹ã€‚å’Œåå˜çš„æƒ…å†µç±»ä¼¼ï¼Œçº¦æŸç±»å‹å‚æ•°çš„ä½¿ç”¨å°†å¯¼è‡´ç‰¹å®šçš„å­ç±»å‹åŒ–å…³ç³»ã€‚<strong>åœ¨ç±»å‹å‚æ•°Tä¸Šçš„inå…³é”®å­—æ„å‘³ç€å­ç±»å‹åŒ–è¢«åè½¬äº†ï¼Œè€Œä¸”Tåªèƒ½ç”¨åœ¨inä½ç½®ã€‚</strong></p><table><thead><tr><th align="center">åå˜ï¼ˆæ–¹æ³•åç§°ä¸ºæ¡ˆä¾‹ï¼‰</th><th>é€†å˜</th><th>ä¸å˜å‹</th></tr></thead><tbody><tr><td align="center">Producer&lt; out T&gt;</td><td>Consumer&lt; in T&gt;</td><td>MutableList&lt; T&gt;</td></tr><tr><td align="center">ç±»çš„å­ç±»å‹åŒ–ä¿ç•™äº†ï¼šProducer&lt; Cat&gt;æ˜¯Producer&lt; Animal&gt;çš„å­ç±»å‹</td><td>å­ç±»å‹åŒ–åè½¬äº†ï¼šConsumer&lt; Animal&gt;æ˜¯Consumer&lt; Cat&gt;çš„å­ç±»å‹</td><td>æ²¡æœ‰å­ç±»å‹åŒ–</td></tr><tr><td align="center">Tåªèƒ½åœ¨outä½ç½®</td><td>Tåªèƒ½åœ¨inä½ç½®</td><td>Tå¯ä»¥åœ¨ä»»ä½•ä½ç½®</td></tr></tbody></table><p><strong>ä¸€ä¸ªç±»å¯ä»¥åœ¨ä¸€ä¸ªç±»å‹å‚æ•°ä¸Šåå˜ï¼ŒåŒæ—¶åœ¨å¦ä¸€ä¸ªç±»å‹å‚æ•°ä¸Šé€†å˜ã€‚Functionæ¥å£çš„ä¾‹å­ã€‚</strong></p><pre><code class="kotlin">interface Function1&lt;in P, out R&gt; {    operator fun invoke(p: P): R}</code></pre><p>Kotlinçš„è¡¨ç¤ºæ³•(P)-&gt;æ˜¯è¡¨è¾¾Function&lt;P,R&gt;çš„å¦ä¸€ç§å¯è¯»æ€§çš„å½¢å¼ã€‚å¯ä»¥å‘ç°ç”¨inå…³é”®å­—æ ‡è®°Pï¼ˆå‚æ•°ç±»å‹ï¼‰åªç”¨åœ¨inä½ç½®ï¼Œè€Œç”¨outå…³é”®å­—æ ‡è®°çš„Rï¼ˆè¿”å›ç±»å‹ï¼‰åªç”¨åœ¨outä½ç½®ã€‚è¿™æ„å‘³ç€å¯¹è¿™ä¸ªå‡½æ•°ç±»å‹çš„ç¬¬ä¸€ä¸ªç±»å‹å‚æ•°æ¥è¯´ï¼Œå­ç±»å‹åŒ–åè½¬äº†ï¼Œè€Œå¯¹ç¬¬äºŒä¸ªç±»å‹å‚æ•°æ¥è¯´ï¼Œå­ç±»å‹åŒ–ä¿ç•™äº†ã€‚</p><p><strong>ä¾‹ï¼Œä½ æœ‰ä¸€ä¸ªé«˜é˜¶å‡½æ•°ï¼Œè¯¥å‡½æ•°å°è¯•å¯¹é‡Œæ‰€æœ‰çš„çŒ«è¿›è¡Œè¿­ä»£ï¼Œä½ å¯ä»¥æŠŠä¸€ä¸ªæ¥æ”¶ä»»æ„åŠ¨ç‰©çš„lambdaä¼ ç»™å®ƒã€‚</strong></p><pre><code class="kotlin">fun enumerateCats(f: (Cat) -&gt; Number) {    ...}fun Animal.getIndex(): Int = ...&gt;&gt;&gt; enumerateCats(Animal::getIndex) //åœ¨Kotlinä¸­è¿™æ®µä»£ç æ˜¯åˆæ³•çš„ã€‚Animalæ˜¯Catçš„è¶…ç±»å‹ï¼Œè€ŒIntæ˜¯Numberçš„å­ç±»å‹</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20211012002918.png" alt="å‡½æ•°(P)-&gt;Råœ¨å®ƒçš„å‚æ•°ç±»å‹ä¸Šé€†å˜è€Œåœ¨è¿”å›ç±»å‹ä¸Šåå˜"></p><h3 id="9-3-5-ä½¿ç”¨ç‚¹å˜å½¢ï¼šåœ¨ç±»å‹å‡ºç°çš„åœ°æ–¹æŒ‡å®šå˜å‹"><a href="#9-3-5-ä½¿ç”¨ç‚¹å˜å½¢ï¼šåœ¨ç±»å‹å‡ºç°çš„åœ°æ–¹æŒ‡å®šå˜å‹" class="headerlink" title="9.3.5 ä½¿ç”¨ç‚¹å˜å½¢ï¼šåœ¨ç±»å‹å‡ºç°çš„åœ°æ–¹æŒ‡å®šå˜å‹"></a>9.3.5 ä½¿ç”¨ç‚¹å˜å½¢ï¼šåœ¨ç±»å‹å‡ºç°çš„åœ°æ–¹æŒ‡å®šå˜å‹</h3><p><strong>å£°æ˜ç‚¹å˜å‹</strong></p><p>åœ¨ç±»å£°æ˜çš„æ—¶å€™å°±èƒ½å¤ŸæŒ‡å®šå˜å½¢ä¿®é¥°ç¬¦æ˜¯å¾ˆæ–¹ä¾¿çš„ï¼Œå› ä¸ºè¿™äº›ä¿®é¥°ç¬¦ä¼šåº”ç”¨åˆ°æ‰€æœ‰ç±»è¢«ä½¿ç”¨çš„åœ°æ–¹ã€‚æ‰€ä»¥è¢«ç§°ä¸º<strong>å£°æ˜ç‚¹å˜å‹</strong></p><p><strong>ä½¿ç”¨ç‚¹å˜å‹</strong></p><p>å¦‚æœä½ ç†Ÿæ‚‰Javaçš„é€šé…ç¬¦ç±»å‹ï¼ˆ? extends å’Œ ? superï¼‰ï¼Œä½ ä¼šæ„è¯†åˆ°Javaç”¨å®Œå…¨ä¸åŒçš„æ–¹å¼å¤„ç†ç±»å‹ã€‚åœ¨Javaä¸­ï¼Œæ¯ä¸€æ¬¡ä½¿ç”¨å¸¦ç±»å‹å‚æ•°çš„ç±»å‹çš„æ—¶å€™ï¼Œè¿˜å¯ä»¥æŒ‡å®šè¿™ä¸ªç±»å‹å‚æ•°æ˜¯å¦å¯ä»¥ç”¨å®ƒçš„å­ç±»å‹æˆ–è€…è¶…ç±»å‹æ›¿æ¢ã€‚è¿™å«åš <strong>ä½¿ç”¨ç‚¹å˜å‹</strong></p><p><strong>Kotlin æ”¯æŒä½¿ç”¨ï¼Œä½¿ç”¨ç‚¹å˜å‹</strong></p><blockquote><p>Kotlinæ”¯æŒä½¿ç”¨ç‚¹å˜å‹ï¼Œå…è®¸åœ¨ç±»å‹å‚æ•°å‡ºç°çš„å…·ä½“ä½ç½®æŒ‡å®šå˜å‹ï¼Œå³ä½¿åœ¨ç±»å‹å£°æ˜æ—¶ä¸èƒ½è¢«å£°æ˜æˆåå˜æˆ–é€†å˜çš„ã€‚</p></blockquote><p><strong>çœ‹çœ‹ä½¿ç”¨ç‚¹å˜å‹æ˜¯å¦‚ä½•å·¥ä½œçš„</strong></p><blockquote><p>è®¸å¤šMutableListè¿™æ ·çš„æ¥å£ï¼Œé€šå¸¸æƒ…å†µä¸‹æ—¢ä¸æ˜¯åå˜ä¹Ÿä¸æ˜¯é€†å˜çš„ï¼Œå› ä¸ºå®ƒåŒæ—¶ç”Ÿäº§å’Œæ¶ˆè´¹æŒ‡å®šä¸ºå®ƒä»¬ç±»å‹å‚æ•°çš„ç±»å‹çš„å€¼ã€‚ä½†æ˜¯å¯¹äºè¿™ä¸ªç±»å‹çš„å˜é‡æ¥è¯´ï¼Œåœ¨æŸä¸ªç‰¹å®šå‡½æ•°ä¸­åªè¢«å½“æˆå…¶ä¸­ä¸€ç§è§’è‰²ä½¿ç”¨çš„æƒ…å†µå¾ˆå¸¸è§ï¼šè¦ä¹ˆæ˜¯ç”Ÿäº§è€…è¦ä¹ˆæ˜¯æ¶ˆè´¹è€…ã€‚ä¾‹å¦‚</p><pre><code class="kotlin">/*    å¸¦ä¸å˜å‹ç±»å‹å‚æ•°çš„ æ•°æ®æ‹·è´å‡½æ•°    */fun &lt;T&gt; copyData(source: MutableList&lt;T&gt;, destination: MutableList&lt;T&gt;) {for (item in source) {  destination.add(item)}}</code></pre><p>è¿™ä¸ªå‡½æ•°ä»ä¸€ä¸ªé›†åˆä¸­æŠŠå…ƒç´ æ‹·è´åˆ°å¦ä¸€ä¸ªé›†åˆä¸­ã€‚å°½ç®¡ä¸¤ä¸ªé›†åˆéƒ½æ‹¥æœ‰ä¸å˜å‹çš„ç±»å‹ï¼Œæ¥æºé›†åˆåªæ˜¯ç”¨äºè¯»å–ï¼Œè€Œç›®æ ‡é›†åˆåªæ˜¯ç”¨äºå†™å…¥ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œé›†åˆå…ƒç´ çš„ç±»å‹ä¸éœ€è¦ç²¾ç¡®åŒ¹é…ã€‚ä¾‹å¦‚ï¼ŒæŠŠä¸€ä¸ªå­—ç¬¦ä¸²é›†åˆæ‹·è´åˆ°å¯ä»¥åŒ…å«ä»»ä½•é›†åˆä¸­ä¸€ç‚¹é—®é¢˜æ²¡æœ‰ã€‚</p><p>è®©å‡½æ•°æ”¯æŒä¸åŒç±»å‹çš„åˆ—è¡¨ï¼Œ<strong>å¼•å…¥ç¬¬äºŒæ³›å‹å‚æ•°</strong></p><pre><code class="kotlin">/*    9.15 å¸¦ä¸å˜å‹ç±»å‹å‚æ•°çš„æ•°æ®æ‹·è´å‡½æ•°    */fun &lt;T : R, R&gt; copyData(source: MutableList&lt;T&gt;, destination: MutableList&lt;R&gt;) {  //æ¥æºçš„å…ƒç´ ç±»å‹åº”è¯¥æ˜¯ç›®æ ‡å…ƒç´ ç±»å‹çš„å­ç±»å‹for (item in source) {  destination.add(item)}}&gt;&gt;&gt; val ints = mutableListOf(1, 2, 3)&gt;&gt;&gt; val anyItems = mutableListOf&lt;Any&gt;()&gt;&gt;&gt; copyData(ints,anyItems) //å¯ä»¥è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œå› ä¸ºIntæ˜¯Anyçš„å­ç±»å‹&gt;&gt;&gt; println(anyItems)[1,2,3]</code></pre><p>ä½ å£°æ˜äº†ä¸¤ä¸ªæ³›å‹å‚æ•°ä»£è¡¨ æ¥æºåˆ—è¡¨å’Œç›®æ ‡åˆ—è¡¨ä¸­çš„å…ƒç´ ç±»å‹ã€‚ä¸ºäº†èƒ½å¤ŸæŠŠä¸€ä¸ªåˆ—è¡¨ä¸­çš„å…ƒç´ æ‹·è´åˆ°å¦ä¸€ä¸ªåˆ—è¡¨ä¸­ï¼Œæ¥æºå…ƒç´ ç±»å‹åº”è¯¥æ˜¯ç›®æ ‡åˆ—è¡¨ä¸­çš„å…ƒç´ çš„å­ç±»å‹ï¼Œä¾‹å¦‚ 9.15ä¸­çš„Intæ˜¯Anyçš„å­ç±»å‹ã€‚</p><p>å¦ä¸€ç§æ–¹å¼æ”¯æŒä¸åŒåˆ—è¡¨ã€‚</p><p>Kotlinæä¾›äº†æ›´ä¼˜é›…çš„è¡¨è¾¾æ–¹å¼ã€‚å½“å‡½æ•°çš„å®ç°è°ƒç”¨äº†é‚£äº›ç±»å‹å‚æ•°åªå‡ºç°åœ¨outä½ç½®ï¼ˆæˆ–åªå‡ºç°åœ¨inä½ç½®ï¼‰çš„æ–¹æ³•æ—¶ï¼Œå¯ä»¥å……åˆ†åˆ©ç”¨è¿™ä¸€ç‚¹ï¼Œåœ¨å‡½æ•°å®šä¹‰ä¸­ç»™ç‰¹å®šç”¨é€”çš„ç±»å‹å‚æ•°ç”¨ä¸Š<strong>å˜å‹ä¿®é¥°ç¬¦</strong></p><pre><code class="kotlin">/*    9.16 å¸¦outæŠ•å½±ç±»å‹å‚æ•°çš„æ•°æ®æ‹·è´å‡½æ•°    */fun &lt;T&gt; copyData(source: MutableList&lt;out T&gt;,destination: MutableList&lt;T&gt;) {for (item in source) {  destination.add(item)}}</code></pre><p>å¯ä»¥ä¸ºç±»å‹å£°æ˜ä¸­ç±»å‹å‚æ•°ä»»æ„çš„ç”¨æ³•æŒ‡å®šå˜å‹ä¿®é¥°ç¬¦ï¼Œç”¨æ³•åŒ…æ‹¬ï¼šå½¢å‚ç±»å‹ã€å±€éƒ¨å˜é‡ç±»å‹ã€å‡½æ•°è¿”å›ç±»å‹ã€ç­‰ã€‚<strong>è¿™å‘ç”Ÿçš„ä¸€åˆ‡éƒ½å«åš ç±»å‹æŠ•å½±ï¼šæˆ‘ä»¬è¯´sourceä¸æ˜¯ä¸€ä¸ªå¸¸è§„çš„MutableListï¼Œè€Œæ˜¯ä¸€ä¸ªæŠ•å½±å—é™çš„MutableListã€‚</strong>åªèƒ½è°ƒç”¨è¿”å›ç±»å‹æ˜¯æ³›å‹ç±»å‹å‚æ•°çš„é‚£äº›æ–¹æ³•ã€‚ç¼–è¯‘å™¨ç¦æ­¢è°ƒç”¨ä½¿ç”¨ç±»å‹å‚æ•°åšå®å‚ï¼ˆç±»å‹ï¼‰çš„å“ªäº›æ–¹æ³•ï¼ˆåœ¨inä½ç½®ä½¿ç”¨ç±»å‹å‚æ•°ï¼‰ï¼š</p><pre><code class="kotlin">&gt;&gt;&gt; val list: MutableList&lt;out Number&gt; = ...&gt;&gt;&gt; list.add(42)Error:Out-projectedType &#39;MutableList&lt;out NUmber&gt;&#39; prohibitsthe use of &#39;fun add(element:E):Boolean&#39;</code></pre><p>ï¼ˆåœ¨inä½ç½®ä½¿ç”¨ç±»å‹å‚æ•°åè°ƒç”¨ç±»å‹å‚æ•°æ–¹æ³•æ˜¯ä¸å¯å–çš„ã€‚ï¼‰</p><p><strong>ä¸è¦ä¸ºä½¿ç”¨æŠ•å½±ç±»å‹å‚æ•°åä¸èƒ½è°ƒç”¨æŸäº›æ–¹æ³•è€ŒåƒæƒŠã€‚å¦‚æœéœ€è¦è°ƒç”¨é‚£äº›æ–¹æ³•ï¼Œä½ éœ€è¦çš„æ˜¯å¸¸è§„ç±»å‹è€Œä¸æ˜¯æŠ•å½±ã€‚</strong>è¿™å¯èƒ½è¦æ±‚ä½ å£°æ˜ç¬¬äºŒç±»å‹å‚æ•°ï¼Œå®ƒä¾èµ–çš„æ˜¯åŸæœ¬è¦è¿›è¡ŒæŠ•å½±çš„ç±»å‹ï¼Œä¾‹ 9.15 ä¸­é‚£æ ·ã€‚</p><p>å› ä¸ºæˆ‘ä»¬åªç”¨äº†å£°æ˜åœ¨Listä¸­çš„æ–¹æ³•ï¼Œå¹¶æ²¡æœ‰ç”¨åˆ°MutableListä¸­çš„æ–¹æ³•ï¼Œè€Œä¸”Listç±»å‹å‚æ•°çš„å˜å‹åœ¨å£°æ˜æ—¶å°±æŒ‡å®šäº†ã€‚æ‰€ä»¥å®ç°copyDataå‡½æ•°çš„æ­£ç¡®æ–¹å¼åº”è¯¥æ˜¯ä½¿ç”¨List<T>ä½œä¸ºsourceå®å‚çš„ç±»å‹ã€‚<strong>è¿™ä¸ªä¾‹å­å±•ç¤ºè¿™ç§æ¦‚å¿µä¾ç„¶ååˆ†é‡è¦ï¼Œå°¤å…¶æ˜¯è¦è®°ä½å¤§å¤šæ•°çš„ç±»å¹¶æ²¡æƒ³Listå’ŒMutableLIstè¿™æ ·åˆ†å¼€ä¸¤ä¸ªæ¥å£ï¼Œä¸€ä¸ªæ˜¯åå˜çš„è¯»å–æ¥å£ï¼Œä¸€ä¸ªæ˜¯ä¸å˜å‹çš„è¯»å–/å†™å…¥æ¥å£ã€‚</strong></p><p><strong>åœ¨ç±»å‹å‚æ•°æœ‰outå˜å‹æ—¶æŠ•å½±æ²¡æœ‰æ„ä¹‰</strong></p><p>å¦‚æœç±»å‹é˜è¿°å·²ç»æœ‰outå˜å‹ï¼Œè·å–å®ƒçš„outæŠ•å½±æ²¡æœ‰ä»»ä½•æ„ä¹‰ã€‚å°±åƒList<out T> è¿™æ ·ã€‚å®ƒå’ŒList<T>æ˜¯åŒä¸€ä¸ªæ„æ€ï¼Œå› ä¸ºListå·²ç»å£°æ˜æˆäº†class List<out T>ã€‚Kotlinç¼–è¯‘å™¨ä¼šå‘å‡ºè­¦å‘Šï¼Œè¡¨æ˜è¿™äº›æŠ•å½±æ˜¯å¤šä½™çš„ã€‚</p><p>åŒç†ï¼Œå¯¹ç±»å‹å‚æ•°çš„ç”¨æ³•ä½¿ç”¨inä¿®é¥°ç¬¦ï¼Œæ¥è¡¨æ˜è¿™ä¸ªç‰¹å®šçš„åœ°æ–¹ï¼Œç›¸åº”çš„å€¼æ‹…å½“çš„æ˜¯æ¶ˆè´¹è€…ï¼Œè€Œä¸”ç±»å‹å‚æ•°å¯ä»¥ä»»æ„ä½¿ç”¨å®ƒçš„å­ç±»å‹æ›¿æ¢ã€‚</p><p>ç”¨inæ¥é‡å†™éƒ¨åˆ†ä»£ç ï¼ˆ9.16).</p><pre><code class="kotlin">fun &lt;T&gt; copyData(source: MutableList&lt;T&gt;, destination: MutableList&lt;in T&gt;) {//å…è®¸ç›®æ ‡å…ƒç´ çš„ç±»å‹æ˜¯æ¥æºç±»å‹çš„è¶…ç±»å‹ for (item in source) {     destination.add(item)     }}</code></pre><blockquote><p>æ³¨æ„ï¼šKotlinçš„ä½¿ç”¨ç‚¹å˜å‹ç›´æ¥å¯¹åº”Javaçš„é™ç•Œé€šé…ç¬¦ã€‚Kotlin ä¸­çš„MutableList<out T> å’ŒJava ä¸­çš„MutableList&lt;? extends T&gt;æ˜¯ä¸€ä¸ªæ„æ€ã€‚inæŠ•å½±æ˜¯ä¸€ä¸ªæ„æ€ã€‚in æŠ•å½±çš„MutableList<in T>å¯¹åº”åˆ°Javaçš„MutableList&lt;? super T&gt;ã€‚</p></blockquote></blockquote><p><strong>ï¼ˆä¼˜ç‚¹ï¼‰ä½¿ç”¨ç‚¹å˜å‹æœ‰åŠ©äºæ”¾å®½å¯æ¥å—çš„ç±»å‹èŒƒå›´ã€‚</strong>è®¨è®ºå¦ä¸€ç§æç«¯æƒ…å†µï¼šè¿™ç§æƒ…å†µä¸‹ï¼ˆæ³›å‹ï¼‰ç±»å‹ä½¿ç”¨æ‰€æœ‰å¯èƒ½çš„ç±»å‹å®å‚ã€‚ï¼ˆæ³›å‹è¦ä½¿ç”¨æ‰€æœ‰å¯èƒ½çš„ç±»å‹ï¼‰</p><h3 id="9-3-6-æ˜Ÿå·æŠ•å½±ï¼š-ä»£æ›¿ç±»å‹å‚æ•°"><a href="#9-3-6-æ˜Ÿå·æŠ•å½±ï¼š-ä»£æ›¿ç±»å‹å‚æ•°" class="headerlink" title="9.3.6 æ˜Ÿå·æŠ•å½±ï¼š* ä»£æ›¿ç±»å‹å‚æ•°"></a>9.3.6 æ˜Ÿå·æŠ•å½±ï¼š* ä»£æ›¿ç±»å‹å‚æ•°</h3><p>åœ¨æåˆ°ç±»å‹æ£€æµ‹å’Œè½¬æ¢çš„æ—¶å€™ï¼Œæˆ‘ä»¬æåˆ°äº†ä¸€ç§ç‰¹æ®Šçš„ <strong>æ˜Ÿå·æŠ•å½±</strong> è¯­æ³•ï¼Œå¯ä»¥ç”¨å®ƒæ¥è¡¨æ˜ä½ ä¸çŸ¥é“å…³äºæ³›å‹å®å‚çš„ä»»ä½•ä¿¡æ¯ã€‚</p><p>List&lt;*&gt;è¡¨ç¤ºä¸ºä¸€ä¸ªæœªçŸ¥ç±»å‹çš„å…ƒç´ çš„åˆ—è¡¨ç”¨è¿™ç§è¯­æ³•è¡¨ç¤ºã€‚</p><p><strong>æ˜Ÿå·æŠ•å½±çš„å«ä¹‰</strong></p><p>é¦–å…ˆ ï¼Œ<strong>éœ€è¦æ³¨æ„çš„æ˜¯MutableList&lt;*&gt;å’ŒMutableList&lt;Any?&gt;ä¸ä¸€æ ·ï¼ˆè¿™é‡ŒMutableList<T>åœ¨Tä¸Šæ˜¯ä¸å˜å‹çš„ã€‚ï¼‰</strong>ã€‚ä½ ç¡®ä¿¡MutableList&lt;Any?&gt;è¿™ç§åˆ—è¡¨åŒ…å«çš„æ˜¯ <strong>ä»»æ„ç±»å‹çš„å…ƒç´ ã€‚</strong>å¦ä¸€æ–¹é¢ï¼ŒMutableList&lt; * &gt;æ˜¯åŒ…å«æŸç§ <strong>ç‰¹å®šç±»å‹çš„å…ƒç´ çš„åˆ—è¡¨</strong>ï¼Œä½†æ˜¯ä½ ä¸çŸ¥é“æ˜¯é‚£ä¸ªç±»å‹ã€‚è¿™ç§åˆ—è¡¨è¢«åˆ›å»ºæˆä¸€ä¸ª <strong>åŒ…å«æŸç§ç‰¹å®šç±»å‹å…ƒç´ çš„åˆ—è¡¨</strong>ï¼Œ æ¯”å¦‚Stringï¼ˆä½ æ— æ³•åˆ›å»ºä¸€ä¸ªArrayList&lt; * &gt;),è€Œä¸”åˆ›å»ºå®ƒçš„ä»£ç æœŸæœ›åªåŒ…å«ç‰¹å®šé‚£ç§ç±»å‹çš„å…ƒç´ ã€‚å› ä¸ºä¸çŸ¥é“æ˜¯é‚£ç§ç±»å‹ï¼Œä½ ä¸èƒ½å‘åˆ—è¡¨ä¸­å†™å…¥ä»»ä½•ä¸œè¥¿ï¼Œå› ä¸ºä½ å†™å…¥çš„ä»»ä½•å€¼éƒ½å¯èƒ½ä¼šè¿åè°ƒç”¨ä»£ç çš„æœŸæœ›ã€‚ä½†æ˜¯ä»åˆ—è¡¨ä¸­ <strong>è¯»å–å…ƒç´ æ˜¯å¯è¡Œçš„ï¼Œ</strong> <strong>æ‰€æœ‰å­˜å‚¨åœ¨åˆ—è¡¨ä¸­çš„å€¼éƒ½èƒ½åŒ¹é…æ‰€æœ‰Kotlinç±»å‹çš„è¶…ç±»å‹Any?</strong></p><pre><code class="kotlin">&gt;&gt;&gt; val list: MutableList&lt;Any?&gt;=mutableListOf(&#39;a&#39;, 1, &#39;qwe&#39;)&gt;&gt;&gt; val chars = mutableListOf(&#39;a&#39;, &#39;b&#39;, c)&gt;&gt;&gt; val unknownElements: MutableLIst&lt;*&gt; = // MutableList&lt;*&gt;å’ŒMutableList&lt;Any?&gt;ä¸ä¸€æ ·ã€‚    if (Random().nextBoolean())        list    else        chars&gt;&gt;&gt; unknownElements.add(42) //ç¼–è¯‘å™¨ç¦æ­¢è°ƒç”¨è¿™ä¸ªæ–¹æ³•Error: Out-projected type &#39;MutableList&lt;*&gt;&#39; prohibits the use of &#39;fun add(element:E): Boolean&#39;&gt;&gt;&gt; println(unknownElements.first())    // è¯»å–å…ƒç´ æ˜¯å®‰å…¨çš„ï¼šfirst.(ï¼‰è¿”å›ä¸€ä¸ªç±»å‹ä¸ºAny?çš„å…ƒç´ ã€‚3</code></pre><p>ä¸ºä»€ä¹ˆç¼–è¯‘å™¨ä¼šæŠŠ MutableList&lt; * &gt; <strong>å½“æˆoutæŠ•å½±çš„ç±»å‹ï¼Ÿï¼ˆout-projectedï¼‰</strong>ã€‚ åœ¨è¿™ä¸ªä¾‹å­çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œ <strong>MutableList&lt;  *  &gt;æŠ•å½±æˆäº†MutableList&lt;Any?&gt;:</strong> å½“ä½ æ²¡æœ‰ä»»ä½•å…ƒç´ ç±»å‹ä¿¡æ¯çš„æ—¶å€™ï¼Œè¯»å–Any?ç±»å‹çš„å…ƒç´ ä»ç„¶æ˜¯å®‰å…¨çš„ï¼Œ <strong>ä½†æ˜¯å‘åˆ—è¡¨ä¸­å†™å…¥å…ƒç´ æ˜¯ä¸å®‰å…¨çš„ã€‚</strong></p><blockquote><p><strong>æ³¨æ„ï¼š</strong></p><p>å¯¹äºConsumber<in T> è¿™æ ·çš„é€†å˜ç±»å‹å‚æ•°æ¥è¯´ï¼Œæ˜Ÿå·æŠ•å½±ç­‰ä»·äº<in Nothing>ã€‚å®é™…ä¸Šè¿™ç§æ˜Ÿå·æŠ•å½±æ— æ³•è°ƒç”¨ä»»ä½•ç­¾æ˜ä¸­æœ‰Tçš„æ–¹æ³•ã€‚å¦‚æœç±»å‹å‚æ•°æ˜¯é€†å˜çš„ï¼Œå®ƒå°±åªèƒ½è¡¨ç°ä¸ºä¸€ä¸ªæ¶ˆè´¹è€…ï¼Œä½ ä¸çŸ¥é“å®ƒæ¶ˆè´¹çš„åˆ°åº•æ˜¯ä»€ä¹ˆã€‚</p></blockquote><p><strong>åœºæ™¯</strong></p><blockquote><p>å½“ç±»å‹å®å‚çš„ä¿¡æ¯å¹¶ä¸é‡è¦çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨æ˜Ÿå·æŠ•å½±çš„è¯­æ³•ï¼šä¸éœ€è¦ä½¿ç”¨ä»»ä½•åœ¨ç­¾åä¸­å¼•ç”¨ç±»å‹å‚æ•°çš„æ–¹æ³•ï¼Œæˆ–è€…åªæ˜¯è¯»å–æ•°æ®è€Œä¸å…³å¿ƒå®ƒçš„å…·ä½“ç±»å‹ã€‚åˆ—å…¥ï¼Œå¯ä»¥å®ç°ä¸€ä¸ªæ¥æ”¶List&lt;*&gt;åšå‚æ•°çš„printFirstå‡½æ•°ï¼š</p><pre><code class="kotlin">fun printFirst(list: List&lt;*&gt;) {   // æ¯ä¸€ç§åˆ—è¡¨éƒ½å¯èƒ½æ˜¯å®å‚ã€‚    if (list.isNotEmpty()) {  // isNotEmpty()æ²¡æœ‰ä½¿ç”¨æ³›å‹ç±»å‹å‚æ•°        println(list.first())   // fist()ç°åœ¨è¿”å›çš„æ˜¯Any?,ä½†åœ¨è¿™é‡Œè¶³å¤Ÿäº†    }}&gt;&gt;&gt; printFirst(listOf(&#39;Svetlana&#39;,&#39;Dmitry&#39;))Svetlana</code></pre><p>ä½¿ç”¨ç‚¹å˜å‹çš„æƒ…å†µä¸‹ï¼Œæœ‰ä¸€ä¸ªä»£æ›¿æ–¹æ¡ˆâ€“å¼•å…¥ä¸€ä¸ªæ³›å‹ç±»å‹å‚æ•°ï¼š</p><pre><code class="kotlin">fun &lt;T&gt; printlnFirst(list: List&lt;T&gt;) { // æ¯ä¸€ç§åˆ—è¡¨éƒ½æ˜¯å¯èƒ½çš„å®å‚    if (list.isNotEmpty()) {        println(list.first())   //first()ç°åœ¨è¿”å›çš„æ˜¯Tçš„å€¼ã€‚    }}</code></pre><p>æ˜Ÿå·æŠ•å½±çš„è¯­æ³•å¾ˆç®€æ´ï¼Œä½†åªèƒ½ç”¨åœ¨å¯¹æ³›å‹ç±»å‹å®å‚çš„ç¡®åˆ‡å€¼ä¸æ„Ÿå…´è¶£çš„åœ°æ–¹ï¼šåªæ˜¯ä½¿ç”¨ç”Ÿäº§å€¼çš„æ–¹æ³•ï¼Œè€Œä¸”ä¸å…³å¿ƒé‚£äº›å€¼çš„ç±»å‹ã€‚</p></blockquote><p><strong>åœºæ™¯</strong></p><blockquote><p>å¦ä¸€ä¸ªä½¿ç”¨æ˜Ÿå·æŠ•å½±çš„æ—¥å­ï¼Œä»¥åŠä½¿ç”¨è¿™ç§æ–¹æ³•æ—¶ä¼šå›°æ‰°ä½ çš„é™·é˜±ã€‚</p><p>å‡å¦‚ä½ éœ€è¦éªŒè¯ç”¨æˆ·çš„è¾“å…¥ï¼Œå¹¶å£°æ˜ä¸€ä¸ªæ¥å£FieldValidatorã€‚å®ƒåªåŒ…å«åœ¨inä½ç½®çš„ç±»å‹å‚æ•°ï¼Œæ‰€ä»¥å£°æ˜æˆäº†é€†å˜çš„ã€‚äº‹å®ä¸Šï¼Œå½“æœŸæœ›çš„æ˜¯å­—ç¬¦ä¸²éªŒè¯å™¨æ—¶ä½¿ç”¨å¯éªŒè¯ä»»æ„å…ƒç´ çš„éªŒè¯å™¨ä¹Ÿæ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼ˆè¿™å°±æ˜¯å£°æ˜æˆé€†å˜å¸¦æ¥çš„æ•ˆæœï¼‰ã€‚åŒæ—¶è¿˜å£°æ˜äº†ä¸¤ä¸ªéªŒè¯å™¨æ¥åˆ†åˆ«å¤„ç†Stringå’ŒIntã€‚</p><pre><code class="kotlin">/*     9.18 è¾“å…¥éªŒè¯çš„æ¥å£ */interface FieldValidator(in T) { //æ¥å£å®šä¹‰æˆ åœ¨ T ä¸Šçš„é€†å˜ã€‚fun validete(input: T): Boolean   // Tåªåœ¨â€œin&quot;ä½ç½®ä½¿ç”¨ï¼ˆè¿™ä¸ªæ–¹æ³•åªæ¶ˆè´¹Tçš„å€¼ï¼‰ã€‚}object DefaultStringValidator : FieldValidator&lt;String&gt; {override fun validate(input: String) = input.isNotEmpty()}object DefaultIntValidator : FieldValidator&lt;Int&gt; {override fun validate(input: int) = input &gt;= 0}</code></pre><p>ç°åœ¨å‡è®¾ä½ æƒ³è¦æŠŠæ‰€æœ‰çš„éªŒè¯å™¨éƒ½å­˜å‚¨åˆ°åŒä¸€ä¸ªå®¹å™¨ä¸­ï¼Œå¹¶æ ¹æ®è¾“å…¥çš„ç±»å‹æ¥é€‰å‡ºæ­£ç¡®çš„éªŒè¯å™¨ã€‚é¦–å…ˆä¼šç”¨åˆ°mapæ¥å­˜å‚¨å®ƒä»¬ã€‚ä½ å­˜å‚¨çš„æ˜¯ä»»æ„ç±»å‹çš„éªŒè¯å™¨ï¼Œæ‰€ä»¥ä½ å£°æ˜äº†KClassï¼ˆä»£è¡¨ä¸€ä¸ªKotlinç±»ï¼Œ10ç« ä¼šè¯¦ç»†ä»‹ç»KClassï¼‰åˆ°FiledValidator&lt;*&gt;ï¼ˆå¯ä»¥æŒ‡å‘ä»»æ„ç±»å‹çš„éªŒè¯å™¨ï¼‰çš„mapï¼š</p><pre><code class="kotlin">&gt;&gt;&gt; validators = mutableMapOf&lt;KClass&lt;*&gt;ï¼ŒFieldValidator&lt;*&gt;&gt;() //key ,value&gt;&gt;&gt; validators[String::class] = DefaultStringValidator&gt;&gt;&gt; validators[Int::class] = DefaultIntValidator</code></pre><p>å¦‚æœä½ è¿™æ ·åšäº†ï¼Œå°è¯•ä½¿ç”¨éªŒè¯å™¨çš„æ—¶å€™å°±ä¼šé‡åˆ°å›°éš¾ã€‚ä¸èƒ½ç”¨ç±»å‹ä¸ºFieldValidator&lt;*&gt;çš„éªŒè¯å™¨æ¥éªŒè¯å­—ç¬¦ä¸²ã€‚è¿™æ˜¯ä¸å®‰å…¨çš„ï¼Œå› ä¸ºç¼–è¯‘å™¨ä¸çŸ¥é“å®ƒæ˜¯é‚£ç§éªŒè¯å™¨ï¼š</p><pre><code class="kotlin">&gt;&gt;&gt; validators[String::class]!!.validate(&quot;&quot;)    //å­˜å‚¨åœ¨mapä¸­çš„å€¼çš„ç±»å‹æ˜¯FieldValidator&lt;*&gt;ã€‚Error:Out-projected type &#39;FieldValidator&lt;*&gt;&#39; prohibits the use of &#39;fun validate(intput: T):Boolean&#39;</code></pre><p>ï¼ˆå†™å…¥æ—¶ä¼šæŠ¥é”™ï¼‰åœ¨å‰é¢å°è¯•å‘MutableList&lt;<em>&gt;ä¸­å†™å…¥å…ƒç´ çš„æ—¶å€™ï¼Œä½ å·²ç»è§è¿‡è¿™ç§é”™è¯¯äº†ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œè¿™ä¸ªé”™è¯¯çš„æ„æ€æ˜¯æŠŠå…·ä½“ç±»å‹çš„å€¼ä¼ ç»™æœªçŸ¥ç±»å‹çš„éªŒè¯å™¨æ˜¯å¦å®‰å…¨çš„ã€‚*</em>ä¸€ç§ä¿®æ­£æ–¹æ³•æ˜¯æŠŠéªŒè¯å™¨æ˜¾å¼åœ°è½¬æ¢æˆéœ€è¦çš„ç±»å‹ã€‚<strong>è¿™æ ·åšæ˜¯ä¸å®‰å…¨çš„ï¼Œä¹Ÿæ˜¯ä¸æ¨èçš„ã€‚</strong>ä½†æˆ‘ä»¬è¿˜æ˜¯æŠŠä»–ä½œä¸ºè®©ä»£ç å¿«é€Ÿé€šè¿‡ç¼–è¯‘çš„æŠ€å·§å±•ç¤ºåœ¨è¿™é‡Œï¼Œè¿™æ ·å¯ä»¥åœ¨åé¢é‡æ„å®ƒã€‚**</p><pre><code class="kotlin">/*    9.19 ä½¿ç”¨æ˜¾å¼çš„è½¬æ¢è·å–éªŒè¯å™¨    */&gt;&gt;&gt; val stringValidator = validators[String::class] as FieldValidator&lt;String&gt;   //è­¦å‘Šæœªå—æ£€çš„è½¬æ¢&gt;&gt;&gt; println(stringValidator.validate(&quot;&quot;))false</code></pre><p>ç¼–è¯‘å™¨å‘å‡ºäº†æœªå—æ£€è½¬æ¢çš„è­¦å‘Šã€‚æ³¨æ„ï¼Œå°½ç®¡å¦‚æ­¤ï¼Œè¿™æ®µä»£ç åªæœ‰åœ¨éªŒè¯æ—¶å¯ä»¥å¤±è´¥ï¼Œè€Œä¸æ˜¯åœ¨è½¬æ¢æ—¶ï¼Œå› ä¸ºè¿è¡Œæ—¶æ‰€æœ‰çš„æ³›å‹ä¿¡æ¯éƒ½è¢«æ“¦é™¤äº†ã€‚</p><pre><code class="kotlin">/*   9.20 é”™è¯¯çš„è·å–éªŒè¯å™¨   */&gt;&gt;&gt; val stringValidator = validators[Int::class]// å¾—åˆ°ä¸€ä¸ªé”™è¯¯çš„éªŒè¯å™¨ï¼ˆå¯èƒ½ä¸ºä¸å°å¿ƒ0ï¼Œä½†ä»£ç å¯ä»¥ç¼–è¯‘ã€‚(è·å–ä¸€ä¸ªIntå¼ºåˆ¶è½¬æ¢ä¸ºString)        as FieldValidator&lt;String&gt;  // ä»…ä»…ä¸€ä¸ªè­¦å‘Š&gt;&gt;&gt; stringValidator.validate(&quot;&quot;)    //ç›´åˆ°ä½¿ç”¨éªŒè¯å™¨æ‰å‘ç°é”™è¯¯ã€‚java.lang.ClassCastException:java.lang.String cannot be cast to java.lang.Number at DefaultIntValidator.validate</code></pre><p>è¿™ä¸¤æ®µä»£ç åœ¨ä¸¤ç§æƒ…æ™¯ä¸‹æ˜¯ç›¸ä¼¼çš„ï¼Œéƒ½åªä¼šå‘å‡ºè­¦å‘Šã€‚è¿™äº›å¼ºåˆ¶è½¬æ¢å¯¼è‡´ç±»å‹ä¸å®‰å…¨ï¼Œä¹Ÿå®¹æ˜“å‡ºé”™ã€‚å¦‚æœæƒ³è¦æŠŠä¸åŒç±»å‹çš„éªŒè¯å™¨å­˜å‚¨åœ¨åŒä¸€ä¸ªåœ°æ–¹ï¼Œæˆ‘ä»¬è¦ç ”ç©¶ä¸€ä¸‹å…¶ä»–çš„é€‰æ‹©ã€‚</p></blockquote><p>ä»£ç  9.21 ä¸­ä½¿ç”¨è§£å†³æ–¹æ³• map validatorsï¼Œ<strong>ä½†æ˜¯æŠŠæ‰€æœ‰å¯¹å®ƒçš„è®¿é—®å°è£…åˆ°äº†ä¸¤ä¸ªæ³›å‹æ–¹æ³•ä¸­ï¼Œå®ƒä»¬è´Ÿè´£ä¿è¯åªæœ‰æ­£ç¡®çš„éªŒè¯å™¨è¢«æ³¨å†Œå’Œè¿”å›ã€‚</strong>è¿™æ®µä»£ç ä¾ç„¶ä¼šå‘å‡ºæœªå—æ¡è½¬æ¢çš„è­¦å‘Šï¼ˆè¿™ä¹‹å‰çš„ä¸€æ ·ï¼‰ï¼Œä½†è¿™é‡Œçš„Validatorså¯¹è±¡æ§åˆ¶äº†æ‰€æœ‰å¯¹mapçš„è®¿é—®ï¼Œä¿è¯äº†æ²¡æœ‰ä»»ä½•äººä¼šé”™è¯¯çš„æ”¹å˜mapã€‚</p><pre><code class="kotlin">/*  9.21 å°è£…å¯¹éªŒè¯å™¨é›†åˆçš„è®¿é—®  */object Validators {    private val validators = = mutableMapOf&lt;KClass&lt;*&gt;, FieldValidator&lt;*&gt;&gt;()  //ä½¿ç”¨å’Œä¹‹å‰ä¸€æ ·çš„mapï¼Œä½†ç°åœ¨æ— æ³•åœ¨å¤–éƒ¨è®¿é—®ä»–    fun &lt;T : Any&gt; registerValidator(        kCLass: KClass&lt;T&gt;, fieldValidator: FieldValidator&lt;T&gt;    ) {        validators[kClass] = fieldValidator // åªæœ‰æ­£ç¡®çš„é”®å€¼å¯¹è¢«å†™å…¥mapï¼Œå³ä½†éªŒè¯å™¨æ­£å¥½å¯¹åº”åˆ°ç±»çš„æ—¶å€™ã€‚    }    @Suppress(&quot;UNCHECKED_CAST&quot;) // ç¦æ­¢å…³äºæœªå—æ£€çš„è½¬æ¢åˆ°FieldValidator&lt;T&gt; çš„è­¦å‘Š    operator fun &lt;T : Any&gt; get(kClass: KClass&lt;T&gt;): FieldValidator&lt;T&gt; =    validators[kCLass] as? FieldValidator&lt;T&gt; ?: throw IllegalArgumentException(    &quot;No validator for ${kClass.simpleName}&quot;    )}&gt;&gt;&gt; Validators.registerValidator(String::class, DefaultStringValidator)&gt;&gt;&gt; Validators.registerValidator(Int::class,DefaultIntValidator)&gt;&gt;&gt; println(Validators[String::class].validate(&quot;Kotlin&quot;))true&gt;&gt;&gt; println(Validators[Int::class].validate(42))true</code></pre><p>ä½ æ‹¥æœ‰äº†ä¸€ä¸ªç±»ä¼¼å®‰å…¨çš„APIã€‚æ‰€æœ‰ä¸å®‰å…¨çš„é€»è¾‘éƒ½è¢«éšè—åœ¨ç±»çš„ä¸»ä½“ä¸­ï¼Œé€šè¿‡æŠŠè¿™äº›é€»è¾‘å±€éƒ¨åŒ–ï¼Œä¿è¯äº†å®ƒä¸ä¼šè¢«é”™è¯¯çš„ä½¿ç”¨ã€‚ç¼–è¯‘å™¨ç¦æ­¢ä½¿ç”¨é”™è¯¯çš„éªŒè¯å™¨ï¼Œå› ä¸ºValidatoså¯¹è±¡å§‹ç»ˆéƒ½ä¼šç»™å‡ºæ­£ç¡®çš„éªŒè¯å™¨å®ç°ã€‚</p><pre><code class="kotlin">&gt;&gt;&gt; println(Validators[String::class].validate(42))Error:The integer literal does not conform to the expected type String</code></pre><p>é€šè¿‡å°è£…éªŒè¯å™¨é›†åˆçš„æ¨¡å¼å¯ä»¥è½»æ¾çš„æ¨å¹¿åˆ°ä»»æ„è‡ªå®šä¹‰æ³›å‹ç±»çš„å­˜å‚¨ã€‚æŠŠä¸å®‰å…¨çš„ä»£ç å±€éƒ¨åŒ–åˆ°ä¸€ä¸ªåˆ†å¼€çš„ä½ç½®é¢„é˜²äº†è¯¯ç”¨ï¼Œè€Œä¸”è®©å®¹å™¨çš„ä½¿ç”¨å˜çš„å®‰å…¨ã€‚è¿™ä¸ªæ¨¡å¼å¹¶ä¸æ˜¯åªé’ˆå¯¹Kotlinï¼ŒJavaä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨åŒæ ·çš„æ–¹æ³•ã€‚</p><h2 id="9-4-å°ç»“"><a href="#9-4-å°ç»“" class="headerlink" title="9.4 å°ç»“"></a>9.4 å°ç»“</h2><ul><li>Kotlinçš„æ³›å‹åŒJavaçš„æ³›å‹æ¥è¿‘å®ƒä»¬ä½¿ç”¨åŒæ ·çš„æ–¹å¼å£°æ˜æ³›å‹å‡½æ•°å’Œæ³›å‹ç±»ã€‚</li><li>åŒJavaä¸€æ ·ï¼Œæ³›å‹ç±»å‹çš„ç±»å‹å®å‚åªåœ¨ç¼–è¯‘å™¨å­˜åœ¨ã€‚</li><li>ä¸èƒ½æŠŠå¸¦ç±»å‹å®å‚çš„ç±»å‹å’Œisè¿ç®—ç¬¦ä¸€èµ·ä½¿ç”¨ï¼Œå› ä¸ºç±»å‹å®å‚åœ¨è¿è¡Œæ—¶ä¸è¢«æ“¦é™¤ã€‚</li><li>å†…è”å‡½æ•°çš„ç±»å‹å‚æ•°å¯ä»¥æ ‡è®°æˆå®åŒ–çš„ï¼Œå…è®¸ä½ åœ¨è¿è¡Œæ—¶å¯¹å®ƒä»¬ä½¿ç”¨isæ£€æŸ¥ï¼Œä»¥åŠè·å¾—java.lang.Classå®ä¾‹</li><li>å˜å‹æ˜¯ä¸€ç§è¯´æ˜ä¸¤ç§æ‹¥æœ‰ç›¸åŒåŸºç¡€ç±»å‹å’Œä¸åŒç±»å‹å‚æ•°çš„æ³›å‹ç±»å‹ä¹‹é—´å­ç±»å‹åŒ–å…³ç³»çš„æ–¹å¼ï¼Œ<strong>å®ƒè¯´æ˜äº†å¦‚æœå…¶ä¸­ä¸€ä¸ªæ³›å‹ç±»å‹çš„ç±»å‹å‚æ•°æ˜¯å¦ä¸€ä¸ªçš„ç±»å‹å‚æ•°çš„å­ç±»å‹ï¼Œè¿™ä¸ªæ³›å‹ç±»å‹å°±æ˜¯å¦å¤–ä¸€ä¸ªæ³›å‹ç±»å‹çš„å­ç±»å‹æˆ–è€…è¶…ç±»å‹ã€‚</strong></li><li>å£°æ˜ä¸€ä¸ªç±»åœ¨æŸä¸ªç±»å‹ä¸Šæ˜¯åå˜çš„ï¼Œè¯¥å‚æ•°åªèƒ½ç”¨åœ¨outä½ç½®ã€‚</li><li>é€†å˜æƒ…å†µç›¸å:å¯ä»¥å£°æ˜ä¸€ä¸ªç±»åœ¨æŸä¸ªç±»å‹å‚æ•°ä¸Šæ˜¯é€†å˜çš„ï¼Œå¦‚æœè¯¥å‚æ•°åªæ˜¯ç”¨åœ¨inä½ç½®ã€‚</li><li>Kotlinä¸­åªè¯»æ¥å£Listå£°æ˜æˆäº†é€†å˜ï¼Œè¿™æ„å‘³ç€List&lt; String &gt; æ˜¯ List&lt; Any &gt;çš„å­ç±»å‹</li><li>å‡½æ•°æ¥å£å£°æ˜æˆäº†åœ¨ç¬¬ä¸€ä¸ªç±»å‹å‚æ•°ä¸Šé€†å˜è€Œåœ¨ç¬¬äºŒä¸ªæ¥å£ä¸Šåå˜ï¼Œä½¿(Animal)-&gt;Intç§°ä¸º(Cat)-&gt;Numberçš„å­ç±»å‹ã€‚</li><li>åœ¨Kotlinä¸­å³å¯ä»¥ä¸ºæ•´ä¸ªæ³›å‹ç±»æŒ‡å®šå˜å‹ï¼ˆå£°æ˜ç‚¹å˜å‹ï¼‰ï¼Œä¹Ÿå¯ä»¥ä¸ºæ³›å‹ç±»å‹ç‰¹å®šçš„ä½¿ç”¨æŒ‡å®šå˜å‹ï¼ˆä½¿ç”¨ç‚¹å˜å‹ï¼‰ã€‚</li><li>å½“ç¡®åˆ‡çš„ç±»å‹å®å‚æ˜¯æœªçŸ¥çš„æˆ–è€…ä¸é‡è¦æ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ˜Ÿå·æŠ•å½±è¯­æ³•ã€‚</li></ul><h1 id="10-æ³¨è§£å’Œåå°„"><a href="#10-æ³¨è§£å’Œåå°„" class="headerlink" title="10 æ³¨è§£å’Œåå°„"></a>10 æ³¨è§£å’Œåå°„</h1><p>è¦è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œä½ éœ€è¦çŸ¥é“å®šä¹‰åœ¨å“ªä¸ªç±»ä¸­ï¼Œè¿˜æœ‰å®ƒçš„åç§°å’Œå‚æ•°çš„ç±»å‹ã€‚ <strong>æ³¨è§£å’Œåå°„</strong>ç»™ä½ è¶…è¶Šè¿™ä¸ªè§„åˆ™çš„èƒ½åŠ›ï¼Œå¹¶è®©ä½ ç¼–å†™å‡ºä½¿ç”¨äº‹å…ˆæœªçŸ¥çš„ä»»æ„ç±»çš„ä»£ç ã€‚å¯ä»¥ä½¿ç”¨æ³¨è§£èµ‹äºˆè¿™äº›ç±»åº“ç‰¹å®šçš„è¯­ä¹‰ï¼Œè€Œåå°„å…è®¸ä½ åœ¨è¿è¡Œæ—¶åˆ†æè¿™äº›ç±»çš„ç»“æ„ã€‚</p><p>åº”ç”¨æ³¨è§£éå¸¸ç›´æ¥äº†å½“ã€‚ä½†ç¼–å†™ä½ çš„æ³¨è§£å°¤å…¶æ˜¯ç¼–å†™å¤„ç†å®ƒä»¬çš„ä»£ç ï¼Œå°±æ²¡æœ‰è¿™ä¹ˆç®€å•äº†ã€‚ä½¿ç”¨æ³¨è§£çš„è¯­æ³•é±¼Javaå®Œå…¨ç›¸åŒï¼Œè€Œå£°æ˜è‡ªå·±æ³¨è§£ç±»çš„è¯­æ³•å´ç•¥æœ‰ä¸åŒã€‚  åå°„APIçš„å¤§ä½“ç»“æ„ä¸Javaç›¸ä»¿ï¼Œä½†ç»†èŠ‚å­˜åœ¨å·®å¼‚ã€‚</p><p><strong>ä½œä¸ºæ³¨è§£å’Œåå°„ç”¨æ³•çš„æ¼”ç¤ºï¼Œæˆ‘ä»¬å°†ä¼šå¸¦ä½ æµè§ˆä¸€ä¸ªçœŸå®é¡¹ç›®çš„å®ç°ï¼šä¸€ä¸ªå«åšJKidçš„åº“ï¼Œç”¨æ¥åºåˆ—åŒ–å’Œååºåˆ—åŒ–JSONã€‚è¿™ä¸ªåº“åœ¨è¿è¡Œæ—¶ç”¨åå°„è®¿é—®ä»»æ„çš„Kotlinå¯¹è±¡ï¼ŒåŒæ—¶è¿˜æ ¹æ®JSONæ–‡ä»¶ä¸­æä¾›çš„æ•°æ®åˆ›å»ºå¯¹è±¡ã€‚æ³¨è§£åˆ™å¯ä»¥è®©ä½ å®šåˆ¶å…·ä½“çš„ç±»å’Œå±æ€§æ˜¯å¦‚ä½•è¢«è¿™ä¸ªåº“åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„ã€‚</strong></p><h2 id="10-1-å£°æ˜å¹¶åº”ç”¨æ³¨è§£"><a href="#10-1-å£°æ˜å¹¶åº”ç”¨æ³¨è§£" class="headerlink" title="10.1 å£°æ˜å¹¶åº”ç”¨æ³¨è§£"></a>10.1 å£°æ˜å¹¶åº”ç”¨æ³¨è§£</h2><p>Kotlin ä¸­çš„æ ¸å¿ƒæ¦‚å¿µæ˜¯ä¸€æ ·çš„ã€‚ä¸€ä¸ªæ³¨è§£å…è®¸ä½ æŠŠé¢å¤–çš„å…ƒæ•°æ®å…³è”åˆ°ä¸€ä¸ªå£°æ˜ä¸Šã€‚ç„¶åå…ƒæ•°æ®å°±å¯ä»¥è¢«ç›¸å…³çš„æºä»£ç å·¥å…·è®¿é—®ï¼ŒåŒä¸ªç¼–è¯‘å¥½çš„ç±»æ–‡ä»¶æˆ–æ˜¯åœ¨è¿è¡Œæ—¶ï¼Œå–å†³äºè¿™ä¸ªæ³¨è§£æ˜¯å¦‚ä½•é…ç½®çš„ã€‚</p><h3 id="10-1-1-åº”ç”¨æ³¨è§£"><a href="#10-1-1-åº”ç”¨æ³¨è§£" class="headerlink" title="10.1.1 åº”ç”¨æ³¨è§£"></a>10.1.1 åº”ç”¨æ³¨è§£</h3><p>â€‹        åœ¨Kotlinä¸­ä½¿ç”¨æ³¨è§£çš„æ–¹æ³•å’ŒJavaä¸­ä¸€æ ·ã€‚è¦åº”ç”¨ä¸€ä¸ªæ³¨è§£ï¼Œä»¥@å­—ç¬¦ä½œä¸ºï¼ˆæ³¨è§£ï¼‰åå­—çš„å‰æˆ³ï¼Œå¹¶æ”¾åœ¨è¦æ³¨è§£çš„å£°æ˜æœ€å‰é¢ã€‚å¯ä»¥æ³¨è§£ä¸åŒçš„ä»£ç å…ƒç´ ï¼Œæ¯”å¦‚å‡½æ•°å’Œç±»ã€‚</p><p>â€‹        ä¾‹å¦‚ï¼Œä½¿ç”¨æ¡†æ¶JUnitï¼ˆ<a href="http://junit.org/junit4)ï¼Œå¯ä»¥ç”¨@Testæ ‡è®°ä¸€ä¸ªæµ‹è¯•æ–¹æ³•ï¼š" target="_blank" rel="noopener">http://junit.org/junit4)ï¼Œå¯ä»¥ç”¨@Testæ ‡è®°ä¸€ä¸ªæµ‹è¯•æ–¹æ³•ï¼š</a></p><pre><code class="kotlin">import org.junit.*class MyTest {    @Test    fun testTrue() {    //@Testæ³¨è§£æŒ‡å¼•Junitæ¡†æ¶æŠŠè¿™ä¸ªæ–¹æ³•å½“æµ‹è¯•è°ƒç”¨        Assert.assertTrue(true)    }}</code></pre><p>å¦ä¸€ä¸ªæ›´æœ‰è¶£çš„ä¾‹å­ï¼š@Deprecatedæ³¨è§£ã€‚å®ƒåœ¨Kotlinæ€»çš„å«ä¹‰ä¸javaä¸€æ ·ï¼ˆ@Deprecated æ³¨è§£å«ä¹‰ï¼šæ„æ€ä¸ºæ­¤æ–¹æ³•å·²è¿‡æ—¶ï¼Œå› ä¸ºæœ‰äº†æ–°çš„APIä»£æ›¿å®ƒã€‚ï¼‰ä½†æ˜¯Kotlinç”¨replaceWithå‚æ•°å¢å¼ºäº†å®ƒï¼Œè®©ä½ å¯ä»¥æä¾› ä¸€ä¸ªæ›¿ä»£è€…çš„ï¼ˆåŒ¹é…ï¼‰æ¨¡å¼ï¼Œä»¥æ”¯æŒå¹³æ»‘çš„è¿‡æ¸¡åˆ°APIçš„æ–°ç‰ˆæœ¬ã€‚</p><p>å¦‚ä½•ç»™ä¸€ä¸ªæ³¨è§£æä¾›å®å‚ï¼ˆä¸€æ¡ ä¸æ¨èä½¿ç”¨ çš„ä¿¡æ¯å’Œä¸€ä¸ª æ›¿ä»£è€… çš„æ¨¡å¼ï¼š</p><pre><code class="kotlin">@Deprecated(&quot;Use removeAt(index) instead.&quot;,RepalceWith(&quot;removeAt(Index)&quot;))fun remove(index:Int){ ... }</code></pre><p>å®å‚åœ¨æ‹¬å·ä¸­ä¼ é€’ï¼Œå°±å’Œå¸¸è§„å‡½æ•°çš„è°ƒç”¨ä¸€æ ·ã€‚ç”¨äº†è¿™ä¸ªå£°æ˜ä¹‹åï¼Œå¦‚æœæœ‰äººä½¿ç”¨äº†removeå‡½æ•°ï¼ŒIntelliJ IDEA ä¸ä»…ä¼šæç¤ºåº”è¯¥ä½¿ç”¨å“ªä¸ªå‡½æ•°æ¥ä½¿ç”¨å®ƒï¼ˆè¿™ä¸ªä¾‹å­ä¸­removeAtï¼‰ï¼Œè¿˜ä¼šæä¾›ä¸€ä¸ªè‡ªåŠ¨çš„å¿«é€Ÿä¿®æ­£ã€‚</p><p>æ³¨è§£åªèƒ½æ‹¥æœ‰å¦‚ä¸‹ç±»å‹çš„å‚æ•°ï¼šåŸºæœ¬æ•°æ®ç±»å‹ã€å­—ç¬¦ä¸²ã€æšä¸¾ã€ç±»å¼•ç”¨ã€å…¶ä»–çš„æ³¨è§£ç±»ï¼Œä»¥åŠå‰é¢è¿™äº›ç±»å‹çš„æ•°ç»„ã€‚æŒ‡å®šæ³¨è§£çš„å®å‚ä¸Javaæœ‰å¾®å°å·®åˆ«ï¼š</p><ul><li>è¦æŠŠä¸€ä¸ªç±»æŒ‡å®šä¸ºæ³¨è§£å®å‚ï¼Œåœ¨ç±»åååŠ ä¸Š ::class :@MyAnnotation(MyClass::class) ã€‚</li><li>è¦æŠŠå¦ä¸€ä¸ªæ³¨è§£æŒ‡å®šä¸ºä¸€ä¸ªå®å‚ï¼Œå»æ‰æ³¨è§£åç§°å‰çš„@ã€‚ä¾‹å¦‚ï¼Œå‰é¢ä¾‹å­ä¸­çš„ReplaceWithæ˜¯ä¸€ä¸ªæ³¨è§£ï¼Œä½†æ˜¯ä½ æŠŠå®ƒæŒ‡å®šä¸ºDeprecatedæ³¨è§£çš„å®å‚æ—¶æ²¡æœ‰ç”¨@ã€‚</li><li>è¦æŠŠä¸€ä¸ªæ•°ç»„æŒ‡å®šä¸ºä¸€ä¸ªå®å‚ï¼Œä½¿ç”¨arrayOfå‡½æ•°ï¼š@RequestMappingï¼ˆpath=arrayOf(â€œ/fooâ€,â€/barâ€))ã€‚å¦‚æœæ³¨è§£ç±»æ˜¯åœ¨Javaä¸­å£°æ˜çš„ï¼Œå‘½åä¸ºvalueçš„å½¢å‚æŒ‰éœ€è‡ªåŠ¨åœ°è¢«è½¬æ¢æˆå¯å˜é•¿åº¦çš„å½¢å‚ï¼Œæ‰€ä»¥ä¸ç”¨arrayOfå‡½æ•°å°±å¯ä»¥æä¾›å¤šä¸ªå®å‚ã€‚</li></ul><p><strong>æ³¨è§£å®å‚</strong>éœ€è¦åœ¨ç¼–è¯‘æœŸå°±æ˜¯å·²çŸ¥çš„ï¼Œæ‰€ä»¥ä½ ä¸èƒ½å¼•ç”¨ä»»æ„çš„å±æ€§ä½œä¸ºå®å‚ã€‚è¦æŠŠå±æ€§å½“ä½œæ³¨è§£å®å‚ä½¿ç”¨ï¼Œä½ éœ€è¦ç”¨constä¿®é¥°ç¬¦æ ‡è®°å®ƒï¼Œæ¥å‘ŠçŸ¥ç¼–è¯‘å™¨è¿™ä¸ªå±æ€§æ˜¯ <strong>ç¼–è¯‘æœŸå¸¸é‡</strong>ã€‚</p><p>ä¸‹é¢ä¸€ä¸ªJUnit@Testæ³¨è§£çš„ä¾‹å­ï¼Œä½¿ç”¨timeoutå‚æ•°æµ‹è¯•è¶…æ—¶æ—¶é•¿ï¼Œå•ä½ä¸ºæ¯«ç§’ï¼š</p><pre><code class="kotlin">const val TEST_TIMEOUT = 100L@Test(timeout = TEST_TIMEOUT) fun testMethod(){    ...    }</code></pre><p>åœ¨ä½¿ç”¨constæ ‡æ³¨çš„å±æ€§å¯ä»¥å£°æ˜åœ¨ä¸€ä¸ªæ–‡ä»¶çš„é¡¶å±‚æˆ–è€…ä¸€ä¸ªobjectä¹‹ä¸­ï¼Œ<strong>è€Œå´å¿…é¡»åˆå§‹åŒ–ä¸ºåŸºæœ¬æ•°æ®ç±»å‹æˆ–è€…Stringç±»å‹çš„å€¼ã€‚</strong>å¦‚æœä½ å°è¯•ä½¿ç”¨æ™®é€šå±æ€§ä½œä¸ºæ³¨è§£å®å‚ï¼Œå°†ä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯â€œOnly â€˜const valâ€™ can be used in constant expressions.â€ï¼ˆåªæœ‰â€˜const valâ€™æ‰èƒ½ç”¨åœ¨å¸¸é‡è¡¨è¾¾å¼ä¸­ï¼‰ã€‚</p><h3 id="10-1-2-æ³¨è§£ç›®æ ‡"><a href="#10-1-2-æ³¨è§£ç›®æ ‡" class="headerlink" title="10.1.2 æ³¨è§£ç›®æ ‡"></a>10.1.2 æ³¨è§£ç›®æ ‡</h3><p> å¤šæ•°æƒ…å†µä¸‹ï¼ŒKotlinæºä»£ç ä¸­çš„å•ä¸ªå£°æ˜ä¼šå¯¹åº”å¤šä¸ªJavaå£°æ˜ï¼Œè€Œä¸”å®ƒä»¬æ¯ä¸ªéƒ½èƒ½æºå¸¦æ³¨è§£ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªKotlin å±æ€§å°±å¯¹åº”äº†ä¸€ä¸ªJavaå­—æ®µï¼Œgetterï¼Œä»¥åŠä¸€ä¸ªæ½œåœ¨çš„setterå’Œå®ƒçš„å‚æ•°ã€‚è€Œä¸€ä¸ªåœ¨ä¸»æ„é€ æ–¹æ³•ä¸­å£°æ˜çš„å±æ€§è¿˜å¤šæ‹¥æœ‰ä¸€ä¸ªå¯¹åº”çš„å…ƒç´ ï¼š<strong>æ„é€ æ–¹æ³•çš„å‚æ•°</strong>ã€‚å› æ­¤ï¼Œè¯´æ˜è¿™äº›å…ƒç´ ä¸­é‚£äº›éœ€è¦æ³¨è§£ååˆ†å¿…è¦ã€‚</p><p>â€‹    <strong>ä½¿ç”¨ç‚¹ç›®æ ‡å£°æ˜</strong>è¢«ç”¨æ¥è¯´æ˜è¦æ³¨è§£çš„å…ƒç´ ã€‚<strong>ä½¿ç”¨ç‚¹ç›®æ ‡è¢«æ”¾åœ¨@ç¬¦å·å’Œæ³¨è§£åç§°ä¹‹é—´ï¼Œå¹¶ç”¨å†’å·å’Œæ³¨è§£ååˆ†å¼€ã€‚ä¸‹åˆ—å•è¯getå¯¼è‡´æ³¨è§£@Ruleè¢«åº”ç”¨åˆ°äº†å±æ€§çš„getterä¸Šã€‚</strong></p><pre><code class="kotlin">@get:Rule// getï¼ˆä½¿ç”¨ç‚¹ç›®æ ‡ï¼‰ Ruleï¼ˆæ³¨è§£ç›®æ ‡ï¼‰</code></pre><p>ä¸‹é¢çœ‹ä¸€ä¸ªä½¿ç”¨è¿™ä¸ªæ³¨è§£çš„ä¾‹å­ã€‚åœ¨JUnitä¸­å¯ä»¥æŒ‡å®šä¸€ä¸ªæ¯ä¸ªæµ‹è¯•æ–¹æ³•è¢«æ‰§è¡Œä¹‹å‰éƒ½ä¼šæ‰§è¡Œçš„è§„åˆ™ã€‚ä¾‹ï¼Œæ ‡å‡†çš„TemporaryFolderè§„åˆ™ç”¨æ¥åˆ›å»ºæ–‡ä»¶å’Œæ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨æµ‹è¯•ç»“æŸååˆ é™¤å®ƒä»¬ã€‚</p><p><strong>ä½¿ç”¨ â€ä½¿ç”¨ç‚¹ç›®æ ‡å£°æ˜â€œ ä»¥åŠæ³¨æ„äº‹é¡¹ï¼</strong></p><p>è¦æŒ‡å®šä¸€ä¸ªè§„åˆ™ï¼Œ<em>åœ¨Javaä¸­éœ€è¦å£°æ˜ä¸€ä¸ªç”¨@Ruleçš„æ³¨è§£çš„publicå­—æ®µæˆ–è€…æ–¹æ³•</em>ã€‚å¦‚æœåœ¨ä½ çš„Kotlinæµ‹è¯•ç±»ä¸­åªæ˜¯ç”¨@Ruleæ³¨è§£äº†å±æ€§folderï¼ˆåŒ…å«å­—æ®µfolderï¼Ÿï¼‰ä½ ä¼šå¾—åˆ°ä¸€ä¸ªJUnitä¸€åœºï¼šâ€œThe(???)â€™folderâ€™ must be public.â€ï¼ˆ(???)â€™folderâ€™å¿…é¡»æ˜¯å…¬æœ‰çš„ã€‚ï¼‰è¿™æ˜¯å› ä¸º@Ruleè¢«åº”ç”¨åˆ°äº†å­—æ®µä¸Šï¼Œè€Œå­—æ®µæ˜¯é»˜è®¤æ˜¯ç§æœ‰çš„ã€‚è¦æŠŠå®ƒåº”ç”¨åˆ°ï¼ˆå…¬æœ‰çš„ï¼‰getterä¸Šï¼Œè¦æ˜¾å¼çš„å†™å‡ºæ¥ï¼Œ@get:Rule å¦‚ä¸‹ï¼š</p><pre><code class="kotlin">class HasTempFolder {    @get:Rule   // æ³¨è§£çš„æ˜¯getterï¼Œè€Œä¸æ˜¯å±æ€§    val folder = TemporaryFolder()    @Test    fun testUsingTempFolder() {        val createFile = folder.newFile(&quot;myfile.txt&quot;)        val createFolder = folder.newFolder(&quot;subfolder&quot;)        // ...    }}</code></pre><p>å¦‚æœä½ ä½¿ç”¨Javaä¸­å£°æ˜çš„æ³¨è§£æ¥æ³¨è§£ä¸€ä¸ªå±æ€§ï¼Œå®ƒä¼šè¢«é»˜è®¤çš„åº”ç”¨åˆ°ç›¸åº”çš„å­—æ®µä¸Šã€‚Kotlin ä¹Ÿå¯ä»¥è®©ä½ å£°æ˜è¢«ç›´æ¥å¯¹åº”åˆ°å±æ€§ä¸Šçš„æ³¨è§£ã€‚</p><p>Kotlinæ”¯æŒçš„ä½¿ç”¨ç‚¹ç›®æ ‡çš„å®Œæ•´åˆ—è¡¨å¦‚ä¸‹ï¼š</p><ul><li>propertyâ€”â€”Javaçš„æ³¨è§£ä¸èƒ½åº”ç”¨è¿™ç§ä½¿ç”¨ç‚¹ç›®æ ‡ã€‚</li><li>fieldâ€”â€”ä¸ºå±æ€§ç”Ÿæˆå­—æ®µã€‚</li><li>getâ€”â€”å±æ€§çš„getterã€‚</li><li>setâ€”â€”å±æ€§çš„setterã€‚</li><li>receiverâ€”â€”æ‰©å±•å‡½æ•°æˆ–è€…æ‰©å±•å±æ€§çš„æ¥æ”¶è€…å‚æ•°ã€‚</li><li>paramâ€”â€”æ„é€ æ–¹æ³•çš„å‚æ•°ã€‚</li><li>setparamâ€”â€”å±æ€§çš„setterçš„å‚æ•°ã€‚</li><li>delegateâ€”â€”ä¸ºå§”æ‰˜å±æ€§å­˜å‚¨å§”æ‰˜å®ä¾‹çš„å­—æ®µã€‚</li><li>fileâ€”â€”åŒ…å«åœ¨æ–‡ä»¶ä¸­å£°æ˜çš„é¡¶å±‚å‡½æ•°å’Œå±æ€§çš„ç±»ã€‚</li></ul><p>ä»»ä½•åº”ç”¨åˆ°fileç›®æ ‡çš„æ³¨è§£éƒ½å¿…é¡»æ”¾åœ¨æ–‡ä»¶çš„é¡¶å±‚ï¼Œæ”¾åœ¨packageæŒ‡ä»¤ä¹‹å‰ã€‚@JvmNameæ˜¯å¸¸è§çš„åº”ç”¨åˆ°æ–‡ä»¶çš„æ³¨è§£ä¹‹ä¸€ï¼Œå®ƒæ”¹å˜äº†å¯¹åº”ç±»çš„åç§°ã€‚</p><p>å’ŒJavaä¸ä¸€æ ·çš„æ˜¯ï¼ŒKotlinå…è®¸ä½ å¯¹ä»»æ„çš„è¡¨è¾¾å¼åº”ç”¨æ³¨è§£ï¼Œè€Œä¸ä»…ä»…æ˜¯ç±»å’Œå‡½æ•°çš„å£°æ˜ä»¥åŠç±»å‹ã€‚æœ€å¸¸è§çš„ä¾‹å­å°±æ˜¯@Suppressæ³¨è§£ï¼Œå¯ä»¥ç”¨å®ƒéåˆ¶è¢«æ³¨è§£çš„è¡¨è¾¾å¼çš„ä¸Šä¸‹æ–‡ä¸­çš„ç‰¹å®šçš„ç¼–è¯‘å™¨è­¦å‘Šã€‚ä¸‹é¢å°±æ˜¯ä¸€ä¸ªæ³¨è§£çš„å±€éƒ¨å˜é‡å£°æ˜çš„ä¾‹å­ï¼ŒæŠ‘åˆ¶äº†æœªå—æ¡è½¬æ¢çš„è­¦å‘Šï¼š</p><pre><code class="kotlin">fun test(list: List&lt;*&gt;) {    @Suppress(&quot;UNCHECKED_CAST&quot;)    val string = list as List&lt;String&gt;    // ...}</code></pre><blockquote><p><strong>ç”¨æ³¨è§£æ§åˆ¶JavaAPI</strong></p><p>Kotlin æä¾›äº†å„ç§æ³¨è§£æ¥æ§åˆ¶Kotlinç¼–å†™çš„å£°æ˜å¦‚ä½•ç¼–è¯‘æˆå­—èŠ‚ç å¹¶æš´éœ²ç»™Javaè°ƒç”¨è€…ã€‚å…¶ä¸­ä¸€äº›æ³¨è§£ä»£æ›¿äº†Javaè¯­è¨€ä¸­å¯¹åº”çš„å…³é”®å­—ï¼šæ¯”å¦‚ï¼Œæ³¨è§£@Volatileå’Œ@Strictfpç›´æ¥å……å½“äº†Javaçš„å…³é”®å­—volatileå’Œstrictfpçš„æ›¿èº«ã€‚å…¶ä»–çš„æ³¨è§£åˆ™è¢«ç”¨æ¥æ”¹å˜Kotlinå£°æ˜å¯¹Javaè°ƒç”¨è€…çš„å¯è§æ€§ï¼š</p><ul><li>@JvmNameå°†æ”¹å˜ç”±Kotlinç”Ÿæˆçš„Javaæ–¹æ³•æˆ–å­—æ®µåç§°ã€‚</li><li>@JvmStaticèƒ½è¢«ç”¨åœ¨å¯¹è±¡å£°æ˜æˆ–è€…ä¼´ç”Ÿå¯¹è±¡çš„æ–¹æ³•ä¸Šï¼ŒæŠŠå®ƒä»¬æš´éœ²æˆJavaçš„é™æ€æ–¹æ³•ã€‚</li><li>@JvmOverloadsï¼ŒæŒ‡å¯¼Kotlinç¼–è¯‘å™¨ä¸ºå¸¦é»˜è®¤å‚æ•°å€¼çš„å‡½æ•°ç”Ÿæˆå¤šä¸ªé‡è½½ï¼ˆå‡½æ•°ï¼‰ã€‚</li><li>@JvmFieldå¯ä»¥åº”ç”¨äºä¸€ä¸ªå±æ€§ï¼ŒæŠŠè¿™ä¸ªå±æ€§æš´éœ²æˆä¸€ä¸ªæ²¡æœ‰è®¿é—®å™¨çš„å…¬æœ‰Javaå­—æ®µã€‚</li></ul></blockquote><h3 id="10-1-3-ä½¿ç”¨æ³¨è§£å®šåˆ¶JSONåºåˆ—åŒ–"><a href="#10-1-3-ä½¿ç”¨æ³¨è§£å®šåˆ¶JSONåºåˆ—åŒ–" class="headerlink" title="10.1.3 ä½¿ç”¨æ³¨è§£å®šåˆ¶JSONåºåˆ—åŒ–"></a>10.1.3 ä½¿ç”¨æ³¨è§£å®šåˆ¶JSONåºåˆ—åŒ–</h3><p>æ³¨è§£çš„å…¸å‹ç”¨æ³•ä¹‹ä¸€å°±æ˜¯å®šåˆ¶åŒ–å¯¹è±¡çš„åºåˆ—åŒ–ã€‚<strong>åºåˆ—åŒ–</strong> æ˜¯ä¸€ä¸ªè¿‡ç¨‹ï¼ŒæŠŠå¯¹è±¡è½¬æ¢æˆå¯ä»¥å­˜å‚¨æˆ–è€…åœ¨ç½‘ç»œä¸Šå¯ä»¥ä¼ è¾“çš„äºŒè¿›åˆ¶æˆ–è€…æ–‡æœ¬çš„è¡¨è¾¾å¼ã€‚å®ƒçš„é€†å‘å·¥ç¨‹å¯ä»¥ <strong>ååºåˆ—åŒ–</strong> ï¼ŒæŠŠè¿™ç§è¡¨è¾¾æ³•è½¬æ¢å›å¯¹è±¡ã€‚è€Œæœ€å¸¸è§çš„ä¸€ç§ç”¨æ¥åºåˆ—åŒ–çš„æ ¼å¼è®¡ç®—JSONã€‚ æœ‰å¾ˆå¤šå¹¿æ³›ä½¿ç”¨çš„åº“å¯ä»¥æŠŠJavaå¯¹è±¡åºåˆ—åŒ–æˆJSONï¼ŒåŒ…æ‹¬Jacksonå’ŒGSONã€‚è¿™äº›å¯¹Kotlinå®Œå…¨å…¼å®¹ã€‚</p><p>å°†ä¼šè®¨è®ºä¸€ä¸ªæ»¡è¶³æ­¤ç”¨é€”çš„åä¸ºJKidçš„çº¯Kotlinåº“ã€‚å®ƒè¶³å¤Ÿå°å·§ï¼Œå¯ä»¥è½»æ¾çš„è¯»å®Œå®ƒçš„å…¨éƒ¨æºä»£ç ã€‚</p><blockquote><p><strong>JKid åº“æºä»£ç å’Œç»ƒä¹ </strong></p><p>JKid åœ°å€ï¼š<a href="https://github.com/yole/jkidã€‚è¦å­¦ä¹ åº“çš„å®ç°å’Œä¾‹å­ï¼Œåœ¨IDEä¸­æŠŠæ–‡ä»¶" target="_blank" rel="noopener">https://github.com/yole/jkidã€‚è¦å­¦ä¹ åº“çš„å®ç°å’Œä¾‹å­ï¼Œåœ¨IDEä¸­æŠŠæ–‡ä»¶</a> ch10/jkid/build.gradle ä½œä¸ºGradleé¡¹ç›®æ‰“å¼€ã€‚åœ¨é¡¹ç›®çš„ src/test/kotlin/examples ç›®å½•ä¸‹å¯ä»¥æ‰¾åˆ°è¿™äº›ä¾‹å­ã€‚å®ƒå¹¶ä¸åƒGSONæˆ–è€…Jacksoné‚£æ ·å®Œå–„çµæ´»ï¼Œä½†å®ƒçš„æ€§èƒ½è¶³å¤Ÿä½¿ç”¨ã€‚</p></blockquote><p>å…ˆä»ç®€å•çš„ä¾‹å­å¼€å§‹ï¼Œæµ‹è¯•è¿™ä¸ªåº“ï¼šåºåˆ—åŒ–å’Œååºåˆ—åŒ–ä¸€ä¸ªPersonç±»çš„å®ä¾‹ã€‚<em>æŠŠå®ä¾‹ä¼ é€’ç»™serializeå‡½æ•°ï¼Œç„¶åå®ƒå°±ä¼šè¿”å›ä¸€ä¸ªåŒ…å«è¯¥å®ä¾‹JSONè¡¨ç¤ºæ³•çš„å­—ç¬¦ä¸²ï¼š</em></p><pre><code class="kotlin">data class Person(val name:String,val age:Int)&gt;&gt;&gt; val person = Person(&quot;Alice&quot;,29)&gt;&gt;&gt; println(serialize(person)){&quot;age&quot;:29,&quot;name&quot;:&quot;Alice&quot;}</code></pre><p>ä¸€ä¸ªå¯¹è±¡çš„JSONè¡¨è¾¾æ³•ç”±é”®å€¼å¯¹ç»„æˆï¼šå…·ä½“å®ä¾‹çš„å±æ€§åç§°å’Œå®ƒä»¬çš„å€¼ä¹‹é—´çš„é”®å€¼å¯¹ï¼Œæ¯”å¦‚ï¼šâ€œageâ€:29 ã€‚</p><p><strong>è¦ä»JSONè¡¨è¾¾æ³•ä¸­å–å›ä¸€ä¸ªå¯¹è±¡ï¼Œ</strong>è¦è°ƒç”¨deserializeå‡½æ•°ï¼š</p><pre><code class="kotlin">&gt;&gt;&gt; val json=&quot;&quot;&quot;{&quot;name&quot;:&quot;Alice&quot;,&quot;age&quot;:29}&quot;&quot;&quot;&gt;&gt;&gt; println(deserialize&lt;Person&gt;(json))Person(name=Alice,age = 29)</code></pre><p><strong>å½“ä½ ä»JSONæ•°æ®ä¸­åˆ›å»ºå®ä¾‹çš„æ—¶å€™ï¼Œå¿…é¡»æ˜¾å¼çš„æŒ‡å®šä¸€ä¸ªç±»ä½œä¸ºç±»å‹å‚æ•°ï¼Œå› ä¸ºJSONæ²¡æœ‰å­˜å‚¨å¯¹è±¡çš„ç±»å‹ï¼Œ</strong>è¿™ç§æƒ…å†µä¸‹ï¼Œä½ è¦ä¼ é€’Personç±»ã€‚</p><p>ä¸‹å›¾ï¼Œå±•ç¤ºäº†ä¸€ä¸ªå¯¹è±¡å’Œå®ƒçš„JSONè¡¨ç¤ºæ³•ä¹‹é—´çš„å…³ç³»ã€‚æ³¨æ„åºåˆ—åŒ–ä¹‹åçš„ç±»èƒ½åŒ…å«çš„ä¸ä»…æ˜¯å›¾ä¸­å±•ç¤ºçš„è¿™äº›åŸºæœ¬æ•°æ®ç±»å‹æˆ–è€…å­—ç¬¦ä¸²ç±»å‹çš„å€¼ï¼Œè¿˜å¯ä»¥æ˜¯é›†åˆï¼Œä»¥åŠå…¶ä»–å€¼å¯¹è±¡ç±»çš„å®ä¾‹ã€‚</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/Snipaste_2022-02-20_19-56-13.jpg" alt="Personå®ä¾‹çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–"></p><p>ä½ å¯ä»¥ä½¿ç”¨æ³¨è§£æ¥å®šåˆ¶å¯¹è±¡åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„æ–¹å¼ã€‚å½“æŠŠä¸€ä¸ªå¯¹è±¡åºåˆ—åŒ–æˆJOSNçš„æ—¶å€™ï¼Œé»˜è®¤æƒ…å†µä¸‹è¿™ä¸ªåº“å°è¯•åºåˆ—åŒ–çš„æ‰€æœ‰å±æ€§ï¼Œå¹¶ä½¿ç”¨å±æ€§åç§°ä½œä¸ºé”®ã€‚æ³¨è§£å…è®¸ä½ æ”¹å˜é»˜è®¤çš„è¡Œä¸ºï¼Œä¸¤ä¸ªæ³¨è§£ï¼Œ@JsonExcludeå’Œ@JsonNameï¼Œç¨åæŸ¥çœ‹å®ƒä»¬çš„å®ç°ï¼š</p><ul><li>@JsonExcludeæ³¨è§£ç”¨æ¥æ ‡è®°ä¸€ä¸ªå±æ€§ï¼Œè¿™ä¸ªå±æ€§åº”è¯¥æ’é™¤åœ¨åºåˆ—åŒ–å’Œååºåˆ—åŒ–ä¹‹å¤–ã€‚</li><li>@JsonNameæ³¨è§£è®©ä½ è¯´æ˜ä»£è¡¨è¿™ä¸ªå±æ€§çš„ï¼ˆJSONï¼‰<strong>é”®å€¼å¯¹ä¸­çš„é”®åº”è¯¥æ˜¯ä¸€ä¸ªç»™å®šçš„å­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯å±æ€§çš„åç§°ã€‚</strong></li></ul><p>å‚è€ƒä¸€ä¸ªä¾‹å­ï¼š</p><pre><code class="kotlin">data class Person {    @JsonName(&quot;alias&quot;)    val firstName: String,    @JsonExclude    val age: Int? = null}</code></pre><p>ä½ æ³¨è§£äº†å±æ€§firstNameï¼Œæ¥æ”¹å˜JSONä¸­ç”¨æ¥è¡¨ç¤ºå®ƒçš„é”®ã€‚<strong>è€Œå±æ€§ageä¹Ÿè¢«æ³¨è§£äº†ï¼Œåœ¨åºåˆ—åŒ–å’Œååºåˆ—åŒ–æ—¶ä¼šæ’é™¤å®ƒã€‚æ³¨æ„ä½ å¿…é¡»æŒ‡å®šageçš„é»˜è®¤å€¼ã€‚å¦åˆ™ï¼Œåœ¨ååºåˆ—åŒ–æ—¶ä½ æ— æ³•åˆ›å»ºä¸€ä¸ªPersonçš„æ–°å®ä¾‹ã€‚</strong> å¦‚ä¸‹å±•ç¤ºäº†Personå†…å®ä¾‹çš„è¡¨ç¤ºæ³•å‘ç”Ÿäº†æ€æ ·çš„å˜åŒ–ã€‚</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20220228145204.png" alt="åº”ç”¨æ³¨è§£ä¹‹åPersonå®ä¾‹çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–"></p><blockquote><p>é”®åæ˜¯@JsonNameæ³¨è§£çš„å­—ç¬¦ä¸²â€œaliasâ€ã€‚</p></blockquote><p>å·²ç»è§è¿‡äº†JKidä¸­å‡ºç°çš„å¤§å¤šæ•°åŠŸèƒ½ï¼šserialize()ã€deserialize()ã€@JsonNameå’Œ@JsonExcludeã€‚è®¨è®ºå¦‚ä½•å®ç°å®ƒä»¬å§ã€‚</p><h3 id="10-1-4-å£°æ˜æ³¨è§£"><a href="#10-1-4-å£°æ˜æ³¨è§£" class="headerlink" title="10.1.4 å£°æ˜æ³¨è§£"></a>10.1.4 å£°æ˜æ³¨è§£</h3><p>è¿™æ¬¡ä½ ä¼šä»¥<strong>JKidåº“ä¸­çš„æ³¨è§£ä¸ºä¾‹å­¦ä¹ æ€æ ·å£°æ˜ä»–ä»¬</strong>ã€‚æ³¨è§£@JsonExcludeæœ‰ç€æœ€ç®€å•çš„å½¢å¼ï¼Œå› ä¸ºå®ƒæ²¡æœ‰ä»»ä½•å‚æ•°ï¼š</p><pre><code class="kotlin">annotation class JsonExclude</code></pre><p>è¯­æ³•çœ‹èµ·æ¥å’Œæ™®é€šç±»çš„å£°æ˜å¾ˆåƒï¼Œåªæ˜¯åœ¨classå…³é”®è¯ä¹‹å‰åŠ ä¸Šäº†annotationä¿®é¥°ç¬¦ã€‚<strong>å› ä¸ºæ³¨è§£ç±»åªæ˜¯ç”¨æ¥å®šä¹‰å…³è”åˆ°å£°æ˜å’Œè¡¨è¾¾å¼çš„å…ƒæ•°æ®çš„ç»“æ„ï¼Œå®ƒä»¬ä¸èƒ½åŒ…å«ä»»ä½•ä»£ç ã€‚</strong>å› æ­¤ï¼Œç¼–è¯‘å™¨ç¦æ­¢ä¸ºä¸€ä¸ªæ³¨è§£ç±»æŒ‡å®šä¸»ä½“ã€‚</p><h1 id="è¡¥å……"><a href="#è¡¥å……" class="headerlink" title="è¡¥å……"></a>è¡¥å……</h1><h3 id="å­—æ®µå’Œå±æ€§"><a href="#å­—æ®µå’Œå±æ€§" class="headerlink" title="å­—æ®µå’Œå±æ€§"></a>å­—æ®µå’Œå±æ€§</h3><p><a href="https://blog.csdn.net/chenchunlin526/article/details/71424844" target="_blank" rel="noopener">æ·±å…¥ç†è§£Javaä¸­çš„å­—æ®µä¸å±æ€§çš„åŒºåˆ«</a></p><h4 id="å±æ€§å’Œå­—æ®µçš„åŒºåˆ«"><a href="#å±æ€§å’Œå­—æ®µçš„åŒºåˆ«" class="headerlink" title="å±æ€§å’Œå­—æ®µçš„åŒºåˆ«"></a>å±æ€§å’Œå­—æ®µçš„åŒºåˆ«</h4><p>å±æ€§ï¼ˆpropertyï¼‰ï¼Œé€šå¸¸å¯ä»¥ç†è§£ä¸ºget å’Œ set æ–¹æ³•ã€‚</p><p>å­—æ®µï¼ˆfieldï¼‰ï¼Œé€šå¸¸å«åš <strong>ç±»æˆå‘˜</strong>ï¼Œæˆ–è€… <strong>ç±»å˜é‡</strong> ï¼Œæœ‰æ—¶ä¹Ÿå« åŸŸ ï¼Œç†è§£ä¸º æ•°æ®æˆå‘˜ï¼Œç”¨æ¥æ‰¿æ‹…æ•°æ®çš„ã€‚</p><h4 id="å±æ€§å’Œå­—æ®µè¯¦è§£"><a href="#å±æ€§å’Œå­—æ®µè¯¦è§£" class="headerlink" title="å±æ€§å’Œå­—æ®µè¯¦è§£"></a>å±æ€§å’Œå­—æ®µè¯¦è§£</h4><p><strong>å­—æ®µï¼ˆfieldï¼‰</strong></p><p>ç±»æˆå‘˜ï¼ˆå­—æ®µfieldï¼‰ï¼Œé€šå¸¸åœ¨ç±»ä¸­å®šä¹‰æˆå‘˜å˜é‡ä¾‹å¦‚ï¼š</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200909213136.png" alt=""> </p><p>è§£é‡Šä¸ºï¼š<strong>FacebookUserç±»æ‹¥æœ‰æˆå‘˜å˜é‡nicknameï¼Œæœ‰ä¸€ä¸ªå­—æ®µ nicknameã€‚</strong></p><p>å­—æ®µä¸€èˆ¬ç”¨äºæ‰¿æ‹…æ•°æ®ï¼Œæ‰€ä»¥ä¸ºäº†æ•°æ®çš„å®‰å…¨æ€§ï¼Œä¸€èˆ¬è®¾ç½®ä¸ºç§æœ‰çš„ã€‚</p><p>å­—æ®µå’Œå¸¸é‡æè¿°çš„ç±»çš„æ•°æ®ï¼ˆåŸŸï¼‰ï¼Œå½“è¿™äº›æ•°æ®çš„æŸäº›éƒ¨åˆ†ä¸è¿è¡Œå¤–ç•Œè®¿é—®æ—¶ï¼Œ<strong>æ ¹æ®â€å¯¹è±¡å°è£…â€œåŸåˆ™ï¼Œåº”è¯¥å°½é‡é¿å…å°†ç±»çš„å­—æ®µä»¥å…¬æœ‰æ–¹å¼æä¾›ç»™å¤–éƒ¨</strong>ã€‚é™¤å•¦finalä¿®é¥°çš„å¸¸é‡ã€‚</p><p><strong>å±æ€§ï¼ˆpropertyï¼‰</strong></p><p><strong>å±æ€§åªå±€é™äºç±»ä¸­æ–¹æ³•çš„å£°æ˜ï¼Œå¹¶ä¸ä¸ç±»ä¸­å…¶å®ƒæˆå‘˜ç›¸å…³</strong>ï¼Œæ•°æ®JavaBeanèŒƒç•´ï¼š</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200909220317.png" alt=""></p><p>è¿™æ˜¯ä¸€ä¸ªå±æ€§ï¼Œä¸€ä¸ªå­—æ®µã€‚</p><p>æ€»ç»“ï¼šå±æ€§æ˜¯å¯¹å­—æ®µçš„å°è£…ï¼Œä¾›å¤–éƒ¨è®¿é—®ã€‚é€šå¸¸<strong>å±æ€§</strong>å°†å¯¹åº”çš„<strong>ç§æœ‰å­—æ®µ</strong>é€šè¿‡å°è£…æˆå…¬å…±å±æ€§ï¼Œä»¥ä¾¿äºå¤–ç•Œè®¿é—®å’Œä¿®æ”¹ã€‚</p><h3 id="è¡¨è¾¾å¼"><a href="#è¡¨è¾¾å¼" class="headerlink" title="è¡¨è¾¾å¼"></a>è¡¨è¾¾å¼</h3><p>æ˜¯æŒ‡å¯ä»¥è¢«æ±‚å€¼çš„ä»£ç ã€‚</p><p>ä¾‹å¦‚</p><pre><code class="c">int result = add(x + 1,y)</code></pre><blockquote><p>x + 1 ä½œä¸ºè¡¨è¾¾å¼ä¼ é€’äº†æ•°å€¼</p></blockquote><pre><code class="c">int result = addï¼ˆif(x==1),yï¼‰</code></pre><blockquote><p>è¿™æ®µè¯­å¥åœ¨ c ä¸­æ˜¯æ²¡æœ‰åŠæ³•ä½œä¸ºè¡¨è¾¾å¼çš„ã€‚</p></blockquote><h3 id="Kotlin-thisè¡¨è¾¾å¼"><a href="#Kotlin-thisè¡¨è¾¾å¼" class="headerlink" title="Kotlin thisè¡¨è¾¾å¼"></a>Kotlin thisè¡¨è¾¾å¼</h3><p>ä¸ºäº†è¡¨ç¤ºå½“å‰çš„ <strong>æ¥æ”¶è€…</strong> ä½¿ç”¨ this{:.keyword} è¡¨è¾¾å¼ï¼š</p><ul><li>åœ¨ç±»çš„æˆå‘˜ä¸­ï¼Œthis{:.keyword}æŒ‡çš„æ˜¯å½“å‰å¯¹è±¡</li><li>åœ¨æ‰©å±•å‡½æ•°æˆ–è€…å¸¦æ¥å—è€…çš„å‡½æ•°å­—é¢å€¼ä¸­ï¼Œthis{:.keyword}è¡¨ç¤ºåœ¨ç‚¹å·¦ä¾§çš„æ¥æ”¶è€…å‚æ•°ã€‚</li></ul><h3 id="å‡½æ•°å¼•ç”¨"><a href="#å‡½æ•°å¼•ç”¨" class="headerlink" title="å‡½æ•°å¼•ç”¨"></a>å‡½æ•°å¼•ç”¨</h3><p>å‡½æ•°å¼•ç”¨ æ˜¯kotlinå¼•å…¥çš„ä¸€ä¸ªåŠŸèƒ½ã€‚ä½¿ç”¨(::)è¡¨ç¤ºå¯¹å‡½æ•°çš„å¼•ç”¨</p><p>ä»£ç </p><pre><code class="kotlin">val sum:(Int,Int) -&gt; Int = {x,y -&gt; x +y}</code></pre><blockquote><p>sum æ˜¯ä¸€ä¸ªå‡½æ•°ç±»å‹çš„å˜é‡ï¼Œlambdaè¡¨è¾¾å¼æ‰§è¡Œäº†ç›¸åŠ çš„æ“ä½œã€‚</p></blockquote><pre><code class="kotlin">fun applyOp(x: Int, y: Int, op: (Int, Int) -&gt; Int): Int = op(x, y)</code></pre><p>applyOp æ˜¯ä¸€ä¸ªæ¥å—ä¸‰ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯lambdaç±»å‹ã€‚å¯ä»¥ç”¨ä¸‹é¢çš„è¿”å›è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼š</p><pre><code class="kotlin">applyOp(2,3,sum)</code></pre><p>å³é«˜é˜¶å‡½æ•°å¯ä»¥ä½œä¸ºä¸€ä¸ªç±»å‹èµ‹å€¼ç»™å˜é‡ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„å‚æ•°ã€‚</p><h4 id="å‡½æ•°å¼•ç”¨ï¼šå‡½æ•°å¯ä»¥æ˜¯ä¸€ä¸ª-lambda"><a href="#å‡½æ•°å¼•ç”¨ï¼šå‡½æ•°å¯ä»¥æ˜¯ä¸€ä¸ª-lambda" class="headerlink" title="å‡½æ•°å¼•ç”¨ï¼šå‡½æ•°å¯ä»¥æ˜¯ä¸€ä¸ª lambda"></a>å‡½æ•°å¼•ç”¨ï¼šå‡½æ•°å¯ä»¥æ˜¯ä¸€ä¸ª lambda</h4><p>ä¸Šè¿°çš„lambdaè¡¨è¾¾å¼ï¼Œå¯ä»¥ç”¨çº¯å‡½æ•°çš„å½¢å¼ï¼š</p><pre><code class="kotlin">fun sum(x: Int, y: Int) = x + y</code></pre><p>å®ç°æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼ŒåŒºåˆ«åœ¨äºä¸å†éœ€è¦ä½¿ç”¨å˜é‡æ¥ä¿æŒå¯¹å‡½æ•°çš„å¼•ç”¨ï¼Œä½†æ˜¯è¿™æ ·éœ€è¦å¯¹applOpå‡½æ•°è¦åšä¸€äº›ä¿®æ”¹ï¼ŒåŸæ¥çš„</p><p><strong>applOp(2,3,sum)</strong>å†™æ³•ä¼šæŠ¥ç±»å‹ä¸åŒ¹é…çš„è¯­æ³•é”™è¯¯ã€‚éœ€è¦ä¿®æ”¹ä¸ºä½¿ç”¨<strong>å‡½æ•°å¼•ç”¨</strong>ä»£ç å¦‚ä¸‹ï¼š</p><pre><code class="kotlin">applOp(2,3,::sum)</code></pre><p>è¿™äº›ç®—æ˜¯ å‡½æ•°å¼•ç”¨ çš„å¤§è‡´æ¦‚å¿µã€‚åŒæ—¶<strong>å‡½æ•°å¼•ç”¨</strong>ä¹Ÿæ˜¯å¯ä»¥èµ‹å€¼ç»™å˜é‡çš„ã€‚</p><pre><code class="kotlin">val sumLambda: (Int, Int) -&gt; Int = ::sumapplyOp(2, 3, sumLambda)</code></pre><h3 id="lamnda-è¡¨è¾¾å¼-ä¸-åŒ¿åå†…éƒ¨ç±»çš„åŒºåˆ«"><a href="#lamnda-è¡¨è¾¾å¼-ä¸-åŒ¿åå†…éƒ¨ç±»çš„åŒºåˆ«" class="headerlink" title="lamnda è¡¨è¾¾å¼ ä¸ åŒ¿åå†…éƒ¨ç±»çš„åŒºåˆ«"></a>lamnda è¡¨è¾¾å¼ ä¸ åŒ¿åå†…éƒ¨ç±»çš„åŒºåˆ«</h3><blockquote><ul><li>lambda è¡¨è¾¾å¼åªèƒ½ä¸ºå‡½æ•°å¼æ¥å£åˆ›å»ºå®ä¾‹ï¼›åŒ¿åå†…éƒ¨ç±»å¯ä»¥ä¸ºä»»æ„æ¥å£åˆ›å»ºå®ä¾‹ â€“ ä¸ç®¡æ¥å£åŒ…å«å¤šå°‘æŠ½è±¡æ–¹æ³•ï¼Œåªè¦åŒ¿åå†…éƒ¨ç±»æ˜¯å®ç°æ‰€æœ‰çš„æŠ½è±¡æ–¹æ³•å³å¯ã€‚</li><li>lambda è¡¨è¾¾å¼åªèƒ½ä¸ºå‡½æ•°å¼æ¥å£åˆ›å»ºå®ä¾‹ï¼›åŒ¿åå†…éƒ¨ç±»å¯ä»¥ä¸ºæŠ½è±¡ç±»ç”šè‡³æ™®é€šè¯ç±»åˆ›å»ºå®ä¾‹ï¼›</li><li>lambda è¡¨è¾¾å¼çš„ä»£ç ä¸å…è®¸è°ƒç”¨æ¥å£ä¸­å®šä¹‰çš„é»˜è®¤æ–¹æ³•ï¼›åŒ¿åå†…éƒ¨ç±»å®ç°çš„æŠ½è±¡æ–¹æ³•çš„æ–¹æ³•ä½“å…è®¸è°ƒç”¨æ¥å£ä¸­å®šä¹‰çš„é»˜è®¤æ–¹æ³•ã€‚</li></ul></blockquote><h3 id="é“¾å¼è°ƒç”¨"><a href="#é“¾å¼è°ƒç”¨" class="headerlink" title="é“¾å¼è°ƒç”¨"></a>é“¾å¼è°ƒç”¨</h3><h2 id="Reifiedå®åŒ–ç±»å‹å‚æ•°"><a href="#Reifiedå®åŒ–ç±»å‹å‚æ•°" class="headerlink" title="Reifiedå®åŒ–ç±»å‹å‚æ•°"></a>Reifiedå®åŒ–ç±»å‹å‚æ•°</h2><p>èƒŒæ™¯ï¼š</p><blockquote><p>Javaä¸­æ³›å‹æ˜¯åœ¨JDK1.5ç‰ˆæœ¬åå¼•å…¥çš„ï¼Œä½†é›†åˆCollectionå®åœ¨JDK1.2ç‰ˆæœ¬æ—¶å¼•å…¥çš„ï¼Œç°åœ¨çœ‹åˆ°çš„Listï¼Œæ˜¯åœ¨æ³›å‹å‡ºç°ååŠ å…¥çš„ï¼Œé‚£ä¹ˆJDK1.2ä¹‹å‰å°±ç›´æ¥ç”¨LIstï¼ˆjavaä¸­ä¿—ç§°åŸç”Ÿæ€ç±»å‹ï¼‰è¡¨ç¤ºã€‚åœ¨ä¸ºäº†å…¼å®¹ä¹‹å‰çš„ç‰ˆæœ¬Javaé‡‡ç”¨æ‰€è°“çš„ä¼ªæ³›å‹ï¼Œä¼ªæ³›å‹æœ‰ä¸€ä¸ªç‰¹å¾å°±æ˜¯<strong>æ³›å‹æ“¦é™¤</strong>ï¼Œè¡¨ç¤ºæ³›å‹ç±»å‹ä¿¡æ¯åœ¨ç¼–è¯‘æ—¶æœŸä¼šè¢«æŠ¹é™¤æ‰ï¼ŒåŒ…æ‹¬ä½ æ˜¯Listè¿˜æ˜¯Liståœ¨è¿è¡Œæ—¶å®ƒä»¬éƒ½æ˜¯ä¸€æ ·ï¼Œé‚£éƒ½æ˜¯Listç±»å‹ï¼Œæ³›å‹ç±»å‹ä¿¡æ¯å·²ç»è¢«æŠ¹é™¤æ‰äº†ã€‚</p></blockquote><h2 id="Kotlinä¸­çš„å½¢å‚å’Œå®å‚"><a href="#Kotlinä¸­çš„å½¢å‚å’Œå®å‚" class="headerlink" title="Kotlinä¸­çš„å½¢å‚å’Œå®å‚"></a>Kotlinä¸­çš„å½¢å‚å’Œå®å‚</h2><p>psï¼š</p><p><a href="https://juejin.cn/post/6844903694119485447#heading-6" target="_blank" rel="noopener">ä¸€ä¸ªç®€å•æ–¹å¼æ•™ä½ è®°ä½Kotlinçš„å½¢å‚å’Œå®å‚</a></p><h2 id="ä»€ä¹ˆæ‰æ˜¯æ³›å‹æ“¦é™¤"><a href="#ä»€ä¹ˆæ‰æ˜¯æ³›å‹æ“¦é™¤" class="headerlink" title="ä»€ä¹ˆæ‰æ˜¯æ³›å‹æ“¦é™¤"></a>ä»€ä¹ˆæ‰æ˜¯æ³›å‹æ“¦é™¤</h2><p>ps:</p><p><a href="https://juejin.cn/post/6844904083199918093" target="_blank" rel="noopener">é¢è¯•å®˜é—®æˆ‘ï¼šâ€œæ³›å‹æ“¦é™¤æ˜¯ä»€ä¹ˆï¼Œä¼šå¸¦æ¥ä»€ä¹ˆé—®é¢˜ï¼Ÿâ€</a></p><p><strong>å¼•ç”¨ï¼š</strong></p><p><a href="https://www.web3.xin/code/2606.html" target="_blank" rel="noopener">Kotlin thisè¡¨è¾¾å¼</a></p><p><a href="https://www.jianshu.com/p/10358883455c" target="_blank" rel="noopener">kotlinä¸­çš„å‡½æ•°å¼•ç”¨è¯¦è§£</a>    </p><p><a href="http://c.biancheng.net/view/6559.html" target="_blank" rel="noopener">Lambdaè¡¨è¾¾å¼ä¸åŒ¿åå†…éƒ¨ç±»çš„è”ç³»å’ŒåŒºåˆ«</a></p><p>Kotlin å®æˆ˜ </p><p> è‘—(Dmitry Jemerov ,Svetlana Isakova)</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/2020-8-3-1.gif" alt="å¦‚æœæœ‰äº›æ–¹æ³•æ²¡æœ‰è¯¦ç»†è¯´æ˜ä½ å¯ä»¥è‡ªè¡Œæœç´¢æŸ¥çœ‹"></p>]]></content>
      
      
      <categories>
          
          <category> Kotlin </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>RecyclerViewåœ¨Kotlinä¸­çš„ä½¿ç”¨</title>
      <link href="/2020/07/26/RecyclerView%E5%9C%A8Kotlin%E4%B8%AD%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
      <url>/2020/07/26/RecyclerView%E5%9C%A8Kotlin%E4%B8%AD%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="åˆ›å»ºé¡¹ç›®RecyclerExampleé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®RecyclerExampleé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®RecyclerExampleé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®RecyclerExampleé¡¹ç›®</h2><h3 id="éœ€è¦å¼•å…¥ä¾èµ–"><a href="#éœ€è¦å¼•å…¥ä¾èµ–" class="headerlink" title="éœ€è¦å¼•å…¥ä¾èµ–"></a>éœ€è¦å¼•å…¥ä¾èµ–</h3><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/1595735673809.png" alt=""></p><h3 id="éœ€è¦å­é¡¹å¸ƒå±€"><a href="#éœ€è¦å­é¡¹å¸ƒå±€" class="headerlink" title="éœ€è¦å­é¡¹å¸ƒå±€"></a>éœ€è¦å­é¡¹å¸ƒå±€</h3><p>åœ¨ â€œRecyclerViewExample\app\src\main\res\layoutâ€ä¸‹åˆ›å»º â€œexample_item.xmlâ€ ğŸ‘‡</p><pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;androidx.cardview.widget.CardView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;    android:layout_width=&quot;match_parent&quot;    android:layout_height=&quot;wrap_content&quot;&gt;    &lt;RelativeLayout        android:layout_width=&quot;match_parent&quot;        android:layout_height=&quot;match_parent&quot;        android:padding=&quot;8dp&quot;&gt;        &lt;ImageView            android:id=&quot;@+id/image_view&quot;            android:layout_width=&quot;50dp&quot;            android:layout_height=&quot;50dp&quot;            android:layout_marginEnd=&quot;8dp&quot;            android:src=&quot;@drawable/ic_baseline_android_24&quot; /&gt;        &lt;TextView            android:id=&quot;@+id/text_view_1&quot;            android:layout_width=&quot;wrap_content&quot;            android:layout_height=&quot;wrap_content&quot;            android:layout_toEndOf=&quot;@+id/image_view&quot;            android:text=&quot;Line 1&quot;            android:textColor=&quot;@color/cardview_dark_background&quot;            android:textSize=&quot;18sp&quot; /&gt;        &lt;TextView            android:id=&quot;@+id/text_view_2&quot;            android:layout_width=&quot;wrap_content&quot;            android:layout_height=&quot;wrap_content&quot;            android:layout_below=&quot;@+id/text_view_1&quot;            android:layout_toEndOf=&quot;@+id/image_view&quot;            android:text=&quot;Line 2&quot; /&gt;    &lt;/RelativeLayout&gt;&lt;/androidx.cardview.widget.CardView&gt;</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/1595735521036.png" alt=""></p><p>éœ€è¦è‡ªå®šä¹‰çš„å›¾ç‰‡ â†“</p><p>é€‰ä¸­â€drawableâ€æ–‡ä»¶å¤¹,é€‰ä¸­â€Newâ€,é€‰ä¸­â€Vactor Assetâ€</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200915232142.png" alt=""></p><p>é€‰ä¸­â€Clip Artâ€ é€‰ä¸­å–œæ¬¢çš„å›¾å½¢å°±å¯ä»¥äº†ã€‚ç‚¹å‡» â€œNextâ€,å†ç‚¹å‡» Finishã€‚ åˆ›å»ºä¸‰ä¸ªã€‚</p><h3 id="éœ€è¦-æ•°æ®ç±»ğŸ‘‡"><a href="#éœ€è¦-æ•°æ®ç±»ğŸ‘‡" class="headerlink" title="éœ€è¦ æ•°æ®ç±»ğŸ‘‡"></a>éœ€è¦ æ•°æ®ç±»ğŸ‘‡</h3><p>åœ¨ â€œrecyclerviewexampleâ€ åŒ…ä¸‹</p><pre><code>/** *   @DATE : 2020/7/26 *   @Time : 11:42 *   @By : TheCara *   &quot;data&quot; æ•°æ®ç±» */data class Exampleitem(val imageResource: Int, val text1: String, val text2: String)</code></pre><h3 id="éœ€è¦é€‚é…å™¨"><a href="#éœ€è¦é€‚é…å™¨" class="headerlink" title="éœ€è¦é€‚é…å™¨"></a>éœ€è¦é€‚é…å™¨</h3><p>éœ€è¦é€‚é…å™¨â€ExampleAdapterâ€</p><pre><code>/** *   @DATE : 2020/7/27 *   @Time : 15:54 *   @By : TheCara *   éœ€è¦ç»§æ‰¿RecyclerView.Adapterç±»å‹ *   éœ€è¦å†…åµŒç±»ç»§æ‰¿RecyclerView.ViewHolderç±»å‹ */class ExampleAdapter(private val exampleList: List&lt;ExampleItem&gt;) :    RecyclerView.Adapter&lt;ExampleAdapter.ExampleViewHolder&gt;() {    // å…³é”®æ–¹æ³•ï¼Œç”¨äºç¡®å®šåˆ—è¡¨é¡¹    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ExampleViewHolder {        val view = LayoutInflater.from(parent.context).inflate(R.layout.example_item, parent, false)        return ExampleViewHolder(view)    }    override fun getItemCount() = exampleList.size    // å°†æ•°æ®å’Œå®¹å™¨ç»‘å®š    override fun onBindViewHolder(holder: ExampleViewHolder, position: Int) {        val currenItem = exampleList[position]        holder.imageView.setImageResource(currenItem.imageResource)        holder.textView1.setText(currenItem.text1)        holder.textView2.setText(currenItem.text1)    }    // è·å¾—æ¯ä¸ªæ§ä»¶çš„å®ä¾‹,éœ€è¦ExampleViewHolderçš„å‚æ•°(å­é¡¹å¸ƒå±€)ä½œä¸ºRecyclerView.ViewHolder()ç”¨ä½œå®ä¾‹åŒ–    class ExampleViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView) {        val imageView: ImageView = itemView.image_view        val textView1: TextView = itemView.text_view_1        val textView2: TextView = itemView.text_view_2    }}</code></pre><p>åœ¨â€MainActivityâ€ä¿®æ”¹</p><pre><code>class MainActivity : AppCompatActivity() {    override fun onCreate(savedInstanceState: Bundle?) {        super.onCreate(savedInstanceState)        setContentView(R.layout.activity_main)        val listExample = generateDummyList(500)        recycler_view.adapter = ExampleAdapter(listExample)        // è®¾ç½®RecyclerViewçš„å¸ƒå±€ç®¡ç†å™¨        recycler_view.layoutManager = LinearLayoutManager(this)        // ç¡®ä¿RecyclerViewçš„å°ºå¯¸æ˜¯ä¸€ä¸ªå¸¸æ•°        recycler_view.setHasFixedSize(true)    }    // è·å¾—å¸ƒå±€ä¸­çš„æ•°æ®    private fun generateDummyList(size: Int): List&lt;ExampleItem&gt; {        val list = ArrayList&lt;ExampleItem&gt;()        // ä½¿â½¤åŒºé—´&quot;until&quot;        for (i in 0 until size) {            val drawable = when (i % 4) {                0 -&gt; R.drawable.ic_baseline_add_to_home_screen_24                1 -&gt; R.drawable.ic_baseline_airline_seat_flat_angled_24                2 -&gt; R.drawable.ic_baseline_airline_seat_recline_extra_24                else -&gt; R.drawable.ic_baseline_android_24            }            val item = ExampleItem(drawable, &quot;Line $i&quot;, &quot;Line 2&quot;)            list += item        }        return list    }}</code></pre><p>ğŸ‘†â€setHasFixedSize()â€æ–¹æ³•:å½“æˆ‘ä»¬ç¡®å®šItemçš„æ”¹å˜ä¸ä¼šå½±å“RecyclerViewçš„å®½é«˜æ—¶,å¯ä»¥<strong>è®¾ç½®è¿™ä¸ªæ–¹æ³•</strong>,å¹¶ä¸”Adapterçš„å¢åˆ æ–¹æ³•å»åˆ·æ–°RecyclerView,è€Œä¸æ˜¯é€šè¿‡notifyDataSetChanged()ã€‚(å…¶å®å¯ä»¥ç›´æ¥è®¾ç½®ä¸ºtrueï¼Œå½“éœ€è¦æ”¹å˜å®½é«˜çš„æ—¶å€™å°±ç”¨notifyDataSetChanged()å»æ•´ä½“åˆ·æ–°ä¸€ä¸‹)</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/1595841353310.png" alt=""></p><h2 id="æ·»åŠ -å¢åˆ -åŠŸèƒ½"><a href="#æ·»åŠ -å¢åˆ -åŠŸèƒ½" class="headerlink" title="æ·»åŠ  å¢åˆ  åŠŸèƒ½"></a>æ·»åŠ  å¢åˆ  åŠŸèƒ½</h2><h2 id="ä½¿ç”¨RecyclerViewåœ¨æ¡ˆä¾‹ä¸­éœ€è¦ä»€ä¹ˆ"><a href="#ä½¿ç”¨RecyclerViewåœ¨æ¡ˆä¾‹ä¸­éœ€è¦ä»€ä¹ˆ" class="headerlink" title="ä½¿ç”¨RecyclerViewåœ¨æ¡ˆä¾‹ä¸­éœ€è¦ä»€ä¹ˆ"></a>ä½¿ç”¨RecyclerViewåœ¨æ¡ˆä¾‹ä¸­éœ€è¦ä»€ä¹ˆ</h2><ul><li>éœ€è¦å¼•å…¥ä¾èµ–</li><li>éœ€è¦é€‚é…å™¨</li><li>éœ€è¦ItemLayout</li><li>éœ€è¦æ•°æ®ç±»</li><li>æ§åˆ¶å™¨éœ€è¦åˆå§‹åŒ–</li></ul>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> Kotlin </tag>
            
            <tag> RecyclerView </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DataBindingçš„ä½¿ç”¨</title>
      <link href="/2020/07/24/DataBinding%E7%9A%84%E4%BD%BF%E7%94%A8/"/>
      <url>/2020/07/24/DataBinding%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="DataBinding-é…åˆ-LiveData-å’Œ-ViewModel-ä½¿ç”¨"><a href="#DataBinding-é…åˆ-LiveData-å’Œ-ViewModel-ä½¿ç”¨" class="headerlink" title="DataBinding é…åˆ LiveData å’Œ ViewModel ä½¿ç”¨"></a>DataBinding é…åˆ LiveData å’Œ ViewModel ä½¿ç”¨</h2><ol><li>éœ€è¦åˆ›å»ºMyViewModelç±»,ç»§æ‰¿ViewModel</li><li>éœ€è¦æ·»åŠ DataBindingçš„gradle(app)é…ç½®ä¿¡æ¯</li></ol><p>æ·»åŠ é…ç½®ä¿¡æ¯ åœ¨gradle(app)ä¸­æ·»åŠ  â†“</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/Snipaste_2020-07-25_10-40-29.png" alt=""></p><h4 id="åˆ›å»ºMyViewModel-â†“"><a href="#åˆ›å»ºMyViewModel-â†“" class="headerlink" title="åˆ›å»ºMyViewModel â†“"></a>åˆ›å»ºMyViewModel â†“</h4><pre><code>/** *   @DATE : 2020/7/24 *   @Time : 21:10 *   @By : TheCara *  è´Ÿè´£å¤„ç†ç•Œé¢æ•°æ® *  éœ€è¦ LiveData æ¥è§‚å¯Ÿæ•°æ®åˆ·æ–°UI */class MyViewModel : ViewModel() {    var numberLiveData = MutableLiveData&lt;Int&gt;()    init {        numberLiveData.value = 0    }    // åŠ å€¼    fun add() {        numberLiveData?.value = numberLiveData?.value?.plus(1)    }}</code></pre><h4 id="ä¿®æ”¹MainActivity-â†“"><a href="#ä¿®æ”¹MainActivity-â†“" class="headerlink" title="ä¿®æ”¹MainActivity â†“"></a>ä¿®æ”¹MainActivity â†“</h4><pre><code>/** éœ€è¦ ActivityMainBinding ç±»ç”¨æ¥ç»‘å®šæ•°æ®* éœ€è¦ MyViewModel æ¥å’Œ ActivityMainBinding ç»‘å®šæ•°æ®* */class MainActivity : AppCompatActivity() {    var myViewModel: MyViewModel? = null    // è®¾ç½®ç±»å‹ä¸ºå¯ç©ºç±»å‹    var activityMainBinding: ActivityMainBinding? = null    //ActivityMainBinding æ˜¯åœ¨DataBingdingé…ç½®å®Œæˆä¹‹åè‡ªåŠ¨ç”Ÿæˆçš„    override fun onCreate(savedInstanceState: Bundle?) {        super.onCreate(savedInstanceState)        // åˆå§‹åŒ–DataBindingUtil,ç”¨æ¥ç»‘å®šå¸ƒå±€        activityMainBinding = DataBindingUtil.setContentView(this, R.layout.activity_main)        // åˆå§‹åŒ–æ•°æ®ç±»        var myViewModel = ViewModelProviders.of(this).get(MyViewModel::class.java)        activityMainBinding?.myViewModel=myViewModel        activityMainBinding?.lifecycleOwner = this    }}</code></pre><h4 id="å¸ƒå±€-ä½¿ç”¨-â€œdataâ€-æ ‡ç­¾-â†“"><a href="#å¸ƒå±€-ä½¿ç”¨-â€œdataâ€-æ ‡ç­¾-â†“" class="headerlink" title="å¸ƒå±€ ä½¿ç”¨ â€œdataâ€ æ ‡ç­¾ â†“"></a>å¸ƒå±€ ä½¿ç”¨ â€œdataâ€ æ ‡ç­¾ â†“</h4><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/1595645673021.png" alt=""></p><p>éœ€è¦ layout å¸ƒå±€ä¿å­˜å¸ƒå±€,éœ€è¦ â€œdata â€œæ ‡ç­¾ä¿å­˜ç»‘å®šæ¥çš„æ•°æ®,éœ€è¦ â€œvariableâ€ æ ‡ç­¾è®¾ç½®å˜é‡ã€‚</p><h4 id="éœ€è¦ä½¿ç”¨-â€œ-â€-æ–¹å¼è®¿é—®å˜é‡-â†“"><a href="#éœ€è¦ä½¿ç”¨-â€œ-â€-æ–¹å¼è®¿é—®å˜é‡-â†“" class="headerlink" title="éœ€è¦ä½¿ç”¨ â€œ@{}â€ æ–¹å¼è®¿é—®å˜é‡ â†“"></a>éœ€è¦ä½¿ç”¨ â€œ@{}â€ æ–¹å¼è®¿é—®å˜é‡ â†“</h4><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/1595645903565.png" alt=""></p><h4 id="éœ€è¦ä½¿ç”¨-â€œ-å‚æ•°-gt-æ–¹æ³•-å‚æ•°-â€è®¿é—®æ–¹æ³•-â†“"><a href="#éœ€è¦ä½¿ç”¨-â€œ-å‚æ•°-gt-æ–¹æ³•-å‚æ•°-â€è®¿é—®æ–¹æ³•-â†“" class="headerlink" title="éœ€è¦ä½¿ç”¨ â€œ@{(å‚æ•°)-&gt;æ–¹æ³•(å‚æ•°)}â€è®¿é—®æ–¹æ³• â†“"></a>éœ€è¦ä½¿ç”¨ â€œ@{(å‚æ•°)-&gt;æ–¹æ³•(å‚æ•°)}â€è®¿é—®æ–¹æ³• â†“</h4><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/1595645888188.png" alt=""></p><p>demo â†“</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/1595646636793.png" alt=""></p><h2 id="ä»€ä¹ˆæ˜¯DataBinding"><a href="#ä»€ä¹ˆæ˜¯DataBinding" class="headerlink" title="ä»€ä¹ˆæ˜¯DataBinding"></a>ä»€ä¹ˆæ˜¯DataBinding</h2><p>DataBindingæ˜¯è°·æ­Œåœ¨2015å¹´I/Oå¼€å‘è€…å¤§ä¼šä¸Šå‘å¸ƒçš„ä¸€ä¸ªæ•°æ®ç»‘å®šæ¡†æ¶,ä¹Ÿå°±æ˜¯æŠŠæ•°æ®æ†ç»‘åˆ°UIä¸Š,DataBindingå¯ä»¥è®©Activityå’ŒFragmentå‡å°‘é€»è¾‘,ä½¿å…¶æ–¹ä¾¿ç»´æŠ¤ã€‚åŒæ—¶ä¹Ÿèƒ½æé«˜æ€§èƒ½,é¿å…ç©ºæŒ‡é’ˆå¼‚å¸¸,åŒæ—¶DataBindingä¹Ÿæ”¯æŒåŒå‘ç»‘å®š,ä½¿UIçš„æ”¹å˜åŒæ—¶åŒæ­¥åˆ°æ•°æ®ä¸Š,DataBindingä¸æ˜¯MVVMæ¶æ„çš„å¿…éœ€å“ã€‚</p><h2 id="DataBindingæœ‰å“ªäº›ä¼˜ç¼ºç‚¹"><a href="#DataBindingæœ‰å“ªäº›ä¼˜ç¼ºç‚¹" class="headerlink" title="DataBindingæœ‰å“ªäº›ä¼˜ç¼ºç‚¹"></a>DataBindingæœ‰å“ªäº›ä¼˜ç¼ºç‚¹</h2><p><strong>ä¼˜ç‚¹</strong></p><ol><li>å‡å°‘Activityå’ŒFragmentçš„é€»è¾‘å¤„ç†,ä½¿Activityå’ŒFragmenté€»è¾‘æ›´åŠ æ¸…æ™°ã€‚</li><li>æé«˜æ€§èƒ½,é¿å…å†…å­˜æ³„æ¼ä»¥åŠç©ºæŒ‡é’ˆ</li><li>æ”¯æŒåŒå‘ç»‘å®š,å½“Viewæ”¹å˜çš„æ—¶å€™ä¼šé€šçŸ¥Model,å½“Modelæ”¹å˜æ—¶ä¼šé€šçŸ¥View</li></ol><p><strong>ç¼ºç‚¹</strong></p><ol><li>bugéš¾å®šä½,å‡ºç°bugæ—¶æ— æ³•å®šä½åˆ°æ˜¯Viewä¸­çš„bugè¿˜æ˜¯Modelä¸­çš„bug,åˆæˆ–æ˜¯ç¼–å†™çš„é€»è¾‘bugã€‚</li><li>åŒå‘ç»‘å®šä¸åˆ©äºViewçš„å¤ç”¨</li></ol><p>å¼•ç”¨:<a href="https://juejin.im/post/5edb12346fb9a047da364349#heading-2" target="_blank" rel="noopener">https://juejin.im/post/5edb12346fb9a047da364349#heading-2</a></p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> DataBinding </tag>
            
            <tag> Kotlin </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LiveDataä¸ViewModel</title>
      <link href="/2020/07/20/LiveData/"/>
      <url>/2020/07/20/LiveData/</url>
      
        <content type="html"><![CDATA[<h4 id="å•ç‹¬ä½¿ç”¨LiveData"><a href="#å•ç‹¬ä½¿ç”¨LiveData" class="headerlink" title="å•ç‹¬ä½¿ç”¨LiveData"></a>å•ç‹¬ä½¿ç”¨LiveData</h4><ol><li>åˆ›å»ºLiveDataå®ä¾‹ã€‚æŒæœ‰ç‰¹å®šçš„æ•°æ®ç±»å‹ï¼Œä¾‹å¦‚ int ,Stringã€‚</li><li>åˆ›å»ºä¸€ä¸ªObserverå¯¹è±¡,å¹¶ä¸”å®ç°onChanged()æ–¹æ³•ã€‚åœ¨onChanged()æ–¹æ³•ç±»å¯ä»¥è¿›è¡ŒUIçš„åˆ·æ–°ç­‰ã€‚</li><li>ä½¿ç”¨LiveDataå®ä¾‹çš„observe(â€¦,â€¦)æ–¹æ³•,å°†Observerå¯¹è±¡æ·»åŠ åˆ°LiveDataä¸­ã€‚æ–¹æ³•åŸå‹ä¸º <strong>observe(LifecycleOwner owner,Observer observer)</strong>,ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯LifecycleOwnerå¯¹è±¡ï¼Œä¸ºLiveDataèƒ½å¤Ÿç›‘å¬ç”Ÿå‘½å‘¨æœŸçš„èƒ½åŠ›æ¥æºã€‚ç¬¬äºŒä¸ªå‚æ•°ä¸ºæˆ‘ä»¬çš„ç›‘å¬å¯¹è±¡ã€‚</li></ol><p>æ·»åŠ LiveDataå’ŒViewModelçš„ä¾èµ– â†“</p><pre><code>// æ·»åŠ LiveDataå’ŒViewModelçš„ä¾èµ–implementation &#39;android.arch.lifecycle:extensions:1.1.1&#39;</code></pre><p>ç•Œé¢å‡†å¤‡æŒ‰é’®ç”¨æ¥å¼€å¯,ä½¿å¾—UIåˆ·æ–° â†“</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/Snipaste_2020-07-20_15-48-40.png" alt=""></p><p> MainActivityä¸­çš„ä»£ç  â†“</p><pre><code>class MainActivity : AppCompatActivity() {    val TAG = &quot;MainActivity&quot;    val btnStart = btn_start    val mTvNumber = tv_number    var mNumberLiveData: MutableLiveData&lt;Int&gt;? = null // å£°æ˜å˜é‡    override fun onCreate(savedInstanceState: Bundle?) {        super.onCreate(savedInstanceState)        setContentView(R.layout.activity_main)        mNumberLiveData = MutableLiveData()        btnStart.setOnClickListener { view: View? -&gt;            thread {                var number = 0                while (number &lt; 5) {                    mNumberLiveData?.postValue(number)                    Log.d(TAG, &quot;setOnClickListener&quot; + number)                    Thread.sleep(3000)                    number++                }            }        }        mNumberLiveData?.observe(this, object : Observer&lt;Int&gt; {            override fun onChanged(t: Int?) {                mTvNumber.setText(&quot;&quot; + t)                Log.d(TAG, &quot;onChanged&quot; + t)            }        })    }}</code></pre><p>ç•Œé¢çš„TextViewä¼šæ ¹æ®æ•°æ®è¿›è¡Œåˆ·æ–°ã€‚</p><h4 id="å•ç‹¬ä½¿ç”¨ViewModel"><a href="#å•ç‹¬ä½¿ç”¨ViewModel" class="headerlink" title="å•ç‹¬ä½¿ç”¨ViewModel"></a>å•ç‹¬ä½¿ç”¨ViewModel</h4><ol><li>åˆ›å»ºViewModelçš„ç»§æ‰¿ç±»</li><li>åœ¨æ§åˆ¶å™¨ä¸­å®ä¾‹åŒ–ç»§æ‰¿ç±»</li></ol><p>åˆ›å»ºViewModelç»§æ‰¿ç±» â†“</p><pre><code>class MyViewModel() : ViewModel() {    var number = 0}</code></pre><p>ä¿®æ”¹æ§åˆ¶å™¨ â†“</p><pre><code>class MainActivity : AppCompatActivity() {    val TAG = &quot;MainActivity&quot;    override fun onCreate(savedInstanceState: Bundle?) {        super.onCreate(savedInstanceState)        setContentView(R.layout.activity_main)        // ViewModelProvider.of() è·å¾—MyViewModelæŒä¹…ç±»ç”¨æ¥ä¿å­˜UIæ•°æ®        // &quot;MyViewModel::class.java&quot; åå°„å¼•ç”¨ç±»å‹        var myViewModel = ViewModelProviders.of(this).get(MyViewModel::class.java)        tv_number.setText(myViewModel.number.toString())        btn_start.setOnClickListener {            myViewModel.number++            tv_number.setText(myViewModel.number.toString())        }    }}</code></pre><p>ç®€å•çš„ç•Œé¢æ ·å¼ â†“</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/Snipaste_2020-07-21_19-16-39.png" alt=""></p><h4 id="LiveDataå’ŒViewModelé…åˆä½¿ç”¨"><a href="#LiveDataå’ŒViewModelé…åˆä½¿ç”¨" class="headerlink" title="LiveDataå’ŒViewModelé…åˆä½¿ç”¨"></a>LiveDataå’ŒViewModelé…åˆä½¿ç”¨</h4><ol><li>éœ€è¦æœ‰ViewModelçš„ç»§æ‰¿ç±»</li><li>éœ€è¦åœ¨ViewModelçš„ç»§æ‰¿ç±»ä¸­å®ä¾‹åŒ–LiveDataç±»å‹</li><li>éœ€è¦åœ¨æ§åˆ¶å™¨ä¸­åˆå§‹åŒ–ViewModelçš„ç»§æ‰¿ç±»</li><li>éœ€è¦è°ƒç”¨LiveDataçš„observeçš„æ–¹æ³•</li></ol><pre><code>class MyViewModel : ViewModel() {    var mutableLiveData = MutableLiveData&lt;Int&gt;()    init {        mutableLiveData.value=0    }    fun getLive(): MutableLiveData&lt;Int&gt; {        return mutableLiveData    }    fun addNumber(number: Int) {        mutableLiveData?.value=number+ mutableLiveData.value!!    }}</code></pre><pre><code>class MainActivity : AppCompatActivity() {    override fun onCreate(savedInstanceState: Bundle?) {        super.onCreate(savedInstanceState)        setContentView(R.layout.activity_main)        // è·å¾—MyViewModelå®ä¾‹        var myViewModel = ViewModelProviders.of(this).get(MyViewModel::class.java)        btn_addone.setOnClickListener {            myViewModel?.addNumber(1)        }        myViewModel?.getLive()?.observe(this, object : Observer&lt;Int&gt; {            override fun onChanged(t: Int?) {                tv_number.setText(t.toString())            }        })    }}</code></pre><h4 id="ä»€ä¹ˆæ˜¯LiveData"><a href="#ä»€ä¹ˆæ˜¯LiveData" class="headerlink" title="ä»€ä¹ˆæ˜¯LiveData"></a>ä»€ä¹ˆæ˜¯LiveData</h4><p>LiveDataæ˜¯ä¸€ä¸ªå¯ä»¥è§‚å¯Ÿçš„æ•°æ®æŒæœ‰ç±»,ä½†æ˜¯ä¸åŒäºé€šå¸¸çš„è§‚å¯Ÿè€…,å®ƒå…·æœ‰å£°æ˜å‘¨æœŸçš„æ„ŸçŸ¥èƒ½åŠ›ã€‚é€šä¿—äº›è®²,å®ƒæ‰€æŒæœ‰çš„æ•°æ®å‘ç”Ÿæ”¹å˜æ—¶,å¹¶ä¸”Lifecycleå¯¹è±¡è¿˜å¤„äºæ´»è·ƒçŠ¶æ€,LiveDataå°†ç«‹å³é€šçŸ¥è§‚å¯Ÿè€…æ•°æ®å‘ç”Ÿäº†å˜åŒ–ã€‚ç›¸æ¯”äºä¸åŒçš„è§‚å¯Ÿè€…å®ƒå¤šäº†ç”Ÿå‘½å‘¨æœŸå’Œæ„ŸçŸ¥èƒ½åŠ›ã€‚</p><h4 id="ä»€ä¹ˆæ˜¯ViewModel"><a href="#ä»€ä¹ˆæ˜¯ViewModel" class="headerlink" title="ä»€ä¹ˆæ˜¯ViewModel"></a>ä»€ä¹ˆæ˜¯ViewModel</h4><p>ç®€å•è¯´ViewModelæ˜¯ä¸€ç§ç”¨æ¥å­˜å‚¨å’Œç®¡ç†UIç›¸å…³æ•°æ®çš„ç±»ã€‚ä½†æ˜¯ä¸å…¶ä»–çš„Modelä¸åŒçš„æ˜¯,ä»–æ”¯æŒåœ¨ç³»ç»Ÿæ”¹å˜æ—¶ä¿å­˜æ•°æ®ã€‚</p><p>å½“å±å¹•å‘ç”Ÿæ”¹å˜æ—¶,ä¼šå¯¼è‡´Activity/Fragmenté‡æ–°ç»˜åˆ¶,ä¼šå¯¼è‡´æˆ‘ä»¬ä¹‹å‰çš„æ•°æ®ä¸¢å¤±ã€‚æ¯”å¦‚,åœ¨EditTextä¸­è¾“å…¥äº†å†…å®¹,ä½†æ˜¯å½“å±å¹•æ‰­è½¬æ—¶,ä¼šå‘ç°editTextä¸­çš„æ–‡æœ¬è¢«æ¸…ç©ºäº†ã€‚</p><p>å½“å¯¹äºä¸€ä¸‹ç®€å•çš„æ•°æ®,æˆ‘ä»¬å¯ä»¥é€šè¿‡Activityçš„onSaveInstanceState()æ–¹æ³•ä¸­å‚¨å­˜,ç„¶åé€šè¿‡onCreate()ä¸­è¿›è¡Œæ¢å¤,ä½†æ˜¯è¿™ç§æ–¹å¼åªé€‚åˆå­˜å‚¨å°‘é‡çš„æ•°æ®ï¼Œå¹¶ä¸”æ˜¯èƒ½è¢«åºåˆ—åŒ–å’Œååºåˆ—çš„æ•°æ®ã€‚è€Œå¯¹é‚£äº›å¤§é‡çš„æ•°æ®åˆ™ä¸é€‚ç”¨ã€‚</p><p>æ­¤å¤–,å®ƒä¹Ÿä½¿Viewçš„æ•°æ®æŒæœ‰è€…å’ŒViewcontrolleré€»è¾‘æ›´åŠ åˆ†ç¦»ï¼Œä¾¿äºè§£è€¦å’Œæµ‹è¯•ã€‚</p><p>å¼•ç”¨:<a href="https://juejin.im/post/5ca9f9156fb9a05e3d0a8aea#heading-6" target="_blank" rel="noopener">https://juejin.im/post/5ca9f9156fb9a05e3d0a8aea#heading-6</a></p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
            <tag> Kotlin </tag>
            
            <tag> LiveData </tag>
            
            <tag> ViewModel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git è®²è§£</title>
      <link href="/2020/07/19/git%20%E8%AE%B2%E8%A7%A3/"/>
      <url>/2020/07/19/git%20%E8%AE%B2%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¿®æ”¹æäº¤æ–‡ä»¶å¤§å°"><a href="#ä¿®æ”¹æäº¤æ–‡ä»¶å¤§å°" class="headerlink" title="ä¿®æ”¹æäº¤æ–‡ä»¶å¤§å°"></a>ä¿®æ”¹æäº¤æ–‡ä»¶å¤§å°</h1><p>åœ¨è¦æäº¤çš„é¡¹ç›®æ ¹ç›®å½•ä¸‹ä½¿ç”¨ã€‚</p><pre><code>$ git config --local http.postBuffer 524288000</code></pre><p>è®¾ç½®ä¸º500MBã€‚</p><h1 id="æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯"><a href="#æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯" class="headerlink" title="æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯"></a>æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯</h1><pre><code>git branch</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200923155804.png" alt="æœ¬åœ°çš„ä¸¤ä¸ªåˆ†æ”¯"></p><h1 id="æŸ¥çœ‹è¿œç¨‹ä»“åº“æ‰€æœ‰åˆ†æ”¯"><a href="#æŸ¥çœ‹è¿œç¨‹ä»“åº“æ‰€æœ‰åˆ†æ”¯" class="headerlink" title="æŸ¥çœ‹è¿œç¨‹ä»“åº“æ‰€æœ‰åˆ†æ”¯"></a>æŸ¥çœ‹è¿œç¨‹ä»“åº“æ‰€æœ‰åˆ†æ”¯</h1><pre><code>git branch -r</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200923155838.png" alt="è¿œç¨‹ä»“åº“çš„åˆ†æ”¯"></p><h1 id="æŸ¥çœ‹æœ¬åœ°ä»“åº“å’Œè¿œç¨‹ä»“åº“"><a href="#æŸ¥çœ‹æœ¬åœ°ä»“åº“å’Œè¿œç¨‹ä»“åº“" class="headerlink" title="æŸ¥çœ‹æœ¬åœ°ä»“åº“å’Œè¿œç¨‹ä»“åº“"></a>æŸ¥çœ‹æœ¬åœ°ä»“åº“å’Œè¿œç¨‹ä»“åº“</h1><pre><code>git branch -a</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200923160933.png" alt="æœ¬åœ°å’Œè¿œç¨‹å…±æœ‰ä»“åº“"></p><h1 id="åˆ›å»ºæœ¬åœ°åˆ†æ”¯"><a href="#åˆ›å»ºæœ¬åœ°åˆ†æ”¯" class="headerlink" title="åˆ›å»ºæœ¬åœ°åˆ†æ”¯"></a>åˆ›å»ºæœ¬åœ°åˆ†æ”¯</h1><pre><code>git branch annotationVersion</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200923120947.png" alt="åˆ›å»ºäº†æœ¬åœ°åˆ†æ”¯"></p><h1 id="åˆ‡æ¢åˆ°åˆ›å»ºçš„åˆ†æ”¯"><a href="#åˆ‡æ¢åˆ°åˆ›å»ºçš„åˆ†æ”¯" class="headerlink" title="åˆ‡æ¢åˆ°åˆ›å»ºçš„åˆ†æ”¯"></a>åˆ‡æ¢åˆ°åˆ›å»ºçš„åˆ†æ”¯</h1><pre><code>git checkout åˆ†æ”¯</code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200923121359.png" alt="åˆ‡æ¢åˆ°åˆ›å»ºçš„ annotationVersion åˆ†æ”¯"></p><h1 id="æœ¬åœ°åˆ†æ”¯æäº¤åˆ°è¿œç¨‹åˆ†æ”¯"><a href="#æœ¬åœ°åˆ†æ”¯æäº¤åˆ°è¿œç¨‹åˆ†æ”¯" class="headerlink" title="æœ¬åœ°åˆ†æ”¯æäº¤åˆ°è¿œç¨‹åˆ†æ”¯"></a>æœ¬åœ°åˆ†æ”¯æäº¤åˆ°è¿œç¨‹åˆ†æ”¯</h1><p><strong>åˆ‡æ¢åˆ°åˆ›å»ºçš„åˆ†æ”¯</strong>ï¼ˆannotationVersionï¼‰ã€‚</p><pre><code>git push origin annotationVersion</code></pre><p>å¦‚æœ<strong>è¿œç¨‹ä»“åº“</strong>æ²¡æœ‰è¿™ä¸ªåˆ†æ”¯ï¼Œé‚£ä¹ˆä¹Ÿä¼šåˆ›å»ºä¸€ä¸ªè¯¥åˆ†æ”¯ã€‚</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200923153643.png" alt="ç”±äºè¿œç¨‹ä»“åº“æ²¡æœ‰æœ¬åœ°çš„åˆ†æ”¯åœ¨pushæ—¶è‡ªåŠ¨åˆ›å»ºäº†annotationVersionåˆ†æ”¯"></p><h1 id="æœ¬åœ°è·å¾—ä¸€ä¸ªè¿œç¨‹åˆ†æ”¯"><a href="#æœ¬åœ°è·å¾—ä¸€ä¸ªè¿œç¨‹åˆ†æ”¯" class="headerlink" title="æœ¬åœ°è·å¾—ä¸€ä¸ªè¿œç¨‹åˆ†æ”¯"></a>æœ¬åœ°è·å¾—ä¸€ä¸ªè¿œç¨‹åˆ†æ”¯</h1><p>ä½¿ç”¨å‘½ä»¤</p><pre><code>git pull &lt;è¿œç¨‹ä¸»æœºå&gt; &lt;è¿œç¨‹åˆ†æ”¯å&gt;:&lt;æœ¬åœ°åˆ†æ”¯å&gt;ä¾‹å¦‚git pull origin v1.0:v1.0</code></pre><p>pull äº†<strong>è¿œç¨‹ä»“åº“çš„v1.0åˆ†æ”¯</strong>æœ¬åœ°å‘½å<strong>ä¸ºv1.0</strong></p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200923172540.png" alt="pull å®Œæˆ"></p><h1 id="åˆå¹¶æœ¬åœ°ä¸¤ä¸ªåˆ†æ”¯"><a href="#åˆå¹¶æœ¬åœ°ä¸¤ä¸ªåˆ†æ”¯" class="headerlink" title="åˆå¹¶æœ¬åœ°ä¸¤ä¸ªåˆ†æ”¯"></a>åˆå¹¶æœ¬åœ°ä¸¤ä¸ªåˆ†æ”¯</h1><p>å¦‚æœå½“å‰åˆ†æ”¯ï¼ˆannotationVersionï¼‰åˆ†æ”¯ï¼Œæƒ³ä¸è¿œç¨‹åˆ†æ”¯ master åˆå¹¶ï¼ˆmergeï¼‰ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š</p><p>åˆ‡æ¢åˆ° master åˆ†æ”¯ï¼š</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200923161205.png" alt="masteråˆ†æ”¯"></p><p>åœ¨ master åˆ†æ”¯åˆå¹¶å¦ä¸€ä¸ªåˆ†æ”¯ï¼ˆannotationVersionï¼‰ï¼š</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200923161241.png" alt="åˆå¹¶å®Œæˆ"></p><p>éšåå¯ä»¥å°†masteråˆ†æ”¯ push æ‰ï¼ˆç”¨æ¥æäº¤ä¸¤ä¸ªåˆå¹¶äº†ä»“åº“ï¼‰ï¼š</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20200923161838.png" alt="pushå®Œæˆ"></p>]]></content>
      
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo-theme-materyä½¿ç”¨æ‰‹å†Œ</title>
      <link href="/2020/07/19/hexo-theme-%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/"/>
      <url>/2020/07/19/hexo-theme-%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/</url>
      
        <content type="html"><![CDATA[<h4 id="ä¿®æ”¹å¤´éƒ¨çš„æ¸å˜é¢œè‰²"><a href="#ä¿®æ”¹å¤´éƒ¨çš„æ¸å˜é¢œè‰²" class="headerlink" title="ä¿®æ”¹å¤´éƒ¨çš„æ¸å˜é¢œè‰²"></a>ä¿®æ”¹å¤´éƒ¨çš„æ¸å˜é¢œè‰²</h4><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/Snipaste_2020-07-19_18-44-57.png" alt=""></p><p>ä¿®æ”¹è·Ÿç›®å½•ä¸‹çš„ themes\hexo-theme-matery\source\css\matery.css æ–‡ä»¶ã€‚ä¿®æ”¹â€bg-colorâ€å³å¯ã€‚</p><h4 id="ä¿®æ”¹åº•éƒ¨çš„åŠ è½½è¿›åº¦æ¡"><a href="#ä¿®æ”¹åº•éƒ¨çš„åŠ è½½è¿›åº¦æ¡" class="headerlink" title="ä¿®æ”¹åº•éƒ¨çš„åŠ è½½è¿›åº¦æ¡"></a>ä¿®æ”¹åº•éƒ¨çš„åŠ è½½è¿›åº¦æ¡</h4><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/Snipaste_2020-07-19_18-47-15.png" alt=""></p><p>ä¿®æ”¹â€progress-barâ€å³å¯ã€‚</p><h4 id="ä¿®æ”¹-top-æŒ‰é’®é¢œè‰²"><a href="#ä¿®æ”¹-top-æŒ‰é’®é¢œè‰²" class="headerlink" title="ä¿®æ”¹ top æŒ‰é’®é¢œè‰²"></a>ä¿®æ”¹ top æŒ‰é’®é¢œè‰²</h4><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20210302145826.png" alt=""></p><p>ä¿®æ”¹â€.top-scroll .btn-floatingâ€å³å¯</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20210302145848.png" alt=""></p><h4 id="æ·»åŠ æœç´¢åŠŸèƒ½"><a href="#æ·»åŠ æœç´¢åŠŸèƒ½" class="headerlink" title="æ·»åŠ æœç´¢åŠŸèƒ½"></a>æ·»åŠ æœç´¢åŠŸèƒ½</h4><p>ä¸‹è½½æ’ä»¶,ä¿®æ”¹é…ç½®å³å¯ã€‚</p><pre><code>npm install hexo-generator-search --save</code></pre><p>åœ¨æ ¹ç›®å½•ä¸‹å®‰è£…æ’ä»¶ã€‚</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/Snipaste_2020-07-20_08-57-52.png" alt=""></p><p>ä¿®æ”¹é…ç½®ä¿¡æ¯ã€‚</p><p>æ‰“å¼€æ ¹ç›®å½•ä¸‹çš„ â€œ_config.ymlâ€æ–‡ä»¶,æ·»åŠ é…ç½®ä¿¡æ¯ã€‚</p><pre><code>search:  path: search.xml  field: post</code></pre><h4 id="ä¿®æ”¹å‹æƒ…é“¾æ¥"><a href="#ä¿®æ”¹å‹æƒ…é“¾æ¥" class="headerlink" title="ä¿®æ”¹å‹æƒ…é“¾æ¥"></a>ä¿®æ”¹å‹æƒ…é“¾æ¥</h4><p>åœ¨ â€œBlog\source\data\friends.jsonâ€ ç›®å½•ä¸‹ä¿®æ”¹é…ç½®æ–‡ä»¶</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/1595649945373.png" alt=""></p><h4 id="è‡ªåŠ¨æ·»åŠ æ–‡ç« çš„åç§°ã€æ—¶é—´ç­‰ä¿¡æ¯"><a href="#è‡ªåŠ¨æ·»åŠ æ–‡ç« çš„åç§°ã€æ—¶é—´ç­‰ä¿¡æ¯" class="headerlink" title="è‡ªåŠ¨æ·»åŠ æ–‡ç« çš„åç§°ã€æ—¶é—´ç­‰ä¿¡æ¯"></a>è‡ªåŠ¨æ·»åŠ æ–‡ç« çš„åç§°ã€æ—¶é—´ç­‰ä¿¡æ¯</h4><p>éœ€è¦åˆ›å»ºæ–‡ä»¶ â€œscaffolds\post.mdâ€</p><pre><code class="yaml">---title: {{ title }}date: {{ date }}tags: [æ ‡ç­¾]author: ç”¨æˆ·åtop: falsecover: falsetoc: truemathjax: truecategories: &quot;åˆ†ç±»&quot;---</code></pre><h4 id="å®Œæ•´å®ä¾‹"><a href="#å®Œæ•´å®ä¾‹" class="headerlink" title="å®Œæ•´å®ä¾‹"></a>å®Œæ•´å®ä¾‹</h4><p>ğŸ‘‡ä¿®æ”¹æ–‡ç« å°é¢,ä¿®æ”¹æ–‡ç« è½®æ’­å›¾ç­‰</p><pre><code class="yaml">---title: {{title}}date: {{data}}author: ä½œè€…åå­—img: /source/images/xxx.jpg &quot;æ–‡ç« ç‰¹å¾å›¾,è·¯å¾„åœ¨sourceä¸­&quot;top: true &quot;æ¨èæ–‡ç« &quot;cover: true &quot;è¡¨ç¤ºè¯¥æ–‡ç« æ˜¯å¦éœ€è¦åŠ å…¥åˆ°é¦–é¡µè½®æ’­å°é¢ä¸­&quot;coverImg: /images/1.jpg &quot;è½®æ’­å›¾ä¸­çš„å°é¢,è®¿é—®çš„æ˜¯&quot;source&quot;ä¸‹çš„&quot;images&quot;&quot;password: 8d969eef6ecad3c29a3a629280e686cf0c3f5d5a86aff3ca12020c923adc6c92toc: false &quot;æ˜¯å¦å¼€å¯ TOCï¼Œå¯ä»¥é’ˆå¯¹æŸç¯‡æ–‡ç« å•ç‹¬å…³é—­ TOC çš„åŠŸèƒ½ã€‚å‰ææ˜¯åœ¨ä¸»é¢˜çš„ config.yml ä¸­æ¿€æ´»äº† toc é€‰é¡¹&quot;mathjax: false &quot;æ˜¯å¦å¼€å¯æ•°å­¦å…¬å¼æ”¯æŒ,æœ¬æ–‡ç« æ˜¯å¦å¼€å¯ mathjaxï¼Œä¸”éœ€è¦åœ¨ä¸»é¢˜çš„ _config.yml æ–‡ä»¶ä¸­ä¹Ÿéœ€è¦å¼€å¯æ‰è¡Œ&quot;summary: è¿™æ˜¯ä½ è‡ªå®šä¹‰çš„æ–‡ç« æ‘˜è¦å†…å®¹ï¼Œå¦‚æœè¿™ä¸ªå±æ€§æœ‰å€¼ï¼Œæ–‡ç« å¡ç‰‡æ‘˜è¦å°±æ˜¾ç¤ºè¿™æ®µæ–‡å­—ï¼Œå¦åˆ™ç¨‹åºä¼šè‡ªåŠ¨æˆªå–æ–‡ç« çš„éƒ¨åˆ†å†…å®¹ä½œä¸ºæ‘˜è¦categories: Markdowntags:  - Typora  - Markdown---</code></pre><h4 id="banner-å›¾ç‰‡çš„è½®æ’­æ•°é‡"><a href="#banner-å›¾ç‰‡çš„è½®æ’­æ•°é‡" class="headerlink" title="banner å›¾ç‰‡çš„è½®æ’­æ•°é‡"></a>banner å›¾ç‰‡çš„è½®æ’­æ•°é‡</h4><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20210313183222.png" alt=""></p><p>é€‰æ‹©ä¸»é¢˜ä¸‹çš„ <strong>hexo-theme-matery\layout_partial\bg-cover-content.ejs</strong> æ–‡ä»¶</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20210313183501.png" alt=""></p><h2 id="æ–‡ç« -Front-matter-ä»‹ç»"><a href="#æ–‡ç« -Front-matter-ä»‹ç»" class="headerlink" title="æ–‡ç«  Front-matter ä»‹ç»"></a>æ–‡ç«  Front-matter ä»‹ç»</h2><h3 id="Front-matter-é€‰é¡¹è¯¦è§£"><a href="#Front-matter-é€‰é¡¹è¯¦è§£" class="headerlink" title="Front-matter é€‰é¡¹è¯¦è§£"></a>Front-matter é€‰é¡¹è¯¦è§£</h3><p><code>Front-matter</code> é€‰é¡¹ä¸­çš„æ‰€æœ‰å†…å®¹å‡ä¸º<strong>éå¿…å¡«</strong>çš„ã€‚ä½†æˆ‘ä»ç„¶å»ºè®®è‡³å°‘å¡«å†™ <code>title</code> å’Œ <code>date</code> çš„å€¼ã€‚</p><table><thead><tr><th>é…ç½®é€‰é¡¹</th><th>é»˜è®¤å€¼</th><th>æè¿°</th></tr></thead><tbody><tr><td>title</td><td><code>Markdown</code> çš„æ–‡ä»¶æ ‡é¢˜</td><td>æ–‡ç« æ ‡é¢˜ï¼Œå¼ºçƒˆå»ºè®®å¡«å†™æ­¤é€‰é¡¹</td></tr><tr><td>date</td><td>æ–‡ä»¶åˆ›å»ºæ—¶çš„æ—¥æœŸæ—¶é—´</td><td>å‘å¸ƒæ—¶é—´ï¼Œå¼ºçƒˆå»ºè®®å¡«å†™æ­¤é€‰é¡¹ï¼Œä¸”æœ€å¥½ä¿è¯å…¨å±€å”¯ä¸€</td></tr><tr><td>author</td><td>æ ¹ <code>_config.yml</code> ä¸­çš„ <code>author</code></td><td>æ–‡ç« ä½œè€…</td></tr><tr><td>img</td><td><code>featureImages</code> ä¸­çš„æŸä¸ªå€¼</td><td>æ–‡ç« ç‰¹å¾å›¾ï¼Œæ¨èä½¿ç”¨å›¾åºŠ(è…¾è®¯äº‘ã€ä¸ƒç‰›äº‘ã€åˆæ‹äº‘ç­‰)æ¥åšå›¾ç‰‡çš„è·¯å¾„.å¦‚: <code>http://xxx.com/xxx.jpg</code></td></tr><tr><td>top</td><td><code>true</code></td><td>æ¨èæ–‡ç« ï¼ˆæ–‡ç« æ˜¯å¦ç½®é¡¶ï¼‰ï¼Œå¦‚æœ <code>top</code> å€¼ä¸º <code>true</code>ï¼Œåˆ™ä¼šä½œä¸ºé¦–é¡µæ¨èæ–‡ç« </td></tr><tr><td>cover</td><td><code>false</code></td><td><code>v1.0.2</code>ç‰ˆæœ¬æ–°å¢ï¼Œè¡¨ç¤ºè¯¥æ–‡ç« æ˜¯å¦éœ€è¦åŠ å…¥åˆ°é¦–é¡µè½®æ’­å°é¢ä¸­</td></tr><tr><td>coverImg</td><td>æ— </td><td><code>v1.0.2</code>ç‰ˆæœ¬æ–°å¢ï¼Œè¡¨ç¤ºè¯¥æ–‡ç« åœ¨é¦–é¡µè½®æ’­å°é¢éœ€è¦æ˜¾ç¤ºçš„å›¾ç‰‡è·¯å¾„ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™é»˜è®¤ä½¿ç”¨æ–‡ç« çš„ç‰¹è‰²å›¾ç‰‡</td></tr><tr><td>password</td><td>æ— </td><td>æ–‡ç« é˜…è¯»å¯†ç ï¼Œå¦‚æœè¦å¯¹æ–‡ç« è®¾ç½®é˜…è¯»éªŒè¯å¯†ç çš„è¯ï¼Œå°±å¯ä»¥è®¾ç½® <code>password</code> çš„å€¼ï¼Œè¯¥å€¼å¿…é¡»æ˜¯ç”¨ <code>SHA256</code> åŠ å¯†åçš„å¯†ç ï¼Œé˜²æ­¢è¢«ä»–äººè¯†ç ´ã€‚å‰ææ˜¯åœ¨ä¸»é¢˜çš„ <code>config.yml</code> ä¸­æ¿€æ´»äº† <code>verifyPassword</code> é€‰é¡¹</td></tr><tr><td>toc</td><td><code>true</code></td><td>æ˜¯å¦å¼€å¯ TOCï¼Œå¯ä»¥é’ˆå¯¹æŸç¯‡æ–‡ç« å•ç‹¬å…³é—­ TOC çš„åŠŸèƒ½ã€‚å‰ææ˜¯åœ¨ä¸»é¢˜çš„ <code>config.yml</code> ä¸­æ¿€æ´»äº† <code>toc</code> é€‰é¡¹</td></tr><tr><td>mathjax</td><td><code>false</code></td><td>æ˜¯å¦å¼€å¯æ•°å­¦å…¬å¼æ”¯æŒ ï¼Œæœ¬æ–‡ç« æ˜¯å¦å¼€å¯ <code>mathjax</code>ï¼Œä¸”éœ€è¦åœ¨ä¸»é¢˜çš„ <code>_config.yml</code> æ–‡ä»¶ä¸­ä¹Ÿéœ€è¦å¼€å¯æ‰è¡Œ</td></tr><tr><td>summary</td><td>æ— </td><td>æ–‡ç« æ‘˜è¦ï¼Œè‡ªå®šä¹‰çš„æ–‡ç« æ‘˜è¦å†…å®¹ï¼Œå¦‚æœè¿™ä¸ªå±æ€§æœ‰å€¼ï¼Œæ–‡ç« å¡ç‰‡æ‘˜è¦å°±æ˜¾ç¤ºè¿™æ®µæ–‡å­—ï¼Œå¦åˆ™ç¨‹åºä¼šè‡ªåŠ¨æˆªå–æ–‡ç« çš„éƒ¨åˆ†å†…å®¹ä½œä¸ºæ‘˜è¦</td></tr><tr><td>categories</td><td>æ— </td><td>æ–‡ç« åˆ†ç±»ï¼Œæœ¬ä¸»é¢˜çš„åˆ†ç±»è¡¨ç¤ºå®è§‚ä¸Šå¤§çš„åˆ†ç±»ï¼Œåªå»ºè®®ä¸€ç¯‡æ–‡ç« ä¸€ä¸ªåˆ†ç±»</td></tr><tr><td>tags</td><td>æ— </td><td>æ–‡ç« æ ‡ç­¾ï¼Œä¸€ç¯‡æ–‡ç« å¯ä»¥å¤šä¸ªæ ‡ç­¾</td></tr><tr><td>keywords</td><td>æ–‡ç« æ ‡é¢˜</td><td>æ–‡ç« å…³é”®å­—ï¼ŒSEO æ—¶éœ€è¦</td></tr><tr><td>reprintPolicy</td><td>cc_by</td><td>æ–‡ç« è½¬è½½è§„åˆ™ï¼Œ å¯ä»¥æ˜¯ cc_by, cc_by_nd, cc_by_sa, cc_by_nc, cc_by_nc_nd, cc_by_nc_sa, cc0, noreprint æˆ– pay ä¸­çš„ä¸€ä¸ª</td></tr></tbody></table><h2 id="ä¿®æ”¹å„ç§æ ‡é¢˜"><a href="#ä¿®æ”¹å„ç§æ ‡é¢˜" class="headerlink" title="ä¿®æ”¹å„ç§æ ‡é¢˜"></a>ä¿®æ”¹å„ç§æ ‡é¢˜</h2><h3 id="ä¿®æ”¹å‰¯æ ‡é¢˜å’ŒçŸ­å¥"><a href="#ä¿®æ”¹å‰¯æ ‡é¢˜å’ŒçŸ­å¥" class="headerlink" title="ä¿®æ”¹å‰¯æ ‡é¢˜å’ŒçŸ­å¥"></a>ä¿®æ”¹å‰¯æ ‡é¢˜å’ŒçŸ­å¥</h3><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201031160424.png" alt="å‰¯æ ‡é¢˜"></p><p>ä¿®æ”¹æ ¹ç›®å½•ä¸‹çš„ â€œ<strong>_config.xml</strong>â€</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201031160741.png" alt="ä¿®æ”¹å‰¯æ ‡é¢˜"></p><p>æ ¹ç›®å½•ä¸‹â€œ<strong>themes\hexo-theme-matery\_config.xml</strong>â€</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201031161025.png" alt=""></p><p>subtitleæ ‡ç­¾è´Ÿè´£å‰¯æ ‡é¢˜çš„çŸ­å¥ã€‚</p><h3 id="ä¿®æ”¹-â€œæ¢¦æƒ³â€çŸ­å¥"><a href="#ä¿®æ”¹-â€œæ¢¦æƒ³â€çŸ­å¥" class="headerlink" title="ä¿®æ”¹ â€œæ¢¦æƒ³â€çŸ­å¥"></a>ä¿®æ”¹ â€œæ¢¦æƒ³â€çŸ­å¥</h3><p>æ ¹ç›®å½•ä¸‹â€œ<strong>themes\hexo-theme-matery\_config.xml</strong>â€</p><p>dreamæ ‡ç­¾è´Ÿè´£æ¢¦æƒ³çŸ­å¥ã€‚</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201031161233.png" alt=""></p><h2 id="å¤‡ä»½å’Œè¿˜åŸBlog"><a href="#å¤‡ä»½å’Œè¿˜åŸBlog" class="headerlink" title="å¤‡ä»½å’Œè¿˜åŸBlog"></a>å¤‡ä»½å’Œè¿˜åŸBlog</h2><h3 id="å¤‡ä»½githubåˆ›å»ºç§æœ‰ä»“åº“"><a href="#å¤‡ä»½githubåˆ›å»ºç§æœ‰ä»“åº“" class="headerlink" title="å¤‡ä»½githubåˆ›å»ºç§æœ‰ä»“åº“"></a>å¤‡ä»½githubåˆ›å»ºç§æœ‰ä»“åº“</h3><p>ç§æœ‰ä»“åº“è®¾ç½®ä¸ºåå­—Blog(ä¸æ–‡ä»¶å¤¹åå­—ç›¸åŒå³å¯),å°†æ–‡ä»¶ä¸‹è½½åˆ°Blogçš„æ ¹ç›®å½•ä¸‹,å°†â€.gitâ€æ–‡ä»¶å’Œâ€.gitignoreâ€æ–‡ä»¶æ‹–æ‹½åˆ°Blogç›®å½•ä¸‹ã€‚</p><p>â€˜â€™.gitignoreâ€™æ–‡ä»¶å†…æ·»åŠ è¦å¿½è§†çš„æ–‡ä»¶å¤¹</p><pre><code>.DS_StoreThumbs.dbdb.json*.lognode_modules/public/.deploy*/</code></pre><p>æ­£å¸¸æäº¤å³å¯</p><p>ps:å¯èƒ½ä¼šå‡ºç°æ–‡ä»¶å¤¹è¿‡å¤§çš„åŸå›  </p><p><a href="https://thecara.github.io/2020/07/19/git%E8%AE%BE%E7%BD%AE%E6%8F%90%E4%BA%A4%E6%96%87%E4%BB%B6%E5%A4%A7%E5%B0%8F/">åŠæ³•</a></p><h3 id="è¿˜åŸBlog"><a href="#è¿˜åŸBlog" class="headerlink" title="è¿˜åŸBlog"></a>è¿˜åŸBlog</h3><p>å»ºè®®:ä½¿ç”¨æ–°çš„ç”µè„‘æˆ–è€…ä½¿ç”¨è™šæ‹Ÿæœºæ¥æµ‹è¯•</p><p>å®‰è£…git,é…ç½®git </p><p>ä½¿ç”¨â€git Bashâ€ è¾“å…¥ğŸ‘‡.</p><pre><code>$ git config --global user.name &quot;your name&quot;$ git config --global user.email &quot;your_email@youremail.com&quot;ssh-keygen -t rsa -C &quot;è‡ªå·±çš„é‚®ç®±&quot;</code></pre><p><a href="https://github.com/settings/ssh/new" target="_blank" rel="noopener">è®¾ç½®SHH</a></p><p>å®Œæˆåä¼šå‡ºç°shhæ–‡ä»¶çš„ç›®å½•,æ‰“å¼€â€.pubâ€ç±»å‹æ–‡ä»¶å°†å†…å®¹å¤åˆ¶åˆ°è¿™é‡Œã€‚</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/1595819104102.png" alt=""></p><p>å®Œæˆåå…‹éš†æˆ‘ä»¬çš„â€Blogâ€</p><h3 id="å®‰è£…nove-js"><a href="#å®‰è£…nove-js" class="headerlink" title="å®‰è£…nove.js"></a>å®‰è£…nove.js</h3><p>åœ¨Blogç›®å½•ä¸‹ä½¿ç”¨â€git Bashâ€</p><p>ç›´æ¥å®‰è£… hexo,å¦‚æœç½‘ç»œè¿‡æ…¢å»ºè®®é…ç½®ä»“åº“.</p><pre><code>$ npm install -g cnpm --registry=https://registry.npm.taobao.org</code></pre><p><a href="https://developer.aliyun.com/mirror/NPM" target="_blank" rel="noopener">æ›´å¤š</a></p><pre><code>npm i hexo-cli -g æˆ–è€… npm install hexo --save</code></pre><p>æ­å»º</p><pre><code class="g">hexo ghexo shexo d</code></pre><p>ps:</p><p>å¦‚æœå‡ºç° â€œERROR Plugin load failed: hexo-prism-pluginâ€é”™è¯¯ ç›´æ¥åˆ é™¤â€node_modules\hexo-prism-pluginâ€ä¸‹çš„æ–‡ä»¶å¤¹ã€‚</p><p>å®‰è£… nove.js è‡ªåŠ¨å®‰è£…choco<a href="https://thecara.github.io/2020/07/26/choco%E7%9A%84%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%BA%94%E7%94%A8%E7%9A%84%E5%AE%89%E8%A3%85/">å¯èƒ½ä¼šæŠ¥é”™ä½¿ç”¨</a></p><p>å¼•ç”¨:<a href="https://github.com/blinkfox/hexo-theme-matery/blob/develop/README_CN.md" target="_blank" rel="noopener">https://github.com/blinkfox/hexo-theme-matery/blob/develop/README_CN.md</a></p><h2 id="Hexo-è®©æ–‡ç« æŒ‰ç…§æœ€æ–°çš„æäº¤æ—¶é—´è¿›è¡Œæ’åº"><a href="#Hexo-è®©æ–‡ç« æŒ‰ç…§æœ€æ–°çš„æäº¤æ—¶é—´è¿›è¡Œæ’åº" class="headerlink" title="Hexo è®©æ–‡ç« æŒ‰ç…§æœ€æ–°çš„æäº¤æ—¶é—´è¿›è¡Œæ’åº"></a>Hexo è®©æ–‡ç« æŒ‰ç…§æœ€æ–°çš„æäº¤æ—¶é—´è¿›è¡Œæ’åº</h2><p>è®©æˆ‘ä»¬æœ€æ–°æäº¤æˆ–è€…æ›´æ–°çš„æ–‡ç« åœ¨ç•Œé¢çš„é¦–ä¸ªä½ç½®ã€‚</p><p>åœ¨ä¸»é…ç½®æ–‡ä»¶ <strong>_config.ym</strong>l, æŸ¥æ‰¾ <strong>index_generator</strong> æ ‡ç­¾ <strong>order_by</strong> å±æ€§ä¿®æ”¹ä¸º <strong>-updated</strong> å³å¯ã€‚</p><pre><code class="yaml">index_generator:  path: &#39;&#39;  per_page: 18  order_by: -updated </code></pre><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/20201212171501.png" alt=""></p><p>ä¹‹å </p><pre><code>hexo g</code></pre><p>å®Œæˆã€‚</p><h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><p>åœ¨ä½¿ç”¨ ç›®å½•å¯¼èˆªæ—¶ä¸å»ºè®® â€œæ ‡é¢˜â€ é…åˆ â€œæ— åºåˆ—è¡¨â€ ä½¿ç”¨ï¼ˆhexo-version:4.2ï¼‰</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/2020-8-19-0.gif" alt=""></p><p>ä¼šå‡ºç°æ— æ³•è·³è½¬åˆ°æŒ‡å®šç›®å½•ã€‚</p><p><strong>åœ¨ä½¿ç”¨å°–æ‹¬å·ï¼ˆæˆ–ç§°è§’æ‹¬å·ï¼‰æ—¶</strong></p><p>ä¸è¦ä½¿ç”¨ä¸¤å¯¹çš„ç´§é çš„å°–æ‹¬å·ï¼Œä¼šå‡ºç°è¯†åˆ«ä¸ºå‡é“¾æ¥çš„bug</p><p>ä¾‹å¦‚ï¼š</p><p><A>test</p><p>å®é™…æƒ³è¦çš„ç»“æœæ˜¯ &lt; A &gt; test &lt; A &gt;</p><p><img src="https://raw.githubusercontent.com/TheCara/RepoPicture/master/image/2021-10-25-0.gif" alt="ä¸Šè¿°æè¿°ç»“æœ"></p>]]></content>
      
      
      <categories>
          
          <category> hexo-theme-matery </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
            <tag> hexo-theme-matery </tag>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
